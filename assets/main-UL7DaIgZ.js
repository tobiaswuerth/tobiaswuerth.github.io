const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/GalleryView-Crj3Q6Aa.js","assets/index-BwX1OPe4.js","assets/index-BfCXcN5B.js","assets/GalleryView-CFS6HHtB.css","assets/Gallery2DView-CeXut8gY.js","assets/Gallery2DView-D_GK7ndL.css","assets/ReflectProsaView-tRRYcKX9.js","assets/useClipboard-CTOOlUu-.js","assets/ReflectProsaView-C9Mg02dO.css","assets/ReflectEmotionsView-COkkBLtE.js","assets/ReflectEmotionsView-CmZn49k_.css","assets/ReflectAffectsView-lZcomUxE.js","assets/ReflectAffectsView-rEZPs5Yh.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ag(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const $r={},Va=[],_s=()=>{},Bk=()=>!1,uf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Og=e=>e.startsWith("onUpdate:"),vn=Object.assign,Lg=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},T3=Object.prototype.hasOwnProperty,ur=(e,t)=>T3.call(e,t),$t=Array.isArray,Wa=e=>ff(e)==="[object Map]",Rk=e=>ff(e)==="[object Set]",Ft=e=>typeof e=="function",Ur=e=>typeof e=="string",js=e=>typeof e=="symbol",Fr=e=>e!==null&&typeof e=="object",zk=e=>(Fr(e)||Ft(e))&&Ft(e.then)&&Ft(e.catch),Nk=Object.prototype.toString,ff=e=>Nk.call(e),C3=e=>ff(e).slice(8,-1),jk=e=>ff(e)==="[object Object]",Fg=e=>Ur(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,oc=Ag(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pf=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},k3=/-\w/g,Eo=pf(e=>e.replace(k3,t=>t.slice(1).toUpperCase())),E3=/\B([A-Z])/g,ia=pf(e=>e.replace(E3,"-$1").toLowerCase()),mf=pf(e=>e.charAt(0).toUpperCase()+e.slice(1)),Yp=pf(e=>e?`on${mf(e)}`:""),fi=(e,t)=>!Object.is(e,t),Jp=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Vk=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},P3=e=>{const t=parseFloat(e);return isNaN(t)?e:t},$3=e=>{const t=Ur(e)?Number(e):NaN;return isNaN(t)?e:t};let Fw;const hf=()=>Fw||(Fw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gf(e){if($t(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],o=Ur(n)?O3(n):gf(n);if(o)for(const s in o)t[s]=o[s]}return t}else if(Ur(e)||Fr(e))return e}const S3=/;(?![^(]*\))/g,I3=/:([^]+)/,A3=/\/\*[^]*?\*\//g;function O3(e){const t={};return e.replace(A3,"").split(S3).forEach(r=>{if(r){const n=r.split(I3);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function kn(e){let t="";if(Ur(e))t=e;else if($t(e))for(let r=0;r<e.length;r++){const n=kn(e[r]);n&&(t+=n+" ")}else if(Fr(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function L3(e){if(!e)return null;let{class:t,style:r}=e;return t&&!Ur(t)&&(e.class=kn(t)),r&&(e.style=gf(r)),e}const F3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",D3=Ag(F3);function Wk(e){return!!e||e===""}const Uk=e=>!!(e&&e.__v_isRef===!0),fr=e=>Ur(e)?e:e==null?"":$t(e)||Fr(e)&&(e.toString===Nk||!Ft(e.toString))?Uk(e)?fr(e.value):JSON.stringify(e,Gk,2):String(e),Gk=(e,t)=>Uk(t)?Gk(e,t.value):Wa(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,o],s)=>(r[Zp(n,s)+" =>"]=o,r),{})}:Rk(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Zp(r))}:js(t)?Zp(t):Fr(t)&&!$t(t)&&!jk(t)?String(t):t,Zp=(e,t="")=>{var r;return js(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jn;class Hk{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jn,!t&&Jn&&(this.index=(Jn.scopes||(Jn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Jn;try{return Jn=this,t()}finally{Jn=r}}}on(){++this._on===1&&(this.prevScope=Jn,Jn=this)}off(){this._on>0&&--this._on===0&&(Jn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Kk(e){return new Hk(e)}function B3(){return Jn}let Or;const em=new WeakSet;class qk{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jn&&Jn.active&&Jn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,em.has(this)&&(em.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qk(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Dw(this),Yk(this);const t=Or,r=Ko;Or=this,Ko=!0;try{return this.fn()}finally{Jk(this),Or=t,Ko=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Rg(t);this.deps=this.depsTail=void 0,Dw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?em.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xh(this)&&this.run()}get dirty(){return xh(this)}}let Xk=0,sc,ic;function Qk(e,t=!1){if(e.flags|=8,t){e.next=ic,ic=e;return}e.next=sc,sc=e}function Dg(){Xk++}function Bg(){if(--Xk>0)return;if(ic){let t=ic;for(ic=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;sc;){let t=sc;for(sc=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function Yk(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Jk(e){let t,r=e.depsTail,n=r;for(;n;){const o=n.prevDep;n.version===-1?(n===r&&(r=o),Rg(n),R3(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=o}e.deps=t,e.depsTail=r}function xh(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Zk(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Zk(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===_c)||(e.globalVersion=_c,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!xh(e))))return;e.flags|=2;const t=e.dep,r=Or,n=Ko;Or=e,Ko=!0;try{Yk(e);const o=e.fn(e._value);(t.version===0||fi(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Or=r,Ko=n,Jk(e),e.flags&=-3}}function Rg(e,t=!1){const{dep:r,prevSub:n,nextSub:o}=e;if(n&&(n.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Rg(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function R3(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let Ko=!0;const eE=[];function zs(){eE.push(Ko),Ko=!1}function Ns(){const e=eE.pop();Ko=e===void 0?!0:e}function Dw(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Or;Or=void 0;try{t()}finally{Or=r}}}let _c=0;class z3{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zg{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Or||!Ko||Or===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Or)r=this.activeLink=new z3(Or,this),Or.deps?(r.prevDep=Or.depsTail,Or.depsTail.nextDep=r,Or.depsTail=r):Or.deps=Or.depsTail=r,tE(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Or.depsTail,r.nextDep=void 0,Or.depsTail.nextDep=r,Or.depsTail=r,Or.deps===r&&(Or.deps=n)}return r}trigger(t){this.version++,_c++,this.notify(t)}notify(t){Dg();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Bg()}}}function tE(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)tE(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const zu=new WeakMap,Ji=Symbol(""),Th=Symbol(""),bc=Symbol("");function Dn(e,t,r){if(Ko&&Or){let n=zu.get(e);n||zu.set(e,n=new Map);let o=n.get(r);o||(n.set(r,o=new zg),o.map=n,o.key=r),o.track()}}function Os(e,t,r,n,o,s){const i=zu.get(e);if(!i){_c++;return}const a=l=>{l&&l.trigger()};if(Dg(),t==="clear")i.forEach(a);else{const l=$t(e),c=l&&Fg(r);if(l&&r==="length"){const u=Number(n);i.forEach((d,f)=>{(f==="length"||f===bc||!js(f)&&f>=u)&&a(d)})}else switch((r!==void 0||i.has(void 0))&&a(i.get(r)),c&&a(i.get(bc)),t){case"add":l?c&&a(i.get("length")):(a(i.get(Ji)),Wa(e)&&a(i.get(Th)));break;case"delete":l||(a(i.get(Ji)),Wa(e)&&a(i.get(Th)));break;case"set":Wa(e)&&a(i.get(Ji));break}}Bg()}function N3(e,t){const r=zu.get(e);return r&&r.get(t)}function Sa(e){const t=Zt(e);return t===e?t:(Dn(t,"iterate",bc),xo(e)?t:t.map(Cn))}function _f(e){return Dn(e=Zt(e),"iterate",bc),e}const j3={__proto__:null,[Symbol.iterator](){return tm(this,Symbol.iterator,Cn)},concat(...e){return Sa(this).concat(...e.map(t=>$t(t)?Sa(t):t))},entries(){return tm(this,"entries",e=>(e[1]=Cn(e[1]),e))},every(e,t){return ks(this,"every",e,t,void 0,arguments)},filter(e,t){return ks(this,"filter",e,t,r=>r.map(Cn),arguments)},find(e,t){return ks(this,"find",e,t,Cn,arguments)},findIndex(e,t){return ks(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ks(this,"findLast",e,t,Cn,arguments)},findLastIndex(e,t){return ks(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ks(this,"forEach",e,t,void 0,arguments)},includes(...e){return rm(this,"includes",e)},indexOf(...e){return rm(this,"indexOf",e)},join(e){return Sa(this).join(e)},lastIndexOf(...e){return rm(this,"lastIndexOf",e)},map(e,t){return ks(this,"map",e,t,void 0,arguments)},pop(){return Sl(this,"pop")},push(...e){return Sl(this,"push",e)},reduce(e,...t){return Bw(this,"reduce",e,t)},reduceRight(e,...t){return Bw(this,"reduceRight",e,t)},shift(){return Sl(this,"shift")},some(e,t){return ks(this,"some",e,t,void 0,arguments)},splice(...e){return Sl(this,"splice",e)},toReversed(){return Sa(this).toReversed()},toSorted(e){return Sa(this).toSorted(e)},toSpliced(...e){return Sa(this).toSpliced(...e)},unshift(...e){return Sl(this,"unshift",e)},values(){return tm(this,"values",Cn)}};function tm(e,t,r){const n=_f(e),o=n[t]();return n!==e&&!xo(e)&&(o._next=o.next,o.next=()=>{const s=o._next();return s.value&&(s.value=r(s.value)),s}),o}const V3=Array.prototype;function ks(e,t,r,n,o,s){const i=_f(e),a=i!==e&&!xo(e),l=i[t];if(l!==V3[t]){const d=l.apply(e,s);return a?Cn(d):d}let c=r;i!==e&&(a?c=function(d,f){return r.call(this,Cn(d),f,e)}:r.length>2&&(c=function(d,f){return r.call(this,d,f,e)}));const u=l.call(i,c,n);return a&&o?o(u):u}function Bw(e,t,r,n){const o=_f(e);let s=r;return o!==e&&(xo(e)?r.length>3&&(s=function(i,a,l){return r.call(this,i,a,l,e)}):s=function(i,a,l){return r.call(this,i,Cn(a),l,e)}),o[t](s,...n)}function rm(e,t,r){const n=Zt(e);Dn(n,"iterate",bc);const o=n[t](...r);return(o===-1||o===!1)&&Vg(r[0])?(r[0]=Zt(r[0]),n[t](...r)):o}function Sl(e,t,r=[]){zs(),Dg();const n=Zt(e)[t].apply(e,r);return Bg(),Ns(),n}const W3=Ag("__proto__,__v_isRef,__isVue"),rE=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(js));function U3(e){js(e)||(e=String(e));const t=Zt(this);return Dn(t,"has",e),t.hasOwnProperty(e)}class nE{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const o=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!o;if(r==="__v_isReadonly")return o;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(o?s?eO:aE:s?iE:sE).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const i=$t(t);if(!o){let l;if(i&&(l=j3[r]))return l;if(r==="hasOwnProperty")return U3}const a=Reflect.get(t,r,gn(t)?t:n);return(js(r)?rE.has(r):W3(r))||(o||Dn(t,"get",r),s)?a:gn(a)?i&&Fg(r)?a:a.value:Fr(a)?o?ao(a):tl(a):a}}class oE extends nE{constructor(t=!1){super(!1,t)}set(t,r,n,o){let s=t[r];if(!this._isShallow){const l=pi(s);if(!xo(n)&&!pi(n)&&(s=Zt(s),n=Zt(n)),!$t(t)&&gn(s)&&!gn(n))return l||(s.value=n),!0}const i=$t(t)&&Fg(r)?Number(r)<t.length:ur(t,r),a=Reflect.set(t,r,n,gn(t)?t:o);return t===Zt(o)&&(i?fi(n,s)&&Os(t,"set",r,n):Os(t,"add",r,n)),a}deleteProperty(t,r){const n=ur(t,r);t[r];const o=Reflect.deleteProperty(t,r);return o&&n&&Os(t,"delete",r,void 0),o}has(t,r){const n=Reflect.has(t,r);return(!js(r)||!rE.has(r))&&Dn(t,"has",r),n}ownKeys(t){return Dn(t,"iterate",$t(t)?"length":Ji),Reflect.ownKeys(t)}}class G3 extends nE{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const H3=new oE,K3=new G3,q3=new oE(!0);const Ch=e=>e,nu=e=>Reflect.getPrototypeOf(e);function X3(e,t,r){return function(...n){const o=this.__v_raw,s=Zt(o),i=Wa(s),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,c=o[e](...n),u=r?Ch:t?Nu:Cn;return!t&&Dn(s,"iterate",l?Th:Ji),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function ou(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Q3(e,t){const r={get(o){const s=this.__v_raw,i=Zt(s),a=Zt(o);e||(fi(o,a)&&Dn(i,"get",o),Dn(i,"get",a));const{has:l}=nu(i),c=t?Ch:e?Nu:Cn;if(l.call(i,o))return c(s.get(o));if(l.call(i,a))return c(s.get(a));s!==i&&s.get(o)},get size(){const o=this.__v_raw;return!e&&Dn(Zt(o),"iterate",Ji),o.size},has(o){const s=this.__v_raw,i=Zt(s),a=Zt(o);return e||(fi(o,a)&&Dn(i,"has",o),Dn(i,"has",a)),o===a?s.has(o):s.has(o)||s.has(a)},forEach(o,s){const i=this,a=i.__v_raw,l=Zt(a),c=t?Ch:e?Nu:Cn;return!e&&Dn(l,"iterate",Ji),a.forEach((u,d)=>o.call(s,c(u),c(d),i))}};return vn(r,e?{add:ou("add"),set:ou("set"),delete:ou("delete"),clear:ou("clear")}:{add(o){!t&&!xo(o)&&!pi(o)&&(o=Zt(o));const s=Zt(this);return nu(s).has.call(s,o)||(s.add(o),Os(s,"add",o,o)),this},set(o,s){!t&&!xo(s)&&!pi(s)&&(s=Zt(s));const i=Zt(this),{has:a,get:l}=nu(i);let c=a.call(i,o);c||(o=Zt(o),c=a.call(i,o));const u=l.call(i,o);return i.set(o,s),c?fi(s,u)&&Os(i,"set",o,s):Os(i,"add",o,s),this},delete(o){const s=Zt(this),{has:i,get:a}=nu(s);let l=i.call(s,o);l||(o=Zt(o),l=i.call(s,o)),a&&a.call(s,o);const c=s.delete(o);return l&&Os(s,"delete",o,void 0),c},clear(){const o=Zt(this),s=o.size!==0,i=o.clear();return s&&Os(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=X3(o,e,t)}),r}function Ng(e,t){const r=Q3(e,t);return(n,o,s)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?n:Reflect.get(ur(r,o)&&o in n?r:n,o,s)}const Y3={get:Ng(!1,!1)},J3={get:Ng(!1,!0)},Z3={get:Ng(!0,!1)};const sE=new WeakMap,iE=new WeakMap,aE=new WeakMap,eO=new WeakMap;function tO(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rO(e){return e.__v_skip||!Object.isExtensible(e)?0:tO(C3(e))}function tl(e){return pi(e)?e:jg(e,!1,H3,Y3,sE)}function lE(e){return jg(e,!1,q3,J3,iE)}function ao(e){return jg(e,!0,K3,Z3,aE)}function jg(e,t,r,n,o){if(!Fr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=rO(e);if(s===0)return e;const i=o.get(e);if(i)return i;const a=new Proxy(e,s===2?n:r);return o.set(e,a),a}function Ua(e){return pi(e)?Ua(e.__v_raw):!!(e&&e.__v_isReactive)}function pi(e){return!!(e&&e.__v_isReadonly)}function xo(e){return!!(e&&e.__v_isShallow)}function Vg(e){return e?!!e.__v_raw:!1}function Zt(e){const t=e&&e.__v_raw;return t?Zt(t):e}function cE(e){return!ur(e,"__v_skip")&&Object.isExtensible(e)&&Vk(e,"__v_skip",!0),e}const Cn=e=>Fr(e)?tl(e):e,Nu=e=>Fr(e)?ao(e):e;function gn(e){return e?e.__v_isRef===!0:!1}function eo(e){return uE(e,!1)}function dE(e){return uE(e,!0)}function uE(e,t){return gn(e)?e:new nO(e,t)}class nO{constructor(t,r){this.dep=new zg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Zt(t),this._value=r?t:Cn(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||xo(t)||pi(t);t=n?t:Zt(t),fi(t,r)&&(this._rawValue=t,this._value=n?t:Cn(t),this.dep.trigger())}}function yr(e){return gn(e)?e.value:e}const oO={get:(e,t,r)=>t==="__v_raw"?e:yr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const o=e[t];return gn(o)&&!gn(r)?(o.value=r,!0):Reflect.set(e,t,r,n)}};function fE(e){return Ua(e)?e:new Proxy(e,oO)}class sO{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return N3(Zt(this._object),this._key)}}class iO{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ei(e,t,r){return gn(e)?e:Ft(e)?new iO(e):Fr(e)&&arguments.length>1?aO(e,t,r):eo(e)}function aO(e,t,r){const n=e[t];return gn(n)?n:new sO(e,t,r)}class lO{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new zg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_c-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Or!==this)return Qk(this,!0),!0}get value(){const t=this.dep.track();return Zk(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function cO(e,t,r=!1){let n,o;return Ft(e)?n=e:(n=e.get,o=e.set),new lO(n,o,r)}const su={},ju=new WeakMap;let Gi;function dO(e,t=!1,r=Gi){if(r){let n=ju.get(r);n||ju.set(r,n=[]),n.push(e)}}function uO(e,t,r=$r){const{immediate:n,deep:o,once:s,scheduler:i,augmentJob:a,call:l}=r,c=g=>o?g:xo(g)||o===!1||o===0?Ls(g,1):Ls(g);let u,d,f,p,m=!1,b=!1;if(gn(e)?(d=()=>e.value,m=xo(e)):Ua(e)?(d=()=>c(e),m=!0):$t(e)?(b=!0,m=e.some(g=>Ua(g)||xo(g)),d=()=>e.map(g=>{if(gn(g))return g.value;if(Ua(g))return c(g);if(Ft(g))return l?l(g,2):g()})):Ft(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){zs();try{f()}finally{Ns()}}const g=Gi;Gi=u;try{return l?l(e,3,[p]):e(p)}finally{Gi=g}}:d=_s,t&&o){const g=d,M=o===!0?1/0:o;d=()=>Ls(g(),M)}const E=B3(),h=()=>{u.stop(),E&&E.active&&Lg(E.effects,u)};if(s&&t){const g=t;t=(...M)=>{g(...M),h()}}let _=b?new Array(e.length).fill(su):su;const T=g=>{if(!(!(u.flags&1)||!u.dirty&&!g))if(t){const M=u.run();if(o||m||(b?M.some((x,w)=>fi(x,_[w])):fi(M,_))){f&&f();const x=Gi;Gi=u;try{const w=[M,_===su?void 0:b&&_[0]===su?[]:_,p];_=M,l?l(t,3,w):t(...w)}finally{Gi=x}}}else u.run()};return a&&a(T),u=new qk(d),u.scheduler=i?()=>i(T,!1):T,p=g=>dO(g,!1,u),f=u.onStop=()=>{const g=ju.get(u);if(g){if(l)l(g,4);else for(const M of g)M();ju.delete(u)}},t?n?T(!0):_=u.run():i?i(T.bind(null,!0),!0):u.run(),h.pause=u.pause.bind(u),h.resume=u.resume.bind(u),h.stop=h,h}function Ls(e,t=1/0,r){if(t<=0||!Fr(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,gn(e))Ls(e.value,t,r);else if($t(e))for(let n=0;n<e.length;n++)Ls(e[n],t,r);else if(Rk(e)||Wa(e))e.forEach(n=>{Ls(n,t,r)});else if(jk(e)){for(const n in e)Ls(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ls(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nd(e,t,r,n){try{return n?e(...n):e()}catch(o){bf(o,t,r)}}function Xo(e,t,r,n){if(Ft(e)){const o=nd(e,t,r,n);return o&&zk(o)&&o.catch(s=>{bf(s,t,r)}),o}if($t(e)){const o=[];for(let s=0;s<e.length;s++)o.push(Xo(e[s],t,r,n));return o}}function bf(e,t,r,n=!0){const o=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||$r;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,l,c)===!1)return}a=a.parent}if(s){zs(),nd(s,null,10,[e,l,c]),Ns();return}}fO(e,r,o,n,i)}function fO(e,t,r,n=!0,o=!1){if(o)throw e;console.error(e)}const Gn=[];let ps=-1;const Ga=[];let ai=null,Oa=0;const pE=Promise.resolve();let Vu=null;function od(e){const t=Vu||pE;return e?t.then(this?e.bind(this):e):t}function pO(e){let t=ps+1,r=Gn.length;for(;t<r;){const n=t+r>>>1,o=Gn[n],s=vc(o);s<e||s===e&&o.flags&2?t=n+1:r=n}return t}function Wg(e){if(!(e.flags&1)){const t=vc(e),r=Gn[Gn.length-1];!r||!(e.flags&2)&&t>=vc(r)?Gn.push(e):Gn.splice(pO(t),0,e),e.flags|=1,mE()}}function mE(){Vu||(Vu=pE.then(gE))}function mO(e){$t(e)?Ga.push(...e):ai&&e.id===-1?ai.splice(Oa+1,0,e):e.flags&1||(Ga.push(e),e.flags|=1),mE()}function Rw(e,t,r=ps+1){for(;r<Gn.length;r++){const n=Gn[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Gn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function hE(e){if(Ga.length){const t=[...new Set(Ga)].sort((r,n)=>vc(r)-vc(n));if(Ga.length=0,ai){ai.push(...t);return}for(ai=t,Oa=0;Oa<ai.length;Oa++){const r=ai[Oa];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}ai=null,Oa=0}}const vc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function gE(e){try{for(ps=0;ps<Gn.length;ps++){const t=Gn[ps];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),nd(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ps<Gn.length;ps++){const t=Gn[ps];t&&(t.flags&=-2)}ps=-1,Gn.length=0,hE(),Vu=null,(Gn.length||Ga.length)&&gE()}}let En=null,_E=null;function Wu(e){const t=En;return En=e,_E=e&&e.type.__scopeId||null,t}function zr(e,t=En,r){if(!t||e._n)return e;const n=(...o)=>{n._d&&Hu(-1);const s=Wu(t);let i;try{i=e(...o)}finally{Wu(s),n._d&&Hu(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function sd(e,t){if(En===null)return e;const r=Mf(En),n=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,i,a,l=$r]=t[o];s&&(Ft(s)&&(s={mounted:s,updated:s}),s.deep&&Ls(i),n.push({dir:s,instance:r,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function Ri(e,t,r,n){const o=e.dirs,s=t&&t.dirs;for(let i=0;i<o.length;i++){const a=o[i];s&&(a.oldValue=s[i].value);let l=a.dir[n];l&&(zs(),Xo(l,r,8,[e.el,a,e,t]),Ns())}}const bE=Symbol("_vte"),vE=e=>e.__isTeleport,ac=e=>e&&(e.disabled||e.disabled===""),zw=e=>e&&(e.defer||e.defer===""),Nw=e=>typeof SVGElement<"u"&&e instanceof SVGElement,jw=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,kh=(e,t)=>{const r=e&&e.to;return Ur(r)?t?t(r):null:r},yE={name:"Teleport",__isTeleport:!0,process(e,t,r,n,o,s,i,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:p,querySelector:m,createText:b,createComment:E}}=c,h=ac(t.props);let{shapeFlag:_,children:T,dynamicChildren:g}=t;if(e==null){const M=t.el=b(""),x=t.anchor=b("");p(M,r,n),p(x,r,n);const w=(O,L)=>{_&16&&(o&&o.isCE&&(o.ce._teleportTarget=O),u(T,O,L,o,s,i,a,l))},$=()=>{const O=t.target=kh(t.props,m),L=ME(O,t,b,p);O&&(i!=="svg"&&Nw(O)?i="svg":i!=="mathml"&&jw(O)&&(i="mathml"),h||(w(O,L),Su(t,!1)))};h&&(w(r,x),Su(t,!0)),zw(t.props)?(t.el.__isMounted=!1,Un(()=>{$(),delete t.el.__isMounted},s)):$()}else{if(zw(t.props)&&e.el.__isMounted===!1){Un(()=>{yE.process(e,t,r,n,o,s,i,a,l,c)},s);return}t.el=e.el,t.targetStart=e.targetStart;const M=t.anchor=e.anchor,x=t.target=e.target,w=t.targetAnchor=e.targetAnchor,$=ac(e.props),O=$?r:x,L=$?M:w;if(i==="svg"||Nw(x)?i="svg":(i==="mathml"||jw(x))&&(i="mathml"),g?(f(e.dynamicChildren,g,O,o,s,i,a),Qg(e,t,!0)):l||d(e,t,O,L,o,s,i,a,!1),h)$?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):iu(t,r,M,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const G=t.target=kh(t.props,m);G&&iu(t,G,null,c,0)}else $&&iu(t,x,w,c,1);Su(t,h)}},remove(e,t,r,{um:n,o:{remove:o}},s){const{shapeFlag:i,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=e;if(d&&(o(c),o(u)),s&&o(l),i&16){const p=s||!ac(f);for(let m=0;m<a.length;m++){const b=a[m];n(b,t,r,p,!!b.dynamicChildren)}}},move:iu,hydrate:hO};function iu(e,t,r,{o:{insert:n},m:o},s=2){s===0&&n(e.targetAnchor,t,r);const{el:i,anchor:a,shapeFlag:l,children:c,props:u}=e,d=s===2;if(d&&n(i,t,r),(!d||ac(u))&&l&16)for(let f=0;f<c.length;f++)o(c[f],t,r,2);d&&n(a,t,r)}function hO(e,t,r,n,o,s,{o:{nextSibling:i,parentNode:a,querySelector:l,insert:c,createText:u}},d){function f(b,E,h,_){E.anchor=d(i(b),E,a(b),r,n,o,s),E.targetStart=h,E.targetAnchor=_}const p=t.target=kh(t.props,l),m=ac(t.props);if(p){const b=p._lpa||p.firstChild;if(t.shapeFlag&16)if(m)f(e,t,b,b&&i(b));else{t.anchor=i(e);let E=b;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")t.targetStart=E;else if(E.data==="teleport anchor"){t.targetAnchor=E,p._lpa=t.targetAnchor&&i(t.targetAnchor);break}}E=i(E)}t.targetAnchor||ME(p,t,u,c),d(b&&i(b),t,p,r,n,o,s)}Su(t,m)}else m&&t.shapeFlag&16&&f(e,t,e,i(e));return t.anchor&&i(t.anchor)}const wE=yE;function Su(e,t){const r=e.ctx;if(r&&r.ut){let n,o;for(t?(n=e.el,o=e.anchor):(n=e.targetStart,o=e.targetAnchor);n&&n!==o;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function ME(e,t,r,n){const o=t.targetStart=r(""),s=t.targetAnchor=r("");return o[bE]=s,e&&(n(o,e),n(s,e)),s}const As=Symbol("_leaveCb"),au=Symbol("_enterCb");function xE(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return id(()=>{e.isMounted=!0}),IE(()=>{e.isUnmounting=!0}),e}const _o=[Function,Array],TE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_o,onEnter:_o,onAfterEnter:_o,onEnterCancelled:_o,onBeforeLeave:_o,onLeave:_o,onAfterLeave:_o,onLeaveCancelled:_o,onBeforeAppear:_o,onAppear:_o,onAfterAppear:_o,onAppearCancelled:_o},CE=e=>{const t=e.subTree;return t.component?CE(t.component):t},gO={name:"BaseTransition",props:TE,setup(e,{slots:t}){const r=Qo(),n=xE();return()=>{const o=t.default&&Ug(t.default(),!0);if(!o||!o.length)return;const s=kE(o),i=Zt(e),{mode:a}=i;if(n.isLeaving)return nm(s);const l=Vw(s);if(!l)return nm(s);let c=yc(l,i,n,r,d=>c=d);l.type!==Bn&&ta(l,c);let u=r.subTree&&Vw(r.subTree);if(u&&u.type!==Bn&&!Ki(u,l)&&CE(r).type!==Bn){let d=yc(u,i,n,r);if(ta(u,d),a==="out-in"&&l.type!==Bn)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,u=void 0},nm(s);a==="in-out"&&l.type!==Bn?d.delayLeave=(f,p,m)=>{const b=EE(n,u);b[String(u.key)]=u,f[As]=()=>{p(),f[As]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function kE(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Bn){t=r;break}}return t}const _O=gO;function EE(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function yc(e,t,r,n,o){const{appear:s,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:b,onBeforeAppear:E,onAppear:h,onAfterAppear:_,onAppearCancelled:T}=t,g=String(e.key),M=EE(r,e),x=(O,L)=>{O&&Xo(O,n,9,L)},w=(O,L)=>{const G=L[1];x(O,L),$t(O)?O.every(j=>j.length<=1)&&G():O.length<=1&&G()},$={mode:i,persisted:a,beforeEnter(O){let L=l;if(!r.isMounted)if(s)L=E||l;else return;O[As]&&O[As](!0);const G=M[g];G&&Ki(e,G)&&G.el[As]&&G.el[As](),x(L,[O])},enter(O){let L=c,G=u,j=d;if(!r.isMounted)if(s)L=h||c,G=_||u,j=T||d;else return;let D=!1;const re=O[au]=Z=>{D||(D=!0,Z?x(j,[O]):x(G,[O]),$.delayedLeave&&$.delayedLeave(),O[au]=void 0)};L?w(L,[O,re]):re()},leave(O,L){const G=String(e.key);if(O[au]&&O[au](!0),r.isUnmounting)return L();x(f,[O]);let j=!1;const D=O[As]=re=>{j||(j=!0,L(),re?x(b,[O]):x(m,[O]),O[As]=void 0,M[G]===e&&delete M[G])};M[G]=e,p?w(p,[O,D]):D()},clone(O){const L=yc(O,t,r,n,o);return o&&o(L),L}};return $}function nm(e){if(vf(e))return e=mi(e),e.children=null,e}function Vw(e){if(!vf(e))return vE(e.type)&&e.children?kE(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&Ft(r.default))return r.default()}}function ta(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ta(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ug(e,t=!1,r){let n=[],o=0;for(let s=0;s<e.length;s++){let i=e[s];const a=r==null?i.key:String(r)+String(i.key!=null?i.key:s);i.type===pr?(i.patchFlag&128&&o++,n=n.concat(Ug(i.children,t,a))):(t||i.type!==Bn)&&n.push(a!=null?mi(i,{key:a}):i)}if(o>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function Vs(e,t){return Ft(e)?vn({name:e.name},t,{setup:e}):e}function bO(){const e=Qo();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function PE(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Uu=new WeakMap;function lc(e,t,r,n,o=!1){if($t(e)){e.forEach((m,b)=>lc(m,t&&($t(t)?t[b]:t),r,n,o));return}if(Ha(n)&&!o){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&lc(e,t,r,n.component.subTree);return}const s=n.shapeFlag&4?Mf(n.component):n.el,i=o?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===$r?a.refs={}:a.refs,d=a.setupState,f=Zt(d),p=d===$r?Bk:m=>ur(f,m);if(c!=null&&c!==l){if(Ww(t),Ur(c))u[c]=null,p(c)&&(d[c]=null);else if(gn(c)){c.value=null;const m=t;m.k&&(u[m.k]=null)}}if(Ft(l))nd(l,a,12,[i,u]);else{const m=Ur(l),b=gn(l);if(m||b){const E=()=>{if(e.f){const h=m?p(l)?d[l]:u[l]:l.value;if(o)$t(h)&&Lg(h,s);else if($t(h))h.includes(s)||h.push(s);else if(m)u[l]=[s],p(l)&&(d[l]=u[l]);else{const _=[s];l.value=_,e.k&&(u[e.k]=_)}}else m?(u[l]=i,p(l)&&(d[l]=i)):b&&(l.value=i,e.k&&(u[e.k]=i))};if(i){const h=()=>{E(),Uu.delete(e)};h.id=-1,Uu.set(e,h),Un(h,r)}else Ww(e),E()}}}function Ww(e){const t=Uu.get(e);t&&(t.flags|=8,Uu.delete(e))}hf().requestIdleCallback;hf().cancelIdleCallback;const Ha=e=>!!e.type.__asyncLoader,vf=e=>e.type.__isKeepAlive;function vO(e,t){$E(e,"a",t)}function yO(e,t){$E(e,"da",t)}function $E(e,t,r=Rn){const n=e.__wdc||(e.__wdc=()=>{let o=r;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(yf(t,n,r),r){let o=r.parent;for(;o&&o.parent;)vf(o.parent.vnode)&&wO(n,t,r,o),o=o.parent}}function wO(e,t,r,n){const o=yf(t,e,n,!0);Gg(()=>{Lg(n[t],o)},r)}function yf(e,t,r=Rn,n=!1){if(r){const o=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...i)=>{zs();const a=cd(r),l=Xo(t,r,e,i);return a(),Ns(),l});return n?o.unshift(s):o.push(s),s}}const Ws=e=>(t,r=Rn)=>{(!Tc||e==="sp")&&yf(e,(...n)=>t(...n),r)},MO=Ws("bm"),id=Ws("m"),xO=Ws("bu"),SE=Ws("u"),IE=Ws("bum"),Gg=Ws("um"),TO=Ws("sp"),CO=Ws("rtg"),kO=Ws("rtc");function EO(e,t=Rn){yf("ec",e,t)}const Hg="components",PO="directives";function Po(e,t){return Kg(Hg,e,!0,t)||e}const AE=Symbol.for("v-ndc");function gs(e){return Ur(e)?Kg(Hg,e,!1)||e:e||AE}function ad(e){return Kg(PO,e)}function Kg(e,t,r=!0,n=!1){const o=En||Rn;if(o){const s=o.type;if(e===Hg){const a=mL(s,!1);if(a&&(a===t||a===Eo(t)||a===mf(Eo(t))))return s}const i=Uw(o[e]||s[e],t)||Uw(o.appContext[e],t);return!i&&n?s:i}}function Uw(e,t){return e&&(e[t]||e[Eo(t)]||e[mf(Eo(t))])}function wc(e,t,r,n){let o;const s=r,i=$t(e);if(i||Ur(e)){const a=i&&Ua(e);let l=!1,c=!1;a&&(l=!xo(e),c=pi(e),e=_f(e)),o=new Array(e.length);for(let u=0,d=e.length;u<d;u++)o[u]=t(l?c?Nu(Cn(e[u])):Cn(e[u]):e[u],u,void 0,s)}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,s)}else if(Fr(e))if(e[Symbol.iterator])o=Array.from(e,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(e);o=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];o[l]=t(e[u],u,l,s)}}else o=[];return o}function hQ(e,t){for(let r=0;r<t.length;r++){const n=t[r];if($t(n))for(let o=0;o<n.length;o++)e[n[o].name]=n[o].fn;else n&&(e[n.name]=n.key?(...o)=>{const s=n.fn(...o);return s&&(s.key=n.key),s}:n.fn)}return e}function qt(e,t,r={},n,o){if(En.ce||En.parent&&Ha(En.parent)&&En.parent.ce)return t!=="default"&&(r.name=t),He(),Sr(pr,null,[Vt("slot",r,n&&n())],64);let s=e[t];s&&s._c&&(s._d=!1),He();const i=s&&OE(s(r)),a=r.key||i&&i.key,l=Sr(pr,{key:(a&&!js(a)?a:`_${t}`)+(!i&&n?"_fb":"")},i||(n?n():[]),i&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function OE(e){return e.some(t=>xc(t)?!(t.type===Bn||t.type===pr&&!OE(t.children)):!0)?e:null}const Eh=e=>e?JE(e)?Mf(e):Eh(e.parent):null,cc=vn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Eh(e.parent),$root:e=>Eh(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>FE(e),$forceUpdate:e=>e.f||(e.f=()=>{Wg(e.update)}),$nextTick:e=>e.n||(e.n=od.bind(e.proxy)),$watch:e=>XO.bind(e)}),om=(e,t)=>e!==$r&&!e.__isScriptSetup&&ur(e,t),$O={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:o,props:s,accessCache:i,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const p=i[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return o[t];case 4:return r[t];case 3:return s[t]}else{if(om(n,t))return i[t]=1,n[t];if(o!==$r&&ur(o,t))return i[t]=2,o[t];if((c=e.propsOptions[0])&&ur(c,t))return i[t]=3,s[t];if(r!==$r&&ur(r,t))return i[t]=4,r[t];Ph&&(i[t]=0)}}const u=cc[t];let d,f;if(u)return t==="$attrs"&&Dn(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(r!==$r&&ur(r,t))return i[t]=4,r[t];if(f=l.config.globalProperties,ur(f,t))return f[t]},set({_:e},t,r){const{data:n,setupState:o,ctx:s}=e;return om(o,t)?(o[t]=r,!0):n!==$r&&ur(n,t)?(n[t]=r,!0):ur(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:o,propsOptions:s,type:i}},a){let l,c;return!!(r[a]||e!==$r&&a[0]!=="$"&&ur(e,a)||om(t,a)||(l=s[0])&&ur(l,a)||ur(n,a)||ur(cc,a)||ur(o.config.globalProperties,a)||(c=i.__cssModules)&&c[a])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:ur(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Gw(e){return $t(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Ph=!0;function SO(e){const t=FE(e),r=e.proxy,n=e.ctx;Ph=!1,t.beforeCreate&&Hw(t.beforeCreate,e,"bc");const{data:o,computed:s,methods:i,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:b,deactivated:E,beforeDestroy:h,beforeUnmount:_,destroyed:T,unmounted:g,render:M,renderTracked:x,renderTriggered:w,errorCaptured:$,serverPrefetch:O,expose:L,inheritAttrs:G,components:j,directives:D,filters:re}=t;if(c&&IO(c,n,null),i)for(const ie in i){const ne=i[ie];Ft(ne)&&(n[ie]=ne.bind(r))}if(o){const ie=o.call(r,r);Fr(ie)&&(e.data=tl(ie))}if(Ph=!0,s)for(const ie in s){const ne=s[ie],ve=Ft(ne)?ne.bind(r,r):Ft(ne.get)?ne.get.bind(r,r):_s,Me=!Ft(ne)&&Ft(ne.set)?ne.set.bind(r):_s,W=Lr({get:ve,set:Me});Object.defineProperty(n,ie,{enumerable:!0,configurable:!0,get:()=>W.value,set:R=>W.value=R})}if(a)for(const ie in a)LE(a[ie],n,r,ie);if(l){const ie=Ft(l)?l.call(r):l;Reflect.ownKeys(ie).forEach(ne=>{Iu(ne,ie[ne])})}u&&Hw(u,e,"c");function te(ie,ne){$t(ne)?ne.forEach(ve=>ie(ve.bind(r))):ne&&ie(ne.bind(r))}if(te(MO,d),te(id,f),te(xO,p),te(SE,m),te(vO,b),te(yO,E),te(EO,$),te(kO,x),te(CO,w),te(IE,_),te(Gg,g),te(TO,O),$t(L))if(L.length){const ie=e.exposed||(e.exposed={});L.forEach(ne=>{Object.defineProperty(ie,ne,{get:()=>r[ne],set:ve=>r[ne]=ve,enumerable:!0})})}else e.exposed||(e.exposed={});M&&e.render===_s&&(e.render=M),G!=null&&(e.inheritAttrs=G),j&&(e.components=j),D&&(e.directives=D),O&&PE(e)}function IO(e,t,r=_s){$t(e)&&(e=$h(e));for(const n in e){const o=e[n];let s;Fr(o)?"default"in o?s=To(o.from||n,o.default,!0):s=To(o.from||n):s=To(o),gn(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:i=>s.value=i}):t[n]=s}}function Hw(e,t,r){Xo($t(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function LE(e,t,r,n){let o=n.includes(".")?KE(r,n):()=>r[n];if(Ur(e)){const s=t[e];Ft(s)&&Hn(o,s)}else if(Ft(e))Hn(o,e.bind(r));else if(Fr(e))if($t(e))e.forEach(s=>LE(s,t,r,n));else{const s=Ft(e.handler)?e.handler.bind(r):t[e.handler];Ft(s)&&Hn(o,s,e)}}function FE(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:o,optionsCache:s,config:{optionMergeStrategies:i}}=e.appContext,a=s.get(t);let l;return a?l=a:!o.length&&!r&&!n?l=t:(l={},o.length&&o.forEach(c=>Gu(l,c,i,!0)),Gu(l,t,i)),Fr(t)&&s.set(t,l),l}function Gu(e,t,r,n=!1){const{mixins:o,extends:s}=t;s&&Gu(e,s,r,!0),o&&o.forEach(i=>Gu(e,i,r,!0));for(const i in t)if(!(n&&i==="expose")){const a=AO[i]||r&&r[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const AO={data:Kw,props:qw,emits:qw,methods:Yl,computed:Yl,beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,components:Yl,directives:Yl,watch:LO,provide:Kw,inject:OO};function Kw(e,t){return t?e?function(){return vn(Ft(e)?e.call(this,this):e,Ft(t)?t.call(this,this):t)}:t:e}function OO(e,t){return Yl($h(e),$h(t))}function $h(e){if($t(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Wn(e,t){return e?[...new Set([].concat(e,t))]:t}function Yl(e,t){return e?vn(Object.create(null),e,t):t}function qw(e,t){return e?$t(e)&&$t(t)?[...new Set([...e,...t])]:vn(Object.create(null),Gw(e),Gw(t??{})):t}function LO(e,t){if(!e)return t;if(!t)return e;const r=vn(Object.create(null),e);for(const n in t)r[n]=Wn(e[n],t[n]);return r}function DE(){return{app:null,config:{isNativeTag:Bk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let FO=0;function DO(e,t){return function(n,o=null){Ft(n)||(n=vn({},n)),o!=null&&!Fr(o)&&(o=null);const s=DE(),i=new WeakSet,a=[];let l=!1;const c=s.app={_uid:FO++,_component:n,_props:o,_container:null,_context:s,_instance:null,version:gL,get config(){return s.config},set config(u){},use(u,...d){return i.has(u)||(u&&Ft(u.install)?(i.add(u),u.install(c,...d)):Ft(u)&&(i.add(u),u(c,...d))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,d){return d?(s.components[u]=d,c):s.components[u]},directive(u,d){return d?(s.directives[u]=d,c):s.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||Vt(n,o);return p.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),e(p,u,f),l=!0,c._container=u,u.__vue_app__=c,Mf(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Xo(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,d){return s.provides[u]=d,c},runWithContext(u){const d=Ka;Ka=c;try{return u()}finally{Ka=d}}};return c}}let Ka=null;function Iu(e,t){if(Rn){let r=Rn.provides;const n=Rn.parent&&Rn.parent.provides;n===r&&(r=Rn.provides=Object.create(n)),r[e]=t}}function To(e,t,r=!1){const n=Qo();if(n||Ka){let o=Ka?Ka._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return r&&Ft(t)?t.call(n&&n.proxy):t}}const BE={},RE=()=>Object.create(BE),zE=e=>Object.getPrototypeOf(e)===BE;function BO(e,t,r,n=!1){const o={},s=RE();e.propsDefaults=Object.create(null),NE(e,t,o,s);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);r?e.props=n?o:lE(o):e.type.props?e.props=o:e.props=s,e.attrs=s}function RO(e,t,r,n){const{props:o,attrs:s,vnode:{patchFlag:i}}=e,a=Zt(o),[l]=e.propsOptions;let c=!1;if((n||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(wf(e.emitsOptions,f))continue;const p=t[f];if(l)if(ur(s,f))p!==s[f]&&(s[f]=p,c=!0);else{const m=Eo(f);o[m]=Sh(l,a,m,p,e,!1)}else p!==s[f]&&(s[f]=p,c=!0)}}}else{NE(e,t,o,s)&&(c=!0);let u;for(const d in a)(!t||!ur(t,d)&&((u=ia(d))===d||!ur(t,u)))&&(l?r&&(r[d]!==void 0||r[u]!==void 0)&&(o[d]=Sh(l,a,d,void 0,e,!0)):delete o[d]);if(s!==a)for(const d in s)(!t||!ur(t,d))&&(delete s[d],c=!0)}c&&Os(e.attrs,"set","")}function NE(e,t,r,n){const[o,s]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(oc(l))continue;const c=t[l];let u;o&&ur(o,u=Eo(l))?!s||!s.includes(u)?r[u]=c:(a||(a={}))[u]=c:wf(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,i=!0)}if(s){const l=Zt(r),c=a||$r;for(let u=0;u<s.length;u++){const d=s[u];r[d]=Sh(o,l,d,c[d],e,!ur(c,d))}}return i}function Sh(e,t,r,n,o,s){const i=e[r];if(i!=null){const a=ur(i,"default");if(a&&n===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&Ft(l)){const{propsDefaults:c}=o;if(r in c)n=c[r];else{const u=cd(o);n=c[r]=l.call(null,t),u()}}else n=l;o.ce&&o.ce._setProp(r,n)}i[0]&&(s&&!a?n=!1:i[1]&&(n===""||n===ia(r))&&(n=!0))}return n}const zO=new WeakMap;function jE(e,t,r=!1){const n=r?zO:t.propsCache,o=n.get(e);if(o)return o;const s=e.props,i={},a=[];let l=!1;if(!Ft(e)){const u=d=>{l=!0;const[f,p]=jE(d,t,!0);vn(i,f),p&&a.push(...p)};!r&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return Fr(e)&&n.set(e,Va),Va;if($t(s))for(let u=0;u<s.length;u++){const d=Eo(s[u]);Xw(d)&&(i[d]=$r)}else if(s)for(const u in s){const d=Eo(u);if(Xw(d)){const f=s[u],p=i[d]=$t(f)||Ft(f)?{type:f}:vn({},f),m=p.type;let b=!1,E=!0;if($t(m))for(let h=0;h<m.length;++h){const _=m[h],T=Ft(_)&&_.name;if(T==="Boolean"){b=!0;break}else T==="String"&&(E=!1)}else b=Ft(m)&&m.name==="Boolean";p[0]=b,p[1]=E,(b||ur(p,"default"))&&a.push(d)}}const c=[i,a];return Fr(e)&&n.set(e,c),c}function Xw(e){return e[0]!=="$"&&!oc(e)}const qg=e=>e==="_"||e==="_ctx"||e==="$stable",Xg=e=>$t(e)?e.map(ms):[ms(e)],NO=(e,t,r)=>{if(t._n)return t;const n=zr((...o)=>Xg(t(...o)),r);return n._c=!1,n},VE=(e,t,r)=>{const n=e._ctx;for(const o in e){if(qg(o))continue;const s=e[o];if(Ft(s))t[o]=NO(o,s,n);else if(s!=null){const i=Xg(s);t[o]=()=>i}}},WE=(e,t)=>{const r=Xg(t);e.slots.default=()=>r},UE=(e,t,r)=>{for(const n in t)(r||!qg(n))&&(e[n]=t[n])},jO=(e,t,r)=>{const n=e.slots=RE();if(e.vnode.shapeFlag&32){const o=t._;o?(UE(n,t,r),r&&Vk(n,"_",o,!0)):VE(t,n)}else t&&WE(e,t)},VO=(e,t,r)=>{const{vnode:n,slots:o}=e;let s=!0,i=$r;if(n.shapeFlag&32){const a=t._;a?r&&a===1?s=!1:UE(o,t,r):(s=!t.$stable,VE(t,o)),i=t}else t&&(WE(e,t),i={default:1});if(s)for(const a in o)!qg(a)&&i[a]==null&&delete o[a]},Un=nL;function WO(e){return UO(e)}function UO(e,t){const r=hf();r.__VUE__=!0;const{insert:n,remove:o,patchProp:s,createElement:i,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=_s,insertStaticContent:m}=e,b=(B,I,q,pe=null,ue=null,oe=null,N=void 0,z=null,ee=!!I.dynamicChildren)=>{if(B===I)return;B&&!Ki(B,I)&&(pe=de(B),R(B,ue,oe,!0),B=null),I.patchFlag===-2&&(ee=!1,I.dynamicChildren=null);const{type:le,ref:ke,shapeFlag:fe}=I;switch(le){case ld:E(B,I,q,pe);break;case Bn:h(B,I,q,pe);break;case im:B==null&&_(I,q,pe,N);break;case pr:j(B,I,q,pe,ue,oe,N,z,ee);break;default:fe&1?M(B,I,q,pe,ue,oe,N,z,ee):fe&6?D(B,I,q,pe,ue,oe,N,z,ee):(fe&64||fe&128)&&le.process(B,I,q,pe,ue,oe,N,z,ee,xe)}ke!=null&&ue?lc(ke,B&&B.ref,oe,I||B,!I):ke==null&&B&&B.ref!=null&&lc(B.ref,null,oe,B,!0)},E=(B,I,q,pe)=>{if(B==null)n(I.el=a(I.children),q,pe);else{const ue=I.el=B.el;I.children!==B.children&&c(ue,I.children)}},h=(B,I,q,pe)=>{B==null?n(I.el=l(I.children||""),q,pe):I.el=B.el},_=(B,I,q,pe)=>{[B.el,B.anchor]=m(B.children,I,q,pe,B.el,B.anchor)},T=({el:B,anchor:I},q,pe)=>{let ue;for(;B&&B!==I;)ue=f(B),n(B,q,pe),B=ue;n(I,q,pe)},g=({el:B,anchor:I})=>{let q;for(;B&&B!==I;)q=f(B),o(B),B=q;o(I)},M=(B,I,q,pe,ue,oe,N,z,ee)=>{I.type==="svg"?N="svg":I.type==="math"&&(N="mathml"),B==null?x(I,q,pe,ue,oe,N,z,ee):O(B,I,ue,oe,N,z,ee)},x=(B,I,q,pe,ue,oe,N,z)=>{let ee,le;const{props:ke,shapeFlag:fe,transition:ce,dirs:he}=B;if(ee=B.el=i(B.type,oe,ke&&ke.is,ke),fe&8?u(ee,B.children):fe&16&&$(B.children,ee,null,pe,ue,sm(B,oe),N,z),he&&Ri(B,null,pe,"created"),w(ee,B,B.scopeId,N,pe),ke){for(const Re in ke)Re!=="value"&&!oc(Re)&&s(ee,Re,null,ke[Re],oe,pe);"value"in ke&&s(ee,"value",null,ke.value,oe),(le=ke.onVnodeBeforeMount)&&as(le,pe,B)}he&&Ri(B,null,pe,"beforeMount");const $e=GO(ue,ce);$e&&ce.beforeEnter(ee),n(ee,I,q),((le=ke&&ke.onVnodeMounted)||$e||he)&&Un(()=>{le&&as(le,pe,B),$e&&ce.enter(ee),he&&Ri(B,null,pe,"mounted")},ue)},w=(B,I,q,pe,ue)=>{if(q&&p(B,q),pe)for(let oe=0;oe<pe.length;oe++)p(B,pe[oe]);if(ue){let oe=ue.subTree;if(I===oe||XE(oe.type)&&(oe.ssContent===I||oe.ssFallback===I)){const N=ue.vnode;w(B,N,N.scopeId,N.slotScopeIds,ue.parent)}}},$=(B,I,q,pe,ue,oe,N,z,ee=0)=>{for(let le=ee;le<B.length;le++){const ke=B[le]=z?li(B[le]):ms(B[le]);b(null,ke,I,q,pe,ue,oe,N,z)}},O=(B,I,q,pe,ue,oe,N)=>{const z=I.el=B.el;let{patchFlag:ee,dynamicChildren:le,dirs:ke}=I;ee|=B.patchFlag&16;const fe=B.props||$r,ce=I.props||$r;let he;if(q&&zi(q,!1),(he=ce.onVnodeBeforeUpdate)&&as(he,q,I,B),ke&&Ri(I,B,q,"beforeUpdate"),q&&zi(q,!0),(fe.innerHTML&&ce.innerHTML==null||fe.textContent&&ce.textContent==null)&&u(z,""),le?L(B.dynamicChildren,le,z,q,pe,sm(I,ue),oe):N||ne(B,I,z,null,q,pe,sm(I,ue),oe,!1),ee>0){if(ee&16)G(z,fe,ce,q,ue);else if(ee&2&&fe.class!==ce.class&&s(z,"class",null,ce.class,ue),ee&4&&s(z,"style",fe.style,ce.style,ue),ee&8){const $e=I.dynamicProps;for(let Re=0;Re<$e.length;Re++){const ze=$e[Re],Ge=fe[ze],Ke=ce[ze];(Ke!==Ge||ze==="value")&&s(z,ze,Ge,Ke,ue,q)}}ee&1&&B.children!==I.children&&u(z,I.children)}else!N&&le==null&&G(z,fe,ce,q,ue);((he=ce.onVnodeUpdated)||ke)&&Un(()=>{he&&as(he,q,I,B),ke&&Ri(I,B,q,"updated")},pe)},L=(B,I,q,pe,ue,oe,N)=>{for(let z=0;z<I.length;z++){const ee=B[z],le=I[z],ke=ee.el&&(ee.type===pr||!Ki(ee,le)||ee.shapeFlag&198)?d(ee.el):q;b(ee,le,ke,null,pe,ue,oe,N,!0)}},G=(B,I,q,pe,ue)=>{if(I!==q){if(I!==$r)for(const oe in I)!oc(oe)&&!(oe in q)&&s(B,oe,I[oe],null,ue,pe);for(const oe in q){if(oc(oe))continue;const N=q[oe],z=I[oe];N!==z&&oe!=="value"&&s(B,oe,z,N,ue,pe)}"value"in q&&s(B,"value",I.value,q.value,ue)}},j=(B,I,q,pe,ue,oe,N,z,ee)=>{const le=I.el=B?B.el:a(""),ke=I.anchor=B?B.anchor:a("");let{patchFlag:fe,dynamicChildren:ce,slotScopeIds:he}=I;he&&(z=z?z.concat(he):he),B==null?(n(le,q,pe),n(ke,q,pe),$(I.children||[],q,ke,ue,oe,N,z,ee)):fe>0&&fe&64&&ce&&B.dynamicChildren?(L(B.dynamicChildren,ce,q,ue,oe,N,z),(I.key!=null||ue&&I===ue.subTree)&&Qg(B,I,!0)):ne(B,I,q,ke,ue,oe,N,z,ee)},D=(B,I,q,pe,ue,oe,N,z,ee)=>{I.slotScopeIds=z,B==null?I.shapeFlag&512?ue.ctx.activate(I,q,pe,N,ee):re(I,q,pe,ue,oe,N,ee):Z(B,I,ee)},re=(B,I,q,pe,ue,oe,N)=>{const z=B.component=cL(B,pe,ue);if(vf(B)&&(z.ctx.renderer=xe),dL(z,!1,N),z.asyncDep){if(ue&&ue.registerDep(z,te,N),!B.el){const ee=z.subTree=Vt(Bn);h(null,ee,I,q),B.placeholder=ee.el}}else te(z,B,I,q,ue,oe,N)},Z=(B,I,q)=>{const pe=I.component=B.component;if(tL(B,I,q))if(pe.asyncDep&&!pe.asyncResolved){ie(pe,I,q);return}else pe.next=I,pe.update();else I.el=B.el,pe.vnode=I},te=(B,I,q,pe,ue,oe,N)=>{const z=()=>{if(B.isMounted){let{next:fe,bu:ce,u:he,parent:$e,vnode:Re}=B;{const Tt=GE(B);if(Tt){fe&&(fe.el=Re.el,ie(B,fe,N)),Tt.asyncDep.then(()=>{B.isUnmounted||z()});return}}let ze=fe,Ge;zi(B,!1),fe?(fe.el=Re.el,ie(B,fe,N)):fe=Re,ce&&Jp(ce),(Ge=fe.props&&fe.props.onVnodeBeforeUpdate)&&as(Ge,$e,fe,Re),zi(B,!0);const Ke=Yw(B),vt=B.subTree;B.subTree=Ke,b(vt,Ke,d(vt.el),de(vt),B,ue,oe),fe.el=Ke.el,ze===null&&rL(B,Ke.el),he&&Un(he,ue),(Ge=fe.props&&fe.props.onVnodeUpdated)&&Un(()=>as(Ge,$e,fe,Re),ue)}else{let fe;const{el:ce,props:he}=I,{bm:$e,m:Re,parent:ze,root:Ge,type:Ke}=B,vt=Ha(I);zi(B,!1),$e&&Jp($e),!vt&&(fe=he&&he.onVnodeBeforeMount)&&as(fe,ze,I),zi(B,!0);{Ge.ce&&Ge.ce._def.shadowRoot!==!1&&Ge.ce._injectChildStyle(Ke);const Tt=B.subTree=Yw(B);b(null,Tt,q,pe,B,ue,oe),I.el=Tt.el}if(Re&&Un(Re,ue),!vt&&(fe=he&&he.onVnodeMounted)){const Tt=I;Un(()=>as(fe,ze,Tt),ue)}(I.shapeFlag&256||ze&&Ha(ze.vnode)&&ze.vnode.shapeFlag&256)&&B.a&&Un(B.a,ue),B.isMounted=!0,I=q=pe=null}};B.scope.on();const ee=B.effect=new qk(z);B.scope.off();const le=B.update=ee.run.bind(ee),ke=B.job=ee.runIfDirty.bind(ee);ke.i=B,ke.id=B.uid,ee.scheduler=()=>Wg(ke),zi(B,!0),le()},ie=(B,I,q)=>{I.component=B;const pe=B.vnode.props;B.vnode=I,B.next=null,RO(B,I.props,pe,q),VO(B,I.children,q),zs(),Rw(B),Ns()},ne=(B,I,q,pe,ue,oe,N,z,ee=!1)=>{const le=B&&B.children,ke=B?B.shapeFlag:0,fe=I.children,{patchFlag:ce,shapeFlag:he}=I;if(ce>0){if(ce&128){Me(le,fe,q,pe,ue,oe,N,z,ee);return}else if(ce&256){ve(le,fe,q,pe,ue,oe,N,z,ee);return}}he&8?(ke&16&&Le(le,ue,oe),fe!==le&&u(q,fe)):ke&16?he&16?Me(le,fe,q,pe,ue,oe,N,z,ee):Le(le,ue,oe,!0):(ke&8&&u(q,""),he&16&&$(fe,q,pe,ue,oe,N,z,ee))},ve=(B,I,q,pe,ue,oe,N,z,ee)=>{B=B||Va,I=I||Va;const le=B.length,ke=I.length,fe=Math.min(le,ke);let ce;for(ce=0;ce<fe;ce++){const he=I[ce]=ee?li(I[ce]):ms(I[ce]);b(B[ce],he,q,null,ue,oe,N,z,ee)}le>ke?Le(B,ue,oe,!0,!1,fe):$(I,q,pe,ue,oe,N,z,ee,fe)},Me=(B,I,q,pe,ue,oe,N,z,ee)=>{let le=0;const ke=I.length;let fe=B.length-1,ce=ke-1;for(;le<=fe&&le<=ce;){const he=B[le],$e=I[le]=ee?li(I[le]):ms(I[le]);if(Ki(he,$e))b(he,$e,q,null,ue,oe,N,z,ee);else break;le++}for(;le<=fe&&le<=ce;){const he=B[fe],$e=I[ce]=ee?li(I[ce]):ms(I[ce]);if(Ki(he,$e))b(he,$e,q,null,ue,oe,N,z,ee);else break;fe--,ce--}if(le>fe){if(le<=ce){const he=ce+1,$e=he<ke?I[he].el:pe;for(;le<=ce;)b(null,I[le]=ee?li(I[le]):ms(I[le]),q,$e,ue,oe,N,z,ee),le++}}else if(le>ce)for(;le<=fe;)R(B[le],ue,oe,!0),le++;else{const he=le,$e=le,Re=new Map;for(le=$e;le<=ce;le++){const _r=I[le]=ee?li(I[le]):ms(I[le]);_r.key!=null&&Re.set(_r.key,le)}let ze,Ge=0;const Ke=ce-$e+1;let vt=!1,Tt=0;const gt=new Array(Ke);for(le=0;le<Ke;le++)gt[le]=0;for(le=he;le<=fe;le++){const _r=B[le];if(Ge>=Ke){R(_r,ue,oe,!0);continue}let xr;if(_r.key!=null)xr=Re.get(_r.key);else for(ze=$e;ze<=ce;ze++)if(gt[ze-$e]===0&&Ki(_r,I[ze])){xr=ze;break}xr===void 0?R(_r,ue,oe,!0):(gt[xr-$e]=le+1,xr>=Tt?Tt=xr:vt=!0,b(_r,I[xr],q,null,ue,oe,N,z,ee),Ge++)}const Gr=vt?HO(gt):Va;for(ze=Gr.length-1,le=Ke-1;le>=0;le--){const _r=$e+le,xr=I[_r],zn=I[_r+1],ir=_r+1<ke?zn.el||zn.placeholder:pe;gt[le]===0?b(null,xr,q,ir,ue,oe,N,z,ee):vt&&(ze<0||le!==Gr[ze]?W(xr,q,ir,2):ze--)}}},W=(B,I,q,pe,ue=null)=>{const{el:oe,type:N,transition:z,children:ee,shapeFlag:le}=B;if(le&6){W(B.component.subTree,I,q,pe);return}if(le&128){B.suspense.move(I,q,pe);return}if(le&64){N.move(B,I,q,xe);return}if(N===pr){n(oe,I,q);for(let fe=0;fe<ee.length;fe++)W(ee[fe],I,q,pe);n(B.anchor,I,q);return}if(N===im){T(B,I,q);return}if(pe!==2&&le&1&&z)if(pe===0)z.beforeEnter(oe),n(oe,I,q),Un(()=>z.enter(oe),ue);else{const{leave:fe,delayLeave:ce,afterLeave:he}=z,$e=()=>{B.ctx.isUnmounted?o(oe):n(oe,I,q)},Re=()=>{oe._isLeaving&&oe[As](!0),fe(oe,()=>{$e(),he&&he()})};ce?ce(oe,$e,Re):Re()}else n(oe,I,q)},R=(B,I,q,pe=!1,ue=!1)=>{const{type:oe,props:N,ref:z,children:ee,dynamicChildren:le,shapeFlag:ke,patchFlag:fe,dirs:ce,cacheIndex:he}=B;if(fe===-2&&(ue=!1),z!=null&&(zs(),lc(z,null,q,B,!0),Ns()),he!=null&&(I.renderCache[he]=void 0),ke&256){I.ctx.deactivate(B);return}const $e=ke&1&&ce,Re=!Ha(B);let ze;if(Re&&(ze=N&&N.onVnodeBeforeUnmount)&&as(ze,I,B),ke&6)be(B.component,q,pe);else{if(ke&128){B.suspense.unmount(q,pe);return}$e&&Ri(B,null,I,"beforeUnmount"),ke&64?B.type.remove(B,I,q,xe,pe):le&&!le.hasOnce&&(oe!==pr||fe>0&&fe&64)?Le(le,I,q,!1,!0):(oe===pr&&fe&384||!ue&&ke&16)&&Le(ee,I,q),pe&&J(B)}(Re&&(ze=N&&N.onVnodeUnmounted)||$e)&&Un(()=>{ze&&as(ze,I,B),$e&&Ri(B,null,I,"unmounted")},q)},J=B=>{const{type:I,el:q,anchor:pe,transition:ue}=B;if(I===pr){U(q,pe);return}if(I===im){g(B);return}const oe=()=>{o(q),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(B.shapeFlag&1&&ue&&!ue.persisted){const{leave:N,delayLeave:z}=ue,ee=()=>N(q,oe);z?z(B.el,oe,ee):ee()}else oe()},U=(B,I)=>{let q;for(;B!==I;)q=f(B),o(B),B=q;o(I)},be=(B,I,q)=>{const{bum:pe,scope:ue,job:oe,subTree:N,um:z,m:ee,a:le}=B;Qw(ee),Qw(le),pe&&Jp(pe),ue.stop(),oe&&(oe.flags|=8,R(N,B,I,q)),z&&Un(z,I),Un(()=>{B.isUnmounted=!0},I)},Le=(B,I,q,pe=!1,ue=!1,oe=0)=>{for(let N=oe;N<B.length;N++)R(B[N],I,q,pe,ue)},de=B=>{if(B.shapeFlag&6)return de(B.component.subTree);if(B.shapeFlag&128)return B.suspense.next();const I=f(B.anchor||B.el),q=I&&I[bE];return q?f(q):I};let Te=!1;const Pe=(B,I,q)=>{B==null?I._vnode&&R(I._vnode,null,null,!0):b(I._vnode||null,B,I,null,null,null,q),I._vnode=B,Te||(Te=!0,Rw(),hE(),Te=!1)},xe={p:b,um:R,m:W,r:J,mt:re,mc:$,pc:ne,pbc:L,n:de,o:e};return{render:Pe,hydrate:void 0,createApp:DO(Pe)}}function sm({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function zi({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function GO(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Qg(e,t,r=!1){const n=e.children,o=t.children;if($t(n)&&$t(o))for(let s=0;s<n.length;s++){const i=n[s];let a=o[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[s]=li(o[s]),a.el=i.el),!r&&a.patchFlag!==-2&&Qg(i,a)),a.type===ld&&a.patchFlag!==-1&&(a.el=i.el),a.type===Bn&&!a.el&&(a.el=i.el)}}function HO(e){const t=e.slice(),r=[0];let n,o,s,i,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(o=r[r.length-1],e[o]<c){t[n]=o,r.push(n);continue}for(s=0,i=r.length-1;s<i;)a=s+i>>1,e[r[a]]<c?s=a+1:i=a;c<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,i=r[s-1];s-- >0;)r[s]=i,i=t[i];return r}function GE(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:GE(t)}function Qw(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const KO=Symbol.for("v-scx"),qO=()=>To(KO);function Hn(e,t,r){return HE(e,t,r)}function HE(e,t,r=$r){const{immediate:n,deep:o,flush:s,once:i}=r,a=vn({},r),l=t&&n||!t&&s!=="post";let c;if(Tc){if(s==="sync"){const p=qO();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=_s,p.resume=_s,p.pause=_s,p}}const u=Rn;a.call=(p,m,b)=>Xo(p,u,m,b);let d=!1;s==="post"?a.scheduler=p=>{Un(p,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(p,m)=>{m?p():Wg(p)}),a.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=uO(e,t,a);return Tc&&(c?c.push(f):l&&f()),f}function XO(e,t,r){const n=this.proxy,o=Ur(e)?e.includes(".")?KE(n,e):()=>n[e]:e.bind(n,n);let s;Ft(t)?s=t:(s=t.handler,r=t);const i=cd(this),a=HE(o,s.bind(n),r);return i(),a}function KE(e,t){const r=t.split(".");return()=>{let n=e;for(let o=0;o<r.length&&n;o++)n=n[r[o]];return n}}const QO=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Eo(t)}Modifiers`]||e[`${ia(t)}Modifiers`];function YO(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||$r;let o=r;const s=t.startsWith("update:"),i=s&&QO(n,t.slice(7));i&&(i.trim&&(o=r.map(u=>Ur(u)?u.trim():u)),i.number&&(o=r.map(P3)));let a,l=n[a=Yp(t)]||n[a=Yp(Eo(t))];!l&&s&&(l=n[a=Yp(ia(t))]),l&&Xo(l,e,6,o);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Xo(c,e,6,o)}}const JO=new WeakMap;function qE(e,t,r=!1){const n=r?JO:t.emitsCache,o=n.get(e);if(o!==void 0)return o;const s=e.emits;let i={},a=!1;if(!Ft(e)){const l=c=>{const u=qE(c,t,!0);u&&(a=!0,vn(i,u))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Fr(e)&&n.set(e,null),null):($t(s)?s.forEach(l=>i[l]=null):vn(i,s),Fr(e)&&n.set(e,i),i)}function wf(e,t){return!e||!uf(t)?!1:(t=t.slice(2).replace(/Once$/,""),ur(e,t[0].toLowerCase()+t.slice(1))||ur(e,ia(t))||ur(e,t))}function Yw(e){const{type:t,vnode:r,proxy:n,withProxy:o,propsOptions:[s],slots:i,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:m,inheritAttrs:b}=e,E=Wu(e);let h,_;try{if(r.shapeFlag&4){const g=o||n,M=g;h=ms(c.call(M,g,u,d,p,f,m)),_=a}else{const g=t;h=ms(g.length>1?g(d,{attrs:a,slots:i,emit:l}):g(d,null)),_=t.props?a:ZO(a)}}catch(g){dc.length=0,bf(g,e,1),h=Vt(Bn)}let T=h;if(_&&b!==!1){const g=Object.keys(_),{shapeFlag:M}=T;g.length&&M&7&&(s&&g.some(Og)&&(_=eL(_,s)),T=mi(T,_,!1,!0))}return r.dirs&&(T=mi(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(r.dirs):r.dirs),r.transition&&ta(T,r.transition),h=T,Wu(E),h}const ZO=e=>{let t;for(const r in e)(r==="class"||r==="style"||uf(r))&&((t||(t={}))[r]=e[r]);return t},eL=(e,t)=>{const r={};for(const n in e)(!Og(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function tL(e,t,r){const{props:n,children:o,component:s}=e,{props:i,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Jw(n,i,c):!!i;if(l&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(i[f]!==n[f]&&!wf(c,f))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:n===i?!1:n?i?Jw(n,i,c):!0:!!i;return!1}function Jw(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let o=0;o<n.length;o++){const s=n[o];if(t[s]!==e[s]&&!wf(r,s))return!0}return!1}function rL({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const XE=e=>e.__isSuspense;function nL(e,t){t&&t.pendingBranch?$t(e)?t.effects.push(...e):t.effects.push(e):mO(e)}const pr=Symbol.for("v-fgt"),ld=Symbol.for("v-txt"),Bn=Symbol.for("v-cmt"),im=Symbol.for("v-stc"),dc=[];let co=null;function He(e=!1){dc.push(co=e?null:[])}function oL(){dc.pop(),co=dc[dc.length-1]||null}let Mc=1;function Hu(e,t=!1){Mc+=e,e<0&&co&&t&&(co.hasOnce=!0)}function QE(e){return e.dynamicChildren=Mc>0?co||Va:null,oL(),Mc>0&&co&&co.push(e),e}function at(e,t,r,n,o,s){return QE(Ze(e,t,r,n,o,s,!0))}function Sr(e,t,r,n,o){return QE(Vt(e,t,r,n,o,!0))}function xc(e){return e?e.__v_isVNode===!0:!1}function Ki(e,t){return e.type===t.type&&e.key===t.key}const YE=({key:e})=>e??null,Au=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Ur(e)||gn(e)||Ft(e)?{i:En,r:e,k:t,f:!!r}:e:null);function Ze(e,t=null,r=null,n=0,o=null,s=e===pr?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&YE(t),ref:t&&Au(t),scopeId:_E,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:En};return a?(Yg(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Ur(r)?8:16),Mc>0&&!i&&co&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&co.push(l),l}const Vt=sL;function sL(e,t=null,r=null,n=0,o=null,s=!1){if((!e||e===AE)&&(e=Bn),xc(e)){const a=mi(e,t,!0);return r&&Yg(a,r),Mc>0&&!s&&co&&(a.shapeFlag&6?co[co.indexOf(e)]=a:co.push(a)),a.patchFlag=-2,a}if(hL(e)&&(e=e.__vccOpts),t){t=iL(t);let{class:a,style:l}=t;a&&!Ur(a)&&(t.class=kn(a)),Fr(l)&&(Vg(l)&&!$t(l)&&(l=vn({},l)),t.style=gf(l))}const i=Ur(e)?1:XE(e)?128:vE(e)?64:Fr(e)?4:Ft(e)?2:0;return Ze(e,t,r,n,o,i,s,!0)}function iL(e){return e?Vg(e)||zE(e)?vn({},e):e:null}function mi(e,t,r=!1,n=!1){const{props:o,ref:s,patchFlag:i,children:a,transition:l}=e,c=t?Qe(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&YE(c),ref:t&&t.ref?r&&s?$t(s)?s.concat(Au(t)):[s,Au(t)]:Au(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pr?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mi(e.ssContent),ssFallback:e.ssFallback&&mi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&ta(u,l.clone(u)),u}function ra(e=" ",t=0){return Vt(ld,null,e,t)}function Wt(e="",t=!1){return t?(He(),Sr(Bn,null,e)):Vt(Bn,null,e)}function ms(e){return e==null||typeof e=="boolean"?Vt(Bn):$t(e)?Vt(pr,null,e.slice()):xc(e)?li(e):Vt(ld,null,String(e))}function li(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:mi(e)}function Yg(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if($t(t))r=16;else if(typeof t=="object")if(n&65){const o=t.default;o&&(o._c&&(o._d=!1),Yg(e,o()),o._c&&(o._d=!0));return}else{r=32;const o=t._;!o&&!zE(t)?t._ctx=En:o===3&&En&&(En.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ft(t)?(t={default:t,_ctx:En},r=32):(t=String(t),n&64?(r=16,t=[ra(t)]):r=8);e.children=t,e.shapeFlag|=r}function Qe(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const o in n)if(o==="class")t.class!==n.class&&(t.class=kn([t.class,n.class]));else if(o==="style")t.style=gf([t.style,n.style]);else if(uf(o)){const s=t[o],i=n[o];i&&s!==i&&!($t(s)&&s.includes(i))&&(t[o]=s?[].concat(s,i):i)}else o!==""&&(t[o]=n[o])}return t}function as(e,t,r,n=null){Xo(e,t,7,[r,n])}const aL=DE();let lL=0;function cL(e,t,r){const n=e.type,o=(t?t.appContext:e.appContext)||aL,s={uid:lL++,vnode:e,type:n,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hk(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jE(n,o),emitsOptions:qE(n,o),emit:null,emitted:null,propsDefaults:$r,inheritAttrs:n.inheritAttrs,ctx:$r,data:$r,props:$r,attrs:$r,slots:$r,refs:$r,setupState:$r,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=YO.bind(null,s),e.ce&&e.ce(s),s}let Rn=null;const Qo=()=>Rn||En;let Ku,Ih;{const e=hf(),t=(r,n)=>{let o;return(o=e[r])||(o=e[r]=[]),o.push(n),s=>{o.length>1?o.forEach(i=>i(s)):o[0](s)}};Ku=t("__VUE_INSTANCE_SETTERS__",r=>Rn=r),Ih=t("__VUE_SSR_SETTERS__",r=>Tc=r)}const cd=e=>{const t=Rn;return Ku(e),e.scope.on(),()=>{e.scope.off(),Ku(t)}},Zw=()=>{Rn&&Rn.scope.off(),Ku(null)};function JE(e){return e.vnode.shapeFlag&4}let Tc=!1;function dL(e,t=!1,r=!1){t&&Ih(t);const{props:n,children:o}=e.vnode,s=JE(e);BO(e,n,s,t),jO(e,o,r||t);const i=s?uL(e,t):void 0;return t&&Ih(!1),i}function uL(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,$O);const{setup:n}=r;if(n){zs();const o=e.setupContext=n.length>1?pL(e):null,s=cd(e),i=nd(n,e,0,[e.props,o]),a=zk(i);if(Ns(),s(),(a||e.sp)&&!Ha(e)&&PE(e),a){if(i.then(Zw,Zw),t)return i.then(l=>{e1(e,l)}).catch(l=>{bf(l,e,0)});e.asyncDep=i}else e1(e,i)}else ZE(e)}function e1(e,t,r){Ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Fr(t)&&(e.setupState=fE(t)),ZE(e)}function ZE(e,t,r){const n=e.type;e.render||(e.render=n.render||_s);{const o=cd(e);zs();try{SO(e)}finally{Ns(),o()}}}const fL={get(e,t){return Dn(e,"get",""),e[t]}};function pL(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,fL),slots:e.slots,emit:e.emit,expose:t}}function Mf(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(fE(cE(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in cc)return cc[r](e)},has(t,r){return r in t||r in cc}})):e.proxy}function mL(e,t=!0){return Ft(e)?e.displayName||e.name:e.name||t&&e.__name}function hL(e){return Ft(e)&&"__vccOpts"in e}const Lr=(e,t)=>cO(e,t,Tc);function dd(e,t,r){const n=(s,i,a)=>{Hu(-1);try{return Vt(s,i,a)}finally{Hu(1)}},o=arguments.length;return o===2?Fr(t)&&!$t(t)?xc(t)?n(e,null,[t]):n(e,t):n(e,null,t):(o>3?r=Array.prototype.slice.call(arguments,2):o===3&&xc(r)&&(r=[r]),n(e,t,r))}const gL="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ah;const t1=typeof window<"u"&&window.trustedTypes;if(t1)try{Ah=t1.createPolicy("vue",{createHTML:e=>e})}catch{}const e2=Ah?e=>Ah.createHTML(e):e=>e,_L="http://www.w3.org/2000/svg",bL="http://www.w3.org/1998/Math/MathML",Is=typeof document<"u"?document:null,r1=Is&&Is.createElement("template"),vL={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const o=t==="svg"?Is.createElementNS(_L,e):t==="mathml"?Is.createElementNS(bL,e):r?Is.createElement(e,{is:r}):Is.createElement(e);return e==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:e=>Is.createTextNode(e),createComment:e=>Is.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Is.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,o,s){const i=r?r.previousSibling:t.lastChild;if(o&&(o===s||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),r),!(o===s||!(o=o.nextSibling)););else{r1.innerHTML=e2(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=r1.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[i?i.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},ti="transition",Il="animation",qa=Symbol("_vtc"),t2={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},r2=vn({},TE,t2),yL=e=>(e.displayName="Transition",e.props=r2,e),Jg=yL((e,{slots:t})=>dd(_O,n2(e),t)),Ni=(e,t=[])=>{$t(e)?e.forEach(r=>r(...t)):e&&e(...t)},n1=e=>e?$t(e)?e.some(t=>t.length>1):e.length>1:!1;function n2(e){const t={};for(const j in e)j in t2||(t[j]=e[j]);if(e.css===!1)return t;const{name:r="v",type:n,duration:o,enterFromClass:s=`${r}-enter-from`,enterActiveClass:i=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:c=i,appearToClass:u=a,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=e,m=wL(o),b=m&&m[0],E=m&&m[1],{onBeforeEnter:h,onEnter:_,onEnterCancelled:T,onLeave:g,onLeaveCancelled:M,onBeforeAppear:x=h,onAppear:w=_,onAppearCancelled:$=T}=t,O=(j,D,re,Z)=>{j._enterCancelled=Z,ii(j,D?u:a),ii(j,D?c:i),re&&re()},L=(j,D)=>{j._isLeaving=!1,ii(j,d),ii(j,p),ii(j,f),D&&D()},G=j=>(D,re)=>{const Z=j?w:_,te=()=>O(D,j,re);Ni(Z,[D,te]),o1(()=>{ii(D,j?l:s),fs(D,j?u:a),n1(Z)||s1(D,n,b,te)})};return vn(t,{onBeforeEnter(j){Ni(h,[j]),fs(j,s),fs(j,i)},onBeforeAppear(j){Ni(x,[j]),fs(j,l),fs(j,c)},onEnter:G(!1),onAppear:G(!0),onLeave(j,D){j._isLeaving=!0;const re=()=>L(j,D);fs(j,d),j._enterCancelled?(fs(j,f),Oh()):(Oh(),fs(j,f)),o1(()=>{j._isLeaving&&(ii(j,d),fs(j,p),n1(g)||s1(j,n,E,re))}),Ni(g,[j,re])},onEnterCancelled(j){O(j,!1,void 0,!0),Ni(T,[j])},onAppearCancelled(j){O(j,!0,void 0,!0),Ni($,[j])},onLeaveCancelled(j){L(j),Ni(M,[j])}})}function wL(e){if(e==null)return null;if(Fr(e))return[am(e.enter),am(e.leave)];{const t=am(e);return[t,t]}}function am(e){return $3(e)}function fs(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[qa]||(e[qa]=new Set)).add(t)}function ii(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[qa];r&&(r.delete(t),r.size||(e[qa]=void 0))}function o1(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let ML=0;function s1(e,t,r,n){const o=e._endId=++ML,s=()=>{o===e._endId&&n()};if(r!=null)return setTimeout(s,r);const{type:i,timeout:a,propCount:l}=o2(e,t);if(!i)return n();const c=i+"end";let u=0;const d=()=>{e.removeEventListener(c,f),s()},f=p=>{p.target===e&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),e.addEventListener(c,f)}function o2(e,t){const r=window.getComputedStyle(e),n=m=>(r[m]||"").split(", "),o=n(`${ti}Delay`),s=n(`${ti}Duration`),i=i1(o,s),a=n(`${Il}Delay`),l=n(`${Il}Duration`),c=i1(a,l);let u=null,d=0,f=0;t===ti?i>0&&(u=ti,d=i,f=s.length):t===Il?c>0&&(u=Il,d=c,f=l.length):(d=Math.max(i,c),u=d>0?i>c?ti:Il:null,f=u?u===ti?s.length:l.length:0);const p=u===ti&&/\b(?:transform|all)(?:,|$)/.test(n(`${ti}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function i1(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>a1(r)+a1(e[n])))}function a1(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Oh(){return document.body.offsetHeight}function xL(e,t,r){const n=e[qa];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const qu=Symbol("_vod"),s2=Symbol("_vsh"),gQ={name:"show",beforeMount(e,{value:t},{transition:r}){e[qu]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Al(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Al(e,!0),n.enter(e)):n.leave(e,()=>{Al(e,!1)}):Al(e,t))},beforeUnmount(e,{value:t}){Al(e,t)}};function Al(e,t){e.style.display=t?e[qu]:"none",e[s2]=!t}const TL=Symbol(""),CL=/(?:^|;)\s*display\s*:/;function kL(e,t,r){const n=e.style,o=Ur(r);let s=!1;if(r&&!o){if(t)if(Ur(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();r[a]==null&&Ou(n,a,"")}else for(const i in t)r[i]==null&&Ou(n,i,"");for(const i in r)i==="display"&&(s=!0),Ou(n,i,r[i])}else if(o){if(t!==r){const i=n[TL];i&&(r+=";"+i),n.cssText=r,s=CL.test(r)}}else t&&e.removeAttribute("style");qu in e&&(e[qu]=s?n.display:"",e[s2]&&(n.display="none"))}const l1=/\s*!important$/;function Ou(e,t,r){if($t(r))r.forEach(n=>Ou(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=EL(e,t);l1.test(r)?e.setProperty(ia(n),r.replace(l1,""),"important"):e[n]=r}}const c1=["Webkit","Moz","ms"],lm={};function EL(e,t){const r=lm[t];if(r)return r;let n=Eo(t);if(n!=="filter"&&n in e)return lm[t]=n;n=mf(n);for(let o=0;o<c1.length;o++){const s=c1[o]+n;if(s in e)return lm[t]=s}return t}const d1="http://www.w3.org/1999/xlink";function u1(e,t,r,n,o,s=D3(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(d1,t.slice(6,t.length)):e.setAttributeNS(d1,t,r):r==null||s&&!Wk(r)?e.removeAttribute(t):e.setAttribute(t,s?"":js(r)?String(r):r)}function f1(e,t,r,n,o){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?e2(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(a!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let i=!1;if(r===""||r==null){const a=typeof e[t];a==="boolean"?r=Wk(r):r==null&&a==="string"?(r="",i=!0):a==="number"&&(r=0,i=!0)}try{e[t]=r}catch{}i&&e.removeAttribute(o||t)}function PL(e,t,r,n){e.addEventListener(t,r,n)}function $L(e,t,r,n){e.removeEventListener(t,r,n)}const p1=Symbol("_vei");function SL(e,t,r,n,o=null){const s=e[p1]||(e[p1]={}),i=s[t];if(n&&i)i.value=n;else{const[a,l]=IL(t);if(n){const c=s[t]=LL(n,o);PL(e,a,c,l)}else i&&($L(e,a,i,l),s[t]=void 0)}}const m1=/(?:Once|Passive|Capture)$/;function IL(e){let t;if(m1.test(e)){t={};let n;for(;n=e.match(m1);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ia(e.slice(2)),t]}let cm=0;const AL=Promise.resolve(),OL=()=>cm||(AL.then(()=>cm=0),cm=Date.now());function LL(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Xo(FL(n,r.value),t,5,[n])};return r.value=e,r.attached=OL(),r}function FL(e,t){if($t(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>o=>!o._stopped&&n&&n(o))}else return t}const h1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,DL=(e,t,r,n,o,s)=>{const i=o==="svg";t==="class"?xL(e,n,i):t==="style"?kL(e,r,n):uf(t)?Og(t)||SL(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):BL(e,t,n,i))?(f1(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&u1(e,t,n,i,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ur(n))?f1(e,Eo(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),u1(e,t,n,i))};function BL(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&h1(t)&&Ft(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return h1(t)&&Ur(r)?!1:t in e}const i2=new WeakMap,a2=new WeakMap,Xu=Symbol("_moveCb"),g1=Symbol("_enterCb"),RL=e=>(delete e.props.mode,e),zL=RL({name:"TransitionGroup",props:vn({},r2,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Qo(),n=xE();let o,s;return SE(()=>{if(!o.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!UL(o[0].el,r.vnode.el,i)){o=[];return}o.forEach(jL),o.forEach(VL);const a=o.filter(WL);Oh(),a.forEach(l=>{const c=l.el,u=c.style;fs(c,i),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Xu]=f=>{f&&f.target!==c||(!f||f.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",d),c[Xu]=null,ii(c,i))};c.addEventListener("transitionend",d)}),o=[]}),()=>{const i=Zt(e),a=n2(i);let l=i.tag||pr;if(o=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(o.push(u),ta(u,yc(u,a,n,r)),i2.set(u,u.el.getBoundingClientRect()))}s=t.default?Ug(t.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&ta(u,yc(u,a,n,r))}return Vt(l,null,s)}}}),NL=zL;function jL(e){const t=e.el;t[Xu]&&t[Xu](),t[g1]&&t[g1]()}function VL(e){a2.set(e,e.el.getBoundingClientRect())}function WL(e){const t=i2.get(e),r=a2.get(e),n=t.left-r.left,o=t.top-r.top;if(n||o){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${o}px)`,s.transitionDuration="0s",e}}function UL(e,t,r){const n=e.cloneNode(),o=e[qa];o&&o.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(n);const{hasTransform:i}=o2(n);return s.removeChild(n),i}const GL=vn({patchProp:DL},vL);let _1;function HL(){return _1||(_1=WO(GL))}const KL=((...e)=>{const t=HL().createApp(...e),{mount:r}=t;return t.mount=n=>{const o=XL(n);if(!o)return;const s=t._component;!Ft(s)&&!s.render&&!s.template&&(s.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=r(o,!1,qL(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t});function qL(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function XL(e){return Ur(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const QL=Symbol();var b1;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(b1||(b1={}));function YL(){const e=Kk(!0),t=e.run(()=>eo({}));let r=[],n=[];const o=cE({install(s){o._a=s,s.provide(QL,o),s.config.globalProperties.$pinia=o,n.forEach(i=>r.push(i)),n=[]},use(s){return this._a?r.push(s):n.push(s),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return o}/*!
  * shared v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function JL(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Qu=typeof window<"u",gi=(e,t=!1)=>t?Symbol.for(e):Symbol(e),ZL=(e,t,r)=>eF({l:e,k:t,s:r}),eF=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),pn=e=>typeof e=="number"&&isFinite(e),tF=e=>Zg(e)==="[object Date]",Xa=e=>Zg(e)==="[object RegExp]",xf=e=>Gt(e)&&Object.keys(e).length===0,_n=Object.assign,rF=Object.create,Mr=(e=null)=>rF(e);let v1;const Qi=()=>v1||(v1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Mr());function y1(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function w1(e){return e.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nF(e){return e=e.replace(/(\w+)\s*=\s*"([^"]*)"/g,(n,o,s)=>`${o}="${w1(s)}"`),e=e.replace(/(\w+)\s*=\s*'([^']*)'/g,(n,o,s)=>`${o}='${w1(s)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(e)&&(e=e.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(n=>{e=e.replace(n,"$1javascript&#58;")}),e}const oF=Object.prototype.hasOwnProperty;function Go(e,t){return oF.call(e,t)}const en=Array.isArray,Rr=e=>typeof e=="function",ct=e=>typeof e=="string",sr=e=>typeof e=="boolean",lr=e=>e!==null&&typeof e=="object",sF=e=>lr(e)&&Rr(e.then)&&Rr(e.catch),l2=Object.prototype.toString,Zg=e=>l2.call(e),Gt=e=>Zg(e)==="[object Object]",iF=e=>e==null?"":en(e)||Gt(e)&&e.toString===l2?JSON.stringify(e,null,2):String(e);function e_(e,t=""){return e.reduce((r,n,o)=>o===0?r+n:r+t+n,"")}const lu=e=>!lr(e)||en(e);function Lu(e,t){if(lu(e)||lu(t))throw new Error("Invalid value");const r=[{src:e,des:t}];for(;r.length;){const{src:n,des:o}=r.pop();Object.keys(n).forEach(s=>{s!=="__proto__"&&(lr(n[s])&&!lr(o[s])&&(o[s]=Array.isArray(n[s])?[]:Mr()),lu(o[s])||lu(n[s])?o[s]=n[s]:r.push({src:n[s],des:o[s]}))})}}/*!
  * message-compiler v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function aF(e,t,r){return{line:e,column:t,offset:r}}function Lh(e,t,r){return{start:e,end:t}}const dr={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},lF=17;function Tf(e,t,r={}){const{domain:n,messages:o,args:s}=r,i=e,a=new SyntaxError(String(i));return a.code=e,t&&(a.location=t),a.domain=n,a}function cF(e){throw e}const ls=" ",dF="\r",Ln=`
`,uF="\u2028",fF="\u2029";function pF(e){const t=e;let r=0,n=1,o=1,s=0;const i=w=>t[w]===dF&&t[w+1]===Ln,a=w=>t[w]===Ln,l=w=>t[w]===fF,c=w=>t[w]===uF,u=w=>i(w)||a(w)||l(w)||c(w),d=()=>r,f=()=>n,p=()=>o,m=()=>s,b=w=>i(w)||l(w)||c(w)?Ln:t[w],E=()=>b(r),h=()=>b(r+s);function _(){return s=0,u(r)&&(n++,o=0),i(r)&&r++,r++,o++,t[r]}function T(){return i(r+s)&&s++,s++,t[r+s]}function g(){r=0,n=1,o=1,s=0}function M(w=0){s=w}function x(){const w=r+s;for(;w!==r;)_();s=0}return{index:d,line:f,column:p,peekOffset:m,charAt:b,currentChar:E,currentPeek:h,next:_,peek:T,reset:g,resetPeek:M,skipToPeek:x}}const Es=void 0,mF=".",M1="'",hF="tokenizer";function gF(e,t={}){const r=t.location!==!1,n=pF(e),o=()=>n.index(),s=()=>aF(n.line(),n.column(),n.index()),i=s(),a=o(),l={currentType:13,offset:a,startLoc:i,endLoc:i,lastType:13,lastOffset:a,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=t;function d(N,z,ee,...le){const ke=c();if(z.column+=ee,z.offset+=ee,u){const fe=r?Lh(ke.startLoc,z):null,ce=Tf(N,fe,{domain:hF,args:le});u(ce)}}function f(N,z,ee){N.endLoc=s(),N.currentType=z;const le={type:z};return r&&(le.loc=Lh(N.startLoc,N.endLoc)),ee!=null&&(le.value=ee),le}const p=N=>f(N,13);function m(N,z){return N.currentChar()===z?(N.next(),z):(d(dr.EXPECTED_TOKEN,s(),0,z),"")}function b(N){let z="";for(;N.currentPeek()===ls||N.currentPeek()===Ln;)z+=N.currentPeek(),N.peek();return z}function E(N){const z=b(N);return N.skipToPeek(),z}function h(N){if(N===Es)return!1;const z=N.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z===95}function _(N){if(N===Es)return!1;const z=N.charCodeAt(0);return z>=48&&z<=57}function T(N,z){const{currentType:ee}=z;if(ee!==2)return!1;b(N);const le=h(N.currentPeek());return N.resetPeek(),le}function g(N,z){const{currentType:ee}=z;if(ee!==2)return!1;b(N);const le=N.currentPeek()==="-"?N.peek():N.currentPeek(),ke=_(le);return N.resetPeek(),ke}function M(N,z){const{currentType:ee}=z;if(ee!==2)return!1;b(N);const le=N.currentPeek()===M1;return N.resetPeek(),le}function x(N,z){const{currentType:ee}=z;if(ee!==7)return!1;b(N);const le=N.currentPeek()===".";return N.resetPeek(),le}function w(N,z){const{currentType:ee}=z;if(ee!==8)return!1;b(N);const le=h(N.currentPeek());return N.resetPeek(),le}function $(N,z){const{currentType:ee}=z;if(!(ee===7||ee===11))return!1;b(N);const le=N.currentPeek()===":";return N.resetPeek(),le}function O(N,z){const{currentType:ee}=z;if(ee!==9)return!1;const le=()=>{const fe=N.currentPeek();return fe==="{"?h(N.peek()):fe==="@"||fe==="|"||fe===":"||fe==="."||fe===ls||!fe?!1:fe===Ln?(N.peek(),le()):G(N,!1)},ke=le();return N.resetPeek(),ke}function L(N){b(N);const z=N.currentPeek()==="|";return N.resetPeek(),z}function G(N,z=!0){const ee=(ke=!1,fe="")=>{const ce=N.currentPeek();return ce==="{"||ce==="@"||!ce?ke:ce==="|"?!(fe===ls||fe===Ln):ce===ls?(N.peek(),ee(!0,ls)):ce===Ln?(N.peek(),ee(!0,Ln)):!0},le=ee();return z&&N.resetPeek(),le}function j(N,z){const ee=N.currentChar();return ee===Es?Es:z(ee)?(N.next(),ee):null}function D(N){const z=N.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===95||z===36}function re(N){return j(N,D)}function Z(N){const z=N.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===95||z===36||z===45}function te(N){return j(N,Z)}function ie(N){const z=N.charCodeAt(0);return z>=48&&z<=57}function ne(N){return j(N,ie)}function ve(N){const z=N.charCodeAt(0);return z>=48&&z<=57||z>=65&&z<=70||z>=97&&z<=102}function Me(N){return j(N,ve)}function W(N){let z="",ee="";for(;z=ne(N);)ee+=z;return ee}function R(N){let z="";for(;;){const ee=N.currentChar();if(ee==="{"||ee==="}"||ee==="@"||ee==="|"||!ee)break;if(ee===ls||ee===Ln)if(G(N))z+=ee,N.next();else{if(L(N))break;z+=ee,N.next()}else z+=ee,N.next()}return z}function J(N){E(N);let z="",ee="";for(;z=te(N);)ee+=z;const le=N.currentChar();if(le&&le!=="}"&&le!==Es&&le!==ls&&le!==Ln&&le!==""){const ke=xe(N);return d(dr.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,ee+ke),ee+ke}return N.currentChar()===Es&&d(dr.UNTERMINATED_CLOSING_BRACE,s(),0),ee}function U(N){E(N);let z="";return N.currentChar()==="-"?(N.next(),z+=`-${W(N)}`):z+=W(N),N.currentChar()===Es&&d(dr.UNTERMINATED_CLOSING_BRACE,s(),0),z}function be(N){return N!==M1&&N!==Ln}function Le(N){E(N),m(N,"'");let z="",ee="";for(;z=j(N,be);)z==="\\"?ee+=de(N):ee+=z;const le=N.currentChar();return le===Ln||le===Es?(d(dr.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),le===Ln&&(N.next(),m(N,"'")),ee):(m(N,"'"),ee)}function de(N){const z=N.currentChar();switch(z){case"\\":case"'":return N.next(),`\\${z}`;case"u":return Te(N,z,4);case"U":return Te(N,z,6);default:return d(dr.UNKNOWN_ESCAPE_SEQUENCE,s(),0,z),""}}function Te(N,z,ee){m(N,z);let le="";for(let ke=0;ke<ee;ke++){const fe=Me(N);if(!fe){d(dr.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${z}${le}${N.currentChar()}`);break}le+=fe}return`\\${z}${le}`}function Pe(N){return N!=="{"&&N!=="}"&&N!==ls&&N!==Ln}function xe(N){E(N);let z="",ee="";for(;z=j(N,Pe);)ee+=z;return ee}function Y(N){let z="",ee="";for(;z=re(N);)ee+=z;return ee}function B(N){const z=ee=>{const le=N.currentChar();return le==="{"||le==="@"||le==="|"||le==="("||le===")"||!le||le===ls?ee:(ee+=le,N.next(),z(ee))};return z("")}function I(N){E(N);const z=m(N,"|");return E(N),z}function q(N,z){let ee=null;switch(N.currentChar()){case"{":return z.braceNest>=1&&d(dr.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),N.next(),ee=f(z,2,"{"),E(N),z.braceNest++,ee;case"}":return z.braceNest>0&&z.currentType===2&&d(dr.EMPTY_PLACEHOLDER,s(),0),N.next(),ee=f(z,3,"}"),z.braceNest--,z.braceNest>0&&E(N),z.inLinked&&z.braceNest===0&&(z.inLinked=!1),ee;case"@":return z.braceNest>0&&d(dr.UNTERMINATED_CLOSING_BRACE,s(),0),ee=pe(N,z)||p(z),z.braceNest=0,ee;default:{let ke=!0,fe=!0,ce=!0;if(L(N))return z.braceNest>0&&d(dr.UNTERMINATED_CLOSING_BRACE,s(),0),ee=f(z,1,I(N)),z.braceNest=0,z.inLinked=!1,ee;if(z.braceNest>0&&(z.currentType===4||z.currentType===5||z.currentType===6))return d(dr.UNTERMINATED_CLOSING_BRACE,s(),0),z.braceNest=0,ue(N,z);if(ke=T(N,z))return ee=f(z,4,J(N)),E(N),ee;if(fe=g(N,z))return ee=f(z,5,U(N)),E(N),ee;if(ce=M(N,z))return ee=f(z,6,Le(N)),E(N),ee;if(!ke&&!fe&&!ce)return ee=f(z,12,xe(N)),d(dr.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,ee.value),E(N),ee;break}}return ee}function pe(N,z){const{currentType:ee}=z;let le=null;const ke=N.currentChar();switch((ee===7||ee===8||ee===11||ee===9)&&(ke===Ln||ke===ls)&&d(dr.INVALID_LINKED_FORMAT,s(),0),ke){case"@":return N.next(),le=f(z,7,"@"),z.inLinked=!0,le;case".":return E(N),N.next(),f(z,8,".");case":":return E(N),N.next(),f(z,9,":");default:return L(N)?(le=f(z,1,I(N)),z.braceNest=0,z.inLinked=!1,le):x(N,z)||$(N,z)?(E(N),pe(N,z)):w(N,z)?(E(N),f(z,11,Y(N))):O(N,z)?(E(N),ke==="{"?q(N,z)||le:f(z,10,B(N))):(ee===7&&d(dr.INVALID_LINKED_FORMAT,s(),0),z.braceNest=0,z.inLinked=!1,ue(N,z))}}function ue(N,z){let ee={type:13};if(z.braceNest>0)return q(N,z)||p(z);if(z.inLinked)return pe(N,z)||p(z);switch(N.currentChar()){case"{":return q(N,z)||p(z);case"}":return d(dr.UNBALANCED_CLOSING_BRACE,s(),0),N.next(),f(z,3,"}");case"@":return pe(N,z)||p(z);default:{if(L(N))return ee=f(z,1,I(N)),z.braceNest=0,z.inLinked=!1,ee;if(G(N))return f(z,0,R(N));break}}return ee}function oe(){const{currentType:N,offset:z,startLoc:ee,endLoc:le}=l;return l.lastType=N,l.lastOffset=z,l.lastStartLoc=ee,l.lastEndLoc=le,l.offset=o(),l.startLoc=s(),n.currentChar()===Es?f(l,13):ue(n,l)}return{nextToken:oe,currentOffset:o,currentPosition:s,context:c}}const _F="parser",bF=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function vF(e,t,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(t||r,16);return n<=55295||n>=57344?String.fromCodePoint(n):""}}}function yF(e={}){const t=e.location!==!1,{onError:r}=e;function n(h,_,T,g,...M){const x=h.currentPosition();if(x.offset+=g,x.column+=g,r){const w=t?Lh(T,x):null,$=Tf(_,w,{domain:_F,args:M});r($)}}function o(h,_,T){const g={type:h};return t&&(g.start=_,g.end=_,g.loc={start:T,end:T}),g}function s(h,_,T,g){t&&(h.end=_,h.loc&&(h.loc.end=T))}function i(h,_){const T=h.context(),g=o(3,T.offset,T.startLoc);return g.value=_,s(g,h.currentOffset(),h.currentPosition()),g}function a(h,_){const T=h.context(),{lastOffset:g,lastStartLoc:M}=T,x=o(5,g,M);return x.index=parseInt(_,10),h.nextToken(),s(x,h.currentOffset(),h.currentPosition()),x}function l(h,_){const T=h.context(),{lastOffset:g,lastStartLoc:M}=T,x=o(4,g,M);return x.key=_,h.nextToken(),s(x,h.currentOffset(),h.currentPosition()),x}function c(h,_){const T=h.context(),{lastOffset:g,lastStartLoc:M}=T,x=o(9,g,M);return x.value=_.replace(bF,vF),h.nextToken(),s(x,h.currentOffset(),h.currentPosition()),x}function u(h){const _=h.nextToken(),T=h.context(),{lastOffset:g,lastStartLoc:M}=T,x=o(8,g,M);return _.type!==11?(n(h,dr.UNEXPECTED_EMPTY_LINKED_MODIFIER,T.lastStartLoc,0),x.value="",s(x,g,M),{nextConsumeToken:_,node:x}):(_.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,cs(_)),x.value=_.value||"",s(x,h.currentOffset(),h.currentPosition()),{node:x})}function d(h,_){const T=h.context(),g=o(7,T.offset,T.startLoc);return g.value=_,s(g,h.currentOffset(),h.currentPosition()),g}function f(h){const _=h.context(),T=o(6,_.offset,_.startLoc);let g=h.nextToken();if(g.type===8){const M=u(h);T.modifier=M.node,g=M.nextConsumeToken||h.nextToken()}switch(g.type!==9&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(g)),g=h.nextToken(),g.type===2&&(g=h.nextToken()),g.type){case 10:g.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(g)),T.key=d(h,g.value||"");break;case 4:g.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(g)),T.key=l(h,g.value||"");break;case 5:g.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(g)),T.key=a(h,g.value||"");break;case 6:g.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(g)),T.key=c(h,g.value||"");break;default:{n(h,dr.UNEXPECTED_EMPTY_LINKED_KEY,_.lastStartLoc,0);const M=h.context(),x=o(7,M.offset,M.startLoc);return x.value="",s(x,M.offset,M.startLoc),T.key=x,s(T,M.offset,M.startLoc),{nextConsumeToken:g,node:T}}}return s(T,h.currentOffset(),h.currentPosition()),{node:T}}function p(h){const _=h.context(),T=_.currentType===1?h.currentOffset():_.offset,g=_.currentType===1?_.endLoc:_.startLoc,M=o(2,T,g);M.items=[];let x=null;do{const O=x||h.nextToken();switch(x=null,O.type){case 0:O.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(O)),M.items.push(i(h,O.value||""));break;case 5:O.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(O)),M.items.push(a(h,O.value||""));break;case 4:O.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(O)),M.items.push(l(h,O.value||""));break;case 6:O.value==null&&n(h,dr.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,cs(O)),M.items.push(c(h,O.value||""));break;case 7:{const L=f(h);M.items.push(L.node),x=L.nextConsumeToken||null;break}}}while(_.currentType!==13&&_.currentType!==1);const w=_.currentType===1?_.lastOffset:h.currentOffset(),$=_.currentType===1?_.lastEndLoc:h.currentPosition();return s(M,w,$),M}function m(h,_,T,g){const M=h.context();let x=g.items.length===0;const w=o(1,_,T);w.cases=[],w.cases.push(g);do{const $=p(h);x||(x=$.items.length===0),w.cases.push($)}while(M.currentType!==13);return x&&n(h,dr.MUST_HAVE_MESSAGES_IN_PLURAL,T,0),s(w,h.currentOffset(),h.currentPosition()),w}function b(h){const _=h.context(),{offset:T,startLoc:g}=_,M=p(h);return _.currentType===13?M:m(h,T,g,M)}function E(h){const _=gF(h,_n({},e)),T=_.context(),g=o(0,T.offset,T.startLoc);return t&&g.loc&&(g.loc.source=h),g.body=b(_),e.onCacheKey&&(g.cacheKey=e.onCacheKey(h)),T.currentType!==13&&n(_,dr.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,h[T.offset]||""),s(g,_.currentOffset(),_.currentPosition()),g}return{parse:E}}function cs(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function wF(e,t={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:s=>(r.helpers.add(s),s)}}function x1(e,t){for(let r=0;r<e.length;r++)t_(e[r],t)}function t_(e,t){switch(e.type){case 1:x1(e.cases,t),t.helper("plural");break;case 2:x1(e.items,t);break;case 6:{t_(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function MF(e,t={}){const r=wF(e);r.helper("normalize"),e.body&&t_(e.body,r);const n=r.context();e.helpers=Array.from(n.helpers)}function xF(e){const t=e.body;return t.type===2?T1(t):t.cases.forEach(r=>T1(r)),e}function T1(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let r=0;r<e.items.length;r++){const n=e.items[r];if(!(n.type===3||n.type===9)||n.value==null)break;t.push(n.value)}if(t.length===e.items.length){e.static=e_(t);for(let r=0;r<e.items.length;r++){const n=e.items[r];(n.type===3||n.type===9)&&delete n.value}}}}function La(e){switch(e.t=e.type,e.type){case 0:{const t=e;La(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,r=t.cases;for(let n=0;n<r.length;n++)La(r[n]);t.c=r,delete t.cases;break}case 2:{const t=e,r=t.items;for(let n=0;n<r.length;n++)La(r[n]);t.i=r,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;La(t.key),t.k=t.key,delete t.key,t.modifier&&(La(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function TF(e,t){const{filename:r,breakLineCode:n,needIndent:o}=t,s=t.location!==!1,i={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:o,indentLevel:0};s&&e.loc&&(i.source=e.loc.source);const a=()=>i;function l(b,E){i.code+=b}function c(b,E=!0){const h=E?n:"";l(o?h+"  ".repeat(b):h)}function u(b=!0){const E=++i.indentLevel;b&&c(E)}function d(b=!0){const E=--i.indentLevel;b&&c(E)}function f(){c(i.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:f,helper:b=>`_${b}`,needIndent:()=>i.needIndent}}function CF(e,t){const{helper:r}=e;e.push(`${r("linked")}(`),Qa(e,t.key),t.modifier?(e.push(", "),Qa(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function kF(e,t){const{helper:r,needIndent:n}=e;e.push(`${r("normalize")}([`),e.indent(n());const o=t.items.length;for(let s=0;s<o&&(Qa(e,t.items[s]),s!==o-1);s++)e.push(", ");e.deindent(n()),e.push("])")}function EF(e,t){const{helper:r,needIndent:n}=e;if(t.cases.length>1){e.push(`${r("plural")}([`),e.indent(n());const o=t.cases.length;for(let s=0;s<o&&(Qa(e,t.cases[s]),s!==o-1);s++)e.push(", ");e.deindent(n()),e.push("])")}}function PF(e,t){t.body?Qa(e,t.body):e.push("null")}function Qa(e,t){const{helper:r}=e;switch(t.type){case 0:PF(e,t);break;case 1:EF(e,t);break;case 2:kF(e,t);break;case 6:CF(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${t.index}))`,t);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const $F=(e,t={})=>{const r=ct(t.mode)?t.mode:"normal",n=ct(t.filename)?t.filename:"message.intl";t.sourceMap;const o=t.breakLineCode!=null?t.breakLineCode:r==="arrow"?";":`
`,s=t.needIndent?t.needIndent:r!=="arrow",i=e.helpers||[],a=TF(e,{filename:n,breakLineCode:o,needIndent:s});a.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(s),i.length>0&&(a.push(`const { ${e_(i.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),Qa(a,e),a.deindent(s),a.push("}"),delete e.helpers;const{code:l,map:c}=a.context();return{ast:e,code:l,map:c?c.toJSON():void 0}};function SF(e,t={}){const r=_n({},t),n=!!r.jit,o=!!r.minify,s=r.optimize==null?!0:r.optimize,a=yF(r).parse(e);return n?(s&&xF(a),o&&La(a),{ast:a,code:""}):(MF(a,r),$F(a,r))}/*!
  * core-base v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function IF(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Qi().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Qi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function bs(e){return lr(e)&&r_(e)===0&&(Go(e,"b")||Go(e,"body"))}const c2=["b","body"];function AF(e){return _i(e,c2)}const d2=["c","cases"];function OF(e){return _i(e,d2,[])}const u2=["s","static"];function LF(e){return _i(e,u2)}const f2=["i","items"];function FF(e){return _i(e,f2,[])}const p2=["t","type"];function r_(e){return _i(e,p2)}const m2=["v","value"];function cu(e,t){const r=_i(e,m2);if(r!=null)return r;throw Cc(t)}const h2=["m","modifier"];function DF(e){return _i(e,h2)}const g2=["k","key"];function BF(e){const t=_i(e,g2);if(t)return t;throw Cc(6)}function _i(e,t,r){for(let n=0;n<t.length;n++){const o=t[n];if(Go(e,o)&&e[o]!=null)return e[o]}return r}const _2=[...c2,...d2,...u2,...f2,...g2,...h2,...m2,...p2];function Cc(e){return new Error(`unhandled node type: ${e}`)}function dm(e){return r=>RF(r,e)}function RF(e,t){const r=AF(t);if(r==null)throw Cc(0);if(r_(r)===1){const s=OF(r);return e.plural(s.reduce((i,a)=>[...i,C1(e,a)],[]))}else return C1(e,r)}function C1(e,t){const r=LF(t);if(r!=null)return e.type==="text"?r:e.normalize([r]);{const n=FF(t).reduce((o,s)=>[...o,Fh(e,s)],[]);return e.normalize(n)}}function Fh(e,t){const r=r_(t);switch(r){case 3:return cu(t,r);case 9:return cu(t,r);case 4:{const n=t;if(Go(n,"k")&&n.k)return e.interpolate(e.named(n.k));if(Go(n,"key")&&n.key)return e.interpolate(e.named(n.key));throw Cc(r)}case 5:{const n=t;if(Go(n,"i")&&pn(n.i))return e.interpolate(e.list(n.i));if(Go(n,"index")&&pn(n.index))return e.interpolate(e.list(n.index));throw Cc(r)}case 6:{const n=t,o=DF(n),s=BF(n);return e.linked(Fh(e,s),o?Fh(e,o):void 0,e.type)}case 7:return cu(t,r);case 8:return cu(t,r);default:throw new Error(`unhandled node on format message part: ${r}`)}}const zF=e=>e;let du=Mr();function NF(e,t={}){let r=!1;const n=t.onError||cF;return t.onError=o=>{r=!0,n(o)},{...SF(e,t),detectError:r}}function jF(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&ct(e)){sr(t.warnHtmlMessage)&&t.warnHtmlMessage;const n=(t.onCacheKey||zF)(e),o=du[n];if(o)return o;const{ast:s,detectError:i}=NF(e,{...t,location:!1,jit:!0}),a=dm(s);return i?a:du[n]=a}else{const r=e.cacheKey;if(r){const n=du[r];return n||(du[r]=dm(e))}else return dm(e)}}let kc=null;function VF(e){kc=e}function WF(e,t,r){kc&&kc.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:r})}const UF=GF("function:translate");function GF(e){return t=>kc&&kc.emit(e,t)}const Bs={INVALID_ARGUMENT:lF,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},HF=24;function Rs(e){return Tf(e,null,void 0)}function n_(e,t){return t.locale!=null?k1(t.locale):k1(e.locale)}let um;function k1(e){if(ct(e))return e;if(Rr(e)){if(e.resolvedOnce&&um!=null)return um;if(e.constructor.name==="Function"){const t=e();if(sF(t))throw Rs(Bs.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return um=t}else throw Rs(Bs.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Rs(Bs.NOT_SUPPORT_LOCALE_TYPE)}function KF(e,t,r){return[...new Set([r,...en(t)?t:lr(t)?Object.keys(t):ct(t)?[t]:[r]])]}function b2(e,t,r){const n=ct(r)?r:Ec,o=e;o.__localeChainCache||(o.__localeChainCache=new Map);let s=o.__localeChainCache.get(n);if(!s){s=[];let i=[r];for(;en(i);)i=E1(s,i,t);const a=en(t)||!Gt(t)?t:t.default?t.default:null;i=ct(a)?[a]:a,en(i)&&E1(s,i,!1),o.__localeChainCache.set(n,s)}return s}function E1(e,t,r){let n=!0;for(let o=0;o<t.length&&sr(n);o++){const s=t[o];ct(s)&&(n=qF(e,t[o],r))}return n}function qF(e,t,r){let n;const o=t.split("-");do{const s=o.join("-");n=XF(e,s,r),o.splice(-1,1)}while(o.length&&n===!0);return n}function XF(e,t,r){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";const o=t.replace(/!/g,"");e.push(o),(en(r)||Gt(r))&&r[o]&&(n=r[o])}return n}const bi=[];bi[0]={w:[0],i:[3,0],"[":[4],o:[7]};bi[1]={w:[1],".":[2],"[":[4],o:[7]};bi[2]={w:[2],i:[3,0],0:[3,0]};bi[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};bi[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};bi[5]={"'":[4,0],o:8,l:[5,0]};bi[6]={'"':[4,0],o:8,l:[6,0]};const QF=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function YF(e){return QF.test(e)}function JF(e){const t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===r&&(t===34||t===39)?e.slice(1,-1):e}function ZF(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function eD(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:YF(t)?JF(t):"*"+t}function tD(e){const t=[];let r=-1,n=0,o=0,s,i,a,l,c,u,d;const f=[];f[0]=()=>{i===void 0?i=a:i+=a},f[1]=()=>{i!==void 0&&(t.push(i),i=void 0)},f[2]=()=>{f[0](),o++},f[3]=()=>{if(o>0)o--,n=4,f[0]();else{if(o=0,i===void 0||(i=eD(i),i===!1))return!1;f[1]()}};function p(){const m=e[r+1];if(n===5&&m==="'"||n===6&&m==='"')return r++,a="\\"+m,f[0](),!0}for(;n!==null;)if(r++,s=e[r],!(s==="\\"&&p())){if(l=ZF(s),d=bi[n],c=d[l]||d.l||8,c===8||(n=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(a=s,u()===!1))))return;if(n===7)return t}}const P1=new Map;function rD(e,t){return lr(e)?e[t]:null}function nD(e,t){if(!lr(e))return null;let r=P1.get(t);if(r||(r=tD(t),r&&P1.set(t,r)),!r)return null;const n=r.length;let o=e,s=0;for(;s<n;){const i=r[s];if(_2.includes(i)&&bs(o))return null;const a=o[i];if(a===void 0||Rr(o))return null;o=a,s++}return o}const oD="11.1.12",Cf=-1,Ec="en-US",$1="",S1=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function sD(){return{upper:(e,t)=>t==="text"&&ct(e)?e.toUpperCase():t==="vnode"&&lr(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&ct(e)?e.toLowerCase():t==="vnode"&&lr(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&ct(e)?S1(e):t==="vnode"&&lr(e)&&"__v_isVNode"in e?S1(e.children):e}}let v2;function iD(e){v2=e}let y2;function aD(e){y2=e}let w2;function lD(e){w2=e}let M2=null;const cD=e=>{M2=e},dD=()=>M2;let x2=null;const I1=e=>{x2=e},uD=()=>x2;let A1=0;function fD(e={}){const t=Rr(e.onWarn)?e.onWarn:JL,r=ct(e.version)?e.version:oD,n=ct(e.locale)||Rr(e.locale)?e.locale:Ec,o=Rr(n)?Ec:n,s=en(e.fallbackLocale)||Gt(e.fallbackLocale)||ct(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:o,i=Gt(e.messages)?e.messages:fm(o),a=Gt(e.datetimeFormats)?e.datetimeFormats:fm(o),l=Gt(e.numberFormats)?e.numberFormats:fm(o),c=_n(Mr(),e.modifiers,sD()),u=e.pluralRules||Mr(),d=Rr(e.missing)?e.missing:null,f=sr(e.missingWarn)||Xa(e.missingWarn)?e.missingWarn:!0,p=sr(e.fallbackWarn)||Xa(e.fallbackWarn)?e.fallbackWarn:!0,m=!!e.fallbackFormat,b=!!e.unresolving,E=Rr(e.postTranslation)?e.postTranslation:null,h=Gt(e.processor)?e.processor:null,_=sr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,T=!!e.escapeParameter,g=Rr(e.messageCompiler)?e.messageCompiler:v2,M=Rr(e.messageResolver)?e.messageResolver:y2||rD,x=Rr(e.localeFallbacker)?e.localeFallbacker:w2||KF,w=lr(e.fallbackContext)?e.fallbackContext:void 0,$=e,O=lr($.__datetimeFormatters)?$.__datetimeFormatters:new Map,L=lr($.__numberFormatters)?$.__numberFormatters:new Map,G=lr($.__meta)?$.__meta:{};A1++;const j={version:r,cid:A1,locale:n,fallbackLocale:s,messages:i,modifiers:c,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:p,fallbackFormat:m,unresolving:b,postTranslation:E,processor:h,warnHtmlMessage:_,escapeParameter:T,messageCompiler:g,messageResolver:M,localeFallbacker:x,fallbackContext:w,onWarn:t,__meta:G};return j.datetimeFormats=a,j.numberFormats=l,j.__datetimeFormatters=O,j.__numberFormatters=L,__INTLIFY_PROD_DEVTOOLS__&&WF(j,r,G),j}const fm=e=>({[e]:Mr()});function o_(e,t,r,n,o){const{missing:s,onWarn:i}=e;if(s!==null){const a=s(e,r,t,o);return ct(a)?a:t}else return t}function Ol(e,t,r){const n=e;n.__localeChainCache=new Map,e.localeFallbacker(e,r,t)}function pD(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function mD(e,t){const r=t.indexOf(e);if(r===-1)return!1;for(let n=r+1;n<t.length;n++)if(pD(e,t[n]))return!0;return!1}function O1(e,...t){const{datetimeFormats:r,unresolving:n,fallbackLocale:o,onWarn:s,localeFallbacker:i}=e,{__datetimeFormatters:a}=e,[l,c,u,d]=Dh(...t),f=sr(u.missingWarn)?u.missingWarn:e.missingWarn;sr(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const p=!!u.part,m=n_(e,u),b=i(e,o,m);if(!ct(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let E={},h,_=null;const T="datetime format";for(let x=0;x<b.length&&(h=b[x],E=r[h]||{},_=E[l],!Gt(_));x++)o_(e,l,h,f,T);if(!Gt(_)||!ct(h))return n?Cf:l;let g=`${h}__${l}`;xf(d)||(g=`${g}__${JSON.stringify(d)}`);let M=a.get(g);return M||(M=new Intl.DateTimeFormat(h,_n({},_,d)),a.set(g,M)),p?M.formatToParts(c):M.format(c)}const T2=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Dh(...e){const[t,r,n,o]=e,s=Mr();let i=Mr(),a;if(ct(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Rs(Bs.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw Rs(Bs.INVALID_ISO_DATE_ARGUMENT)}}else if(tF(t)){if(isNaN(t.getTime()))throw Rs(Bs.INVALID_DATE_ARGUMENT);a=t}else if(pn(t))a=t;else throw Rs(Bs.INVALID_ARGUMENT);return ct(r)?s.key=r:Gt(r)&&Object.keys(r).forEach(l=>{T2.includes(l)?i[l]=r[l]:s[l]=r[l]}),ct(n)?s.locale=n:Gt(n)&&(i=n),Gt(o)&&(i=o),[s.key||"",a,s,i]}function L1(e,t,r){const n=e;for(const o in r){const s=`${t}__${o}`;n.__datetimeFormatters.has(s)&&n.__datetimeFormatters.delete(s)}}function F1(e,...t){const{numberFormats:r,unresolving:n,fallbackLocale:o,onWarn:s,localeFallbacker:i}=e,{__numberFormatters:a}=e,[l,c,u,d]=Bh(...t),f=sr(u.missingWarn)?u.missingWarn:e.missingWarn;sr(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const p=!!u.part,m=n_(e,u),b=i(e,o,m);if(!ct(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let E={},h,_=null;const T="number format";for(let x=0;x<b.length&&(h=b[x],E=r[h]||{},_=E[l],!Gt(_));x++)o_(e,l,h,f,T);if(!Gt(_)||!ct(h))return n?Cf:l;let g=`${h}__${l}`;xf(d)||(g=`${g}__${JSON.stringify(d)}`);let M=a.get(g);return M||(M=new Intl.NumberFormat(h,_n({},_,d)),a.set(g,M)),p?M.formatToParts(c):M.format(c)}const C2=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Bh(...e){const[t,r,n,o]=e,s=Mr();let i=Mr();if(!pn(t))throw Rs(Bs.INVALID_ARGUMENT);const a=t;return ct(r)?s.key=r:Gt(r)&&Object.keys(r).forEach(l=>{C2.includes(l)?i[l]=r[l]:s[l]=r[l]}),ct(n)?s.locale=n:Gt(n)&&(i=n),Gt(o)&&(i=o),[s.key||"",a,s,i]}function D1(e,t,r){const n=e;for(const o in r){const s=`${t}__${o}`;n.__numberFormatters.has(s)&&n.__numberFormatters.delete(s)}}const hD=e=>e,gD=e=>"",_D="text",bD=e=>e.length===0?"":e_(e),vD=iF;function B1(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function yD(e){const t=pn(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(pn(e.named.count)||pn(e.named.n))?pn(e.named.count)?e.named.count:pn(e.named.n)?e.named.n:t:t}function wD(e,t){t.count||(t.count=e),t.n||(t.n=e)}function MD(e={}){const t=e.locale,r=yD(e),n=lr(e.pluralRules)&&ct(t)&&Rr(e.pluralRules[t])?e.pluralRules[t]:B1,o=lr(e.pluralRules)&&ct(t)&&Rr(e.pluralRules[t])?B1:void 0,s=h=>h[n(r,h.length,o)],i=e.list||[],a=h=>i[h],l=e.named||Mr();pn(e.pluralIndex)&&wD(r,l);const c=h=>l[h];function u(h,_){const T=Rr(e.messages)?e.messages(h,!!_):lr(e.messages)?e.messages[h]:!1;return T||(e.parent?e.parent.message(h):gD)}const d=h=>e.modifiers?e.modifiers[h]:hD,f=Gt(e.processor)&&Rr(e.processor.normalize)?e.processor.normalize:bD,p=Gt(e.processor)&&Rr(e.processor.interpolate)?e.processor.interpolate:vD,m=Gt(e.processor)&&ct(e.processor.type)?e.processor.type:_D,E={list:a,named:c,plural:s,linked:(h,..._)=>{const[T,g]=_;let M="text",x="";_.length===1?lr(T)?(x=T.modifier||x,M=T.type||M):ct(T)&&(x=T||x):_.length===2&&(ct(T)&&(x=T||x),ct(g)&&(M=g||M));const w=u(h,!0)(E),$=M==="vnode"&&en(w)&&x?w[0]:w;return x?d(x)($,M):$},message:u,type:m,interpolate:p,normalize:f,values:_n(Mr(),i,l)};return E}const R1=()=>"",wo=e=>Rr(e);function z1(e,...t){const{fallbackFormat:r,postTranslation:n,unresolving:o,messageCompiler:s,fallbackLocale:i,messages:a}=e,[l,c]=Rh(...t),u=sr(c.missingWarn)?c.missingWarn:e.missingWarn,d=sr(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,f=sr(c.escapeParameter)?c.escapeParameter:e.escapeParameter,p=!!c.resolvedMessage,m=ct(c.default)||sr(c.default)?sr(c.default)?s?l:()=>l:c.default:r?s?l:()=>l:null,b=r||m!=null&&(ct(m)||Rr(m)),E=n_(e,c);f&&xD(c);let[h,_,T]=p?[l,E,a[E]||Mr()]:k2(e,l,E,i,d,u),g=h,M=l;if(!p&&!(ct(g)||bs(g)||wo(g))&&b&&(g=m,M=g),!p&&(!(ct(g)||bs(g)||wo(g))||!ct(_)))return o?Cf:l;let x=!1;const w=()=>{x=!0},$=wo(g)?g:E2(e,l,_,g,M,w);if(x)return g;const O=kD(e,_,T,c),L=MD(O),G=TD(e,$,L);let j=n?n(G,l):G;if(f&&ct(j)&&(j=nF(j)),__INTLIFY_PROD_DEVTOOLS__){const D={timestamp:Date.now(),key:ct(l)?l:wo(g)?g.key:"",locale:_||(wo(g)?g.locale:""),format:ct(g)?g:wo(g)?g.source:"",message:j};D.meta=_n({},e.__meta,dD()||{}),UF(D)}return j}function xD(e){en(e.list)?e.list=e.list.map(t=>ct(t)?y1(t):t):lr(e.named)&&Object.keys(e.named).forEach(t=>{ct(e.named[t])&&(e.named[t]=y1(e.named[t]))})}function k2(e,t,r,n,o,s){const{messages:i,onWarn:a,messageResolver:l,localeFallbacker:c}=e,u=c(e,n,r);let d=Mr(),f,p=null;const m="translate";for(let b=0;b<u.length&&(f=u[b],d=i[f]||Mr(),(p=l(d,t))===null&&(p=d[t]),!(ct(p)||bs(p)||wo(p)));b++)if(!mD(f,u)){const E=o_(e,t,f,s,m);E!==t&&(p=E)}return[p,f,d]}function E2(e,t,r,n,o,s){const{messageCompiler:i,warnHtmlMessage:a}=e;if(wo(n)){const c=n;return c.locale=c.locale||r,c.key=c.key||t,c}if(i==null){const c=(()=>n);return c.locale=r,c.key=t,c}const l=i(n,CD(e,r,o,n,a,s));return l.locale=r,l.key=t,l.source=n,l}function TD(e,t,r){return t(r)}function Rh(...e){const[t,r,n]=e,o=Mr();if(!ct(t)&&!pn(t)&&!wo(t)&&!bs(t))throw Rs(Bs.INVALID_ARGUMENT);const s=pn(t)?String(t):(wo(t),t);return pn(r)?o.plural=r:ct(r)?o.default=r:Gt(r)&&!xf(r)?o.named=r:en(r)&&(o.list=r),pn(n)?o.plural=n:ct(n)?o.default=n:Gt(n)&&_n(o,n),[s,o]}function CD(e,t,r,n,o,s){return{locale:t,key:r,warnHtmlMessage:o,onError:i=>{throw s&&s(i),i},onCacheKey:i=>ZL(t,r,i)}}function kD(e,t,r,n){const{modifiers:o,pluralRules:s,messageResolver:i,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=e,f={locale:t,modifiers:o,pluralRules:s,messages:(p,m)=>{let b=i(r,p);if(b==null&&(u||m)){const[,,E]=k2(u||e,p,t,a,l,c);b=i(E,p)}if(ct(b)||bs(b)){let E=!1;const _=E2(e,p,t,b,p,()=>{E=!0});return E?R1:_}else return wo(b)?b:R1}};return e.processor&&(f.processor=e.processor),n.list&&(f.list=n.list),n.named&&(f.named=n.named),pn(n.plural)&&(f.pluralIndex=n.plural),f}IF();/*!
  * vue-i18n v11.1.12
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const ED="11.1.12";function PD(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Qi().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Qi().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Qi().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Qi().__INTLIFY_PROD_DEVTOOLS__=!1)}const ro={UNEXPECTED_RETURN_TYPE:HF,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function fo(e,...t){return Tf(e,null,void 0)}const zh=gi("__translateVNode"),Nh=gi("__datetimeParts"),jh=gi("__numberParts"),P2=gi("__setPluralRules"),$2=gi("__injectWithOption"),Vh=gi("__dispose");function Pc(e){if(!lr(e)||bs(e))return e;for(const t in e)if(Go(e,t))if(!t.includes("."))lr(e[t])&&Pc(e[t]);else{const r=t.split("."),n=r.length-1;let o=e,s=!1;for(let i=0;i<n;i++){if(r[i]==="__proto__")throw new Error(`unsafe key: ${r[i]}`);if(r[i]in o||(o[r[i]]=Mr()),!lr(o[r[i]])){s=!0;break}o=o[r[i]]}if(s||(bs(o)?_2.includes(r[n])||delete e[t]:(o[r[n]]=e[t],delete e[t])),!bs(o)){const i=o[r[n]];lr(i)&&Pc(i)}}return e}function s_(e,t){const{messages:r,__i18n:n,messageResolver:o,flatJson:s}=t,i=Gt(r)?r:en(n)?Mr():{[e]:Mr()};if(en(n)&&n.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(i[l]=i[l]||Mr(),Lu(c,i[l])):Lu(c,i)}else ct(a)&&Lu(JSON.parse(a),i)}),o==null&&s)for(const a in i)Go(i,a)&&Pc(i[a]);return i}function S2(e){return e.type}function I2(e,t,r){let n=lr(t.messages)?t.messages:Mr();"__i18nGlobal"in r&&(n=s_(e.locale.value,{messages:n,__i18n:r.__i18nGlobal}));const o=Object.keys(n);o.length&&o.forEach(s=>{e.mergeLocaleMessage(s,n[s])});{if(lr(t.datetimeFormats)){const s=Object.keys(t.datetimeFormats);s.length&&s.forEach(i=>{e.mergeDateTimeFormat(i,t.datetimeFormats[i])})}if(lr(t.numberFormats)){const s=Object.keys(t.numberFormats);s.length&&s.forEach(i=>{e.mergeNumberFormat(i,t.numberFormats[i])})}}}function N1(e){return Vt(ld,null,e,0)}const j1="__INTLIFY_META__",V1=()=>[],$D=()=>!1;let W1=0;function U1(e){return((t,r,n,o)=>e(r,n,Qo()||void 0,o))}const SD=()=>{const e=Qo();let t=null;return e&&(t=S2(e)[j1])?{[j1]:t}:null};function i_(e={}){const{__root:t,__injectWithOption:r}=e,n=t===void 0,o=e.flatJson,s=Qu?eo:dE;let i=sr(e.inheritLocale)?e.inheritLocale:!0;const a=s(t&&i?t.locale.value:ct(e.locale)?e.locale:Ec),l=s(t&&i?t.fallbackLocale.value:ct(e.fallbackLocale)||en(e.fallbackLocale)||Gt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a.value),c=s(s_(a.value,e)),u=s(Gt(e.datetimeFormats)?e.datetimeFormats:{[a.value]:{}}),d=s(Gt(e.numberFormats)?e.numberFormats:{[a.value]:{}});let f=t?t.missingWarn:sr(e.missingWarn)||Xa(e.missingWarn)?e.missingWarn:!0,p=t?t.fallbackWarn:sr(e.fallbackWarn)||Xa(e.fallbackWarn)?e.fallbackWarn:!0,m=t?t.fallbackRoot:sr(e.fallbackRoot)?e.fallbackRoot:!0,b=!!e.fallbackFormat,E=Rr(e.missing)?e.missing:null,h=Rr(e.missing)?U1(e.missing):null,_=Rr(e.postTranslation)?e.postTranslation:null,T=t?t.warnHtmlMessage:sr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,g=!!e.escapeParameter;const M=t?t.modifiers:Gt(e.modifiers)?e.modifiers:{};let x=e.pluralRules||t&&t.pluralRules,w;w=(()=>{n&&I1(null);const ce={version:ED,locale:a.value,fallbackLocale:l.value,messages:c.value,modifiers:M,pluralRules:x,missing:h===null?void 0:h,missingWarn:f,fallbackWarn:p,fallbackFormat:b,unresolving:!0,postTranslation:_===null?void 0:_,warnHtmlMessage:T,escapeParameter:g,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};ce.datetimeFormats=u.value,ce.numberFormats=d.value,ce.__datetimeFormatters=Gt(w)?w.__datetimeFormatters:void 0,ce.__numberFormatters=Gt(w)?w.__numberFormatters:void 0;const he=fD(ce);return n&&I1(he),he})(),Ol(w,a.value,l.value);function O(){return[a.value,l.value,c.value,u.value,d.value]}const L=Lr({get:()=>a.value,set:ce=>{w.locale=ce,a.value=ce}}),G=Lr({get:()=>l.value,set:ce=>{w.fallbackLocale=ce,l.value=ce,Ol(w,a.value,ce)}}),j=Lr(()=>c.value),D=Lr(()=>u.value),re=Lr(()=>d.value);function Z(){return Rr(_)?_:null}function te(ce){_=ce,w.postTranslation=ce}function ie(){return E}function ne(ce){ce!==null&&(h=U1(ce)),E=ce,w.missing=h}const ve=(ce,he,$e,Re,ze,Ge)=>{O();let Ke;try{__INTLIFY_PROD_DEVTOOLS__,n||(w.fallbackContext=t?uD():void 0),Ke=ce(w)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(w.fallbackContext=void 0)}if($e!=="translate exists"&&pn(Ke)&&Ke===Cf||$e==="translate exists"&&!Ke){const[vt,Tt]=he();return t&&m?Re(t):ze(vt)}else{if(Ge(Ke))return Ke;throw fo(ro.UNEXPECTED_RETURN_TYPE)}};function Me(...ce){return ve(he=>Reflect.apply(z1,null,[he,...ce]),()=>Rh(...ce),"translate",he=>Reflect.apply(he.t,he,[...ce]),he=>he,he=>ct(he))}function W(...ce){const[he,$e,Re]=ce;if(Re&&!lr(Re))throw fo(ro.INVALID_ARGUMENT);return Me(he,$e,_n({resolvedMessage:!0},Re||{}))}function R(...ce){return ve(he=>Reflect.apply(O1,null,[he,...ce]),()=>Dh(...ce),"datetime format",he=>Reflect.apply(he.d,he,[...ce]),()=>$1,he=>ct(he)||en(he))}function J(...ce){return ve(he=>Reflect.apply(F1,null,[he,...ce]),()=>Bh(...ce),"number format",he=>Reflect.apply(he.n,he,[...ce]),()=>$1,he=>ct(he)||en(he))}function U(ce){return ce.map(he=>ct(he)||pn(he)||sr(he)?N1(String(he)):he)}const Le={normalize:U,interpolate:ce=>ce,type:"vnode"};function de(...ce){return ve(he=>{let $e;const Re=he;try{Re.processor=Le,$e=Reflect.apply(z1,null,[Re,...ce])}finally{Re.processor=null}return $e},()=>Rh(...ce),"translate",he=>he[zh](...ce),he=>[N1(he)],he=>en(he))}function Te(...ce){return ve(he=>Reflect.apply(F1,null,[he,...ce]),()=>Bh(...ce),"number format",he=>he[jh](...ce),V1,he=>ct(he)||en(he))}function Pe(...ce){return ve(he=>Reflect.apply(O1,null,[he,...ce]),()=>Dh(...ce),"datetime format",he=>he[Nh](...ce),V1,he=>ct(he)||en(he))}function xe(ce){x=ce,w.pluralRules=x}function Y(ce,he){return ve(()=>{if(!ce)return!1;const $e=ct(he)?he:a.value,Re=q($e),ze=w.messageResolver(Re,ce);return bs(ze)||wo(ze)||ct(ze)},()=>[ce],"translate exists",$e=>Reflect.apply($e.te,$e,[ce,he]),$D,$e=>sr($e))}function B(ce){let he=null;const $e=b2(w,l.value,a.value);for(let Re=0;Re<$e.length;Re++){const ze=c.value[$e[Re]]||{},Ge=w.messageResolver(ze,ce);if(Ge!=null){he=Ge;break}}return he}function I(ce){const he=B(ce);return he??(t?t.tm(ce)||{}:{})}function q(ce){return c.value[ce]||{}}function pe(ce,he){if(o){const $e={[ce]:he};for(const Re in $e)Go($e,Re)&&Pc($e[Re]);he=$e[ce]}c.value[ce]=he,w.messages=c.value}function ue(ce,he){c.value[ce]=c.value[ce]||{};const $e={[ce]:he};if(o)for(const Re in $e)Go($e,Re)&&Pc($e[Re]);he=$e[ce],Lu(he,c.value[ce]),w.messages=c.value}function oe(ce){return u.value[ce]||{}}function N(ce,he){u.value[ce]=he,w.datetimeFormats=u.value,L1(w,ce,he)}function z(ce,he){u.value[ce]=_n(u.value[ce]||{},he),w.datetimeFormats=u.value,L1(w,ce,he)}function ee(ce){return d.value[ce]||{}}function le(ce,he){d.value[ce]=he,w.numberFormats=d.value,D1(w,ce,he)}function ke(ce,he){d.value[ce]=_n(d.value[ce]||{},he),w.numberFormats=d.value,D1(w,ce,he)}W1++,t&&Qu&&(Hn(t.locale,ce=>{i&&(a.value=ce,w.locale=ce,Ol(w,a.value,l.value))}),Hn(t.fallbackLocale,ce=>{i&&(l.value=ce,w.fallbackLocale=ce,Ol(w,a.value,l.value))}));const fe={id:W1,locale:L,fallbackLocale:G,get inheritLocale(){return i},set inheritLocale(ce){i=ce,ce&&t&&(a.value=t.locale.value,l.value=t.fallbackLocale.value,Ol(w,a.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:j,get modifiers(){return M},get pluralRules(){return x||{}},get isGlobal(){return n},get missingWarn(){return f},set missingWarn(ce){f=ce,w.missingWarn=f},get fallbackWarn(){return p},set fallbackWarn(ce){p=ce,w.fallbackWarn=p},get fallbackRoot(){return m},set fallbackRoot(ce){m=ce},get fallbackFormat(){return b},set fallbackFormat(ce){b=ce,w.fallbackFormat=b},get warnHtmlMessage(){return T},set warnHtmlMessage(ce){T=ce,w.warnHtmlMessage=ce},get escapeParameter(){return g},set escapeParameter(ce){g=ce,w.escapeParameter=ce},t:Me,getLocaleMessage:q,setLocaleMessage:pe,mergeLocaleMessage:ue,getPostTranslationHandler:Z,setPostTranslationHandler:te,getMissingHandler:ie,setMissingHandler:ne,[P2]:xe};return fe.datetimeFormats=D,fe.numberFormats=re,fe.rt=W,fe.te=Y,fe.tm=I,fe.d=R,fe.n=J,fe.getDateTimeFormat=oe,fe.setDateTimeFormat=N,fe.mergeDateTimeFormat=z,fe.getNumberFormat=ee,fe.setNumberFormat=le,fe.mergeNumberFormat=ke,fe[$2]=r,fe[zh]=de,fe[Nh]=Pe,fe[jh]=Te,fe}function ID(e){const t=ct(e.locale)?e.locale:Ec,r=ct(e.fallbackLocale)||en(e.fallbackLocale)||Gt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,n=Rr(e.missing)?e.missing:void 0,o=sr(e.silentTranslationWarn)||Xa(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=sr(e.silentFallbackWarn)||Xa(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,i=sr(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=Gt(e.modifiers)?e.modifiers:{},c=e.pluralizationRules,u=Rr(e.postTranslation)?e.postTranslation:void 0,d=ct(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,f=!!e.escapeParameterHtml,p=sr(e.sync)?e.sync:!0;let m=e.messages;if(Gt(e.sharedMessages)){const M=e.sharedMessages;m=Object.keys(M).reduce((w,$)=>{const O=w[$]||(w[$]={});return _n(O,M[$]),w},m||{})}const{__i18n:b,__root:E,__injectWithOption:h}=e,_=e.datetimeFormats,T=e.numberFormats,g=e.flatJson;return{locale:t,fallbackLocale:r,messages:m,flatJson:g,datetimeFormats:_,numberFormats:T,missing:n,missingWarn:o,fallbackWarn:s,fallbackRoot:i,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:d,escapeParameter:f,messageResolver:e.messageResolver,inheritLocale:p,__i18n:b,__root:E,__injectWithOption:h}}function Wh(e={}){const t=i_(ID(e)),{__extender:r}=e,n={id:t.id,get locale(){return t.locale.value},set locale(o){t.locale.value=o},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(o){t.fallbackLocale.value=o},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(o){t.setMissingHandler(o)},get silentTranslationWarn(){return sr(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(o){t.missingWarn=sr(o)?!o:o},get silentFallbackWarn(){return sr(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(o){t.fallbackWarn=sr(o)?!o:o},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(o){t.fallbackFormat=o},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(o){t.setPostTranslationHandler(o)},get sync(){return t.inheritLocale},set sync(o){t.inheritLocale=o},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){t.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(o){t.escapeParameter=o},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...o){return Reflect.apply(t.t,t,[...o])},rt(...o){return Reflect.apply(t.rt,t,[...o])},te(o,s){return t.te(o,s)},tm(o){return t.tm(o)},getLocaleMessage(o){return t.getLocaleMessage(o)},setLocaleMessage(o,s){t.setLocaleMessage(o,s)},mergeLocaleMessage(o,s){t.mergeLocaleMessage(o,s)},d(...o){return Reflect.apply(t.d,t,[...o])},getDateTimeFormat(o){return t.getDateTimeFormat(o)},setDateTimeFormat(o,s){t.setDateTimeFormat(o,s)},mergeDateTimeFormat(o,s){t.mergeDateTimeFormat(o,s)},n(...o){return Reflect.apply(t.n,t,[...o])},getNumberFormat(o){return t.getNumberFormat(o)},setNumberFormat(o,s){t.setNumberFormat(o,s)},mergeNumberFormat(o,s){t.mergeNumberFormat(o,s)}};return n.__extender=r,n}function AD(e,t,r){return{beforeCreate(){const n=Qo();if(!n)throw fo(ro.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const s=o.i18n;if(o.__i18n&&(s.__i18n=o.__i18n),s.__root=t,this===this.$root)this.$i18n=G1(e,s);else{s.__injectWithOption=!0,s.__extender=r.__vueI18nExtend,this.$i18n=Wh(s);const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}}else if(o.__i18n)if(this===this.$root)this.$i18n=G1(e,o);else{this.$i18n=Wh({__i18n:o.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:t});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=e;o.__i18nGlobal&&I2(t,o,o),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$te=(s,i)=>this.$i18n.te(s,i),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),r.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const n=Qo();if(!n)throw fo(ro.UNEXPECTED_ERROR);const o=this.$i18n;delete this.$t,delete this.$rt,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,o.__disposer&&(o.__disposer(),delete o.__disposer,delete o.__extender),r.__deleteInstance(n),delete this.$i18n}}}function G1(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[P2](t.pluralizationRules||e.pluralizationRules);const r=s_(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(r).forEach(n=>e.mergeLocaleMessage(n,r[n])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n])),t.numberFormats&&Object.keys(t.numberFormats).forEach(n=>e.mergeNumberFormat(n,t.numberFormats[n])),e}const a_={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function OD({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((n,o)=>[...n,...o.type===pr?o.children:[o]],[]):t.reduce((r,n)=>{const o=e[n];return o&&(r[n]=o()),r},Mr())}function A2(){return pr}const LD=Vs({name:"i18n-t",props:_n({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>pn(e)||!isNaN(e)}},a_),setup(e,t){const{slots:r,attrs:n}=t,o=e.i18n||vi({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(r).filter(d=>d[0]!=="_"),i=Mr();e.locale&&(i.locale=e.locale),e.plural!==void 0&&(i.plural=ct(e.plural)?+e.plural:e.plural);const a=OD(t,s),l=o[zh](e.keypath,a,i),c=_n(Mr(),n),u=ct(e.tag)||lr(e.tag)?e.tag:A2();return dd(u,c,l)}}}),H1=LD;function FD(e){return en(e)&&!ct(e[0])}function O2(e,t,r,n){const{slots:o,attrs:s}=t;return()=>{const i={part:!0};let a=Mr();e.locale&&(i.locale=e.locale),ct(e.format)?i.key=e.format:lr(e.format)&&(ct(e.format.key)&&(i.key=e.format.key),a=Object.keys(e.format).reduce((f,p)=>r.includes(p)?_n(Mr(),f,{[p]:e.format[p]}):f,Mr()));const l=n(e.value,i,a);let c=[i.key];en(l)?c=l.map((f,p)=>{const m=o[f.type],b=m?m({[f.type]:f.value,index:p,parts:l}):[f.value];return FD(b)&&(b[0].key=`${f.type}-${p}`),b}):ct(l)&&(c=[l]);const u=_n(Mr(),s),d=ct(e.tag)||lr(e.tag)?e.tag:A2();return dd(d,u,c)}}const DD=Vs({name:"i18n-n",props:_n({value:{type:Number,required:!0},format:{type:[String,Object]}},a_),setup(e,t){const r=e.i18n||vi({useScope:e.scope,__useComponent:!0});return O2(e,t,C2,(...n)=>r[jh](...n))}}),K1=DD;function BD(e,t){const r=e;if(e.mode==="composition")return r.__getInstance(t)||e.global;{const n=r.__getInstance(t);return n!=null?n.__composer:e.global.__composer}}function RD(e){const t=i=>{const{instance:a,value:l}=i;if(!a||!a.$)throw fo(ro.UNEXPECTED_ERROR);const c=BD(e,a.$),u=q1(l);return[Reflect.apply(c.t,c,[...X1(u)]),c]};return{created:(i,a)=>{const[l,c]=t(a);Qu&&e.global===c&&(i.__i18nWatcher=Hn(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),i.__composer=c,i.textContent=l},unmounted:i=>{Qu&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:a})=>{if(i.__composer){const l=i.__composer,c=q1(a);i.textContent=Reflect.apply(l.t,l,[...X1(c)])}},getSSRProps:i=>{const[a]=t(i);return{textContent:a}}}}function q1(e){if(ct(e))return{path:e};if(Gt(e)){if(!("path"in e))throw fo(ro.REQUIRED_VALUE,"path");return e}else throw fo(ro.INVALID_VALUE)}function X1(e){const{path:t,locale:r,args:n,choice:o,plural:s}=e,i={},a=n||{};return ct(r)&&(i.locale=r),pn(o)&&(i.plural=o),pn(s)&&(i.plural=s),[t,a,i]}function zD(e,t,...r){const n=Gt(r[0])?r[0]:{};(sr(n.globalInstall)?n.globalInstall:!0)&&([H1.name,"I18nT"].forEach(s=>e.component(s,H1)),[K1.name,"I18nN"].forEach(s=>e.component(s,K1)),[Y1.name,"I18nD"].forEach(s=>e.component(s,Y1))),e.directive("t",RD(t))}const ND=gi("global-vue-i18n");function jD(e={}){const t=__VUE_I18N_LEGACY_API__&&sr(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,r=sr(e.globalInjection)?e.globalInjection:!0,n=new Map,[o,s]=VD(e,t),i=gi("");function a(d){return n.get(d)||null}function l(d,f){n.set(d,f)}function c(d){n.delete(d)}const u={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(d,...f){if(d.__VUE_I18N_SYMBOL__=i,d.provide(d.__VUE_I18N_SYMBOL__,u),Gt(f[0])){const b=f[0];u.__composerExtend=b.__composerExtend,u.__vueI18nExtend=b.__vueI18nExtend}let p=null;!t&&r&&(p=QD(d,u.global)),__VUE_I18N_FULL_INSTALL__&&zD(d,u,...f),__VUE_I18N_LEGACY_API__&&t&&d.mixin(AD(s,s.__composer,u));const m=d.unmount;d.unmount=()=>{p&&p(),u.dispose(),m()}},get global(){return s},dispose(){o.stop()},__instances:n,__getInstance:a,__setInstance:l,__deleteInstance:c};return u}function vi(e={}){const t=Qo();if(t==null)throw fo(ro.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw fo(ro.NOT_INSTALLED);const r=WD(t),n=GD(r),o=S2(t),s=UD(e,o);if(s==="global")return I2(n,e,o),n;if(s==="parent"){let l=HD(r,t,e.__useComponent);return l==null&&(l=n),l}const i=r;let a=i.__getInstance(t);if(a==null){const l=_n({},e);"__i18n"in o&&(l.__i18n=o.__i18n),n&&(l.__root=n),a=i_(l),i.__composerExtend&&(a[Vh]=i.__composerExtend(a)),qD(i,t,a),i.__setInstance(t,a)}return a}function VD(e,t){const r=Kk(),n=__VUE_I18N_LEGACY_API__&&t?r.run(()=>Wh(e)):r.run(()=>i_(e));if(n==null)throw fo(ro.UNEXPECTED_ERROR);return[r,n]}function WD(e){const t=To(e.isCE?ND:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw fo(e.isCE?ro.NOT_INSTALLED_WITH_PROVIDE:ro.UNEXPECTED_ERROR);return t}function UD(e,t){return xf(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function GD(e){return e.mode==="composition"?e.global:e.global.__composer}function HD(e,t,r=!1){let n=null;const o=t.root;let s=KD(t,r);for(;s!=null;){const i=e;if(e.mode==="composition")n=i.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const a=i.__getInstance(s);a!=null&&(n=a.__composer,r&&n&&!n[$2]&&(n=null))}if(n!=null||o===s)break;s=s.parent}return n}function KD(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function qD(e,t,r){id(()=>{},t),Gg(()=>{const n=r;e.__deleteInstance(t);const o=n[Vh];o&&(o(),delete n[Vh])},t)}const XD=["locale","fallbackLocale","availableLocales"],Q1=["t","rt","d","n","tm","te"];function QD(e,t){const r=Object.create(null);return XD.forEach(o=>{const s=Object.getOwnPropertyDescriptor(t,o);if(!s)throw fo(ro.UNEXPECTED_ERROR);const i=gn(s.value)?{get(){return s.value.value},set(a){s.value.value=a}}:{get(){return s.get&&s.get()}};Object.defineProperty(r,o,i)}),e.config.globalProperties.$i18n=r,Q1.forEach(o=>{const s=Object.getOwnPropertyDescriptor(t,o);if(!s||!s.value)throw fo(ro.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${o}`,s)}),()=>{delete e.config.globalProperties.$i18n,Q1.forEach(o=>{delete e.config.globalProperties[`$${o}`]})}}const YD=Vs({name:"i18n-d",props:_n({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},a_),setup(e,t){const r=e.i18n||vi({useScope:e.scope,__useComponent:!0});return O2(e,t,T2,(...n)=>r[Nh](...n))}}),Y1=YD;PD();iD(jF);aD(nD);lD(b2);if(__INTLIFY_PROD_DEVTOOLS__){const e=Qi();e.__INTLIFY__=!0,VF(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var JD=Object.defineProperty,J1=Object.getOwnPropertySymbols,ZD=Object.prototype.hasOwnProperty,e4=Object.prototype.propertyIsEnumerable,Z1=(e,t,r)=>t in e?JD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,t4=(e,t)=>{for(var r in t||(t={}))ZD.call(t,r)&&Z1(e,r,t[r]);if(J1)for(var r of J1(t))e4.call(t,r)&&Z1(e,r,t[r]);return e};function yi(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!(e instanceof Date)&&typeof e=="object"&&Object.keys(e).length===0}function l_(e){return typeof e=="function"&&"call"in e&&"apply"in e}function Er(e){return!yi(e)}function vs(e,t=!0){return e instanceof Object&&e.constructor===Object&&(t||Object.keys(e).length!==0)}function L2(e={},t={}){let r=t4({},e);return Object.keys(t).forEach(n=>{let o=n;vs(t[o])&&o in e&&vs(e[o])?r[o]=L2(e[o],t[o]):r[o]=t[o]}),r}function r4(...e){return e.reduce((t,r,n)=>n===0?r:L2(t,r),{})}function Zn(e,...t){return l_(e)?e(...t):e}function to(e,t=!0){return typeof e=="string"&&(t||e!=="")}function hs(e){return to(e)?e.replace(/(-|_)/g,"").toLowerCase():e}function c_(e,t="",r={}){let n=hs(t).split("."),o=n.shift();if(o){if(vs(e)){let s=Object.keys(e).find(i=>hs(i)===o)||"";return c_(Zn(e[s],r),n.join("."),r)}return}return Zn(e,r)}function F2(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}function n4(e){return Er(e)&&!isNaN(e)}function Zi(e,t){if(t){let r=t.test(e);return t.lastIndex=0,r}return!1}function o4(...e){return r4(...e)}function uc(e){return e&&e.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":").trim()}function s4(e){return to(e,!1)?e[0].toUpperCase()+e.slice(1):e}function D2(e){return to(e)?e.replace(/(_)/g,"-").replace(/[A-Z]/g,(t,r)=>r===0?t:"-"+t.toLowerCase()).toLowerCase():e}function kf(){let e=new Map;return{on(t,r){let n=e.get(t);return n?n.push(r):n=[r],e.set(t,n),this},off(t,r){let n=e.get(t);return n&&n.splice(n.indexOf(r)>>>0,1),this},emit(t,r){let n=e.get(t);n&&n.forEach(o=>{o(r)})},clear(){e.clear()}}}function Kn(...e){if(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(!n)continue;let o=typeof n;if(o==="string"||o==="number")t.push(n);else if(o==="object"){let s=Array.isArray(n)?[Kn(...n)]:Object.entries(n).map(([i,a])=>a?i:void 0);t=s.length?t.concat(s.filter(i=>!!i)):t}}return t.join(" ").trim()}}function i4(e,t){return e?e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className):!1}function $c(e,t){if(e&&t){let r=n=>{i4(e,n)||(e.classList?e.classList.add(n):e.className+=" "+n)};[t].flat().filter(Boolean).forEach(n=>n.split(" ").forEach(r))}}function a4(){return window.innerWidth-document.documentElement.offsetWidth}function l4(e){typeof e=="string"?$c(document.body,e||"p-overflow-hidden"):(e!=null&&e.variableName&&document.body.style.setProperty(e.variableName,a4()+"px"),$c(document.body,e?.className||"p-overflow-hidden"))}function fc(e,t){if(e&&t){let r=n=>{e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")};[t].flat().filter(Boolean).forEach(n=>n.split(" ").forEach(r))}}function c4(e){typeof e=="string"?fc(document.body,e||"p-overflow-hidden"):(e!=null&&e.variableName&&document.body.style.removeProperty(e.variableName),fc(document.body,e?.className||"p-overflow-hidden"))}function eM(e){for(let t of document?.styleSheets)try{for(let r of t?.cssRules)for(let n of r?.style)if(e.test(n))return{name:n,value:r.style.getPropertyValue(n).trim()}}catch{}return null}function d4(e){let t={width:0,height:0};if(e){let[r,n]=[e.style.visibility,e.style.display];e.style.visibility="hidden",e.style.display="block",t.width=e.offsetWidth,t.height=e.offsetHeight,e.style.display=n,e.style.visibility=r}return t}function B2(){let e=window,t=document,r=t.documentElement,n=t.getElementsByTagName("body")[0],o=e.innerWidth||r.clientWidth||n.clientWidth,s=e.innerHeight||r.clientHeight||n.clientHeight;return{width:o,height:s}}function Uh(e){return e?Math.abs(e.scrollLeft):0}function u4(){let e=document.documentElement;return(window.pageXOffset||Uh(e))-(e.clientLeft||0)}function f4(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function p4(e){return e?getComputedStyle(e).direction==="rtl":!1}function m4(e,t,r=!0){var n,o,s,i;if(e){let a=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:d4(e),l=a.height,c=a.width,u=t.offsetHeight,d=t.offsetWidth,f=t.getBoundingClientRect(),p=f4(),m=u4(),b=B2(),E,h,_="top";f.top+u+l>b.height?(E=f.top+p-l,_="bottom",E<0&&(E=p)):E=u+f.top+p,f.left+c>b.width?h=Math.max(0,f.left+m+d-c):h=f.left+m,p4(e)?e.style.insetInlineEnd=h+"px":e.style.insetInlineStart=h+"px",e.style.top=E+"px",e.style.transformOrigin=_,r&&(e.style.marginTop=_==="bottom"?`calc(${(o=(n=eM(/-anchor-gutter$/))==null?void 0:n.value)!=null?o:"2px"} * -1)`:(i=(s=eM(/-anchor-gutter$/))==null?void 0:s.value)!=null?i:"")}}function R2(e,t){e&&(typeof t=="string"?e.style.cssText=t:Object.entries(t||{}).forEach(([r,n])=>e.style[r]=n))}function pc(e,t){return e instanceof HTMLElement?e.offsetWidth:0}function z2(e){if(e){let t=e.parentNode;return t&&t instanceof ShadowRoot&&t.host&&(t=t.host),t}return null}function h4(e){return!!(e!==null&&typeof e<"u"&&e.nodeName&&z2(e))}function aa(e){return typeof Element<"u"?e instanceof Element:e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"}function Yu(e,t={}){if(aa(e)){let r=(n,o)=>{var s,i;let a=(s=e?.$attrs)!=null&&s[n]?[(i=e?.$attrs)==null?void 0:i[n]]:[];return[o].flat().reduce((l,c)=>{if(c!=null){let u=typeof c;if(u==="string"||u==="number")l.push(c);else if(u==="object"){let d=Array.isArray(c)?r(n,c):Object.entries(c).map(([f,p])=>n==="style"&&(p||p===0)?`${f.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${p}`:p?f:void 0);l=d.length?l.concat(d.filter(f=>!!f)):l}}return l},a)};Object.entries(t).forEach(([n,o])=>{if(o!=null){let s=n.match(/^on(.+)/);s?e.addEventListener(s[1].toLowerCase(),o):n==="p-bind"||n==="pBind"?Yu(e,o):(o=n==="class"?[...new Set(r("class",o))].join(" ").trim():n==="style"?r("style",o).join(";").trim():o,(e.$attrs=e.$attrs||{})&&(e.$attrs[n]=o),e.setAttribute(n,o))}})}}function N2(e,t={},...r){{let n=document.createElement(e);return Yu(n,t),n.append(...r),n}}function Jl(e,t){return aa(e)?Array.from(e.querySelectorAll(t)):[]}function Ju(e,t){return aa(e)?e.matches(t)?e:e.querySelector(t):null}function Ho(e,t){e&&document.activeElement!==e&&e.focus(t)}function g4(e,t){if(aa(e)){let r=e.getAttribute(t);return isNaN(r)?r==="true"||r==="false"?r==="true":r:+r}}function j2(e,t=""){let r=Jl(e,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [href]:not([tabindex = "-1"]):not([style*="display:none"]):not([hidden])${t},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`),n=[];for(let o of r)getComputedStyle(o).display!="none"&&getComputedStyle(o).visibility!="hidden"&&n.push(o);return n}function Ll(e,t){let r=j2(e,t);return r.length>0?r[0]:null}function tM(e){if(e){let t=e.offsetHeight,r=getComputedStyle(e);return t-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),t}return 0}function _4(e,t){let r=j2(e,t);return r.length>0?r[r.length-1]:null}function b4(e){if(e){let t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||Uh(document.documentElement)||Uh(document.body)||0)}}return{top:"auto",left:"auto"}}function V2(e,t){return e?e.offsetHeight:0}function W2(e,t=[]){let r=z2(e);return r===null?t:W2(r,t.concat([r]))}function v4(e){let t=[];if(e){let r=W2(e),n=/(auto|scroll)/,o=s=>{try{let i=window.getComputedStyle(s,null);return n.test(i.getPropertyValue("overflow"))||n.test(i.getPropertyValue("overflowX"))||n.test(i.getPropertyValue("overflowY"))}catch{return!1}};for(let s of r){let i=s.nodeType===1&&s.dataset.scrollselectors;if(i){let a=i.split(",");for(let l of a){let c=Ju(s,l);c&&o(c)&&t.push(c)}}s.nodeType!==9&&o(s)&&t.push(s)}}return t}function rM(e){if(e){let t=e.offsetWidth,r=getComputedStyle(e);return t-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),t}return 0}function U2(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function nM(e,t=""){return aa(e)?e.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`):!1}function y4(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function d_(e,t="",r){aa(e)&&r!==null&&r!==void 0&&e.setAttribute(t,r)}var uu={};function w4(e="pui_id_"){return Object.hasOwn(uu,e)||(uu[e]=0),uu[e]++,`${e}${uu[e]}`}function M4(){let e=[],t=(i,a,l=999)=>{let c=o(i,a,l),u=c.value+(c.key===i?0:l)+1;return e.push({key:i,value:u}),u},r=i=>{e=e.filter(a=>a.value!==i)},n=(i,a)=>o(i).value,o=(i,a,l=0)=>[...e].reverse().find(c=>!0)||{key:i,value:l},s=i=>i&&parseInt(i.style.zIndex,10)||0;return{get:s,set:(i,a,l)=>{a&&(a.style.zIndex=String(t(i,!0,l)))},clear:i=>{i&&(r(s(i)),i.style.zIndex="")},getCurrent:i=>n(i)}}var Co=M4(),x4=Object.defineProperty,T4=Object.defineProperties,C4=Object.getOwnPropertyDescriptors,Zu=Object.getOwnPropertySymbols,G2=Object.prototype.hasOwnProperty,H2=Object.prototype.propertyIsEnumerable,oM=(e,t,r)=>t in e?x4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vo=(e,t)=>{for(var r in t||(t={}))G2.call(t,r)&&oM(e,r,t[r]);if(Zu)for(var r of Zu(t))H2.call(t,r)&&oM(e,r,t[r]);return e},pm=(e,t)=>T4(e,C4(t)),Ps=(e,t)=>{var r={};for(var n in e)G2.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Zu)for(var n of Zu(e))t.indexOf(n)<0&&H2.call(e,n)&&(r[n]=e[n]);return r},k4=kf(),Tn=k4,Sc=/{([^}]*)}/g,K2=/(\d+\s+[\+\-\*\/]\s+\d+)/g,q2=/var\([^)]+\)/g;function sM(e){return to(e)?e.replace(/[A-Z]/g,(t,r)=>r===0?t:"."+t.toLowerCase()).toLowerCase():e}function E4(e){return vs(e)&&e.hasOwnProperty("$value")&&e.hasOwnProperty("$type")?e.$value:e}function P4(e){return e.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function Gh(e="",t=""){return P4(`${to(e,!1)&&to(t,!1)?`${e}-`:e}${t}`)}function X2(e="",t=""){return`--${Gh(e,t)}`}function $4(e=""){let t=(e.match(/{/g)||[]).length,r=(e.match(/}/g)||[]).length;return(t+r)%2!==0}function Q2(e,t="",r="",n=[],o){if(to(e)){let s=e.trim();if($4(s))return;if(Zi(s,Sc)){let i=s.replaceAll(Sc,a=>{let l=a.replace(/{|}/g,"").split(".").filter(c=>!n.some(u=>Zi(c,u)));return`var(${X2(r,D2(l.join("-")))}${Er(o)?`, ${o}`:""})`});return Zi(i.replace(q2,"0"),K2)?`calc(${i})`:i}return s}else if(n4(e))return e}function S4(e,t,r){to(t,!1)&&e.push(`${t}:${r};`)}function Fa(e,t){return e?`${e}{${t}}`:""}function Y2(e,t){if(e.indexOf("dt(")===-1)return e;function r(i,a){let l=[],c=0,u="",d=null,f=0;for(;c<=i.length;){let p=i[c];if((p==='"'||p==="'"||p==="`")&&i[c-1]!=="\\"&&(d=d===p?null:p),!d&&(p==="("&&f++,p===")"&&f--,(p===","||c===i.length)&&f===0)){let m=u.trim();m.startsWith("dt(")?l.push(Y2(m,a)):l.push(n(m)),u="",c++;continue}p!==void 0&&(u+=p),c++}return l}function n(i){let a=i[0];if((a==='"'||a==="'"||a==="`")&&i[i.length-1]===a)return i.slice(1,-1);let l=Number(i);return isNaN(l)?i:l}let o=[],s=[];for(let i=0;i<e.length;i++)if(e[i]==="d"&&e.slice(i,i+3)==="dt(")s.push(i),i+=2;else if(e[i]===")"&&s.length>0){let a=s.pop();s.length===0&&o.push([a,i])}if(!o.length)return e;for(let i=o.length-1;i>=0;i--){let[a,l]=o[i],c=e.slice(a+3,l),u=r(c,t),d=t(...u);e=e.slice(0,a)+d+e.slice(l+1)}return e}var J2=e=>{var t;let r=gr.getTheme(),n=Hh(r,e,void 0,"variable"),o=(t=n?.match(/--[\w-]+/g))==null?void 0:t[0],s=Hh(r,e,void 0,"value");return{name:o,variable:n,value:s}},ea=(...e)=>Hh(gr.getTheme(),...e),Hh=(e={},t,r,n)=>{if(t){let{variable:o,options:s}=gr.defaults||{},{prefix:i,transform:a}=e?.options||s||{},l=Zi(t,Sc)?t:`{${t}}`;return n==="value"||yi(n)&&a==="strict"?gr.getTokenValue(t):Q2(l,void 0,i,[o.excludedKeyRegex],r)}return""};function fu(e,...t){if(e instanceof Array){let r=e.reduce((n,o,s)=>{var i;return n+o+((i=Zn(t[s],{dt:ea}))!=null?i:"")},"");return Y2(r,ea)}return Zn(e,{dt:ea})}function I4(e,t={}){let r=gr.defaults.variable,{prefix:n=r.prefix,selector:o=r.selector,excludedKeyRegex:s=r.excludedKeyRegex}=t,i=[],a=[],l=[{node:e,path:n}];for(;l.length;){let{node:u,path:d}=l.pop();for(let f in u){let p=u[f],m=E4(p),b=Zi(f,s)?Gh(d):Gh(d,D2(f));if(vs(m))l.push({node:m,path:b});else{let E=X2(b),h=Q2(m,b,n,[s]);S4(a,E,h);let _=b;n&&_.startsWith(n+"-")&&(_=_.slice(n.length+1)),i.push(_.replace(/-/g,"."))}}}let c=a.join("");return{value:a,tokens:i,declarations:c,css:Fa(o,c)}}var Do={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(e){return{type:"class",selector:e,matched:this.pattern.test(e.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(e){return{type:"attr",selector:`:root${e}`,matched:this.pattern.test(e.trim())}}},media:{pattern:/^@media (.*)$/,resolve(e){return{type:"media",selector:e,matched:this.pattern.test(e.trim())}}},system:{pattern:/^system$/,resolve(e){return{type:"system",selector:"@media (prefers-color-scheme: dark)",matched:this.pattern.test(e.trim())}}},custom:{resolve(e){return{type:"custom",selector:e,matched:!0}}}},resolve(e){let t=Object.keys(this.rules).filter(r=>r!=="custom").map(r=>this.rules[r]);return[e].flat().map(r=>{var n;return(n=t.map(o=>o.resolve(r)).find(o=>o.matched))!=null?n:this.rules.custom.resolve(r)})}},_toVariables(e,t){return I4(e,{prefix:t?.prefix})},getCommon({name:e="",theme:t={},params:r,set:n,defaults:o}){var s,i,a,l,c,u,d;let{preset:f,options:p}=t,m,b,E,h,_,T,g;if(Er(f)&&p.transform!=="strict"){let{primitive:M,semantic:x,extend:w}=f,$=x||{},{colorScheme:O}=$,L=Ps($,["colorScheme"]),G=w||{},{colorScheme:j}=G,D=Ps(G,["colorScheme"]),re=O||{},{dark:Z}=re,te=Ps(re,["dark"]),ie=j||{},{dark:ne}=ie,ve=Ps(ie,["dark"]),Me=Er(M)?this._toVariables({primitive:M},p):{},W=Er(L)?this._toVariables({semantic:L},p):{},R=Er(te)?this._toVariables({light:te},p):{},J=Er(Z)?this._toVariables({dark:Z},p):{},U=Er(D)?this._toVariables({semantic:D},p):{},be=Er(ve)?this._toVariables({light:ve},p):{},Le=Er(ne)?this._toVariables({dark:ne},p):{},[de,Te]=[(s=Me.declarations)!=null?s:"",Me.tokens],[Pe,xe]=[(i=W.declarations)!=null?i:"",W.tokens||[]],[Y,B]=[(a=R.declarations)!=null?a:"",R.tokens||[]],[I,q]=[(l=J.declarations)!=null?l:"",J.tokens||[]],[pe,ue]=[(c=U.declarations)!=null?c:"",U.tokens||[]],[oe,N]=[(u=be.declarations)!=null?u:"",be.tokens||[]],[z,ee]=[(d=Le.declarations)!=null?d:"",Le.tokens||[]];m=this.transformCSS(e,de,"light","variable",p,n,o),b=Te;let le=this.transformCSS(e,`${Pe}${Y}`,"light","variable",p,n,o),ke=this.transformCSS(e,`${I}`,"dark","variable",p,n,o);E=`${le}${ke}`,h=[...new Set([...xe,...B,...q])];let fe=this.transformCSS(e,`${pe}${oe}color-scheme:light`,"light","variable",p,n,o),ce=this.transformCSS(e,`${z}color-scheme:dark`,"dark","variable",p,n,o);_=`${fe}${ce}`,T=[...new Set([...ue,...N,...ee])],g=Zn(f.css,{dt:ea})}return{primitive:{css:m,tokens:b},semantic:{css:E,tokens:h},global:{css:_,tokens:T},style:g}},getPreset({name:e="",preset:t={},options:r,params:n,set:o,defaults:s,selector:i}){var a,l,c;let u,d,f;if(Er(t)&&r.transform!=="strict"){let p=e.replace("-directive",""),m=t,{colorScheme:b,extend:E,css:h}=m,_=Ps(m,["colorScheme","extend","css"]),T=E||{},{colorScheme:g}=T,M=Ps(T,["colorScheme"]),x=b||{},{dark:w}=x,$=Ps(x,["dark"]),O=g||{},{dark:L}=O,G=Ps(O,["dark"]),j=Er(_)?this._toVariables({[p]:Vo(Vo({},_),M)},r):{},D=Er($)?this._toVariables({[p]:Vo(Vo({},$),G)},r):{},re=Er(w)?this._toVariables({[p]:Vo(Vo({},w),L)},r):{},[Z,te]=[(a=j.declarations)!=null?a:"",j.tokens||[]],[ie,ne]=[(l=D.declarations)!=null?l:"",D.tokens||[]],[ve,Me]=[(c=re.declarations)!=null?c:"",re.tokens||[]],W=this.transformCSS(p,`${Z}${ie}`,"light","variable",r,o,s,i),R=this.transformCSS(p,ve,"dark","variable",r,o,s,i);u=`${W}${R}`,d=[...new Set([...te,...ne,...Me])],f=Zn(h,{dt:ea})}return{css:u,tokens:d,style:f}},getPresetC({name:e="",theme:t={},params:r,set:n,defaults:o}){var s;let{preset:i,options:a}=t,l=(s=i?.components)==null?void 0:s[e];return this.getPreset({name:e,preset:l,options:a,params:r,set:n,defaults:o})},getPresetD({name:e="",theme:t={},params:r,set:n,defaults:o}){var s,i;let a=e.replace("-directive",""),{preset:l,options:c}=t,u=((s=l?.components)==null?void 0:s[a])||((i=l?.directives)==null?void 0:i[a]);return this.getPreset({name:a,preset:u,options:c,params:r,set:n,defaults:o})},applyDarkColorScheme(e){return!(e.darkModeSelector==="none"||e.darkModeSelector===!1)},getColorSchemeOption(e,t){var r;return this.applyDarkColorScheme(e)?this.regex.resolve(e.darkModeSelector===!0?t.options.darkModeSelector:(r=e.darkModeSelector)!=null?r:t.options.darkModeSelector):[]},getLayerOrder(e,t={},r,n){let{cssLayer:o}=t;return o?`@layer ${Zn(o.order||o.name||"primeui",r)}`:""},getCommonStyleSheet({name:e="",theme:t={},params:r,props:n={},set:o,defaults:s}){let i=this.getCommon({name:e,theme:t,params:r,set:o,defaults:s}),a=Object.entries(n).reduce((l,[c,u])=>l.push(`${c}="${u}"`)&&l,[]).join(" ");return Object.entries(i||{}).reduce((l,[c,u])=>{if(vs(u)&&Object.hasOwn(u,"css")){let d=uc(u.css),f=`${c}-variables`;l.push(`<style type="text/css" data-primevue-style-id="${f}" ${a}>${d}</style>`)}return l},[]).join("")},getStyleSheet({name:e="",theme:t={},params:r,props:n={},set:o,defaults:s}){var i;let a={name:e,theme:t,params:r,set:o,defaults:s},l=(i=e.includes("-directive")?this.getPresetD(a):this.getPresetC(a))==null?void 0:i.css,c=Object.entries(n).reduce((u,[d,f])=>u.push(`${d}="${f}"`)&&u,[]).join(" ");return l?`<style type="text/css" data-primevue-style-id="${e}-variables" ${c}>${uc(l)}</style>`:""},createTokens(e={},t,r="",n="",o={}){let s=function(a,l={},c=[]){if(c.includes(this.path))return console.warn(`Circular reference detected at ${this.path}`),{colorScheme:a,path:this.path,paths:l,value:void 0};c.push(this.path),l.name=this.path,l.binding||(l.binding={});let u=this.value;if(typeof this.value=="string"&&Sc.test(this.value)){let d=this.value.trim().replace(Sc,f=>{var p;let m=f.slice(1,-1),b=this.tokens[m];if(!b)return console.warn(`Token not found for path: ${m}`),"__UNRESOLVED__";let E=b.computed(a,l,c);return Array.isArray(E)&&E.length===2?`light-dark(${E[0].value},${E[1].value})`:(p=E?.value)!=null?p:"__UNRESOLVED__"});u=K2.test(d.replace(q2,"0"))?`calc(${d})`:d}return yi(l.binding)&&delete l.binding,c.pop(),{colorScheme:a,path:this.path,paths:l,value:u.includes("__UNRESOLVED__")?void 0:u}},i=(a,l,c)=>{Object.entries(a).forEach(([u,d])=>{let f=Zi(u,t.variable.excludedKeyRegex)?l:l?`${l}.${sM(u)}`:sM(u),p=c?`${c}.${u}`:u;vs(d)?i(d,f,p):(o[f]||(o[f]={paths:[],computed:(m,b={},E=[])=>{if(o[f].paths.length===1)return o[f].paths[0].computed(o[f].paths[0].scheme,b.binding,E);if(m&&m!=="none")for(let h=0;h<o[f].paths.length;h++){let _=o[f].paths[h];if(_.scheme===m)return _.computed(m,b.binding,E)}return o[f].paths.map(h=>h.computed(h.scheme,b[h.scheme],E))}}),o[f].paths.push({path:p,value:d,scheme:p.includes("colorScheme.light")?"light":p.includes("colorScheme.dark")?"dark":"none",computed:s,tokens:o}))})};return i(e,r,n),o},getTokenValue(e,t,r){var n;let o=(a=>a.split(".").filter(l=>!Zi(l.toLowerCase(),r.variable.excludedKeyRegex)).join("."))(t),s=t.includes("colorScheme.light")?"light":t.includes("colorScheme.dark")?"dark":void 0,i=[(n=e[o])==null?void 0:n.computed(s)].flat().filter(a=>a);return i.length===1?i[0].value:i.reduce((a={},l)=>{let c=l,{colorScheme:u}=c,d=Ps(c,["colorScheme"]);return a[u]=d,a},void 0)},getSelectorRule(e,t,r,n){return r==="class"||r==="attr"?Fa(Er(t)?`${e}${t},${e} ${t}`:e,n):Fa(e,Fa(t??":root",n))},transformCSS(e,t,r,n,o={},s,i,a){if(Er(t)){let{cssLayer:l}=o;if(n!=="style"){let c=this.getColorSchemeOption(o,i);t=r==="dark"?c.reduce((u,{type:d,selector:f})=>(Er(f)&&(u+=f.includes("[CSS]")?f.replace("[CSS]",t):this.getSelectorRule(f,a,d,t)),u),""):Fa(a??":root",t)}if(l){let c={name:"primeui"};vs(l)&&(c.name=Zn(l.name,{name:e,type:n})),Er(c.name)&&(t=Fa(`@layer ${c.name}`,t),s?.layerNames(c.name))}return t}return""}},gr={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(e={}){let{theme:t}=e;t&&(this._theme=pm(Vo({},t),{options:Vo(Vo({},this.defaults.options),t.options)}),this._tokens=Do.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var e;return((e=this.theme)==null?void 0:e.preset)||{}},get options(){var e;return((e=this.theme)==null?void 0:e.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(e){this.update({theme:e}),Tn.emit("theme:change",e)},getPreset(){return this.preset},setPreset(e){this._theme=pm(Vo({},this.theme),{preset:e}),this._tokens=Do.createTokens(e,this.defaults),this.clearLoadedStyleNames(),Tn.emit("preset:change",e),Tn.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(e){this._theme=pm(Vo({},this.theme),{options:e}),this.clearLoadedStyleNames(),Tn.emit("options:change",e),Tn.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(e){this._layerNames.add(e)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(e){return this._loadedStyleNames.has(e)},setLoadedStyleName(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(e){return Do.getTokenValue(this.tokens,e,this.defaults)},getCommon(e="",t){return Do.getCommon({name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(e="",t){let r={name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Do.getPresetC(r)},getDirective(e="",t){let r={name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Do.getPresetD(r)},getCustomPreset(e="",t,r,n){let o={name:e,preset:t,options:this.options,selector:r,params:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Do.getPreset(o)},getLayerOrderCSS(e=""){return Do.getLayerOrder(e,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(e="",t,r="style",n){return Do.transformCSS(e,t,n,r,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(e="",t,r={}){return Do.getCommonStyleSheet({name:e,theme:this.theme,params:t,props:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(e,t,r={}){return Do.getStyleSheet({name:e,theme:this.theme,params:t,props:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(e){this._loadingStyles.add(e)},onStyleUpdated(e){this._loadingStyles.add(e)},onStyleLoaded(e,{name:t}){this._loadingStyles.size&&(this._loadingStyles.delete(t),Tn.emit(`theme:${t}:load`,e),!this._loadingStyles.size&&Tn.emit("theme:load"))}},On={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},A4=`
    *,
    ::before,
    ::after {
        box-sizing: border-box;
    }

    /* Non vue overlay animations */
    .p-connected-overlay {
        opacity: 0;
        transform: scaleY(0.8);
        transition:
            transform 0.12s cubic-bezier(0, 0, 0.2, 1),
            opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-connected-overlay-visible {
        opacity: 1;
        transform: scaleY(1);
    }

    .p-connected-overlay-hidden {
        opacity: 0;
        transform: scaleY(1);
        transition: opacity 0.1s linear;
    }

    /* Vue based overlay animations */
    .p-connected-overlay-enter-from {
        opacity: 0;
        transform: scaleY(0.8);
    }

    .p-connected-overlay-leave-to {
        opacity: 0;
    }

    .p-connected-overlay-enter-active {
        transition:
            transform 0.12s cubic-bezier(0, 0, 0.2, 1),
            opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-connected-overlay-leave-active {
        transition: opacity 0.1s linear;
    }

    /* Toggleable Content */
    .p-toggleable-content-enter-from,
    .p-toggleable-content-leave-to {
        max-height: 0;
    }

    .p-toggleable-content-enter-to,
    .p-toggleable-content-leave-from {
        max-height: 1000px;
    }

    .p-toggleable-content-leave-active {
        overflow: hidden;
        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
    }

    .p-toggleable-content-enter-active {
        overflow: hidden;
        transition: max-height 1s ease-in-out;
    }

    .p-disabled,
    .p-disabled * {
        cursor: default;
        pointer-events: none;
        user-select: none;
    }

    .p-disabled,
    .p-component:disabled {
        opacity: dt('disabled.opacity');
    }

    .pi {
        font-size: dt('icon.size');
    }

    .p-icon {
        width: dt('icon.size');
        height: dt('icon.size');
    }

    .p-overlay-mask {
        background: dt('mask.background');
        color: dt('mask.color');
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .p-overlay-mask-enter {
        animation: p-overlay-mask-enter-animation dt('mask.transition.duration') forwards;
    }

    .p-overlay-mask-leave {
        animation: p-overlay-mask-leave-animation dt('mask.transition.duration') forwards;
    }

    @keyframes p-overlay-mask-enter-animation {
        from {
            background: transparent;
        }
        to {
            background: dt('mask.background');
        }
    }
    @keyframes p-overlay-mask-leave-animation {
        from {
            background: dt('mask.background');
        }
        to {
            background: transparent;
        }
    }
`;function Ic(e){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function iM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function aM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(r),!0).forEach(function(n){O4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O4(e,t,r){return(t=L4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L4(e){var t=F4(e,"string");return Ic(t)=="symbol"?t:t+""}function F4(e,t){if(Ic(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Qo()&&Qo().components?id(e):t?e():od(e)}var B4=0;function R4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=eo(!1),n=eo(e),o=eo(null),s=U2()?window.document:void 0,i=t.document,a=i===void 0?s:i,l=t.immediate,c=l===void 0?!0:l,u=t.manual,d=u===void 0?!1:u,f=t.name,p=f===void 0?"style_".concat(++B4):f,m=t.id,b=m===void 0?void 0:m,E=t.media,h=E===void 0?void 0:E,_=t.nonce,T=_===void 0?void 0:_,g=t.first,M=g===void 0?!1:g,x=t.onMounted,w=x===void 0?void 0:x,$=t.onUpdated,O=$===void 0?void 0:$,L=t.onLoad,G=L===void 0?void 0:L,j=t.props,D=j===void 0?{}:j,re=function(){},Z=function(ne){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a){var Me=aM(aM({},D),ve),W=Me.name||p,R=Me.id||b,J=Me.nonce||T;o.value=a.querySelector('style[data-primevue-style-id="'.concat(W,'"]'))||a.getElementById(R)||a.createElement("style"),o.value.isConnected||(n.value=ne||e,Yu(o.value,{type:"text/css",id:R,media:h,nonce:J}),M?a.head.prepend(o.value):a.head.appendChild(o.value),d_(o.value,"data-primevue-style-id",W),Yu(o.value,Me),o.value.onload=function(U){return G?.(U,{name:W})},w?.(W)),!r.value&&(re=Hn(n,function(U){o.value.textContent=U,O?.(W)},{immediate:!0}),r.value=!0)}},te=function(){!a||!r.value||(re(),h4(o.value)&&a.head.removeChild(o.value),r.value=!1,o.value=null)};return c&&!d&&D4(Z),{id:b,name:p,el:o,css:n,unload:te,load:Z,isLoaded:ao(r)}}function Ac(e){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}var lM,cM,dM,uM;function fM(e,t){return V4(e)||j4(e,t)||N4(e,t)||z4()}function z4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N4(e,t){if(e){if(typeof e=="string")return pM(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pM(e,t):void 0}}function pM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j4(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,s,i,a=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function V4(e){if(Array.isArray(e))return e}function mM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(r),!0).forEach(function(n){W4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W4(e,t,r){return(t=U4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U4(e){var t=G4(e,"string");return Ac(t)=="symbol"?t:t+""}function G4(e,t){if(Ac(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var H4=function(t){var r=t.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    opacity: 0;
    overflow: hidden;
    padding: 0;
    pointer-events: none;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(r("scrollbar.width"),`;
}
`)},K4={},q4={},Xt={name:"base",css:H4,style:A4,classes:K4,inlineStyles:q4,load:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(s){return s},o=n(fu(lM||(lM=pu(["",""])),t));return Er(o)?R4(uc(o),mm({name:this.name},r)):{}},loadCSS:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,t)},loadStyle:function(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.load(this.style,r,function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return gr.transformCSS(r.name||t.name,"".concat(o).concat(fu(cM||(cM=pu(["",""])),n)))})},getCommonTheme:function(t){return gr.getCommon(this.name,t)},getComponentTheme:function(t){return gr.getComponent(this.name,t)},getDirectiveTheme:function(t){return gr.getDirective(this.name,t)},getPresetTheme:function(t,r,n){return gr.getCustomPreset(this.name,t,r,n)},getLayerOrderThemeCSS:function(){return gr.getLayerOrderCSS(this.name)},getStyleSheet:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var n=Zn(this.css,{dt:ea})||"",o=uc(fu(dM||(dM=pu(["","",""])),n,t)),s=Object.entries(r).reduce(function(i,a){var l=fM(a,2),c=l[0],u=l[1];return i.push("".concat(c,'="').concat(u,'"'))&&i},[]).join(" ");return Er(o)?'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(s,">").concat(o,"</style>"):""}return""},getCommonThemeStyleSheet:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return gr.getCommonStyleSheet(this.name,t,r)},getThemeStyleSheet:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[gr.getStyleSheet(this.name,t,r)];if(this.style){var o=this.name==="base"?"global-style":"".concat(this.name,"-style"),s=fu(uM||(uM=pu(["",""])),Zn(this.style,{dt:ea})),i=uc(gr.transformCSS(o,s)),a=Object.entries(r).reduce(function(l,c){var u=fM(c,2),d=u[0],f=u[1];return l.push("".concat(d,'="').concat(f,'"'))&&l},[]).join(" ");Er(i)&&n.push('<style type="text/css" data-primevue-style-id="'.concat(o,'" ').concat(a,">").concat(i,"</style>"))}return n.join("")},extend:function(t){return mm(mm({},this),{},{css:void 0,style:void 0},t)}},ui=kf();function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function hM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(r),!0).forEach(function(n){X4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X4(e,t,r){return(t=Q4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q4(e){var t=Y4(e,"string");return Oc(t)=="symbol"?t:t+""}function Y4(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J4={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[On.STARTS_WITH,On.CONTAINS,On.NOT_CONTAINS,On.ENDS_WITH,On.EQUALS,On.NOT_EQUALS],numeric:[On.EQUALS,On.NOT_EQUALS,On.LESS_THAN,On.LESS_THAN_OR_EQUAL_TO,On.GREATER_THAN,On.GREATER_THAN_OR_EQUAL_TO],date:[On.DATE_IS,On.DATE_IS_NOT,On.DATE_BEFORE,On.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},Z4=Symbol();function eB(e,t){var r={config:tl(t)};return e.config.globalProperties.$primevue=r,e.provide(Z4,r),tB(),rB(e,r),r}var za=[];function tB(){Tn.clear(),za.forEach(function(e){return e?.()}),za=[]}function rB(e,t){var r=eo(!1),n=function(){var c;if(((c=t.config)===null||c===void 0?void 0:c.theme)!=="none"&&!gr.isStyleNameLoaded("common")){var u,d,f=((u=Xt.getCommonTheme)===null||u===void 0?void 0:u.call(Xt))||{},p=f.primitive,m=f.semantic,b=f.global,E=f.style,h={nonce:(d=t.config)===null||d===void 0||(d=d.csp)===null||d===void 0?void 0:d.nonce};Xt.load(p?.css,mu({name:"primitive-variables"},h)),Xt.load(m?.css,mu({name:"semantic-variables"},h)),Xt.load(b?.css,mu({name:"global-variables"},h)),Xt.loadStyle(mu({name:"global-style"},h),E),gr.setLoadedStyleName("common")}};Tn.on("theme:change",function(l){r.value||(e.config.globalProperties.$primevue.config.theme=l,r.value=!0)});var o=Hn(t.config,function(l,c){ui.emit("config:change",{newValue:l,oldValue:c})},{immediate:!0,deep:!0}),s=Hn(function(){return t.config.ripple},function(l,c){ui.emit("config:ripple:change",{newValue:l,oldValue:c})},{immediate:!0,deep:!0}),i=Hn(function(){return t.config.theme},function(l,c){r.value||gr.setTheme(l),t.config.unstyled||n(),r.value=!1,ui.emit("config:theme:change",{newValue:l,oldValue:c})},{immediate:!0,deep:!1}),a=Hn(function(){return t.config.unstyled},function(l,c){!l&&t.config.theme&&n(),ui.emit("config:unstyled:change",{newValue:l,oldValue:c})},{immediate:!0,deep:!0});za.push(o),za.push(s),za.push(i),za.push(a)}var nB={install:function(t,r){var n=o4(J4,r);eB(t,n)}},oB={transitionDuration:"{transition.duration}"},sB={borderWidth:"0 0 1px 0",borderColor:"{content.border.color}"},iB={color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}",padding:"1.125rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},aB={borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.125rem 1.125rem 1.125rem"},lB={root:oB,panel:sB,header:iB,content:aB},cB={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},dB={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},uB={padding:"{list.padding}",gap:"{list.gap}"},fB={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},pB={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},mB={width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},hB={borderRadius:"{border.radius.sm}"},gB={padding:"{list.option.padding}"},_B={light:{chip:{focusBackground:"{surface.200}",focusColor:"{surface.800}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}},bB={root:cB,overlay:dB,list:uB,option:fB,optionGroup:pB,dropdown:mB,chip:hB,emptyMessage:gB,colorScheme:_B},vB={width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},yB={size:"1rem"},wB={borderColor:"{content.background}",offset:"-0.75rem"},MB={width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},xB={width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}},TB={root:vB,icon:yB,group:wB,lg:MB,xl:xB},CB={borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},kB={size:"0.5rem"},EB={fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},PB={fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},$B={fontSize:"1rem",minWidth:"2rem",height:"2rem"},SB={light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}},IB={root:CB,dot:kB,sm:EB,lg:PB,xl:$B,colorScheme:SB},AB={borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},OB={transitionDuration:"0.2s",focusRing:{width:"1px",style:"solid",color:"{primary.color}",offset:"2px",shadow:"none"},disabledOpacity:"0.6",iconSize:"1rem",anchorGutter:"2px",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.5rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.375rem"},lg:{fontSize:"1.125rem",paddingX:"0.875rem",paddingY:"0.625rem"},borderRadius:"{border.radius.md}",focusRing:{width:"0",style:"none",color:"transparent",offset:"0",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.25rem 0.25rem",gap:"2px",header:{padding:"0.5rem 1rem 0.25rem 1rem"},option:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}"},optionGroup:{padding:"0.5rem 0.75rem",fontWeight:"600"}},content:{borderRadius:"{border.radius.md}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.25rem 0.25rem",gap:"2px"},item:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}",gap:"0.5rem"},submenuLabel:{padding:"0.5rem 0.75rem",fontWeight:"600"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.md}",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},popover:{borderRadius:"{border.radius.md}",padding:"0.75rem",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},modal:{borderRadius:"{border.radius.xl}",padding:"1.25rem",shadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},navigation:{shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"}},colorScheme:{light:{surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.600}",activeColor:"{primary.700}"},highlight:{background:"{primary.50}",focusBackground:"{primary.100}",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.4)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.200}",filledBackground:"{surface.50}",filledHoverBackground:"{surface.50}",filledFocusBackground:"{surface.50}",borderColor:"{surface.300}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.400}",color:"{surface.700}",disabledColor:"{surface.500}",placeholderColor:"{surface.500}",invalidPlaceholderColor:"{red.600}",floatLabelColor:"{surface.500}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.500}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.700}",hoverColor:"{surface.800}",mutedColor:"{surface.500}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.200}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.100}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}}},dark:{surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.800}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.500}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.400}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.300}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.800}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}},LB={primitive:AB,semantic:OB},FB={borderRadius:"{content.border.radius}"},DB={root:FB},BB={padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},RB={color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},zB={color:"{navigation.item.icon.color}"},NB={root:BB,item:RB,separator:zB},jB={borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",iconOnlyWidth:"2.5rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}",iconOnlyWidth:"2rem"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}",iconOnlyWidth:"3rem"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},VB={light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.600}",activeBackground:"{sky.700}",borderColor:"{sky.500}",hoverBorderColor:"{sky.600}",activeBorderColor:"{sky.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.600}",activeBackground:"{green.700}",borderColor:"{green.500}",hoverBorderColor:"{green.600}",activeBorderColor:"{green.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.600}",activeBackground:"{orange.700}",borderColor:"{orange.500}",hoverBorderColor:"{orange.600}",activeBorderColor:"{orange.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.600}",activeBackground:"{purple.700}",borderColor:"{purple.500}",hoverBorderColor:"{purple.600}",activeBorderColor:"{purple.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.600}",activeBackground:"{red.700}",borderColor:"{red.500}",hoverBorderColor:"{red.600}",activeBorderColor:"{red.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.900}",activeBackground:"{surface.800}",borderColor:"{surface.950}",hoverBorderColor:"{surface.900}",activeBorderColor:"{surface.800}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.200}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.200}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.200}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.200}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.200}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.200}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.700}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.700}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.700}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}},WB={root:jB,colorScheme:VB},UB={background:"{content.background}",borderRadius:"{border.radius.xl}",color:"{content.color}",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},GB={padding:"1.25rem",gap:"0.5rem"},HB={gap:"0.5rem"},KB={fontSize:"1.25rem",fontWeight:"500"},qB={color:"{text.muted.color}"},XB={root:UB,body:GB,caption:HB,title:KB,subtitle:qB},QB={transitionDuration:"{transition.duration}"},YB={gap:"0.25rem"},JB={padding:"1rem",gap:"0.5rem"},ZB={width:"2rem",height:"0.5rem",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},eR={light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}},tR={root:QB,content:YB,indicatorList:JB,indicator:ZB,colorScheme:eR},rR={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},nR={width:"2.5rem",color:"{form.field.icon.color}"},oR={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},sR={padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},iR={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},aR={color:"{form.field.icon.color}"},lR={root:rR,dropdown:nR,overlay:oR,list:sR,option:iR,clearIcon:aR},cR={borderRadius:"{border.radius.sm}",width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},dR={size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}},uR={root:cR,icon:dR},fR={borderRadius:"16px",paddingX:"0.75rem",paddingY:"0.5rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},pR={width:"2rem",height:"2rem"},mR={size:"1rem"},hR={size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"}},gR={light:{root:{background:"{surface.100}",color:"{surface.800}"},icon:{color:"{surface.800}"},removeIcon:{color:"{surface.800}"}},dark:{root:{background:"{surface.800}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}"}}},_R={root:fR,image:pR,icon:mR,removeIcon:hR,colorScheme:gR},bR={transitionDuration:"{transition.duration}"},vR={width:"1.5rem",height:"1.5rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},yR={shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},wR={light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}},MR={root:bR,preview:vR,panel:yR,colorScheme:wR},xR={size:"2rem",color:"{overlay.modal.color}"},TR={gap:"1rem"},CR={icon:xR,content:TR},kR={background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},ER={padding:"{overlay.popover.padding}",gap:"1rem"},PR={size:"1.5rem",color:"{overlay.popover.color}"},$R={gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"},SR={root:kR,content:ER,icon:PR,footer:$R},IR={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},AR={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},OR={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},LR={mobileIndent:"1rem"},FR={size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},DR={borderColor:"{content.border.color}"},BR={root:IR,list:AR,item:OR,submenu:LR,submenuIcon:FR,separator:DR},RR={transitionDuration:"{transition.duration}"},zR={background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},NR={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},jR={fontWeight:"600"},VR={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},WR={borderColor:"{datatable.border.color}",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},UR={background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},GR={fontWeight:"600"},HR={background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},KR={color:"{primary.color}"},qR={width:"0.5rem"},XR={width:"1px",color:"{primary.color}"},QR={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},YR={size:"2rem"},JR={hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},ZR={inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},e5={borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},t5={borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},r5={light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}},n5={root:RR,header:zR,headerCell:NR,columnTitle:jR,row:VR,bodyCell:WR,footerCell:UR,columnFooter:GR,footer:HR,dropPoint:KR,columnResizer:qR,resizeIndicator:XR,sortIcon:QR,loadingIcon:YR,rowToggleButton:JR,filter:ZR,paginatorTop:e5,paginatorBottom:t5,colorScheme:r5},o5={borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},s5={background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},i5={background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},a5={background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},l5={borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},c5={borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"},d5={root:o5,header:s5,content:i5,footer:a5,paginatorTop:l5,paginatorBottom:c5},u5={transitionDuration:"{transition.duration}"},f5={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}"},p5={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},m5={gap:"0.5rem",fontWeight:"500"},h5={width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},g5={color:"{form.field.icon.color}"},_5={hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},b5={hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},v5={borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},y5={margin:"0.5rem 0 0 0"},w5={padding:"0.25rem",fontWeight:"500",color:"{content.color}"},M5={hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2rem",height:"2rem",borderRadius:"50%",padding:"0.25rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},x5={margin:"0.5rem 0 0 0"},T5={padding:"0.375rem",borderRadius:"{content.border.radius}"},C5={margin:"0.5rem 0 0 0"},k5={padding:"0.375rem",borderRadius:"{content.border.radius}"},E5={padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},P5={padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},$5={light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}},S5={root:u5,panel:f5,header:p5,title:m5,dropdown:h5,inputIcon:g5,selectMonth:_5,selectYear:b5,group:v5,dayView:y5,weekDay:w5,date:M5,monthView:x5,month:T5,yearView:C5,year:k5,buttonbar:E5,timePicker:P5,colorScheme:$5},I5={background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},A5={padding:"{overlay.modal.padding}",gap:"0.5rem"},O5={fontSize:"1.25rem",fontWeight:"600"},L5={padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},F5={padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"},D5={root:I5,header:A5,title:O5,content:L5,footer:F5},B5={borderColor:"{content.border.color}"},R5={background:"{content.background}",color:"{text.color}"},z5={margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},N5={margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}},j5={root:B5,content:R5,horizontal:z5,vertical:N5},V5={background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},W5={borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},U5={root:V5,item:W5},G5={background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},H5={padding:"{overlay.modal.padding}"},K5={fontSize:"1.5rem",fontWeight:"600"},q5={padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},X5={padding:"{overlay.modal.padding}"},Q5={root:G5,header:H5,title:K5,content:q5,footer:X5},Y5={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},J5={color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},Z5={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},ez={focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},tz={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},rz={toolbar:Y5,toolbarItem:J5,overlay:Z5,overlayOption:ez,content:tz},nz={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.125rem 1.125rem 1.125rem",transitionDuration:"{transition.duration}"},oz={background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.5rem 0.75rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},sz={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},iz={padding:"0"},az={root:nz,legend:oz,toggleIcon:sz,content:iz},lz={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},cz={background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},dz={highlightBorderColor:"{primary.color}",padding:"0 1.125rem 1.125rem 1.125rem",gap:"1rem"},uz={padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},fz={gap:"0.5rem"},pz={height:"0.25rem"},mz={gap:"0.5rem"},hz={root:lz,header:cz,content:dz,file:uz,fileList:fz,progressbar:pz,basic:mz},gz={color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},_z={active:{top:"-1.25rem"}},bz={input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},active:{top:"{form.field.padding.y}"}},vz={borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}},yz={root:gz,over:_z,in:bz,on:vz},wz={borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},Mz={background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},xz={size:"1.5rem"},Tz={background:"{content.background}",padding:"1rem 0.25rem"},Cz={size:"2rem",borderRadius:"{content.border.radius}",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},kz={size:"1rem"},Ez={background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},Pz={gap:"0.5rem",padding:"1rem"},$z={width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Sz={background:"rgba(0, 0, 0, 0.5)"},Iz={background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},Az={size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Oz={size:"1.5rem"},Lz={light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}},Fz={root:wz,navButton:Mz,navIcon:xz,thumbnailsContent:Tz,thumbnailNavButton:Cz,thumbnailNavButtonIcon:kz,caption:Ez,indicatorList:Pz,indicatorButton:$z,insetIndicatorList:Sz,insetIndicatorButton:Iz,closeButton:Az,closeButtonIcon:Oz,colorScheme:Lz},Dz={color:"{form.field.icon.color}"},Bz={icon:Dz},Rz={color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"{form.field.padding.y}",fontSize:"0.75rem",fontWeight:"400"},zz={paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},Nz={root:Rz,input:zz},jz={transitionDuration:"{transition.duration}"},Vz={icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},Wz={position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},Uz={hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Gz={root:jz,preview:Vz,toolbar:Wz,action:Uz},Hz={size:"15px",hoverSize:"30px",background:"rgba(255,255,255,0.3)",hoverBackground:"rgba(255,255,255,0.3)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Kz={handle:Hz},qz={padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},Xz={fontWeight:"500"},Qz={size:"1rem"},Yz={light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}},Jz={root:qz,text:Xz,icon:Qz,colorScheme:Yz},Zz={padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},eN={hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"},tN={root:Zz,display:eN},rN={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},nN={borderRadius:"{border.radius.sm}"},oN={light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}},sN={root:rN,chip:nN,colorScheme:oN},iN={background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.5rem",minWidth:"2.5rem"},aN={addon:iN},lN={transitionDuration:"{transition.duration}"},cN={width:"2.5rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},dN={light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}},uN={root:lN,button:cN,colorScheme:dN},fN={gap:"0.5rem"},pN={width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"}},mN={root:fN,input:pN},hN={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},gN={root:hN},_N={transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},bN={background:"{primary.color}"},vN={background:"{content.border.color}"},yN={color:"{text.muted.color}"},wN={root:_N,value:bN,range:vN,text:yN},MN={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},xN={padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},TN={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},CN={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},kN={color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},EN={padding:"{list.option.padding}"},PN={light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}},$N={root:MN,list:xN,option:TN,optionGroup:CN,checkmark:kN,emptyMessage:EN,colorScheme:PN},SN={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},IN={borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},AN={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},ON={padding:"0",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},LN={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},FN={padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},DN={size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},BN={borderColor:"{content.border.color}"},RN={borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},zN={root:SN,baseItem:IN,item:AN,overlay:ON,submenu:LN,submenuLabel:FN,submenuIcon:DN,separator:BN,mobileButton:RN},NN={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},jN={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},VN={focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},WN={padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},UN={borderColor:"{content.border.color}"},GN={root:NN,list:jN,item:VN,submenuLabel:WN,separator:UN},HN={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},KN={borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},qN={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},XN={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},QN={borderColor:"{content.border.color}"},YN={borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},JN={root:HN,baseItem:KN,item:qN,submenu:XN,separator:QN,mobileButton:YN},ZN={borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},e6={padding:"0.5rem 0.75rem",gap:"0.5rem",sm:{padding:"0.375rem 0.625rem"},lg:{padding:"0.625rem 0.875rem"}},t6={fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},r6={size:"1.125rem",sm:{size:"1rem"},lg:{size:"1.25rem"}},n6={width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},o6={size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},s6={root:{borderWidth:"1px"}},i6={content:{padding:"0"}},a6={light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.600}",borderColor:"{yellow.600}"},simple:{color:"{yellow.600}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.500}",borderColor:"{surface.500}"},simple:{color:"{surface.500}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}},l6={root:ZN,content:e6,text:t6,icon:r6,closeButton:n6,closeIcon:o6,outlined:s6,simple:i6,colorScheme:a6},c6={borderRadius:"{content.border.radius}",gap:"1rem"},d6={background:"{content.border.color}",size:"0.5rem"},u6={gap:"0.5rem"},f6={size:"0.5rem"},p6={size:"1rem"},m6={verticalGap:"0.5rem",horizontalGap:"1rem"},h6={root:c6,meters:d6,label:u6,labelMarker:f6,labelIcon:p6,labelList:m6},g6={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},_6={width:"2.5rem",color:"{form.field.icon.color}"},b6={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},v6={padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},y6={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.5rem"},w6={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},M6={color:"{form.field.icon.color}"},x6={borderRadius:"{border.radius.sm}"},T6={padding:"{list.option.padding}"},C6={root:g6,dropdown:_6,overlay:b6,list:v6,option:y6,optionGroup:w6,chip:x6,clearIcon:M6,emptyMessage:T6},k6={gap:"1.125rem"},E6={gap:"0.5rem"},P6={root:k6,controls:E6},$6={gutter:"0.75rem",transitionDuration:"{transition.duration}"},S6={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"0.75rem 1rem",toggleablePadding:"0.75rem 1rem 1.25rem 1rem",borderRadius:"{content.border.radius}"},I6={background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},A6={color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"},O6={root:$6,node:S6,nodeToggleButton:I6,connector:A6},L6={outline:{width:"2px",color:"{content.background}"}},F6={root:L6},D6={padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},B6={background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},R6={color:"{text.muted.color}"},z6={maxWidth:"2.5rem"},N6={root:D6,navButton:B6,currentPageReport:R6,jumpToPageInput:z6},j6={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},V6={background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},W6={padding:"0.375rem 1.125rem"},U6={fontWeight:"600"},G6={padding:"0 1.125rem 1.125rem 1.125rem"},H6={padding:"0 1.125rem 1.125rem 1.125rem"},K6={root:j6,header:V6,toggleableHeader:W6,title:U6,content:G6,footer:H6},q6={gap:"0.5rem",transitionDuration:"{transition.duration}"},X6={background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"1px",color:"{content.color}",padding:"0.25rem 0.25rem",borderRadius:"{content.border.radius}",first:{borderWidth:"1px",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"1px",bottomBorderRadius:"{content.border.radius}"}},Q6={focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},Y6={indent:"1rem"},J6={color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"},Z6={root:q6,panel:X6,item:Q6,submenu:Y6,submenuIcon:J6},e8={background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},t8={color:"{form.field.icon.color}"},r8={background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},n8={gap:"0.5rem"},o8={light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}},s8={meter:e8,icon:t8,overlay:r8,content:n8,colorScheme:o8},i8={gap:"1.125rem"},a8={gap:"0.5rem"},l8={root:i8,controls:a8},c8={background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},d8={padding:"{overlay.popover.padding}"},u8={root:c8,content:d8},f8={background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1.25rem"},p8={background:"{primary.color}"},m8={color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"},h8={root:f8,value:p8,label:m8},g8={light:{root:{colorOne:"{red.500}",colorTwo:"{blue.500}",colorThree:"{green.500}",colorFour:"{yellow.500}"}},dark:{root:{colorOne:"{red.400}",colorTwo:"{blue.400}",colorThree:"{green.400}",colorFour:"{yellow.400}"}}},_8={colorScheme:g8},b8={width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},v8={size:"0.75rem",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.5rem"},lg:{size:"1rem"}},y8={root:b8,icon:v8},w8={gap:"0.25rem",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},M8={size:"1rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"},x8={root:w8,icon:M8},T8={light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}},C8={colorScheme:T8},k8={transitionDuration:"{transition.duration}"},E8={size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},P8={light:{bar:{background:"{surface.100}"}},dark:{bar:{background:"{surface.800}"}}},$8={root:k8,bar:E8,colorScheme:P8},S8={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},I8={width:"2.5rem",color:"{form.field.icon.color}"},A8={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},O8={padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},L8={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},F8={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},D8={color:"{form.field.icon.color}"},B8={color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},R8={padding:"{list.option.padding}"},z8={root:S8,dropdown:I8,overlay:A8,list:O8,option:L8,optionGroup:F8,clearIcon:D8,checkmark:B8,emptyMessage:R8},N8={borderRadius:"{form.field.border.radius}"},j8={light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}},V8={root:N8,colorScheme:j8},W8={borderRadius:"{content.border.radius}"},U8={light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}},G8={root:W8,colorScheme:U8},H8={transitionDuration:"{transition.duration}"},K8={background:"{content.border.color}",borderRadius:"{content.border.radius}",size:"3px"},q8={background:"{primary.color}"},X8={width:"20px",height:"20px",borderRadius:"50%",background:"{content.border.color}",hoverBackground:"{content.border.color}",content:{borderRadius:"50%",hoverBackground:"{content.background}",width:"16px",height:"16px",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.08), 0px 1px 1px 0px rgba(0, 0, 0, 0.14)"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Q8={light:{handle:{content:{background:"{surface.0}"}}},dark:{handle:{content:{background:"{surface.950}"}}}},Y8={root:H8,track:K8,range:q8,handle:X8,colorScheme:Q8},J8={gap:"0.5rem",transitionDuration:"{transition.duration}"},Z8={root:J8},ej={borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},tj={root:ej},rj={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},nj={background:"{content.border.color}"},oj={size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},sj={root:rj,gutter:nj,handle:oj},ij={transitionDuration:"{transition.duration}"},aj={background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},lj={padding:"0.5rem",gap:"1rem"},cj={padding:"0",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},dj={color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},uj={background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},fj={padding:"0.875rem 0.5rem 1.125rem 0.5rem"},pj={background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"},mj={root:ij,separator:aj,step:lj,stepHeader:cj,stepTitle:dj,stepNumber:uj,steppanels:fj,steppanel:pj},hj={transitionDuration:"{transition.duration}"},gj={background:"{content.border.color}"},_j={borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},bj={color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},vj={background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},yj={root:hj,separator:gj,itemLink:_j,itemLabel:bj,itemNumber:vj},wj={transitionDuration:"{transition.duration}"},Mj={borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},xj={background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Tj={color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},Cj={height:"1px",bottom:"-1px",background:"{primary.color}"},kj={root:wj,tablist:Mj,item:xj,itemIcon:Tj,activeBar:Cj},Ej={transitionDuration:"{transition.duration}"},Pj={borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},$j={background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},Sj={background:"{content.background}",color:"{content.color}",padding:"0.875rem 1.125rem 1.125rem 1.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"inset {focus.ring.shadow}"}},Ij={background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"2.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},Aj={height:"1px",bottom:"-1px",background:"{primary.color}"},Oj={light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}},Lj={root:Ej,tablist:Pj,tab:$j,tabpanel:Sj,navButton:Ij,activeBar:Aj,colorScheme:Oj},Fj={transitionDuration:"{transition.duration}"},Dj={background:"{content.background}",borderColor:"{content.border.color}"},Bj={borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},Rj={background:"{content.background}",color:"{content.color}"},zj={background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},Nj={light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}},jj={root:Fj,tabList:Dj,tab:Bj,tabPanel:Rj,navButton:zj,colorScheme:Nj},Vj={fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},Wj={size:"0.75rem"},Uj={light:{primary:{background:"{primary.100}",color:"{primary.700}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.100}",color:"{green.700}"},info:{background:"{sky.100}",color:"{sky.700}"},warn:{background:"{orange.100}",color:"{orange.700}"},danger:{background:"{red.100}",color:"{red.700}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"color-mix(in srgb, {primary.500}, transparent 84%)",color:"{primary.300}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",color:"{green.300}"},info:{background:"color-mix(in srgb, {sky.500}, transparent 84%)",color:"{sky.300}"},warn:{background:"color-mix(in srgb, {orange.500}, transparent 84%)",color:"{orange.300}"},danger:{background:"color-mix(in srgb, {red.500}, transparent 84%)",color:"{red.300}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}},Gj={root:Vj,icon:Wj,colorScheme:Uj},Hj={background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},Kj={gap:"0.25rem"},qj={margin:"2px 0"},Xj={root:Hj,prompt:Kj,commandResponse:qj},Qj={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},Yj={root:Qj},Jj={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},Zj={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},eV={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},tV={mobileIndent:"1rem"},rV={size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},nV={borderColor:"{content.border.color}"},oV={root:Jj,list:Zj,item:eV,submenu:tV,submenuIcon:rV,separator:nV},sV={minHeight:"5rem"},iV={eventContent:{padding:"1rem 0"}},aV={eventContent:{padding:"0 1rem"}},lV={size:"1.125rem",borderRadius:"50%",borderWidth:"2px",background:"{content.background}",borderColor:"{content.border.color}",content:{borderRadius:"50%",size:"0.375rem",background:"{primary.color}",insetShadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},cV={color:"{content.border.color}",size:"2px"},dV={event:sV,horizontal:iV,vertical:aV,eventMarker:lV,eventConnector:cV},uV={width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},fV={size:"1.125rem"},pV={padding:"{overlay.popover.padding}",gap:"0.5rem"},mV={gap:"0.5rem"},hV={fontWeight:"500",fontSize:"1rem"},gV={fontWeight:"500",fontSize:"0.875rem"},_V={width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},bV={size:"1rem"},vV={light:{root:{blur:"1.5px"},info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{root:{blur:"10px"},info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}},yV={root:uV,icon:fV,content:pV,text:mV,summary:hV,detail:gV,closeButton:_V,closeIcon:bV,colorScheme:vV},wV={padding:"0.25rem",borderRadius:"{content.border.radius}",gap:"0.5rem",fontWeight:"500",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.25rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.25rem"}},MV={disabledColor:"{form.field.disabled.color}"},xV={padding:"0.25rem 0.75rem",borderRadius:"{content.border.radius}",checkedShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.02), 0px 1px 2px 0px rgba(0, 0, 0, 0.04)",sm:{padding:"0.25rem 0.75rem"},lg:{padding:"0.25rem 0.75rem"}},TV={light:{root:{background:"{surface.100}",checkedBackground:"{surface.100}",hoverBackground:"{surface.100}",borderColor:"{surface.100}",color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}",checkedBorderColor:"{surface.100}"},content:{checkedBackground:"{surface.0}"},icon:{color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}"}},dark:{root:{background:"{surface.950}",checkedBackground:"{surface.950}",hoverBackground:"{surface.950}",borderColor:"{surface.950}",color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}",checkedBorderColor:"{surface.950}"},content:{checkedBackground:"{surface.800}"},icon:{color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}"}}},CV={root:wV,icon:MV,content:xV,colorScheme:TV},kV={width:"2.5rem",height:"1.5rem",borderRadius:"30px",gap:"0.25rem",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},EV={borderRadius:"50%",size:"1rem"},PV={light:{root:{background:"{surface.300}",disabledBackground:"{form.field.disabled.background}",hoverBackground:"{surface.400}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.0}",disabledBackground:"{form.field.disabled.color}",hoverBackground:"{surface.0}",checkedBackground:"{surface.0}",checkedHoverBackground:"{surface.0}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.600}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.900}",hoverBackground:"{surface.300}",checkedBackground:"{surface.900}",checkedHoverBackground:"{surface.900}",color:"{surface.900}",hoverColor:"{surface.800}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}}},$V={root:kV,handle:EV,colorScheme:PV},SV={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.75rem"},IV={root:SV},AV={maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},OV={light:{root:{background:"{surface.700}",color:"{surface.0}"}},dark:{root:{background:"{surface.700}",color:"{surface.0}"}}},LV={root:AV,colorScheme:OV},FV={background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"1rem",transitionDuration:"{transition.duration}"},DV={padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.25rem"},BV={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},RV={borderRadius:"50%",size:"1.75rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},zV={size:"2rem"},NV={margin:"0 0 0.5rem 0"},jV={root:FV,node:DV,nodeIcon:BV,nodeToggleButton:RV,loadingIcon:zV,filter:NV},VV={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},WV={width:"2.5rem",color:"{form.field.icon.color}"},UV={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},GV={padding:"{list.padding}"},HV={padding:"{list.option.padding}"},KV={borderRadius:"{border.radius.sm}"},qV={color:"{form.field.icon.color}"},XV={root:VV,dropdown:WV,overlay:UV,tree:GV,emptyMessage:HV,chip:KV,clearIcon:qV},QV={transitionDuration:"{transition.duration}"},YV={background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},JV={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},ZV={fontWeight:"600"},e9={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},t9={borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},r9={background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},n9={fontWeight:"600"},o9={background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},s9={width:"0.5rem"},i9={width:"1px",color:"{primary.color}"},a9={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},l9={size:"2rem"},c9={hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},d9={borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},u9={borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},f9={light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}},p9={root:QV,header:YV,headerCell:JV,columnTitle:ZV,row:e9,bodyCell:t9,footerCell:r9,columnFooter:n9,footer:o9,columnResizer:s9,resizeIndicator:i9,sortIcon:a9,loadingIcon:l9,nodeToggleButton:c9,paginatorTop:d9,paginatorBottom:u9,colorScheme:f9},m9={mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}},h9={loader:m9},g9=Object.defineProperty,_9=Object.defineProperties,b9=Object.getOwnPropertyDescriptors,gM=Object.getOwnPropertySymbols,v9=Object.prototype.hasOwnProperty,y9=Object.prototype.propertyIsEnumerable,_M=(e,t,r)=>t in e?g9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bM,w9=(bM=((e,t)=>{for(var r in t||(t={}))v9.call(t,r)&&_M(e,r,t[r]);if(gM)for(var r of gM(t))y9.call(t,r)&&_M(e,r,t[r]);return e})({},LB),_9(bM,b9({components:{accordion:lB,autocomplete:bB,avatar:TB,badge:IB,blockui:DB,breadcrumb:NB,button:WB,card:XB,carousel:tR,cascadeselect:lR,checkbox:uR,chip:_R,colorpicker:MR,confirmdialog:CR,confirmpopup:SR,contextmenu:BR,datatable:n5,dataview:d5,datepicker:S5,dialog:D5,divider:j5,dock:U5,drawer:Q5,editor:rz,fieldset:az,fileupload:hz,floatlabel:yz,galleria:Fz,iconfield:Bz,iftalabel:Nz,image:Gz,imagecompare:Kz,inlinemessage:Jz,inplace:tN,inputchips:sN,inputgroup:aN,inputnumber:uN,inputotp:mN,inputtext:gN,knob:wN,listbox:$N,megamenu:zN,menu:GN,menubar:JN,message:l6,metergroup:h6,multiselect:C6,orderlist:P6,organizationchart:O6,overlaybadge:F6,paginator:N6,panel:K6,panelmenu:Z6,password:s8,picklist:l8,popover:u8,progressbar:h8,progressspinner:_8,radiobutton:y8,rating:x8,ripple:C8,scrollpanel:$8,select:z8,selectbutton:V8,skeleton:G8,slider:Y8,speeddial:Z8,splitbutton:tj,splitter:sj,stepper:mj,steps:yj,tabmenu:kj,tabs:Lj,tabview:jj,tag:Gj,terminal:Xj,textarea:Yj,tieredmenu:oV,timeline:dV,toast:yV,togglebutton:CV,toggleswitch:$V,toolbar:IV,tooltip:LV,tree:jV,treeselect:XV,treetable:p9,virtualscroller:h9}}))),yo=kf(),Z2=Symbol();function _Q(){var e=To(Z2);if(!e)throw new Error("No PrimeVue Toast provided!");return e}var M9={install:function(t){var r={add:function(o){yo.emit("add",o)},remove:function(o){yo.emit("remove",o)},removeGroup:function(o){yo.emit("remove-group",o)},removeAllGroups:function(){yo.emit("remove-all-groups")}};t.config.globalProperties.$toast=r,t.provide(Z2,r)}},ud={name:"Portal",props:{appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},mounted:function(){this.mounted=U2()},computed:{inline:function(){return this.disabled||this.appendTo==="self"}}};function x9(e,t,r,n,o,s){return s.inline?qt(e.$slots,"default",{key:0}):o.mounted?(He(),Sr(wE,{key:1,to:r.appendTo},[qt(e.$slots,"default")],8,["to"])):Wt("",!0)}ud.render=x9;var di={_loadedStyleNames:new Set,getLoadedStyleNames:function(){return this._loadedStyleNames},isStyleNameLoaded:function(t){return this._loadedStyleNames.has(t)},setLoadedStyleName:function(t){this._loadedStyleNames.add(t)},deleteLoadedStyleName:function(t){this._loadedStyleNames.delete(t)},clearLoadedStyleNames:function(){this._loadedStyleNames.clear()}};function T9(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pc",t=bO();return"".concat(e).concat(t.replace("v-","").replaceAll("-","_"))}var vM=Xt.extend({name:"common"});function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}function C9(e){return rP(e)||k9(e)||tP(e)||eP()}function k9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fl(e,t){return rP(e)||E9(e,t)||tP(e,t)||eP()}function eP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tP(e,t){if(e){if(typeof e=="string")return yM(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yM(e,t):void 0}}function yM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E9(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,s,i,a=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function rP(e){if(Array.isArray(e))return e}function wM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wM(Object(r),!0).forEach(function(n){Zl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zl(e,t,r){return(t=P9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P9(e){var t=$9(e,"string");return Lc(t)=="symbol"?t:t+""}function $9(e,t){if(Lc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qn={name:"BaseComponent",props:{pt:{type:Object,default:void 0},ptOptions:{type:Object,default:void 0},unstyled:{type:Boolean,default:void 0},dt:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0}},watch:{isUnstyled:{immediate:!0,handler:function(t){Tn.off("theme:change",this._loadCoreStyles),t||(this._loadCoreStyles(),this._themeChangeListener(this._loadCoreStyles))}},dt:{immediate:!0,handler:function(t,r){var n=this;Tn.off("theme:change",this._themeScopedListener),t?(this._loadScopedThemeStyles(t),this._themeScopedListener=function(){return n._loadScopedThemeStyles(t)},this._themeChangeListener(this._themeScopedListener)):this._unloadScopedThemeStyles()}}},scopedStyleEl:void 0,rootEl:void 0,uid:void 0,$attrSelector:void 0,beforeCreate:function(){var t,r,n,o,s,i,a,l,c,u,d,f=(t=this.pt)===null||t===void 0?void 0:t._usept,p=f?(r=this.pt)===null||r===void 0||(r=r.originalValue)===null||r===void 0?void 0:r[this.$.type.name]:void 0,m=f?(n=this.pt)===null||n===void 0||(n=n.value)===null||n===void 0?void 0:n[this.$.type.name]:this.pt;(o=m||p)===null||o===void 0||(o=o.hooks)===null||o===void 0||(s=o.onBeforeCreate)===null||s===void 0||s.call(o);var b=(i=this.$primevueConfig)===null||i===void 0||(i=i.pt)===null||i===void 0?void 0:i._usept,E=b?(a=this.$primevue)===null||a===void 0||(a=a.config)===null||a===void 0||(a=a.pt)===null||a===void 0?void 0:a.originalValue:void 0,h=b?(l=this.$primevue)===null||l===void 0||(l=l.config)===null||l===void 0||(l=l.pt)===null||l===void 0?void 0:l.value:(c=this.$primevue)===null||c===void 0||(c=c.config)===null||c===void 0?void 0:c.pt;(u=h||E)===null||u===void 0||(u=u[this.$.type.name])===null||u===void 0||(u=u.hooks)===null||u===void 0||(d=u.onBeforeCreate)===null||d===void 0||d.call(u),this.$attrSelector=T9(),this.uid=this.$attrs.id||this.$attrSelector.replace("pc","pv_id_")},created:function(){this._hook("onCreated")},beforeMount:function(){var t;this.rootEl=Ju(aa(this.$el)?this.$el:(t=this.$el)===null||t===void 0?void 0:t.parentElement,"[".concat(this.$attrSelector,"]")),this.rootEl&&(this.rootEl.$pc=Kt({name:this.$.type.name,attrSelector:this.$attrSelector},this.$params)),this._loadStyles(),this._hook("onBeforeMount")},mounted:function(){this._hook("onMounted")},beforeUpdate:function(){this._hook("onBeforeUpdate")},updated:function(){this._hook("onUpdated")},beforeUnmount:function(){this._hook("onBeforeUnmount")},unmounted:function(){this._removeThemeListeners(),this._unloadScopedThemeStyles(),this._hook("onUnmounted")},methods:{_hook:function(t){if(!this.$options.hostName){var r=this._usePT(this._getPT(this.pt,this.$.type.name),this._getOptionValue,"hooks.".concat(t)),n=this._useDefaultPT(this._getOptionValue,"hooks.".concat(t));r?.(),n?.()}},_mergeProps:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return l_(t)?t.apply(void 0,n):Qe.apply(void 0,n)},_load:function(){di.isStyleNameLoaded("base")||(Xt.loadCSS(this.$styleOptions),this._loadGlobalStyles(),di.setLoadedStyleName("base")),this._loadThemeStyles()},_loadStyles:function(){this._load(),this._themeChangeListener(this._load)},_loadCoreStyles:function(){var t,r;!di.isStyleNameLoaded((t=this.$style)===null||t===void 0?void 0:t.name)&&(r=this.$style)!==null&&r!==void 0&&r.name&&(vM.loadCSS(this.$styleOptions),this.$options.style&&this.$style.loadCSS(this.$styleOptions),di.setLoadedStyleName(this.$style.name))},_loadGlobalStyles:function(){var t=this._useGlobalPT(this._getOptionValue,"global.css",this.$params);Er(t)&&Xt.load(t,Kt({name:"global"},this.$styleOptions))},_loadThemeStyles:function(){var t,r;if(!(this.isUnstyled||this.$theme==="none")){if(!gr.isStyleNameLoaded("common")){var n,o,s=((n=this.$style)===null||n===void 0||(o=n.getCommonTheme)===null||o===void 0?void 0:o.call(n))||{},i=s.primitive,a=s.semantic,l=s.global,c=s.style;Xt.load(i?.css,Kt({name:"primitive-variables"},this.$styleOptions)),Xt.load(a?.css,Kt({name:"semantic-variables"},this.$styleOptions)),Xt.load(l?.css,Kt({name:"global-variables"},this.$styleOptions)),Xt.loadStyle(Kt({name:"global-style"},this.$styleOptions),c),gr.setLoadedStyleName("common")}if(!gr.isStyleNameLoaded((t=this.$style)===null||t===void 0?void 0:t.name)&&(r=this.$style)!==null&&r!==void 0&&r.name){var u,d,f,p,m=((u=this.$style)===null||u===void 0||(d=u.getComponentTheme)===null||d===void 0?void 0:d.call(u))||{},b=m.css,E=m.style;(f=this.$style)===null||f===void 0||f.load(b,Kt({name:"".concat(this.$style.name,"-variables")},this.$styleOptions)),(p=this.$style)===null||p===void 0||p.loadStyle(Kt({name:"".concat(this.$style.name,"-style")},this.$styleOptions),E),gr.setLoadedStyleName(this.$style.name)}if(!gr.isStyleNameLoaded("layer-order")){var h,_,T=(h=this.$style)===null||h===void 0||(_=h.getLayerOrderThemeCSS)===null||_===void 0?void 0:_.call(h);Xt.load(T,Kt({name:"layer-order",first:!0},this.$styleOptions)),gr.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(t){var r,n,o,s=((r=this.$style)===null||r===void 0||(n=r.getPresetTheme)===null||n===void 0?void 0:n.call(r,t,"[".concat(this.$attrSelector,"]")))||{},i=s.css,a=(o=this.$style)===null||o===void 0?void 0:o.load(i,Kt({name:"".concat(this.$attrSelector,"-").concat(this.$style.name)},this.$styleOptions));this.scopedStyleEl=a.el},_unloadScopedThemeStyles:function(){var t;(t=this.scopedStyleEl)===null||t===void 0||(t=t.value)===null||t===void 0||t.remove()},_themeChangeListener:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};di.clearLoadedStyleNames(),Tn.on("theme:change",t)},_removeThemeListeners:function(){Tn.off("theme:change",this._loadCoreStyles),Tn.off("theme:change",this._load),Tn.off("theme:change",this._themeScopedListener)},_getHostInstance:function(t){return t?this.$options.hostName?t.$.type.name===this.$options.hostName?t:this._getHostInstance(t.$parentInstance):t.$parentInstance:void 0},_getPropValue:function(t){var r;return this[t]||((r=this._getHostInstance(this))===null||r===void 0?void 0:r[t])},_getOptionValue:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return c_(t,r,n)},_getPTValue:function(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=/./g.test(n)&&!!o[n.split(".")[0]],a=this._getPropValue("ptOptions")||((t=this.$primevueConfig)===null||t===void 0?void 0:t.ptOptions)||{},l=a.mergeSections,c=l===void 0?!0:l,u=a.mergeProps,d=u===void 0?!1:u,f=s?i?this._useGlobalPT(this._getPTClassValue,n,o):this._useDefaultPT(this._getPTClassValue,n,o):void 0,p=i?void 0:this._getPTSelf(r,this._getPTClassValue,n,Kt(Kt({},o),{},{global:f||{}})),m=this._getPTDatasets(n);return c||!c&&p?d?this._mergeProps(d,f,p,m):Kt(Kt(Kt({},f),p),m):Kt(Kt({},p),m)},_getPTSelf:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Qe(this._usePT.apply(this,[this._getPT(t,this.$name)].concat(n)),this._usePT.apply(this,[this.$_attrsPT].concat(n)))},_getPTDatasets:function(){var t,r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o="data-pc-",s=n==="root"&&Er((t=this.pt)===null||t===void 0?void 0:t["data-pc-section"]);return n!=="transition"&&Kt(Kt({},n==="root"&&Kt(Kt(Zl({},"".concat(o,"name"),hs(s?(r=this.pt)===null||r===void 0?void 0:r["data-pc-section"]:this.$.type.name)),s&&Zl({},"".concat(o,"extend"),hs(this.$.type.name))),{},Zl({},"".concat(this.$attrSelector),""))),{},Zl({},"".concat(o,"section"),hs(n)))},_getPTClassValue:function(){var t=this._getOptionValue.apply(this,arguments);return to(t)||F2(t)?{class:t}:t},_getPT:function(t){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0,s=function(a){var l,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=o?o(a):a,d=hs(n),f=hs(r.$name);return(l=c?d!==f?u?.[d]:void 0:u?.[d])!==null&&l!==void 0?l:u};return t!=null&&t.hasOwnProperty("_usept")?{_usept:t._usept,originalValue:s(t.originalValue),value:s(t.value)}:s(t,!0)},_usePT:function(t,r,n,o){var s=function(b){return r(b,n,o)};if(t!=null&&t.hasOwnProperty("_usept")){var i,a=t._usept||((i=this.$primevueConfig)===null||i===void 0?void 0:i.ptOptions)||{},l=a.mergeSections,c=l===void 0?!0:l,u=a.mergeProps,d=u===void 0?!1:u,f=s(t.originalValue),p=s(t.value);return f===void 0&&p===void 0?void 0:to(p)?p:to(f)?f:c||!c&&p?d?this._mergeProps(d,f,p):Kt(Kt({},f),p):p}return s(t)},_useGlobalPT:function(t,r,n){return this._usePT(this.globalPT,t,r,n)},_useDefaultPT:function(t,r,n){return this._usePT(this.defaultPT,t,r,n)},ptm:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._getPTValue(this.pt,t,Kt(Kt({},this.$params),r))},ptmi:function(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=Qe(this.$_attrsWithoutPT,this.ptm(r,n));return o?.hasOwnProperty("id")&&((t=o.id)!==null&&t!==void 0||(o.id=this.$id)),o},ptmo:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._getPTValue(t,r,Kt({instance:this},n),!1)},cx:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isUnstyled?void 0:this._getOptionValue(this.$style.classes,t,Kt(Kt({},this.$params),r))},sx:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r){var o=this._getOptionValue(this.$style.inlineStyles,t,Kt(Kt({},this.$params),n)),s=this._getOptionValue(vM.inlineStyles,t,Kt(Kt({},this.$params),n));return[s,o]}}},computed:{globalPT:function(){var t,r=this;return this._getPT((t=this.$primevueConfig)===null||t===void 0?void 0:t.pt,void 0,function(n){return Zn(n,{instance:r})})},defaultPT:function(){var t,r=this;return this._getPT((t=this.$primevueConfig)===null||t===void 0?void 0:t.pt,void 0,function(n){return r._getOptionValue(n,r.$name,Kt({},r.$params))||Zn(n,Kt({},r.$params))})},isUnstyled:function(){var t;return this.unstyled!==void 0?this.unstyled:(t=this.$primevueConfig)===null||t===void 0?void 0:t.unstyled},$id:function(){return this.$attrs.id||this.uid},$inProps:function(){var t,r=Object.keys(((t=this.$.vnode)===null||t===void 0?void 0:t.props)||{});return Object.fromEntries(Object.entries(this.$props).filter(function(n){var o=Fl(n,1),s=o[0];return r?.includes(s)}))},$theme:function(){var t;return(t=this.$primevueConfig)===null||t===void 0?void 0:t.theme},$style:function(){return Kt(Kt({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadStyle:function(){}},(this._getHostInstance(this)||{}).$style),this.$options.style)},$styleOptions:function(){var t;return{nonce:(t=this.$primevueConfig)===null||t===void 0||(t=t.csp)===null||t===void 0?void 0:t.nonce}},$primevueConfig:function(){var t;return(t=this.$primevue)===null||t===void 0?void 0:t.config},$name:function(){return this.$options.hostName||this.$.type.name},$params:function(){var t=this._getHostInstance(this)||this.$parent;return{instance:this,props:this.$props,state:this.$data,attrs:this.$attrs,parent:{instance:t,props:t?.$props,state:t?.$data,attrs:t?.$attrs}}},$_attrsPT:function(){return Object.entries(this.$attrs||{}).filter(function(t){var r=Fl(t,1),n=r[0];return n?.startsWith("pt:")}).reduce(function(t,r){var n=Fl(r,2),o=n[0],s=n[1],i=o.split(":"),a=C9(i),l=a.slice(1);return l?.reduce(function(c,u,d,f){return!c[u]&&(c[u]=d===f.length-1?s:{}),c[u]},t),t},{})},$_attrsWithoutPT:function(){return Object.entries(this.$attrs||{}).filter(function(t){var r=Fl(t,1),n=r[0];return!(n!=null&&n.startsWith("pt:"))}).reduce(function(t,r){var n=Fl(r,2),o=n[0],s=n[1];return t[o]=s,t},{})}}},S9=`
    .p-toast {
        width: dt('toast.width');
        white-space: pre-line;
        word-break: break-word;
    }

    .p-toast-message {
        margin: 0 0 1rem 0;
    }

    .p-toast-message-icon {
        flex-shrink: 0;
        font-size: dt('toast.icon.size');
        width: dt('toast.icon.size');
        height: dt('toast.icon.size');
    }

    .p-toast-message-content {
        display: flex;
        align-items: flex-start;
        padding: dt('toast.content.padding');
        gap: dt('toast.content.gap');
    }

    .p-toast-message-text {
        flex: 1 1 auto;
        display: flex;
        flex-direction: column;
        gap: dt('toast.text.gap');
    }

    .p-toast-summary {
        font-weight: dt('toast.summary.font.weight');
        font-size: dt('toast.summary.font.size');
    }

    .p-toast-detail {
        font-weight: dt('toast.detail.font.weight');
        font-size: dt('toast.detail.font.size');
    }

    .p-toast-close-button {
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
        cursor: pointer;
        background: transparent;
        transition:
            background dt('toast.transition.duration'),
            color dt('toast.transition.duration'),
            outline-color dt('toast.transition.duration'),
            box-shadow dt('toast.transition.duration');
        outline-color: transparent;
        color: inherit;
        width: dt('toast.close.button.width');
        height: dt('toast.close.button.height');
        border-radius: dt('toast.close.button.border.radius');
        margin: -25% 0 0 0;
        right: -25%;
        padding: 0;
        border: none;
        user-select: none;
    }

    .p-toast-close-button:dir(rtl) {
        margin: -25% 0 0 auto;
        left: -25%;
        right: auto;
    }

    .p-toast-message-info,
    .p-toast-message-success,
    .p-toast-message-warn,
    .p-toast-message-error,
    .p-toast-message-secondary,
    .p-toast-message-contrast {
        border-width: dt('toast.border.width');
        border-style: solid;
        backdrop-filter: blur(dt('toast.blur'));
        border-radius: dt('toast.border.radius');
    }

    .p-toast-close-icon {
        font-size: dt('toast.close.icon.size');
        width: dt('toast.close.icon.size');
        height: dt('toast.close.icon.size');
    }

    .p-toast-close-button:focus-visible {
        outline-width: dt('focus.ring.width');
        outline-style: dt('focus.ring.style');
        outline-offset: dt('focus.ring.offset');
    }

    .p-toast-message-info {
        background: dt('toast.info.background');
        border-color: dt('toast.info.border.color');
        color: dt('toast.info.color');
        box-shadow: dt('toast.info.shadow');
    }

    .p-toast-message-info .p-toast-detail {
        color: dt('toast.info.detail.color');
    }

    .p-toast-message-info .p-toast-close-button:focus-visible {
        outline-color: dt('toast.info.close.button.focus.ring.color');
        box-shadow: dt('toast.info.close.button.focus.ring.shadow');
    }

    .p-toast-message-info .p-toast-close-button:hover {
        background: dt('toast.info.close.button.hover.background');
    }

    .p-toast-message-success {
        background: dt('toast.success.background');
        border-color: dt('toast.success.border.color');
        color: dt('toast.success.color');
        box-shadow: dt('toast.success.shadow');
    }

    .p-toast-message-success .p-toast-detail {
        color: dt('toast.success.detail.color');
    }

    .p-toast-message-success .p-toast-close-button:focus-visible {
        outline-color: dt('toast.success.close.button.focus.ring.color');
        box-shadow: dt('toast.success.close.button.focus.ring.shadow');
    }

    .p-toast-message-success .p-toast-close-button:hover {
        background: dt('toast.success.close.button.hover.background');
    }

    .p-toast-message-warn {
        background: dt('toast.warn.background');
        border-color: dt('toast.warn.border.color');
        color: dt('toast.warn.color');
        box-shadow: dt('toast.warn.shadow');
    }

    .p-toast-message-warn .p-toast-detail {
        color: dt('toast.warn.detail.color');
    }

    .p-toast-message-warn .p-toast-close-button:focus-visible {
        outline-color: dt('toast.warn.close.button.focus.ring.color');
        box-shadow: dt('toast.warn.close.button.focus.ring.shadow');
    }

    .p-toast-message-warn .p-toast-close-button:hover {
        background: dt('toast.warn.close.button.hover.background');
    }

    .p-toast-message-error {
        background: dt('toast.error.background');
        border-color: dt('toast.error.border.color');
        color: dt('toast.error.color');
        box-shadow: dt('toast.error.shadow');
    }

    .p-toast-message-error .p-toast-detail {
        color: dt('toast.error.detail.color');
    }

    .p-toast-message-error .p-toast-close-button:focus-visible {
        outline-color: dt('toast.error.close.button.focus.ring.color');
        box-shadow: dt('toast.error.close.button.focus.ring.shadow');
    }

    .p-toast-message-error .p-toast-close-button:hover {
        background: dt('toast.error.close.button.hover.background');
    }

    .p-toast-message-secondary {
        background: dt('toast.secondary.background');
        border-color: dt('toast.secondary.border.color');
        color: dt('toast.secondary.color');
        box-shadow: dt('toast.secondary.shadow');
    }

    .p-toast-message-secondary .p-toast-detail {
        color: dt('toast.secondary.detail.color');
    }

    .p-toast-message-secondary .p-toast-close-button:focus-visible {
        outline-color: dt('toast.secondary.close.button.focus.ring.color');
        box-shadow: dt('toast.secondary.close.button.focus.ring.shadow');
    }

    .p-toast-message-secondary .p-toast-close-button:hover {
        background: dt('toast.secondary.close.button.hover.background');
    }

    .p-toast-message-contrast {
        background: dt('toast.contrast.background');
        border-color: dt('toast.contrast.border.color');
        color: dt('toast.contrast.color');
        box-shadow: dt('toast.contrast.shadow');
    }

    .p-toast-message-contrast .p-toast-detail {
        color: dt('toast.contrast.detail.color');
    }

    .p-toast-message-contrast .p-toast-close-button:focus-visible {
        outline-color: dt('toast.contrast.close.button.focus.ring.color');
        box-shadow: dt('toast.contrast.close.button.focus.ring.shadow');
    }

    .p-toast-message-contrast .p-toast-close-button:hover {
        background: dt('toast.contrast.close.button.hover.background');
    }

    .p-toast-top-center {
        transform: translateX(-50%);
    }

    .p-toast-bottom-center {
        transform: translateX(-50%);
    }

    .p-toast-center {
        min-width: 20vw;
        transform: translate(-50%, -50%);
    }

    .p-toast-message-enter-from {
        opacity: 0;
        transform: translateY(50%);
    }

    .p-toast-message-leave-from {
        max-height: 1000px;
    }

    .p-toast .p-toast-message.p-toast-message-leave-to {
        max-height: 0;
        opacity: 0;
        margin-bottom: 0;
        overflow: hidden;
    }

    .p-toast-message-enter-active {
        transition:
            transform 0.3s,
            opacity 0.3s;
    }

    .p-toast-message-leave-active {
        transition:
            max-height 0.45s cubic-bezier(0, 1, 0, 1),
            opacity 0.3s,
            margin-bottom 0.3s;
    }
`;function Fc(e){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}function hu(e,t,r){return(t=I9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I9(e){var t=A9(e,"string");return Fc(t)=="symbol"?t:t+""}function A9(e,t){if(Fc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O9={root:function(t){var r=t.position;return{position:"fixed",top:r==="top-right"||r==="top-left"||r==="top-center"?"20px":r==="center"?"50%":null,right:(r==="top-right"||r==="bottom-right")&&"20px",bottom:(r==="bottom-left"||r==="bottom-right"||r==="bottom-center")&&"20px",left:r==="top-left"||r==="bottom-left"?"20px":r==="center"||r==="top-center"||r==="bottom-center"?"50%":null}}},L9={root:function(t){var r=t.props;return["p-toast p-component p-toast-"+r.position]},message:function(t){var r=t.props;return["p-toast-message",{"p-toast-message-info":r.message.severity==="info"||r.message.severity===void 0,"p-toast-message-warn":r.message.severity==="warn","p-toast-message-error":r.message.severity==="error","p-toast-message-success":r.message.severity==="success","p-toast-message-secondary":r.message.severity==="secondary","p-toast-message-contrast":r.message.severity==="contrast"}]},messageContent:"p-toast-message-content",messageIcon:function(t){var r=t.props;return["p-toast-message-icon",hu(hu(hu(hu({},r.infoIcon,r.message.severity==="info"),r.warnIcon,r.message.severity==="warn"),r.errorIcon,r.message.severity==="error"),r.successIcon,r.message.severity==="success")]},messageText:"p-toast-message-text",summary:"p-toast-summary",detail:"p-toast-detail",closeButton:"p-toast-close-button",closeIcon:"p-toast-close-icon"},F9=Xt.extend({name:"toast",style:S9,classes:L9,inlineStyles:O9}),D9=`
.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,B9=Xt.extend({name:"baseicon",css:D9});function Dc(e){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function MM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function xM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(r),!0).forEach(function(n){R9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R9(e,t,r){return(t=z9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z9(e){var t=N9(e,"string");return Dc(t)=="symbol"?t:t+""}function N9(e,t){if(Dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wi={name:"BaseIcon",extends:qn,props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},style:B9,provide:function(){return{$pcIcon:this,$parentInstance:this}},methods:{pti:function(){var t=yi(this.label);return xM(xM({},!this.isUnstyled&&{class:["p-icon",{"p-icon-spin":this.spin}]}),{},{role:t?void 0:"img","aria-label":t?void 0:this.label,"aria-hidden":t})}}},Kh={name:"CheckIcon",extends:wi};function j9(e){return G9(e)||U9(e)||W9(e)||V9()}function V9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W9(e,t){if(e){if(typeof e=="string")return qh(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qh(e,t):void 0}}function U9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G9(e){if(Array.isArray(e))return qh(e)}function qh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H9(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),j9(t[0]||(t[0]=[Ze("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1)])),16)}Kh.render=H9;var Xh={name:"ExclamationTriangleIcon",extends:wi};function K9(e){return Y9(e)||Q9(e)||X9(e)||q9()}function q9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X9(e,t){if(e){if(typeof e=="string")return Qh(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qh(e,t):void 0}}function Q9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Y9(e){if(Array.isArray(e))return Qh(e)}function Qh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J9(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),K9(t[0]||(t[0]=[Ze("path",{d:"M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z",fill:"currentColor"},null,-1),Ze("path",{d:"M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z",fill:"currentColor"},null,-1),Ze("path",{d:"M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z",fill:"currentColor"},null,-1)])),16)}Xh.render=J9;var Yh={name:"InfoCircleIcon",extends:wi};function Z9(e){return nW(e)||rW(e)||tW(e)||eW()}function eW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tW(e,t){if(e){if(typeof e=="string")return Jh(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jh(e,t):void 0}}function rW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nW(e){if(Array.isArray(e))return Jh(e)}function Jh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oW(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Z9(t[0]||(t[0]=[Ze("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z",fill:"currentColor"},null,-1)])),16)}Yh.render=oW;var Ef={name:"TimesIcon",extends:wi};function sW(e){return cW(e)||lW(e)||aW(e)||iW()}function iW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aW(e,t){if(e){if(typeof e=="string")return Zh(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zh(e,t):void 0}}function lW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cW(e){if(Array.isArray(e))return Zh(e)}function Zh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dW(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),sW(t[0]||(t[0]=[Ze("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"},null,-1)])),16)}Ef.render=dW;var eg={name:"TimesCircleIcon",extends:wi};function uW(e){return hW(e)||mW(e)||pW(e)||fW()}function fW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pW(e,t){if(e){if(typeof e=="string")return tg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tg(e,t):void 0}}function mW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hW(e){if(Array.isArray(e))return tg(e)}function tg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gW(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),uW(t[0]||(t[0]=[Ze("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z",fill:"currentColor"},null,-1)])),16)}eg.render=gW;function Bc(e){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(e)}function TM(e,t){return yW(e)||vW(e,t)||bW(e,t)||_W()}function _W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bW(e,t){if(e){if(typeof e=="string")return CM(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?CM(e,t):void 0}}function CM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,s,i,a=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function yW(e){if(Array.isArray(e))return e}function kM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kM(Object(r),!0).forEach(function(n){rg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rg(e,t,r){return(t=wW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wW(e){var t=MW(e,"string");return Bc(t)=="symbol"?t:t+""}function MW(e,t){if(Bc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nt={_getMeta:function(){return[vs(arguments.length<=0?void 0:arguments[0])||arguments.length<=0?void 0:arguments[0],Zn(vs(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1])]},_getConfig:function(t,r){var n,o,s;return(n=(t==null||(o=t.instance)===null||o===void 0?void 0:o.$primevue)||(r==null||(s=r.ctx)===null||s===void 0||(s=s.appContext)===null||s===void 0||(s=s.config)===null||s===void 0||(s=s.globalProperties)===null||s===void 0?void 0:s.$primevue))===null||n===void 0?void 0:n.config},_getOptionValue:c_,_getPTValue:function(){var t,r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=function(){var _=Nt._getOptionValue.apply(Nt,arguments);return to(_)||F2(_)?{class:_}:_},c=((t=n.binding)===null||t===void 0||(t=t.value)===null||t===void 0?void 0:t.ptOptions)||((r=n.$primevueConfig)===null||r===void 0?void 0:r.ptOptions)||{},u=c.mergeSections,d=u===void 0?!0:u,f=c.mergeProps,p=f===void 0?!1:f,m=a?Nt._useDefaultPT(n,n.defaultPT(),l,s,i):void 0,b=Nt._usePT(n,Nt._getPT(o,n.$name),l,s,Yt(Yt({},i),{},{global:m||{}})),E=Nt._getPTDatasets(n,s);return d||!d&&b?p?Nt._mergeProps(n,p,m,b,E):Yt(Yt(Yt({},m),b),E):Yt(Yt({},b),E)},_getPTDatasets:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="data-pc-";return Yt(Yt({},r==="root"&&rg({},"".concat(n,"name"),hs(t.$name))),{},rg({},"".concat(n,"section"),hs(r)))},_getPT:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=function(i){var a,l=n?n(i):i,c=hs(r);return(a=l?.[c])!==null&&a!==void 0?a:l};return t&&Object.hasOwn(t,"_usept")?{_usept:t._usept,originalValue:o(t.originalValue),value:o(t.value)}:o(t)},_usePT:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,i=function(E){return n(E,o,s)};if(r&&Object.hasOwn(r,"_usept")){var a,l=r._usept||((a=t.$primevueConfig)===null||a===void 0?void 0:a.ptOptions)||{},c=l.mergeSections,u=c===void 0?!0:c,d=l.mergeProps,f=d===void 0?!1:d,p=i(r.originalValue),m=i(r.value);return p===void 0&&m===void 0?void 0:to(m)?m:to(p)?p:u||!u&&m?f?Nt._mergeProps(t,f,p,m):Yt(Yt({},p),m):m}return i(r)},_useDefaultPT:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return Nt._usePT(t,r,n,o,s)},_loadStyles:function(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,s=Nt._getConfig(n,o),i={nonce:s==null||(t=s.csp)===null||t===void 0?void 0:t.nonce};Nt._loadCoreStyles(r,i),Nt._loadThemeStyles(r,i),Nt._loadScopedThemeStyles(r,i),Nt._removeThemeListeners(r),r.$loadStyles=function(){return Nt._loadThemeStyles(r,i)},Nt._themeChangeListener(r.$loadStyles)},_loadCoreStyles:function(){var t,r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(!di.isStyleNameLoaded((t=n.$style)===null||t===void 0?void 0:t.name)&&(r=n.$style)!==null&&r!==void 0&&r.name){var s;Xt.loadCSS(o),(s=n.$style)===null||s===void 0||s.loadCSS(o),di.setLoadedStyleName(n.$style.name)}},_loadThemeStyles:function(){var t,r,n,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(!(o!=null&&o.isUnstyled()||(o==null||(t=o.theme)===null||t===void 0?void 0:t.call(o))==="none")){if(!gr.isStyleNameLoaded("common")){var i,a,l=((i=o.$style)===null||i===void 0||(a=i.getCommonTheme)===null||a===void 0?void 0:a.call(i))||{},c=l.primitive,u=l.semantic,d=l.global,f=l.style;Xt.load(c?.css,Yt({name:"primitive-variables"},s)),Xt.load(u?.css,Yt({name:"semantic-variables"},s)),Xt.load(d?.css,Yt({name:"global-variables"},s)),Xt.loadStyle(Yt({name:"global-style"},s),f),gr.setLoadedStyleName("common")}if(!gr.isStyleNameLoaded((r=o.$style)===null||r===void 0?void 0:r.name)&&(n=o.$style)!==null&&n!==void 0&&n.name){var p,m,b,E,h=((p=o.$style)===null||p===void 0||(m=p.getDirectiveTheme)===null||m===void 0?void 0:m.call(p))||{},_=h.css,T=h.style;(b=o.$style)===null||b===void 0||b.load(_,Yt({name:"".concat(o.$style.name,"-variables")},s)),(E=o.$style)===null||E===void 0||E.loadStyle(Yt({name:"".concat(o.$style.name,"-style")},s),T),gr.setLoadedStyleName(o.$style.name)}if(!gr.isStyleNameLoaded("layer-order")){var g,M,x=(g=o.$style)===null||g===void 0||(M=g.getLayerOrderThemeCSS)===null||M===void 0?void 0:M.call(g);Xt.load(x,Yt({name:"layer-order",first:!0},s)),gr.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=t.preset();if(n&&t.$attrSelector){var o,s,i,a=((o=t.$style)===null||o===void 0||(s=o.getPresetTheme)===null||s===void 0?void 0:s.call(o,n,"[".concat(t.$attrSelector,"]")))||{},l=a.css,c=(i=t.$style)===null||i===void 0?void 0:i.load(l,Yt({name:"".concat(t.$attrSelector,"-").concat(t.$style.name)},r));t.scopedStyleEl=c.el}},_themeChangeListener:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};di.clearLoadedStyleNames(),Tn.on("theme:change",t)},_removeThemeListeners:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Tn.off("theme:change",t.$loadStyles),t.$loadStyles=void 0},_hook:function(t,r,n,o,s,i){var a,l,c="on".concat(s4(r)),u=Nt._getConfig(o,s),d=n?.$instance,f=Nt._usePT(d,Nt._getPT(o==null||(a=o.value)===null||a===void 0?void 0:a.pt,t),Nt._getOptionValue,"hooks.".concat(c)),p=Nt._useDefaultPT(d,u==null||(l=u.pt)===null||l===void 0||(l=l.directives)===null||l===void 0?void 0:l[t],Nt._getOptionValue,"hooks.".concat(c)),m={el:n,binding:o,vnode:s,prevVnode:i};f?.(d,m),p?.(d,m)},_mergeProps:function(){for(var t=arguments.length>1?arguments[1]:void 0,r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return l_(t)?t.apply(void 0,n):Qe.apply(void 0,n)},_extend:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=function(a,l,c,u,d){var f,p,m,b;l._$instances=l._$instances||{};var E=Nt._getConfig(c,u),h=l._$instances[t]||{},_=yi(h)?Yt(Yt({},r),r?.methods):{};l._$instances[t]=Yt(Yt({},h),{},{$name:t,$host:l,$binding:c,$modifiers:c?.modifiers,$value:c?.value,$el:h.$el||l||void 0,$style:Yt({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadStyle:function(){}},r?.style),$primevueConfig:E,$attrSelector:(f=l.$pd)===null||f===void 0||(f=f[t])===null||f===void 0?void 0:f.attrSelector,defaultPT:function(){return Nt._getPT(E?.pt,void 0,function(g){var M;return g==null||(M=g.directives)===null||M===void 0?void 0:M[t]})},isUnstyled:function(){var g,M;return((g=l._$instances[t])===null||g===void 0||(g=g.$binding)===null||g===void 0||(g=g.value)===null||g===void 0?void 0:g.unstyled)!==void 0?(M=l._$instances[t])===null||M===void 0||(M=M.$binding)===null||M===void 0||(M=M.value)===null||M===void 0?void 0:M.unstyled:E?.unstyled},theme:function(){var g;return(g=l._$instances[t])===null||g===void 0||(g=g.$primevueConfig)===null||g===void 0?void 0:g.theme},preset:function(){var g;return(g=l._$instances[t])===null||g===void 0||(g=g.$binding)===null||g===void 0||(g=g.value)===null||g===void 0?void 0:g.dt},ptm:function(){var g,M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Nt._getPTValue(l._$instances[t],(g=l._$instances[t])===null||g===void 0||(g=g.$binding)===null||g===void 0||(g=g.value)===null||g===void 0?void 0:g.pt,M,Yt({},x))},ptmo:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Nt._getPTValue(l._$instances[t],g,M,x,!1)},cx:function(){var g,M,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(g=l._$instances[t])!==null&&g!==void 0&&g.isUnstyled()?void 0:Nt._getOptionValue((M=l._$instances[t])===null||M===void 0||(M=M.$style)===null||M===void 0?void 0:M.classes,x,Yt({},w))},sx:function(){var g,M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return x?Nt._getOptionValue((g=l._$instances[t])===null||g===void 0||(g=g.$style)===null||g===void 0?void 0:g.inlineStyles,M,Yt({},w)):void 0}},_),l.$instance=l._$instances[t],(p=(m=l.$instance)[a])===null||p===void 0||p.call(m,l,c,u,d),l["$".concat(t)]=l.$instance,Nt._hook(t,a,l,c,u,d),l.$pd||(l.$pd={}),l.$pd[t]=Yt(Yt({},(b=l.$pd)===null||b===void 0?void 0:b[t]),{},{name:t,instance:l._$instances[t]})},o=function(a){var l,c,u,d=a._$instances[t],f=d?.watch,p=function(E){var h,_=E.newValue,T=E.oldValue;return f==null||(h=f.config)===null||h===void 0?void 0:h.call(d,_,T)},m=function(E){var h,_=E.newValue,T=E.oldValue;return f==null||(h=f["config.ripple"])===null||h===void 0?void 0:h.call(d,_,T)};d.$watchersCallback={config:p,"config.ripple":m},f==null||(l=f.config)===null||l===void 0||l.call(d,d?.$primevueConfig),ui.on("config:change",p),f==null||(c=f["config.ripple"])===null||c===void 0||c.call(d,d==null||(u=d.$primevueConfig)===null||u===void 0?void 0:u.ripple),ui.on("config:ripple:change",m)},s=function(a){var l=a._$instances[t].$watchersCallback;l&&(ui.off("config:change",l.config),ui.off("config:ripple:change",l["config.ripple"]),a._$instances[t].$watchersCallback=void 0)};return{created:function(a,l,c,u){a.$pd||(a.$pd={}),a.$pd[t]={name:t,attrSelector:w4("pd")},n("created",a,l,c,u)},beforeMount:function(a,l,c,u){var d;Nt._loadStyles((d=a.$pd[t])===null||d===void 0?void 0:d.instance,l,c),n("beforeMount",a,l,c,u),o(a)},mounted:function(a,l,c,u){var d;Nt._loadStyles((d=a.$pd[t])===null||d===void 0?void 0:d.instance,l,c),n("mounted",a,l,c,u)},beforeUpdate:function(a,l,c,u){n("beforeUpdate",a,l,c,u)},updated:function(a,l,c,u){var d;Nt._loadStyles((d=a.$pd[t])===null||d===void 0?void 0:d.instance,l,c),n("updated",a,l,c,u)},beforeUnmount:function(a,l,c,u){var d;s(a),Nt._removeThemeListeners((d=a.$pd[t])===null||d===void 0?void 0:d.instance),n("beforeUnmount",a,l,c,u)},unmounted:function(a,l,c,u){var d;(d=a.$pd[t])===null||d===void 0||(d=d.instance)===null||d===void 0||(d=d.scopedStyleEl)===null||d===void 0||(d=d.value)===null||d===void 0||d.remove(),n("unmounted",a,l,c,u)}}},extend:function(){var t=Nt._getMeta.apply(Nt,arguments),r=TM(t,2),n=r[0],o=r[1];return Yt({extend:function(){var i=Nt._getMeta.apply(Nt,arguments),a=TM(i,2),l=a[0],c=a[1];return Nt.extend(l,Yt(Yt(Yt({},o),o?.methods),c))}},Nt._extend(n,o))}},xW=`
    .p-ink {
        display: block;
        position: absolute;
        background: dt('ripple.background');
        border-radius: 100%;
        transform: scale(0);
        pointer-events: none;
    }

    .p-ink-active {
        animation: ripple 0.4s linear;
    }

    @keyframes ripple {
        100% {
            opacity: 0;
            transform: scale(2.5);
        }
    }
`,TW={root:"p-ink"},CW=Xt.extend({name:"ripple-directive",style:xW,classes:TW}),kW=Nt.extend({style:CW});function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function EW(e){return IW(e)||SW(e)||$W(e)||PW()}function PW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $W(e,t){if(e){if(typeof e=="string")return ng(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ng(e,t):void 0}}function SW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IW(e){if(Array.isArray(e))return ng(e)}function ng(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function EM(e,t,r){return(t=AW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AW(e){var t=OW(e,"string");return Rc(t)=="symbol"?t:t+""}function OW(e,t){if(Rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pf=kW.extend("ripple",{watch:{"config.ripple":function(t){t?(this.createRipple(this.$host),this.bindEvents(this.$host),this.$host.setAttribute("data-pd-ripple",!0),this.$host.style.overflow="hidden",this.$host.style.position="relative"):(this.remove(this.$host),this.$host.removeAttribute("data-pd-ripple"))}},unmounted:function(t){this.remove(t)},timeout:void 0,methods:{bindEvents:function(t){t.addEventListener("mousedown",this.onMouseDown.bind(this))},unbindEvents:function(t){t.removeEventListener("mousedown",this.onMouseDown.bind(this))},createRipple:function(t){var r=this.getInk(t);r||(r=N2("span",EM(EM({role:"presentation","aria-hidden":!0,"data-p-ink":!0,"data-p-ink-active":!1,class:!this.isUnstyled()&&this.cx("root"),onAnimationEnd:this.onAnimationEnd.bind(this)},this.$attrSelector,""),"p-bind",this.ptm("root"))),t.appendChild(r),this.$el=r)},remove:function(t){var r=this.getInk(t);r&&(this.$host.style.overflow="",this.$host.style.position="",this.unbindEvents(t),r.removeEventListener("animationend",this.onAnimationEnd),r.remove())},onMouseDown:function(t){var r=this,n=t.currentTarget,o=this.getInk(n);if(!(!o||getComputedStyle(o,null).display==="none")){if(!this.isUnstyled()&&fc(o,"p-ink-active"),o.setAttribute("data-p-ink-active","false"),!tM(o)&&!rM(o)){var s=Math.max(pc(n),V2(n));o.style.height=s+"px",o.style.width=s+"px"}var i=b4(n),a=t.pageX-i.left+document.body.scrollTop-rM(o)/2,l=t.pageY-i.top+document.body.scrollLeft-tM(o)/2;o.style.top=l+"px",o.style.left=a+"px",!this.isUnstyled()&&$c(o,"p-ink-active"),o.setAttribute("data-p-ink-active","true"),this.timeout=setTimeout(function(){o&&(!r.isUnstyled()&&fc(o,"p-ink-active"),o.setAttribute("data-p-ink-active","false"))},401)}},onAnimationEnd:function(t){this.timeout&&clearTimeout(this.timeout),!this.isUnstyled()&&fc(t.currentTarget,"p-ink-active"),t.currentTarget.setAttribute("data-p-ink-active","false")},getInk:function(t){return t&&t.children?EW(t.children).find(function(r){return g4(r,"data-pc-name")==="ripple"}):void 0}}}),LW={name:"BaseToast",extends:qn,props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},breakpoints:{type:Object,default:null},closeIcon:{type:String,default:void 0},infoIcon:{type:String,default:void 0},warnIcon:{type:String,default:void 0},errorIcon:{type:String,default:void 0},successIcon:{type:String,default:void 0},closeButtonProps:{type:null,default:null},onMouseEnter:{type:Function,default:void 0},onMouseLeave:{type:Function,default:void 0},onClick:{type:Function,default:void 0}},style:F9,provide:function(){return{$pcToast:this,$parentInstance:this}}};function zc(e){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zc(e)}function FW(e,t,r){return(t=DW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DW(e){var t=BW(e,"string");return zc(t)=="symbol"?t:t+""}function BW(e,t){if(zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nP={name:"ToastMessage",hostName:"Toast",extends:qn,emits:["close"],closeTimeout:null,createdAt:null,lifeRemaining:null,props:{message:{type:null,default:null},templates:{type:Object,default:null},closeIcon:{type:String,default:null},infoIcon:{type:String,default:null},warnIcon:{type:String,default:null},errorIcon:{type:String,default:null},successIcon:{type:String,default:null},closeButtonProps:{type:null,default:null},onMouseEnter:{type:Function,default:void 0},onMouseLeave:{type:Function,default:void 0},onClick:{type:Function,default:void 0}},mounted:function(){this.message.life&&(this.lifeRemaining=this.message.life,this.startTimeout())},beforeUnmount:function(){this.clearCloseTimeout()},methods:{startTimeout:function(){var t=this;this.createdAt=new Date().valueOf(),this.closeTimeout=setTimeout(function(){t.close({message:t.message,type:"life-end"})},this.lifeRemaining)},close:function(t){this.$emit("close",t)},onCloseClick:function(){this.clearCloseTimeout(),this.close({message:this.message,type:"close"})},clearCloseTimeout:function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},onMessageClick:function(t){var r;(r=this.onClick)===null||r===void 0||r.call(this,{originalEvent:t,message:this.message})},handleMouseEnter:function(t){if(this.onMouseEnter){if(this.onMouseEnter({originalEvent:t,message:this.message}),t.defaultPrevented)return;this.message.life&&(this.lifeRemaining=this.createdAt+this.lifeRemaining-new Date().valueOf(),this.createdAt=null,this.clearCloseTimeout())}},handleMouseLeave:function(t){if(this.onMouseLeave){if(this.onMouseLeave({originalEvent:t,message:this.message}),t.defaultPrevented)return;this.message.life&&this.startTimeout()}}},computed:{iconComponent:function(){return{info:!this.infoIcon&&Yh,success:!this.successIcon&&Kh,warn:!this.warnIcon&&Xh,error:!this.errorIcon&&eg}[this.message.severity]},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0},dataP:function(){return Kn(FW({},this.message.severity,this.message.severity))}},components:{TimesIcon:Ef,InfoCircleIcon:Yh,CheckIcon:Kh,ExclamationTriangleIcon:Xh,TimesCircleIcon:eg},directives:{ripple:Pf}};function Nc(e){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function PM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function $M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PM(Object(r),!0).forEach(function(n){RW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RW(e,t,r){return(t=zW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e){var t=NW(e,"string");return Nc(t)=="symbol"?t:t+""}function NW(e,t){if(Nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jW=["data-p"],VW=["data-p"],WW=["data-p"],UW=["data-p"],GW=["aria-label","data-p"];function HW(e,t,r,n,o,s){var i=ad("ripple");return He(),at("div",Qe({class:[e.cx("message"),r.message.styleClass],role:"alert","aria-live":"assertive","aria-atomic":"true","data-p":s.dataP},e.ptm("message"),{onClick:t[1]||(t[1]=function(){return s.onMessageClick&&s.onMessageClick.apply(s,arguments)}),onMouseenter:t[2]||(t[2]=function(){return s.handleMouseEnter&&s.handleMouseEnter.apply(s,arguments)}),onMouseleave:t[3]||(t[3]=function(){return s.handleMouseLeave&&s.handleMouseLeave.apply(s,arguments)})}),[r.templates.container?(He(),Sr(gs(r.templates.container),{key:0,message:r.message,closeCallback:s.onCloseClick},null,8,["message","closeCallback"])):(He(),at("div",Qe({key:1,class:[e.cx("messageContent"),r.message.contentStyleClass]},e.ptm("messageContent")),[r.templates.message?(He(),Sr(gs(r.templates.message),{key:1,message:r.message},null,8,["message"])):(He(),at(pr,{key:0},[(He(),Sr(gs(r.templates.messageicon?r.templates.messageicon:r.templates.icon?r.templates.icon:s.iconComponent&&s.iconComponent.name?s.iconComponent:"span"),Qe({class:e.cx("messageIcon")},e.ptm("messageIcon")),null,16,["class"])),Ze("div",Qe({class:e.cx("messageText"),"data-p":s.dataP},e.ptm("messageText")),[Ze("span",Qe({class:e.cx("summary"),"data-p":s.dataP},e.ptm("summary")),fr(r.message.summary),17,WW),r.message.detail?(He(),at("div",Qe({key:0,class:e.cx("detail"),"data-p":s.dataP},e.ptm("detail")),fr(r.message.detail),17,UW)):Wt("",!0)],16,VW)],64)),r.message.closable!==!1?(He(),at("div",L3(Qe({key:2},e.ptm("buttonContainer"))),[sd((He(),at("button",Qe({class:e.cx("closeButton"),type:"button","aria-label":s.closeAriaLabel,onClick:t[0]||(t[0]=function(){return s.onCloseClick&&s.onCloseClick.apply(s,arguments)}),autofocus:"","data-p":s.dataP},$M($M({},r.closeButtonProps),e.ptm("closeButton"))),[(He(),Sr(gs(r.templates.closeicon||"TimesIcon"),Qe({class:[e.cx("closeIcon"),r.closeIcon]},e.ptm("closeIcon")),null,16,["class"]))],16,GW)),[[i]])],16)):Wt("",!0)],16))],16,jW)}nP.render=HW;function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function KW(e,t,r){return(t=qW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qW(e){var t=XW(e,"string");return jc(t)=="symbol"?t:t+""}function XW(e,t){if(jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QW(e){return eU(e)||ZW(e)||JW(e)||YW()}function YW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JW(e,t){if(e){if(typeof e=="string")return og(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?og(e,t):void 0}}function ZW(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eU(e){if(Array.isArray(e))return og(e)}function og(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tU=0,u_={name:"Toast",extends:LW,inheritAttrs:!1,emits:["close","life-end"],data:function(){return{messages:[]}},styleElement:null,mounted:function(){yo.on("add",this.onAdd),yo.on("remove",this.onRemove),yo.on("remove-group",this.onRemoveGroup),yo.on("remove-all-groups",this.onRemoveAllGroups),this.breakpoints&&this.createStyle()},beforeUnmount:function(){this.destroyStyle(),this.$refs.container&&this.autoZIndex&&Co.clear(this.$refs.container),yo.off("add",this.onAdd),yo.off("remove",this.onRemove),yo.off("remove-group",this.onRemoveGroup),yo.off("remove-all-groups",this.onRemoveAllGroups)},methods:{add:function(t){t.id==null&&(t.id=tU++),this.messages=[].concat(QW(this.messages),[t])},remove:function(t){var r=this.messages.findIndex(function(n){return n.id===t.message.id});r!==-1&&(this.messages.splice(r,1),this.$emit(t.type,{message:t.message}))},onAdd:function(t){this.group==t.group&&this.add(t)},onRemove:function(t){this.remove({message:t,type:"close"})},onRemoveGroup:function(t){this.group===t&&(this.messages=[])},onRemoveAllGroups:function(){var t=this;this.messages.forEach(function(r){return t.$emit("close",{message:r})}),this.messages=[]},onEnter:function(){this.autoZIndex&&Co.set("modal",this.$refs.container,this.baseZIndex||this.$primevue.config.zIndex.modal)},onLeave:function(){var t=this;this.$refs.container&&this.autoZIndex&&yi(this.messages)&&setTimeout(function(){Co.clear(t.$refs.container)},200)},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var t;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",d_(this.styleElement,"nonce",(t=this.$primevue)===null||t===void 0||(t=t.config)===null||t===void 0||(t=t.csp)===null||t===void 0?void 0:t.nonce),document.head.appendChild(this.styleElement);var r="";for(var n in this.breakpoints){var o="";for(var s in this.breakpoints[n])o+=s+":"+this.breakpoints[n][s]+"!important;";r+=`
                        @media screen and (max-width: `.concat(n,`) {
                            .p-toast[`).concat(this.$attrSelector,`] {
                                `).concat(o,`
                            }
                        }
                    `)}this.styleElement.innerHTML=r}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}},computed:{dataP:function(){return Kn(KW({},this.position,this.position))}},components:{ToastMessage:nP,Portal:ud}};function Vc(e){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vc(e)}function SM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function rU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(r),!0).forEach(function(n){nU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nU(e,t,r){return(t=oU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oU(e){var t=sU(e,"string");return Vc(t)=="symbol"?t:t+""}function sU(e,t){if(Vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iU=["data-p"];function aU(e,t,r,n,o,s){var i=Po("ToastMessage"),a=Po("Portal");return He(),Sr(a,null,{default:zr(function(){return[Ze("div",Qe({ref:"container",class:e.cx("root"),style:e.sx("root",!0,{position:e.position}),"data-p":s.dataP},e.ptmi("root")),[Vt(NL,Qe({name:"p-toast-message",tag:"div",onEnter:s.onEnter,onLeave:s.onLeave},rU({},e.ptm("transition"))),{default:zr(function(){return[(He(!0),at(pr,null,wc(o.messages,function(l){return He(),Sr(i,{key:l.id,message:l,templates:e.$slots,closeIcon:e.closeIcon,infoIcon:e.infoIcon,warnIcon:e.warnIcon,errorIcon:e.errorIcon,successIcon:e.successIcon,closeButtonProps:e.closeButtonProps,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,unstyled:e.unstyled,onClose:t[0]||(t[0]=function(c){return s.remove(c)}),pt:e.pt},null,8,["message","templates","closeIcon","infoIcon","warnIcon","errorIcon","successIcon","closeButtonProps","onMouseEnter","onMouseLeave","onClick","unstyled","pt"])}),128))]}),_:1},16,["onEnter","onLeave"])],16,iU)]}),_:1})}u_.render=aU;var oP={name:"SpinnerIcon",extends:wi};function lU(e){return fU(e)||uU(e)||dU(e)||cU()}function cU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dU(e,t){if(e){if(typeof e=="string")return sg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sg(e,t):void 0}}function uU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fU(e){if(Array.isArray(e))return sg(e)}function sg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pU(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),lU(t[0]||(t[0]=[Ze("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"},null,-1)])),16)}oP.render=pU;var mU=`
    .p-badge {
        display: inline-flex;
        border-radius: dt('badge.border.radius');
        align-items: center;
        justify-content: center;
        padding: dt('badge.padding');
        background: dt('badge.primary.background');
        color: dt('badge.primary.color');
        font-size: dt('badge.font.size');
        font-weight: dt('badge.font.weight');
        min-width: dt('badge.min.width');
        height: dt('badge.height');
    }

    .p-badge-dot {
        width: dt('badge.dot.size');
        min-width: dt('badge.dot.size');
        height: dt('badge.dot.size');
        border-radius: 50%;
        padding: 0;
    }

    .p-badge-circle {
        padding: 0;
        border-radius: 50%;
    }

    .p-badge-secondary {
        background: dt('badge.secondary.background');
        color: dt('badge.secondary.color');
    }

    .p-badge-success {
        background: dt('badge.success.background');
        color: dt('badge.success.color');
    }

    .p-badge-info {
        background: dt('badge.info.background');
        color: dt('badge.info.color');
    }

    .p-badge-warn {
        background: dt('badge.warn.background');
        color: dt('badge.warn.color');
    }

    .p-badge-danger {
        background: dt('badge.danger.background');
        color: dt('badge.danger.color');
    }

    .p-badge-contrast {
        background: dt('badge.contrast.background');
        color: dt('badge.contrast.color');
    }

    .p-badge-sm {
        font-size: dt('badge.sm.font.size');
        min-width: dt('badge.sm.min.width');
        height: dt('badge.sm.height');
    }

    .p-badge-lg {
        font-size: dt('badge.lg.font.size');
        min-width: dt('badge.lg.min.width');
        height: dt('badge.lg.height');
    }

    .p-badge-xl {
        font-size: dt('badge.xl.font.size');
        min-width: dt('badge.xl.min.width');
        height: dt('badge.xl.height');
    }
`,hU={root:function(t){var r=t.props,n=t.instance;return["p-badge p-component",{"p-badge-circle":Er(r.value)&&String(r.value).length===1,"p-badge-dot":yi(r.value)&&!n.$slots.default,"p-badge-sm":r.size==="small","p-badge-lg":r.size==="large","p-badge-xl":r.size==="xlarge","p-badge-info":r.severity==="info","p-badge-success":r.severity==="success","p-badge-warn":r.severity==="warn","p-badge-danger":r.severity==="danger","p-badge-secondary":r.severity==="secondary","p-badge-contrast":r.severity==="contrast"}]}},gU=Xt.extend({name:"badge",style:mU,classes:hU}),_U={name:"BaseBadge",extends:qn,props:{value:{type:[String,Number],default:null},severity:{type:String,default:null},size:{type:String,default:null}},style:gU,provide:function(){return{$pcBadge:this,$parentInstance:this}}};function Wc(e){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(e)}function IM(e,t,r){return(t=bU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bU(e){var t=vU(e,"string");return Wc(t)=="symbol"?t:t+""}function vU(e,t){if(Wc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sP={name:"Badge",extends:_U,inheritAttrs:!1,computed:{dataP:function(){return Kn(IM(IM({circle:this.value!=null&&String(this.value).length===1,empty:this.value==null&&!this.$slots.default},this.severity,this.severity),this.size,this.size))}}},yU=["data-p"];function wU(e,t,r,n,o,s){return He(),at("span",Qe({class:e.cx("root"),"data-p":s.dataP},e.ptmi("root")),[qt(e.$slots,"default",{},function(){return[ra(fr(e.value),1)]})],16,yU)}sP.render=wU;var MU=`
    .p-button {
        display: inline-flex;
        cursor: pointer;
        user-select: none;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
        color: dt('button.primary.color');
        background: dt('button.primary.background');
        border: 1px solid dt('button.primary.border.color');
        padding: dt('button.padding.y') dt('button.padding.x');
        font-size: 1rem;
        font-family: inherit;
        font-feature-settings: inherit;
        transition:
            background dt('button.transition.duration'),
            color dt('button.transition.duration'),
            border-color dt('button.transition.duration'),
            outline-color dt('button.transition.duration'),
            box-shadow dt('button.transition.duration');
        border-radius: dt('button.border.radius');
        outline-color: transparent;
        gap: dt('button.gap');
    }

    .p-button:disabled {
        cursor: default;
    }

    .p-button-icon-right {
        order: 1;
    }

    .p-button-icon-right:dir(rtl) {
        order: -1;
    }

    .p-button:not(.p-button-vertical) .p-button-icon:not(.p-button-icon-right):dir(rtl) {
        order: 1;
    }

    .p-button-icon-bottom {
        order: 2;
    }

    .p-button-icon-only {
        width: dt('button.icon.only.width');
        padding-inline-start: 0;
        padding-inline-end: 0;
        gap: 0;
    }

    .p-button-icon-only.p-button-rounded {
        border-radius: 50%;
        height: dt('button.icon.only.width');
    }

    .p-button-icon-only .p-button-label {
        visibility: hidden;
        width: 0;
    }

    .p-button-icon-only::after {
        content: "\0A0";
        visibility: hidden;
        width: 0;
    }

    .p-button-sm {
        font-size: dt('button.sm.font.size');
        padding: dt('button.sm.padding.y') dt('button.sm.padding.x');
    }

    .p-button-sm .p-button-icon {
        font-size: dt('button.sm.font.size');
    }

    .p-button-sm.p-button-icon-only {
        width: dt('button.sm.icon.only.width');
    }

    .p-button-sm.p-button-icon-only.p-button-rounded {
        height: dt('button.sm.icon.only.width');
    }

    .p-button-lg {
        font-size: dt('button.lg.font.size');
        padding: dt('button.lg.padding.y') dt('button.lg.padding.x');
    }

    .p-button-lg .p-button-icon {
        font-size: dt('button.lg.font.size');
    }

    .p-button-lg.p-button-icon-only {
        width: dt('button.lg.icon.only.width');
    }

    .p-button-lg.p-button-icon-only.p-button-rounded {
        height: dt('button.lg.icon.only.width');
    }

    .p-button-vertical {
        flex-direction: column;
    }

    .p-button-label {
        font-weight: dt('button.label.font.weight');
    }

    .p-button-fluid {
        width: 100%;
    }

    .p-button-fluid.p-button-icon-only {
        width: dt('button.icon.only.width');
    }

    .p-button:not(:disabled):hover {
        background: dt('button.primary.hover.background');
        border: 1px solid dt('button.primary.hover.border.color');
        color: dt('button.primary.hover.color');
    }

    .p-button:not(:disabled):active {
        background: dt('button.primary.active.background');
        border: 1px solid dt('button.primary.active.border.color');
        color: dt('button.primary.active.color');
    }

    .p-button:focus-visible {
        box-shadow: dt('button.primary.focus.ring.shadow');
        outline: dt('button.focus.ring.width') dt('button.focus.ring.style') dt('button.primary.focus.ring.color');
        outline-offset: dt('button.focus.ring.offset');
    }

    .p-button .p-badge {
        min-width: dt('button.badge.size');
        height: dt('button.badge.size');
        line-height: dt('button.badge.size');
    }

    .p-button-raised {
        box-shadow: dt('button.raised.shadow');
    }

    .p-button-rounded {
        border-radius: dt('button.rounded.border.radius');
    }

    .p-button-secondary {
        background: dt('button.secondary.background');
        border: 1px solid dt('button.secondary.border.color');
        color: dt('button.secondary.color');
    }

    .p-button-secondary:not(:disabled):hover {
        background: dt('button.secondary.hover.background');
        border: 1px solid dt('button.secondary.hover.border.color');
        color: dt('button.secondary.hover.color');
    }

    .p-button-secondary:not(:disabled):active {
        background: dt('button.secondary.active.background');
        border: 1px solid dt('button.secondary.active.border.color');
        color: dt('button.secondary.active.color');
    }

    .p-button-secondary:focus-visible {
        outline-color: dt('button.secondary.focus.ring.color');
        box-shadow: dt('button.secondary.focus.ring.shadow');
    }

    .p-button-success {
        background: dt('button.success.background');
        border: 1px solid dt('button.success.border.color');
        color: dt('button.success.color');
    }

    .p-button-success:not(:disabled):hover {
        background: dt('button.success.hover.background');
        border: 1px solid dt('button.success.hover.border.color');
        color: dt('button.success.hover.color');
    }

    .p-button-success:not(:disabled):active {
        background: dt('button.success.active.background');
        border: 1px solid dt('button.success.active.border.color');
        color: dt('button.success.active.color');
    }

    .p-button-success:focus-visible {
        outline-color: dt('button.success.focus.ring.color');
        box-shadow: dt('button.success.focus.ring.shadow');
    }

    .p-button-info {
        background: dt('button.info.background');
        border: 1px solid dt('button.info.border.color');
        color: dt('button.info.color');
    }

    .p-button-info:not(:disabled):hover {
        background: dt('button.info.hover.background');
        border: 1px solid dt('button.info.hover.border.color');
        color: dt('button.info.hover.color');
    }

    .p-button-info:not(:disabled):active {
        background: dt('button.info.active.background');
        border: 1px solid dt('button.info.active.border.color');
        color: dt('button.info.active.color');
    }

    .p-button-info:focus-visible {
        outline-color: dt('button.info.focus.ring.color');
        box-shadow: dt('button.info.focus.ring.shadow');
    }

    .p-button-warn {
        background: dt('button.warn.background');
        border: 1px solid dt('button.warn.border.color');
        color: dt('button.warn.color');
    }

    .p-button-warn:not(:disabled):hover {
        background: dt('button.warn.hover.background');
        border: 1px solid dt('button.warn.hover.border.color');
        color: dt('button.warn.hover.color');
    }

    .p-button-warn:not(:disabled):active {
        background: dt('button.warn.active.background');
        border: 1px solid dt('button.warn.active.border.color');
        color: dt('button.warn.active.color');
    }

    .p-button-warn:focus-visible {
        outline-color: dt('button.warn.focus.ring.color');
        box-shadow: dt('button.warn.focus.ring.shadow');
    }

    .p-button-help {
        background: dt('button.help.background');
        border: 1px solid dt('button.help.border.color');
        color: dt('button.help.color');
    }

    .p-button-help:not(:disabled):hover {
        background: dt('button.help.hover.background');
        border: 1px solid dt('button.help.hover.border.color');
        color: dt('button.help.hover.color');
    }

    .p-button-help:not(:disabled):active {
        background: dt('button.help.active.background');
        border: 1px solid dt('button.help.active.border.color');
        color: dt('button.help.active.color');
    }

    .p-button-help:focus-visible {
        outline-color: dt('button.help.focus.ring.color');
        box-shadow: dt('button.help.focus.ring.shadow');
    }

    .p-button-danger {
        background: dt('button.danger.background');
        border: 1px solid dt('button.danger.border.color');
        color: dt('button.danger.color');
    }

    .p-button-danger:not(:disabled):hover {
        background: dt('button.danger.hover.background');
        border: 1px solid dt('button.danger.hover.border.color');
        color: dt('button.danger.hover.color');
    }

    .p-button-danger:not(:disabled):active {
        background: dt('button.danger.active.background');
        border: 1px solid dt('button.danger.active.border.color');
        color: dt('button.danger.active.color');
    }

    .p-button-danger:focus-visible {
        outline-color: dt('button.danger.focus.ring.color');
        box-shadow: dt('button.danger.focus.ring.shadow');
    }

    .p-button-contrast {
        background: dt('button.contrast.background');
        border: 1px solid dt('button.contrast.border.color');
        color: dt('button.contrast.color');
    }

    .p-button-contrast:not(:disabled):hover {
        background: dt('button.contrast.hover.background');
        border: 1px solid dt('button.contrast.hover.border.color');
        color: dt('button.contrast.hover.color');
    }

    .p-button-contrast:not(:disabled):active {
        background: dt('button.contrast.active.background');
        border: 1px solid dt('button.contrast.active.border.color');
        color: dt('button.contrast.active.color');
    }

    .p-button-contrast:focus-visible {
        outline-color: dt('button.contrast.focus.ring.color');
        box-shadow: dt('button.contrast.focus.ring.shadow');
    }

    .p-button-outlined {
        background: transparent;
        border-color: dt('button.outlined.primary.border.color');
        color: dt('button.outlined.primary.color');
    }

    .p-button-outlined:not(:disabled):hover {
        background: dt('button.outlined.primary.hover.background');
        border-color: dt('button.outlined.primary.border.color');
        color: dt('button.outlined.primary.color');
    }

    .p-button-outlined:not(:disabled):active {
        background: dt('button.outlined.primary.active.background');
        border-color: dt('button.outlined.primary.border.color');
        color: dt('button.outlined.primary.color');
    }

    .p-button-outlined.p-button-secondary {
        border-color: dt('button.outlined.secondary.border.color');
        color: dt('button.outlined.secondary.color');
    }

    .p-button-outlined.p-button-secondary:not(:disabled):hover {
        background: dt('button.outlined.secondary.hover.background');
        border-color: dt('button.outlined.secondary.border.color');
        color: dt('button.outlined.secondary.color');
    }

    .p-button-outlined.p-button-secondary:not(:disabled):active {
        background: dt('button.outlined.secondary.active.background');
        border-color: dt('button.outlined.secondary.border.color');
        color: dt('button.outlined.secondary.color');
    }

    .p-button-outlined.p-button-success {
        border-color: dt('button.outlined.success.border.color');
        color: dt('button.outlined.success.color');
    }

    .p-button-outlined.p-button-success:not(:disabled):hover {
        background: dt('button.outlined.success.hover.background');
        border-color: dt('button.outlined.success.border.color');
        color: dt('button.outlined.success.color');
    }

    .p-button-outlined.p-button-success:not(:disabled):active {
        background: dt('button.outlined.success.active.background');
        border-color: dt('button.outlined.success.border.color');
        color: dt('button.outlined.success.color');
    }

    .p-button-outlined.p-button-info {
        border-color: dt('button.outlined.info.border.color');
        color: dt('button.outlined.info.color');
    }

    .p-button-outlined.p-button-info:not(:disabled):hover {
        background: dt('button.outlined.info.hover.background');
        border-color: dt('button.outlined.info.border.color');
        color: dt('button.outlined.info.color');
    }

    .p-button-outlined.p-button-info:not(:disabled):active {
        background: dt('button.outlined.info.active.background');
        border-color: dt('button.outlined.info.border.color');
        color: dt('button.outlined.info.color');
    }

    .p-button-outlined.p-button-warn {
        border-color: dt('button.outlined.warn.border.color');
        color: dt('button.outlined.warn.color');
    }

    .p-button-outlined.p-button-warn:not(:disabled):hover {
        background: dt('button.outlined.warn.hover.background');
        border-color: dt('button.outlined.warn.border.color');
        color: dt('button.outlined.warn.color');
    }

    .p-button-outlined.p-button-warn:not(:disabled):active {
        background: dt('button.outlined.warn.active.background');
        border-color: dt('button.outlined.warn.border.color');
        color: dt('button.outlined.warn.color');
    }

    .p-button-outlined.p-button-help {
        border-color: dt('button.outlined.help.border.color');
        color: dt('button.outlined.help.color');
    }

    .p-button-outlined.p-button-help:not(:disabled):hover {
        background: dt('button.outlined.help.hover.background');
        border-color: dt('button.outlined.help.border.color');
        color: dt('button.outlined.help.color');
    }

    .p-button-outlined.p-button-help:not(:disabled):active {
        background: dt('button.outlined.help.active.background');
        border-color: dt('button.outlined.help.border.color');
        color: dt('button.outlined.help.color');
    }

    .p-button-outlined.p-button-danger {
        border-color: dt('button.outlined.danger.border.color');
        color: dt('button.outlined.danger.color');
    }

    .p-button-outlined.p-button-danger:not(:disabled):hover {
        background: dt('button.outlined.danger.hover.background');
        border-color: dt('button.outlined.danger.border.color');
        color: dt('button.outlined.danger.color');
    }

    .p-button-outlined.p-button-danger:not(:disabled):active {
        background: dt('button.outlined.danger.active.background');
        border-color: dt('button.outlined.danger.border.color');
        color: dt('button.outlined.danger.color');
    }

    .p-button-outlined.p-button-contrast {
        border-color: dt('button.outlined.contrast.border.color');
        color: dt('button.outlined.contrast.color');
    }

    .p-button-outlined.p-button-contrast:not(:disabled):hover {
        background: dt('button.outlined.contrast.hover.background');
        border-color: dt('button.outlined.contrast.border.color');
        color: dt('button.outlined.contrast.color');
    }

    .p-button-outlined.p-button-contrast:not(:disabled):active {
        background: dt('button.outlined.contrast.active.background');
        border-color: dt('button.outlined.contrast.border.color');
        color: dt('button.outlined.contrast.color');
    }

    .p-button-outlined.p-button-plain {
        border-color: dt('button.outlined.plain.border.color');
        color: dt('button.outlined.plain.color');
    }

    .p-button-outlined.p-button-plain:not(:disabled):hover {
        background: dt('button.outlined.plain.hover.background');
        border-color: dt('button.outlined.plain.border.color');
        color: dt('button.outlined.plain.color');
    }

    .p-button-outlined.p-button-plain:not(:disabled):active {
        background: dt('button.outlined.plain.active.background');
        border-color: dt('button.outlined.plain.border.color');
        color: dt('button.outlined.plain.color');
    }

    .p-button-text {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.primary.color');
    }

    .p-button-text:not(:disabled):hover {
        background: dt('button.text.primary.hover.background');
        border-color: transparent;
        color: dt('button.text.primary.color');
    }

    .p-button-text:not(:disabled):active {
        background: dt('button.text.primary.active.background');
        border-color: transparent;
        color: dt('button.text.primary.color');
    }

    .p-button-text.p-button-secondary {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.secondary.color');
    }

    .p-button-text.p-button-secondary:not(:disabled):hover {
        background: dt('button.text.secondary.hover.background');
        border-color: transparent;
        color: dt('button.text.secondary.color');
    }

    .p-button-text.p-button-secondary:not(:disabled):active {
        background: dt('button.text.secondary.active.background');
        border-color: transparent;
        color: dt('button.text.secondary.color');
    }

    .p-button-text.p-button-success {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.success.color');
    }

    .p-button-text.p-button-success:not(:disabled):hover {
        background: dt('button.text.success.hover.background');
        border-color: transparent;
        color: dt('button.text.success.color');
    }

    .p-button-text.p-button-success:not(:disabled):active {
        background: dt('button.text.success.active.background');
        border-color: transparent;
        color: dt('button.text.success.color');
    }

    .p-button-text.p-button-info {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.info.color');
    }

    .p-button-text.p-button-info:not(:disabled):hover {
        background: dt('button.text.info.hover.background');
        border-color: transparent;
        color: dt('button.text.info.color');
    }

    .p-button-text.p-button-info:not(:disabled):active {
        background: dt('button.text.info.active.background');
        border-color: transparent;
        color: dt('button.text.info.color');
    }

    .p-button-text.p-button-warn {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.warn.color');
    }

    .p-button-text.p-button-warn:not(:disabled):hover {
        background: dt('button.text.warn.hover.background');
        border-color: transparent;
        color: dt('button.text.warn.color');
    }

    .p-button-text.p-button-warn:not(:disabled):active {
        background: dt('button.text.warn.active.background');
        border-color: transparent;
        color: dt('button.text.warn.color');
    }

    .p-button-text.p-button-help {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.help.color');
    }

    .p-button-text.p-button-help:not(:disabled):hover {
        background: dt('button.text.help.hover.background');
        border-color: transparent;
        color: dt('button.text.help.color');
    }

    .p-button-text.p-button-help:not(:disabled):active {
        background: dt('button.text.help.active.background');
        border-color: transparent;
        color: dt('button.text.help.color');
    }

    .p-button-text.p-button-danger {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.danger.color');
    }

    .p-button-text.p-button-danger:not(:disabled):hover {
        background: dt('button.text.danger.hover.background');
        border-color: transparent;
        color: dt('button.text.danger.color');
    }

    .p-button-text.p-button-danger:not(:disabled):active {
        background: dt('button.text.danger.active.background');
        border-color: transparent;
        color: dt('button.text.danger.color');
    }

    .p-button-text.p-button-contrast {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.contrast.color');
    }

    .p-button-text.p-button-contrast:not(:disabled):hover {
        background: dt('button.text.contrast.hover.background');
        border-color: transparent;
        color: dt('button.text.contrast.color');
    }

    .p-button-text.p-button-contrast:not(:disabled):active {
        background: dt('button.text.contrast.active.background');
        border-color: transparent;
        color: dt('button.text.contrast.color');
    }

    .p-button-text.p-button-plain {
        background: transparent;
        border-color: transparent;
        color: dt('button.text.plain.color');
    }

    .p-button-text.p-button-plain:not(:disabled):hover {
        background: dt('button.text.plain.hover.background');
        border-color: transparent;
        color: dt('button.text.plain.color');
    }

    .p-button-text.p-button-plain:not(:disabled):active {
        background: dt('button.text.plain.active.background');
        border-color: transparent;
        color: dt('button.text.plain.color');
    }

    .p-button-link {
        background: transparent;
        border-color: transparent;
        color: dt('button.link.color');
    }

    .p-button-link:not(:disabled):hover {
        background: transparent;
        border-color: transparent;
        color: dt('button.link.hover.color');
    }

    .p-button-link:not(:disabled):hover .p-button-label {
        text-decoration: underline;
    }

    .p-button-link:not(:disabled):active {
        background: transparent;
        border-color: transparent;
        color: dt('button.link.active.color');
    }
`;function Uc(e){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(e)}function ds(e,t,r){return(t=xU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){var t=TU(e,"string");return Uc(t)=="symbol"?t:t+""}function TU(e,t){if(Uc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CU={root:function(t){var r=t.instance,n=t.props;return["p-button p-component",ds(ds(ds(ds(ds(ds(ds(ds(ds({"p-button-icon-only":r.hasIcon&&!n.label&&!n.badge,"p-button-vertical":(n.iconPos==="top"||n.iconPos==="bottom")&&n.label,"p-button-loading":n.loading,"p-button-link":n.link||n.variant==="link"},"p-button-".concat(n.severity),n.severity),"p-button-raised",n.raised),"p-button-rounded",n.rounded),"p-button-text",n.text||n.variant==="text"),"p-button-outlined",n.outlined||n.variant==="outlined"),"p-button-sm",n.size==="small"),"p-button-lg",n.size==="large"),"p-button-plain",n.plain),"p-button-fluid",r.hasFluid)]},loadingIcon:"p-button-loading-icon",icon:function(t){var r=t.props;return["p-button-icon",ds({},"p-button-icon-".concat(r.iconPos),r.label)]},label:"p-button-label"},kU=Xt.extend({name:"button",style:MU,classes:CU}),EU={name:"BaseButton",extends:qn,props:{label:{type:String,default:null},icon:{type:String,default:null},iconPos:{type:String,default:"left"},iconClass:{type:[String,Object],default:null},badge:{type:String,default:null},badgeClass:{type:[String,Object],default:null},badgeSeverity:{type:String,default:"secondary"},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1},link:{type:Boolean,default:!1},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},variant:{type:String,default:null},plain:{type:Boolean,default:!1},fluid:{type:Boolean,default:null}},style:kU,provide:function(){return{$pcButton:this,$parentInstance:this}}};function Gc(e){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gc(e)}function Yn(e,t,r){return(t=PU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PU(e){var t=$U(e,"string");return Gc(t)=="symbol"?t:t+""}function $U(e,t){if(Gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fd={name:"Button",extends:EU,inheritAttrs:!1,inject:{$pcFluid:{default:null}},methods:{getPTOptions:function(t){var r=t==="root"?this.ptmi:this.ptm;return r(t,{context:{disabled:this.disabled}})}},computed:{disabled:function(){return this.$attrs.disabled||this.$attrs.disabled===""||this.loading},defaultAriaLabel:function(){return this.label?this.label+(this.badge?" "+this.badge:""):this.$attrs.ariaLabel},hasIcon:function(){return this.icon||this.$slots.icon},attrs:function(){return Qe(this.asAttrs,this.a11yAttrs,this.getPTOptions("root"))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{"aria-label":this.defaultAriaLabel,"data-pc-name":"button","data-p-disabled":this.disabled,"data-p-severity":this.severity}},hasFluid:function(){return yi(this.fluid)?!!this.$pcFluid:this.fluid},dataP:function(){return Kn(Yn(Yn(Yn(Yn(Yn(Yn(Yn(Yn(Yn(Yn({},this.size,this.size),"icon-only",this.hasIcon&&!this.label&&!this.badge),"loading",this.loading),"fluid",this.hasFluid),"rounded",this.rounded),"raised",this.raised),"outlined",this.outlined||this.variant==="outlined"),"text",this.text||this.variant==="text"),"link",this.link||this.variant==="link"),"vertical",(this.iconPos==="top"||this.iconPos==="bottom")&&this.label))},dataIconP:function(){return Kn(Yn(Yn({},this.iconPos,this.iconPos),this.size,this.size))},dataLabelP:function(){return Kn(Yn(Yn({},this.size,this.size),"icon-only",this.hasIcon&&!this.label&&!this.badge))}},components:{SpinnerIcon:oP,Badge:sP},directives:{ripple:Pf}},SU=["data-p"],IU=["data-p"];function AU(e,t,r,n,o,s){var i=Po("SpinnerIcon"),a=Po("Badge"),l=ad("ripple");return e.asChild?qt(e.$slots,"default",{key:1,class:kn(e.cx("root")),a11yAttrs:s.a11yAttrs}):sd((He(),Sr(gs(e.as),Qe({key:0,class:e.cx("root"),"data-p":s.dataP},s.attrs),{default:zr(function(){return[qt(e.$slots,"default",{},function(){return[e.loading?qt(e.$slots,"loadingicon",Qe({key:0,class:[e.cx("loadingIcon"),e.cx("icon")]},e.ptm("loadingIcon")),function(){return[e.loadingIcon?(He(),at("span",Qe({key:0,class:[e.cx("loadingIcon"),e.cx("icon"),e.loadingIcon]},e.ptm("loadingIcon")),null,16)):(He(),Sr(i,Qe({key:1,class:[e.cx("loadingIcon"),e.cx("icon")],spin:""},e.ptm("loadingIcon")),null,16,["class"]))]}):qt(e.$slots,"icon",Qe({key:1,class:[e.cx("icon")]},e.ptm("icon")),function(){return[e.icon?(He(),at("span",Qe({key:0,class:[e.cx("icon"),e.icon,e.iconClass],"data-p":s.dataIconP},e.ptm("icon")),null,16,SU)):Wt("",!0)]}),e.label?(He(),at("span",Qe({key:2,class:e.cx("label")},e.ptm("label"),{"data-p":s.dataLabelP}),fr(e.label),17,IU)):Wt("",!0),e.badge?(He(),Sr(a,{key:3,value:e.badge,class:kn(e.badgeClass),severity:e.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcBadge")},null,8,["value","class","severity","unstyled","pt"])):Wt("",!0)]})]}),_:3},16,["class","data-p"])),[[l]])}fd.render=AU;var OU=Xt.extend({name:"focustrap-directive"}),LU=Nt.extend({style:OU});function Hc(e){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}function AM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function OM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(r),!0).forEach(function(n){FU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FU(e,t,r){return(t=DU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DU(e){var t=BU(e,"string");return Hc(t)=="symbol"?t:t+""}function BU(e,t){if(Hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iP=LU.extend("focustrap",{mounted:function(t,r){var n=r.value||{},o=n.disabled;o||(this.createHiddenFocusableElements(t,r),this.bind(t,r),this.autoElementFocus(t,r)),t.setAttribute("data-pd-focustrap",!0),this.$el=t},updated:function(t,r){var n=r.value||{},o=n.disabled;o&&this.unbind(t)},unmounted:function(t){this.unbind(t)},methods:{getComputedSelector:function(t){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(t??"")},bind:function(t,r){var n=this,o=r.value||{},s=o.onFocusIn,i=o.onFocusOut;t.$_pfocustrap_mutationobserver=new MutationObserver(function(a){a.forEach(function(l){if(l.type==="childList"&&!t.contains(document.activeElement)){var c=function(d){var f=nM(d)?nM(d,n.getComputedSelector(t.$_pfocustrap_focusableselector))?d:Ll(t,n.getComputedSelector(t.$_pfocustrap_focusableselector)):Ll(d);return Er(f)?f:d.nextSibling&&c(d.nextSibling)};Ho(c(l.nextSibling))}})}),t.$_pfocustrap_mutationobserver.disconnect(),t.$_pfocustrap_mutationobserver.observe(t,{childList:!0}),t.$_pfocustrap_focusinlistener=function(a){return s&&s(a)},t.$_pfocustrap_focusoutlistener=function(a){return i&&i(a)},t.addEventListener("focusin",t.$_pfocustrap_focusinlistener),t.addEventListener("focusout",t.$_pfocustrap_focusoutlistener)},unbind:function(t){t.$_pfocustrap_mutationobserver&&t.$_pfocustrap_mutationobserver.disconnect(),t.$_pfocustrap_focusinlistener&&t.removeEventListener("focusin",t.$_pfocustrap_focusinlistener)&&(t.$_pfocustrap_focusinlistener=null),t.$_pfocustrap_focusoutlistener&&t.removeEventListener("focusout",t.$_pfocustrap_focusoutlistener)&&(t.$_pfocustrap_focusoutlistener=null)},autoFocus:function(t){this.autoElementFocus(this.$el,{value:OM(OM({},t),{},{autoFocus:!0})})},autoElementFocus:function(t,r){var n=r.value||{},o=n.autoFocusSelector,s=o===void 0?"":o,i=n.firstFocusableSelector,a=i===void 0?"":i,l=n.autoFocus,c=l===void 0?!1:l,u=Ll(t,"[autofocus]".concat(this.getComputedSelector(s)));c&&!u&&(u=Ll(t,this.getComputedSelector(a))),Ho(u)},onFirstHiddenElementFocus:function(t){var r,n=t.currentTarget,o=t.relatedTarget,s=o===n.$_pfocustrap_lasthiddenfocusableelement||!((r=this.$el)!==null&&r!==void 0&&r.contains(o))?Ll(n.parentElement,this.getComputedSelector(n.$_pfocustrap_focusableselector)):n.$_pfocustrap_lasthiddenfocusableelement;Ho(s)},onLastHiddenElementFocus:function(t){var r,n=t.currentTarget,o=t.relatedTarget,s=o===n.$_pfocustrap_firsthiddenfocusableelement||!((r=this.$el)!==null&&r!==void 0&&r.contains(o))?_4(n.parentElement,this.getComputedSelector(n.$_pfocustrap_focusableselector)):n.$_pfocustrap_firsthiddenfocusableelement;Ho(s)},createHiddenFocusableElements:function(t,r){var n=this,o=r.value||{},s=o.tabIndex,i=s===void 0?0:s,a=o.firstFocusableSelector,l=a===void 0?"":a,c=o.lastFocusableSelector,u=c===void 0?"":c,d=function(b){return N2("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:i,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:b?.bind(n)})},f=d(this.onFirstHiddenElementFocus),p=d(this.onLastHiddenElementFocus);f.$_pfocustrap_lasthiddenfocusableelement=p,f.$_pfocustrap_focusableselector=l,f.setAttribute("data-pc-section","firstfocusableelement"),p.$_pfocustrap_firsthiddenfocusableelement=f,p.$_pfocustrap_focusableselector=u,p.setAttribute("data-pc-section","lastfocusableelement"),t.prepend(f),t.append(p)}}});function ig(){l4({variableName:J2("scrollbar.width").name})}function ag(){c4({variableName:J2("scrollbar.width").name})}var RU=`
    .p-drawer {
        display: flex;
        flex-direction: column;
        transform: translate3d(0px, 0px, 0px);
        position: relative;
        transition: transform 0.3s;
        background: dt('drawer.background');
        color: dt('drawer.color');
        border: 1px solid dt('drawer.border.color');
        box-shadow: dt('drawer.shadow');
    }

    .p-drawer-content {
        overflow-y: auto;
        flex-grow: 1;
        padding: dt('drawer.content.padding');
    }

    .p-drawer-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
        padding: dt('drawer.header.padding');
    }

    .p-drawer-footer {
        padding: dt('drawer.footer.padding');
    }

    .p-drawer-title {
        font-weight: dt('drawer.title.font.weight');
        font-size: dt('drawer.title.font.size');
    }

    .p-drawer-full .p-drawer {
        transition: none;
        transform: none;
        width: 100vw !important;
        height: 100vh !important;
        max-height: 100%;
        top: 0px !important;
        left: 0px !important;
        border-width: 1px;
    }

    .p-drawer-left .p-drawer-enter-from,
    .p-drawer-left .p-drawer-leave-to {
        transform: translateX(-100%);
    }

    .p-drawer-right .p-drawer-enter-from,
    .p-drawer-right .p-drawer-leave-to {
        transform: translateX(100%);
    }

    .p-drawer-top .p-drawer-enter-from,
    .p-drawer-top .p-drawer-leave-to {
        transform: translateY(-100%);
    }

    .p-drawer-bottom .p-drawer-enter-from,
    .p-drawer-bottom .p-drawer-leave-to {
        transform: translateY(100%);
    }

    .p-drawer-full .p-drawer-enter-from,
    .p-drawer-full .p-drawer-leave-to {
        opacity: 0;
    }

    .p-drawer-full .p-drawer-enter-active,
    .p-drawer-full .p-drawer-leave-active {
        transition: opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    .p-drawer-left .p-drawer {
        width: 20rem;
        height: 100%;
        border-inline-end-width: 1px;
    }

    .p-drawer-right .p-drawer {
        width: 20rem;
        height: 100%;
        border-inline-start-width: 1px;
    }

    .p-drawer-top .p-drawer {
        height: 10rem;
        width: 100%;
        border-block-end-width: 1px;
    }

    .p-drawer-bottom .p-drawer {
        height: 10rem;
        width: 100%;
        border-block-start-width: 1px;
    }

    .p-drawer-left .p-drawer-content,
    .p-drawer-right .p-drawer-content,
    .p-drawer-top .p-drawer-content,
    .p-drawer-bottom .p-drawer-content {
        width: 100%;
        height: 100%;
    }

    .p-drawer-open {
        display: flex;
    }

    .p-drawer-mask:dir(rtl) {
        flex-direction: row-reverse;
    }
`,zU={mask:function(t){var r=t.position,n=t.modal;return{position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:r==="left"?"flex-start":r==="right"?"flex-end":"center",alignItems:r==="top"?"flex-start":r==="bottom"?"flex-end":"center",pointerEvents:n?"auto":"none"}},root:{pointerEvents:"auto"}},NU={mask:function(t){var r=t.instance,n=t.props,o=["left","right","top","bottom"],s=o.find(function(i){return i===n.position});return["p-drawer-mask",{"p-overlay-mask p-overlay-mask-enter":n.modal,"p-drawer-open":r.containerVisible,"p-drawer-full":r.fullScreen},s?"p-drawer-".concat(s):""]},root:function(t){var r=t.instance;return["p-drawer p-component",{"p-drawer-full":r.fullScreen}]},header:"p-drawer-header",title:"p-drawer-title",pcCloseButton:"p-drawer-close-button",content:"p-drawer-content",footer:"p-drawer-footer"},jU=Xt.extend({name:"drawer",style:RU,classes:NU,inlineStyles:zU}),VU={name:"BaseDrawer",extends:qn,props:{visible:{type:Boolean,default:!1},position:{type:String,default:"left"},header:{type:null,default:null},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},dismissable:{type:Boolean,default:!0},showCloseIcon:{type:Boolean,default:!0},closeButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},closeIcon:{type:String,default:void 0},modal:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!1}},style:jU,provide:function(){return{$pcDrawer:this,$parentInstance:this}}};function Kc(e){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function hm(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=UU(e,"string");return Kc(t)=="symbol"?t:t+""}function UU(e,t){if(Kc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aP={name:"Drawer",extends:VU,inheritAttrs:!1,emits:["update:visible","show","after-show","hide","after-hide","before-hide"],data:function(){return{containerVisible:this.visible}},container:null,mask:null,content:null,headerContainer:null,footerContainer:null,closeButton:null,outsideClickListener:null,documentKeydownListener:null,watch:{dismissable:function(t){t?this.enableDocumentSettings():this.disableDocumentSettings()}},updated:function(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount:function(){this.disableDocumentSettings(),this.mask&&this.autoZIndex&&Co.clear(this.mask),this.container=null,this.mask=null},methods:{hide:function(){this.$emit("update:visible",!1)},onEnter:function(){this.$emit("show"),this.focus(),this.bindDocumentKeyDownListener(),this.autoZIndex&&Co.set("modal",this.mask,this.baseZIndex||this.$primevue.config.zIndex.modal)},onAfterEnter:function(){this.enableDocumentSettings(),this.$emit("after-show")},onBeforeLeave:function(){this.modal&&!this.isUnstyled&&$c(this.mask,"p-overlay-mask-leave"),this.$emit("before-hide")},onLeave:function(){this.$emit("hide")},onAfterLeave:function(){this.autoZIndex&&Co.clear(this.mask),this.unbindDocumentKeyDownListener(),this.containerVisible=!1,this.disableDocumentSettings(),this.$emit("after-hide")},onMaskClick:function(t){this.dismissable&&this.modal&&this.mask===t.target&&this.hide()},focus:function(){var t=function(o){return o&&o.querySelector("[autofocus]")},r=this.$slots.header&&t(this.headerContainer);r||(r=this.$slots.default&&t(this.container),r||(r=this.$slots.footer&&t(this.footerContainer),r||(r=this.closeButton))),r&&Ho(r)},enableDocumentSettings:function(){this.dismissable&&!this.modal&&this.bindOutsideClickListener(),this.blockScroll&&ig()},disableDocumentSettings:function(){this.unbindOutsideClickListener(),this.blockScroll&&ag()},onKeydown:function(t){t.code==="Escape"&&this.hide()},containerRef:function(t){this.container=t},maskRef:function(t){this.mask=t},contentRef:function(t){this.content=t},headerContainerRef:function(t){this.headerContainer=t},footerContainerRef:function(t){this.footerContainer=t},closeButtonRef:function(t){this.closeButton=t?t.$el:void 0},bindDocumentKeyDownListener:function(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeydown,document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener:function(){this.documentKeydownListener&&(document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},bindOutsideClickListener:function(){var t=this;this.outsideClickListener||(this.outsideClickListener=function(r){t.isOutsideClicked(r)&&t.hide()},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},isOutsideClicked:function(t){return this.container&&!this.container.contains(t.target)}},computed:{fullScreen:function(){return this.position==="full"},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0},dataP:function(){return Kn(hm(hm(hm({"full-screen":this.position==="full"},this.position,this.position),"open",this.containerVisible),"modal",this.modal))}},directives:{focustrap:iP},components:{Button:fd,Portal:ud,TimesIcon:Ef}},GU=["data-p"],HU=["aria-modal","data-p"];function KU(e,t,r,n,o,s){var i=Po("Button"),a=Po("Portal"),l=ad("focustrap");return He(),Sr(a,null,{default:zr(function(){return[o.containerVisible?(He(),at("div",Qe({key:0,ref:s.maskRef,onMousedown:t[0]||(t[0]=function(){return s.onMaskClick&&s.onMaskClick.apply(s,arguments)}),class:e.cx("mask"),style:e.sx("mask",!0,{position:e.position,modal:e.modal}),"data-p":s.dataP},e.ptm("mask")),[Vt(Jg,Qe({name:"p-drawer",onEnter:s.onEnter,onAfterEnter:s.onAfterEnter,onBeforeLeave:s.onBeforeLeave,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave,appear:""},e.ptm("transition")),{default:zr(function(){return[e.visible?sd((He(),at("div",Qe({key:0,ref:s.containerRef,class:e.cx("root"),style:e.sx("root"),role:"complementary","aria-modal":e.modal,"data-p":s.dataP},e.ptmi("root")),[e.$slots.container?qt(e.$slots,"container",{key:0,closeCallback:s.hide}):(He(),at(pr,{key:1},[Ze("div",Qe({ref:s.headerContainerRef,class:e.cx("header")},e.ptm("header")),[qt(e.$slots,"header",{class:kn(e.cx("title"))},function(){return[e.header?(He(),at("div",Qe({key:0,class:e.cx("title")},e.ptm("title")),fr(e.header),17)):Wt("",!0)]}),e.showCloseIcon?qt(e.$slots,"closebutton",{key:0,closeCallback:s.hide},function(){return[Vt(i,Qe({ref:s.closeButtonRef,type:"button",class:e.cx("pcCloseButton"),"aria-label":s.closeAriaLabel,unstyled:e.unstyled,onClick:s.hide},e.closeButtonProps,{pt:e.ptm("pcCloseButton"),"data-pc-group-section":"iconcontainer"}),{icon:zr(function(c){return[qt(e.$slots,"closeicon",{},function(){return[(He(),Sr(gs(e.closeIcon?"span":"TimesIcon"),Qe({class:[e.closeIcon,c.class]},e.ptm("pcCloseButton").icon),null,16,["class"]))]})]}),_:3},16,["class","aria-label","unstyled","onClick","pt"])]}):Wt("",!0)],16),Ze("div",Qe({ref:s.contentRef,class:e.cx("content")},e.ptm("content")),[qt(e.$slots,"default")],16),e.$slots.footer?(He(),at("div",Qe({key:0,ref:s.footerContainerRef,class:e.cx("footer")},e.ptm("footer")),[qt(e.$slots,"footer")],16)):Wt("",!0)],64))],16,HU)),[[l]]):Wt("",!0)]}),_:3},16,["onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])],16,GU)):Wt("",!0)]}),_:3})}aP.render=KU;var lP={name:"BaseEditableHolder",extends:qn,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue!==void 0?this.defaultValue:this.modelValue}},watch:{modelValue:function(t){this.d_value=t},defaultValue:function(t){this.d_value=t},$formName:{immediate:!0,handler:function(t){var r,n;this.formField=((r=this.$pcForm)===null||r===void 0||(n=r.register)===null||n===void 0?void 0:n.call(r,t,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(t){var r,n;this.formField=((r=this.$pcForm)===null||r===void 0||(n=r.register)===null||n===void 0?void 0:n.call(r,this.$formName,t))||{}}},$formDefaultValue:{immediate:!0,handler:function(t){this.d_value!==t&&(this.d_value=t)}},$formValue:{immediate:!1,handler:function(t){var r;(r=this.$pcForm)!==null&&r!==void 0&&r.getFieldState(this.$formName)&&t!==this.d_value&&(this.d_value=t)}}},formField:{},methods:{writeValue:function(t,r){var n,o;this.controlled&&(this.d_value=t,this.$emit("update:modelValue",t)),this.$emit("value-change",t),(n=(o=this.formField).onChange)===null||n===void 0||n.call(o,{originalEvent:r,value:t})},findNonEmpty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.find(Er)}},computed:{$filled:function(){return Er(this.d_value)},$invalid:function(){var t,r;return!this.$formNovalidate&&this.findNonEmpty(this.invalid,(t=this.$pcFormField)===null||t===void 0||(t=t.$field)===null||t===void 0?void 0:t.invalid,(r=this.$pcForm)===null||r===void 0||(r=r.getFieldState(this.$formName))===null||r===void 0?void 0:r.invalid)},$formName:function(){var t;return this.$formNovalidate?void 0:this.name||((t=this.$formControl)===null||t===void 0?void 0:t.name)},$formControl:function(){var t;return this.formControl||((t=this.$pcFormField)===null||t===void 0?void 0:t.formControl)},$formNovalidate:function(){var t;return(t=this.$formControl)===null||t===void 0?void 0:t.novalidate},$formDefaultValue:function(){var t,r;return this.findNonEmpty(this.d_value,(t=this.$pcFormField)===null||t===void 0?void 0:t.initialValue,(r=this.$pcForm)===null||r===void 0||(r=r.initialValues)===null||r===void 0?void 0:r[this.$formName])},$formValue:function(){var t,r;return this.findNonEmpty((t=this.$pcFormField)===null||t===void 0||(t=t.$field)===null||t===void 0?void 0:t.value,(r=this.$pcForm)===null||r===void 0||(r=r.getFieldState(this.$formName))===null||r===void 0?void 0:r.value)},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},qU=`
    .p-toggleswitch {
        display: inline-block;
        width: dt('toggleswitch.width');
        height: dt('toggleswitch.height');
    }

    .p-toggleswitch-input {
        cursor: pointer;
        appearance: none;
        position: absolute;
        top: 0;
        inset-inline-start: 0;
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        opacity: 0;
        z-index: 1;
        outline: 0 none;
        border-radius: dt('toggleswitch.border.radius');
    }

    .p-toggleswitch-slider {
        cursor: pointer;
        width: 100%;
        height: 100%;
        border-width: dt('toggleswitch.border.width');
        border-style: solid;
        border-color: dt('toggleswitch.border.color');
        background: dt('toggleswitch.background');
        transition:
            background dt('toggleswitch.transition.duration'),
            color dt('toggleswitch.transition.duration'),
            border-color dt('toggleswitch.transition.duration'),
            outline-color dt('toggleswitch.transition.duration'),
            box-shadow dt('toggleswitch.transition.duration');
        border-radius: dt('toggleswitch.border.radius');
        outline-color: transparent;
        box-shadow: dt('toggleswitch.shadow');
    }

    .p-toggleswitch-handle {
        position: absolute;
        top: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        background: dt('toggleswitch.handle.background');
        color: dt('toggleswitch.handle.color');
        width: dt('toggleswitch.handle.size');
        height: dt('toggleswitch.handle.size');
        inset-inline-start: dt('toggleswitch.gap');
        margin-block-start: calc(-1 * calc(dt('toggleswitch.handle.size') / 2));
        border-radius: dt('toggleswitch.handle.border.radius');
        transition:
            background dt('toggleswitch.transition.duration'),
            color dt('toggleswitch.transition.duration'),
            inset-inline-start dt('toggleswitch.slide.duration'),
            box-shadow dt('toggleswitch.slide.duration');
    }

    .p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {
        background: dt('toggleswitch.checked.background');
        border-color: dt('toggleswitch.checked.border.color');
    }

    .p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-handle {
        background: dt('toggleswitch.handle.checked.background');
        color: dt('toggleswitch.handle.checked.color');
        inset-inline-start: calc(dt('toggleswitch.width') - calc(dt('toggleswitch.handle.size') + dt('toggleswitch.gap')));
    }

    .p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {
        background: dt('toggleswitch.hover.background');
        border-color: dt('toggleswitch.hover.border.color');
    }

    .p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-handle {
        background: dt('toggleswitch.handle.hover.background');
        color: dt('toggleswitch.handle.hover.color');
    }

    .p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {
        background: dt('toggleswitch.checked.hover.background');
        border-color: dt('toggleswitch.checked.hover.border.color');
    }

    .p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-handle {
        background: dt('toggleswitch.handle.checked.hover.background');
        color: dt('toggleswitch.handle.checked.hover.color');
    }

    .p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {
        box-shadow: dt('toggleswitch.focus.ring.shadow');
        outline: dt('toggleswitch.focus.ring.width') dt('toggleswitch.focus.ring.style') dt('toggleswitch.focus.ring.color');
        outline-offset: dt('toggleswitch.focus.ring.offset');
    }

    .p-toggleswitch.p-invalid > .p-toggleswitch-slider {
        border-color: dt('toggleswitch.invalid.border.color');
    }

    .p-toggleswitch.p-disabled {
        opacity: 1;
    }

    .p-toggleswitch.p-disabled .p-toggleswitch-slider {
        background: dt('toggleswitch.disabled.background');
    }

    .p-toggleswitch.p-disabled .p-toggleswitch-handle {
        background: dt('toggleswitch.handle.disabled.background');
    }
`,XU={root:{position:"relative"}},QU={root:function(t){var r=t.instance,n=t.props;return["p-toggleswitch p-component",{"p-toggleswitch-checked":r.checked,"p-disabled":n.disabled,"p-invalid":r.$invalid}]},input:"p-toggleswitch-input",slider:"p-toggleswitch-slider",handle:"p-toggleswitch-handle"},YU=Xt.extend({name:"toggleswitch",style:qU,classes:QU,inlineStyles:XU}),JU={name:"BaseToggleSwitch",extends:lP,props:{trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:YU,provide:function(){return{$pcToggleSwitch:this,$parentInstance:this}}},cP={name:"ToggleSwitch",extends:JU,inheritAttrs:!1,emits:["change","focus","blur"],methods:{getPTOptions:function(t){var r=t==="root"?this.ptmi:this.ptm;return r(t,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(t){if(!this.disabled&&!this.readonly){var r=this.checked?this.falseValue:this.trueValue;this.writeValue(r,t),this.$emit("change",t)}},onFocus:function(t){this.$emit("focus",t)},onBlur:function(t){var r,n;this.$emit("blur",t),(r=(n=this.formField).onBlur)===null||r===void 0||r.call(n,t)}},computed:{checked:function(){return this.d_value===this.trueValue},dataP:function(){return Kn({checked:this.checked,disabled:this.disabled,invalid:this.$invalid})}}},ZU=["data-p-checked","data-p-disabled","data-p"],e7=["id","checked","tabindex","disabled","readonly","aria-checked","aria-labelledby","aria-label","aria-invalid"],t7=["data-p"],r7=["data-p"];function n7(e,t,r,n,o,s){return He(),at("div",Qe({class:e.cx("root"),style:e.sx("root")},s.getPTOptions("root"),{"data-p-checked":s.checked,"data-p-disabled":e.disabled,"data-p":s.dataP}),[Ze("input",Qe({id:e.inputId,type:"checkbox",role:"switch",class:[e.cx("input"),e.inputClass],style:e.inputStyle,checked:s.checked,tabindex:e.tabindex,disabled:e.disabled,readonly:e.readonly,"aria-checked":s.checked,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-invalid":e.invalid||void 0,onFocus:t[0]||(t[0]=function(){return s.onFocus&&s.onFocus.apply(s,arguments)}),onBlur:t[1]||(t[1]=function(){return s.onBlur&&s.onBlur.apply(s,arguments)}),onChange:t[2]||(t[2]=function(){return s.onChange&&s.onChange.apply(s,arguments)})},s.getPTOptions("input")),null,16,e7),Ze("div",Qe({class:e.cx("slider")},s.getPTOptions("slider"),{"data-p":s.dataP}),[Ze("div",Qe({class:e.cx("handle")},s.getPTOptions("handle"),{"data-p":s.dataP}),[qt(e.$slots,"handle",{checked:s.checked})],16,r7)],16,t7)],16,ZU)}cP.render=n7;function qc(e){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function o7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a7(n.key),n)}}function i7(e,t,r){return t&&s7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a7(e){var t=l7(e,"string");return qc(t)=="symbol"?t:t+""}function l7(e,t){if(qc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var c7=(function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};o7(this,e),this.element=t,this.listener=r}return i7(e,[{key:"bindScrollListener",value:function(){this.scrollableParents=v4(this.element);for(var r=0;r<this.scrollableParents.length;r++)this.scrollableParents[r].addEventListener("scroll",this.listener)}},{key:"unbindScrollListener",value:function(){if(this.scrollableParents)for(var r=0;r<this.scrollableParents.length;r++)this.scrollableParents[r].removeEventListener("scroll",this.listener)}},{key:"destroy",value:function(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}])})(),d7=kf(),u7=`
    .p-menu {
        background: dt('menu.background');
        color: dt('menu.color');
        border: 1px solid dt('menu.border.color');
        border-radius: dt('menu.border.radius');
        min-width: 12.5rem;
    }

    .p-menu-list {
        margin: 0;
        padding: dt('menu.list.padding');
        outline: 0 none;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: dt('menu.list.gap');
    }

    .p-menu-item-content {
        transition:
            background dt('menu.transition.duration'),
            color dt('menu.transition.duration');
        border-radius: dt('menu.item.border.radius');
        color: dt('menu.item.color');
    }

    .p-menu-item-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
        color: inherit;
        padding: dt('menu.item.padding');
        gap: dt('menu.item.gap');
        user-select: none;
        outline: 0 none;
    }

    .p-menu-item-label {
        line-height: 1;
    }

    .p-menu-item-icon {
        color: dt('menu.item.icon.color');
    }

    .p-menu-item.p-focus .p-menu-item-content {
        color: dt('menu.item.focus.color');
        background: dt('menu.item.focus.background');
    }

    .p-menu-item.p-focus .p-menu-item-icon {
        color: dt('menu.item.icon.focus.color');
    }

    .p-menu-item:not(.p-disabled) .p-menu-item-content:hover {
        color: dt('menu.item.focus.color');
        background: dt('menu.item.focus.background');
    }

    .p-menu-item:not(.p-disabled) .p-menu-item-content:hover .p-menu-item-icon {
        color: dt('menu.item.icon.focus.color');
    }

    .p-menu-overlay {
        box-shadow: dt('menu.shadow');
    }

    .p-menu-submenu-label {
        background: dt('menu.submenu.label.background');
        padding: dt('menu.submenu.label.padding');
        color: dt('menu.submenu.label.color');
        font-weight: dt('menu.submenu.label.font.weight');
    }

    .p-menu-separator {
        border-block-start: 1px solid dt('menu.separator.border.color');
    }
`,f7={root:function(t){var r=t.props;return["p-menu p-component",{"p-menu-overlay":r.popup}]},start:"p-menu-start",list:"p-menu-list",submenuLabel:"p-menu-submenu-label",separator:"p-menu-separator",end:"p-menu-end",item:function(t){var r=t.instance;return["p-menu-item",{"p-focus":r.id===r.focusedOptionId,"p-disabled":r.disabled()}]},itemContent:"p-menu-item-content",itemLink:"p-menu-item-link",itemIcon:"p-menu-item-icon",itemLabel:"p-menu-item-label"},p7=Xt.extend({name:"menu",style:u7,classes:f7}),m7={name:"BaseMenu",extends:qn,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:p7,provide:function(){return{$pcMenu:this,$parentInstance:this}}},dP={name:"Menuitem",hostName:"Menu",extends:qn,inheritAttrs:!1,emits:["item-click","item-mousemove"],props:{item:null,templates:null,id:null,focusedOptionId:null,index:null},methods:{getItemProp:function(t,r){return t&&t.item?Zn(t.item[r]):void 0},getPTOptions:function(t){return this.ptm(t,{context:{item:this.item,index:this.index,focused:this.isItemFocused(),disabled:this.disabled()}})},isItemFocused:function(){return this.focusedOptionId===this.id},onItemClick:function(t){var r=this.getItemProp(this.item,"command");r&&r({originalEvent:t,item:this.item.item}),this.$emit("item-click",{originalEvent:t,item:this.item,id:this.id})},onItemMouseMove:function(t){this.$emit("item-mousemove",{originalEvent:t,item:this.item,id:this.id})},visible:function(){return typeof this.item.visible=="function"?this.item.visible():this.item.visible!==!1},disabled:function(){return typeof this.item.disabled=="function"?this.item.disabled():this.item.disabled},label:function(){return typeof this.item.label=="function"?this.item.label():this.item.label},getMenuItemProps:function(t){return{action:Qe({class:this.cx("itemLink"),tabindex:"-1"},this.getPTOptions("itemLink")),icon:Qe({class:[this.cx("itemIcon"),t.icon]},this.getPTOptions("itemIcon")),label:Qe({class:this.cx("itemLabel")},this.getPTOptions("itemLabel"))}}},computed:{dataP:function(){return Kn({focus:this.isItemFocused(),disabled:this.disabled()})}},directives:{ripple:Pf}},h7=["id","aria-label","aria-disabled","data-p-focused","data-p-disabled","data-p"],g7=["data-p"],_7=["href","target"],b7=["data-p"],v7=["data-p"];function y7(e,t,r,n,o,s){var i=ad("ripple");return s.visible()?(He(),at("li",Qe({key:0,id:r.id,class:[e.cx("item"),r.item.class],role:"menuitem",style:r.item.style,"aria-label":s.label(),"aria-disabled":s.disabled(),"data-p-focused":s.isItemFocused(),"data-p-disabled":s.disabled()||!1,"data-p":s.dataP},s.getPTOptions("item")),[Ze("div",Qe({class:e.cx("itemContent"),onClick:t[0]||(t[0]=function(a){return s.onItemClick(a)}),onMousemove:t[1]||(t[1]=function(a){return s.onItemMouseMove(a)}),"data-p":s.dataP},s.getPTOptions("itemContent")),[r.templates.item?r.templates.item?(He(),Sr(gs(r.templates.item),{key:1,item:r.item,label:s.label(),props:s.getMenuItemProps(r.item)},null,8,["item","label","props"])):Wt("",!0):sd((He(),at("a",Qe({key:0,href:r.item.url,class:e.cx("itemLink"),target:r.item.target,tabindex:"-1"},s.getPTOptions("itemLink")),[r.templates.itemicon?(He(),Sr(gs(r.templates.itemicon),{key:0,item:r.item,class:kn(e.cx("itemIcon"))},null,8,["item","class"])):r.item.icon?(He(),at("span",Qe({key:1,class:[e.cx("itemIcon"),r.item.icon],"data-p":s.dataP},s.getPTOptions("itemIcon")),null,16,b7)):Wt("",!0),Ze("span",Qe({class:e.cx("itemLabel"),"data-p":s.dataP},s.getPTOptions("itemLabel")),fr(s.label()),17,v7)],16,_7)),[[i]])],16,g7)],16,h7)):Wt("",!0)}dP.render=y7;function LM(e){return T7(e)||x7(e)||M7(e)||w7()}function w7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M7(e,t){if(e){if(typeof e=="string")return lg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lg(e,t):void 0}}function x7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T7(e){if(Array.isArray(e))return lg(e)}function lg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var uP={name:"Menu",extends:m7,inheritAttrs:!1,emits:["show","hide","focus","blur"],data:function(){return{overlayVisible:!1,focused:!1,focusedOptionIndex:-1,selectedOptionIndex:-1}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,list:null,mounted:function(){this.popup||(this.bindResizeListener(),this.bindOutsideClickListener())},beforeUnmount:function(){this.unbindResizeListener(),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.target=null,this.container&&this.autoZIndex&&Co.clear(this.container),this.container=null},methods:{itemClick:function(t){var r=t.item;this.disabled(r)||(this.overlayVisible&&this.hide(),r.command&&r.command(t),!this.popup&&this.focusedOptionIndex!==t.id&&(this.focusedOptionIndex=t.id))},itemMouseMove:function(t){this.focused&&(this.focusedOptionIndex=t.id)},onListFocus:function(t){this.focused=!0,!this.popup&&this.changeFocusedOptionIndex(0),this.$emit("focus",t)},onListBlur:function(t){this.focused=!1,this.focusedOptionIndex=-1,this.$emit("blur",t)},onListKeyDown:function(t){switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Space":this.onSpaceKey(t);break;case"Escape":this.popup&&(Ho(this.target),this.hide());case"Tab":this.overlayVisible&&this.hide();break}},onArrowDownKey:function(t){var r=this.findNextOptionIndex(this.focusedOptionIndex);this.changeFocusedOptionIndex(r),t.preventDefault()},onArrowUpKey:function(t){if(t.altKey&&this.popup)Ho(this.target),this.hide(),t.preventDefault();else{var r=this.findPrevOptionIndex(this.focusedOptionIndex);this.changeFocusedOptionIndex(r),t.preventDefault()}},onHomeKey:function(t){this.changeFocusedOptionIndex(0),t.preventDefault()},onEndKey:function(t){this.changeFocusedOptionIndex(Jl(this.container,'li[data-pc-section="item"][data-p-disabled="false"]').length-1),t.preventDefault()},onEnterKey:function(t){var r=Ju(this.list,'li[id="'.concat("".concat(this.focusedOptionIndex),'"]')),n=r&&Ju(r,'a[data-pc-section="itemlink"]');this.popup&&Ho(this.target),n?n.click():r&&r.click(),t.preventDefault()},onSpaceKey:function(t){this.onEnterKey(t)},findNextOptionIndex:function(t){var r=Jl(this.container,'li[data-pc-section="item"][data-p-disabled="false"]'),n=LM(r).findIndex(function(o){return o.id===t});return n>-1?n+1:0},findPrevOptionIndex:function(t){var r=Jl(this.container,'li[data-pc-section="item"][data-p-disabled="false"]'),n=LM(r).findIndex(function(o){return o.id===t});return n>-1?n-1:0},changeFocusedOptionIndex:function(t){var r=Jl(this.container,'li[data-pc-section="item"][data-p-disabled="false"]'),n=t>=r.length?r.length-1:t<0?0:t;n>-1&&(this.focusedOptionIndex=r[n].getAttribute("id"))},toggle:function(t,r){this.overlayVisible?this.hide():this.show(t,r)},show:function(t,r){this.overlayVisible=!0,this.target=r??t.currentTarget},hide:function(){this.overlayVisible=!1,this.target=null},onEnter:function(t){R2(t,{position:"absolute",top:"0"}),this.alignOverlay(),this.bindOutsideClickListener(),this.bindResizeListener(),this.bindScrollListener(),this.autoZIndex&&Co.set("menu",t,this.baseZIndex+this.$primevue.config.zIndex.menu),this.popup&&Ho(this.list),this.$emit("show")},onLeave:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.$emit("hide")},onAfterLeave:function(t){this.autoZIndex&&Co.clear(t)},alignOverlay:function(){m4(this.container,this.target);var t=pc(this.target);t>pc(this.container)&&(this.container.style.minWidth=pc(this.target)+"px")},bindOutsideClickListener:function(){var t=this;this.outsideClickListener||(this.outsideClickListener=function(r){var n=t.container&&!t.container.contains(r.target),o=!(t.target&&(t.target===r.target||t.target.contains(r.target)));t.overlayVisible&&n&&o?t.hide():!t.popup&&n&&o&&(t.focusedOptionIndex=-1)},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var t=this;this.scrollHandler||(this.scrollHandler=new c7(this.target,function(){t.overlayVisible&&t.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var t=this;this.resizeListener||(this.resizeListener=function(){t.overlayVisible&&!y4()&&t.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},visible:function(t){return typeof t.visible=="function"?t.visible():t.visible!==!1},disabled:function(t){return typeof t.disabled=="function"?t.disabled():t.disabled},label:function(t){return typeof t.label=="function"?t.label():t.label},onOverlayClick:function(t){d7.emit("overlay-click",{originalEvent:t,target:this.target})},containerRef:function(t){this.container=t},listRef:function(t){this.list=t}},computed:{focusedOptionId:function(){return this.focusedOptionIndex!==-1?this.focusedOptionIndex:null},dataP:function(){return Kn({popup:this.popup})}},components:{PVMenuitem:dP,Portal:ud}},C7=["id","data-p"],k7=["id","tabindex","aria-activedescendant","aria-label","aria-labelledby"],E7=["id"];function P7(e,t,r,n,o,s){var i=Po("PVMenuitem"),a=Po("Portal");return He(),Sr(a,{appendTo:e.appendTo,disabled:!e.popup},{default:zr(function(){return[Vt(Jg,Qe({name:"p-connected-overlay",onEnter:s.onEnter,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave},e.ptm("transition")),{default:zr(function(){return[!e.popup||o.overlayVisible?(He(),at("div",Qe({key:0,ref:s.containerRef,id:e.$id,class:e.cx("root"),onClick:t[3]||(t[3]=function(){return s.onOverlayClick&&s.onOverlayClick.apply(s,arguments)}),"data-p":s.dataP},e.ptmi("root")),[e.$slots.start?(He(),at("div",Qe({key:0,class:e.cx("start")},e.ptm("start")),[qt(e.$slots,"start")],16)):Wt("",!0),Ze("ul",Qe({ref:s.listRef,id:e.$id+"_list",class:e.cx("list"),role:"menu",tabindex:e.tabindex,"aria-activedescendant":o.focused?s.focusedOptionId:void 0,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledby,onFocus:t[0]||(t[0]=function(){return s.onListFocus&&s.onListFocus.apply(s,arguments)}),onBlur:t[1]||(t[1]=function(){return s.onListBlur&&s.onListBlur.apply(s,arguments)}),onKeydown:t[2]||(t[2]=function(){return s.onListKeyDown&&s.onListKeyDown.apply(s,arguments)})},e.ptm("list")),[(He(!0),at(pr,null,wc(e.model,function(l,c){return He(),at(pr,{key:s.label(l)+c.toString()},[l.items&&s.visible(l)&&!l.separator?(He(),at(pr,{key:0},[l.items?(He(),at("li",Qe({key:0,id:e.$id+"_"+c,class:[e.cx("submenuLabel"),l.class],role:"none"},{ref_for:!0},e.ptm("submenuLabel")),[qt(e.$slots,e.$slots.submenulabel?"submenulabel":"submenuheader",{item:l},function(){return[ra(fr(s.label(l)),1)]})],16,E7)):Wt("",!0),(He(!0),at(pr,null,wc(l.items,function(u,d){return He(),at(pr,{key:u.label+c+"_"+d},[s.visible(u)&&!u.separator?(He(),Sr(i,{key:0,id:e.$id+"_"+c+"_"+d,item:u,templates:e.$slots,focusedOptionId:s.focusedOptionId,unstyled:e.unstyled,onItemClick:s.itemClick,onItemMousemove:s.itemMouseMove,pt:e.pt},null,8,["id","item","templates","focusedOptionId","unstyled","onItemClick","onItemMousemove","pt"])):s.visible(u)&&u.separator?(He(),at("li",Qe({key:"separator"+c+d,class:[e.cx("separator"),l.class],style:u.style,role:"separator"},{ref_for:!0},e.ptm("separator")),null,16)):Wt("",!0)],64)}),128))],64)):s.visible(l)&&l.separator?(He(),at("li",Qe({key:"separator"+c.toString(),class:[e.cx("separator"),l.class],style:l.style,role:"separator"},{ref_for:!0},e.ptm("separator")),null,16)):(He(),Sr(i,{key:s.label(l)+c.toString(),id:e.$id+"_"+c,item:l,index:c,templates:e.$slots,focusedOptionId:s.focusedOptionId,unstyled:e.unstyled,onItemClick:s.itemClick,onItemMousemove:s.itemMouseMove,pt:e.pt},null,8,["id","item","index","templates","focusedOptionId","unstyled","onItemClick","onItemMousemove","pt"]))],64)}),128))],16,k7),e.$slots.end?(He(),at("div",Qe({key:1,class:e.cx("end")},e.ptm("end")),[qt(e.$slots,"end")],16)):Wt("",!0)],16,C7)):Wt("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo","disabled"])}uP.render=P7;var $7=`
    .p-divider-horizontal {
        display: flex;
        width: 100%;
        position: relative;
        align-items: center;
        margin: dt('divider.horizontal.margin');
        padding: dt('divider.horizontal.padding');
    }

    .p-divider-horizontal:before {
        position: absolute;
        display: block;
        inset-block-start: 50%;
        inset-inline-start: 0;
        width: 100%;
        content: '';
        border-block-start: 1px solid dt('divider.border.color');
    }

    .p-divider-horizontal .p-divider-content {
        padding: dt('divider.horizontal.content.padding');
    }

    .p-divider-vertical {
        min-height: 100%;
        display: flex;
        position: relative;
        justify-content: center;
        margin: dt('divider.vertical.margin');
        padding: dt('divider.vertical.padding');
    }

    .p-divider-vertical:before {
        position: absolute;
        display: block;
        inset-block-start: 0;
        inset-inline-start: 50%;
        height: 100%;
        content: '';
        border-inline-start: 1px solid dt('divider.border.color');
    }

    .p-divider.p-divider-vertical .p-divider-content {
        padding: dt('divider.vertical.content.padding');
    }

    .p-divider-content {
        z-index: 1;
        background: dt('divider.content.background');
        color: dt('divider.content.color');
    }

    .p-divider-solid.p-divider-horizontal:before {
        border-block-start-style: solid;
    }

    .p-divider-solid.p-divider-vertical:before {
        border-inline-start-style: solid;
    }

    .p-divider-dashed.p-divider-horizontal:before {
        border-block-start-style: dashed;
    }

    .p-divider-dashed.p-divider-vertical:before {
        border-inline-start-style: dashed;
    }

    .p-divider-dotted.p-divider-horizontal:before {
        border-block-start-style: dotted;
    }

    .p-divider-dotted.p-divider-vertical:before {
        border-inline-start-style: dotted;
    }

    .p-divider-left:dir(rtl),
    .p-divider-right:dir(rtl) {
        flex-direction: row-reverse;
    }
`,S7={root:function(t){var r=t.props;return{justifyContent:r.layout==="horizontal"?r.align==="center"||r.align===null?"center":r.align==="left"?"flex-start":r.align==="right"?"flex-end":null:null,alignItems:r.layout==="vertical"?r.align==="center"||r.align===null?"center":r.align==="top"?"flex-start":r.align==="bottom"?"flex-end":null:null}}},I7={root:function(t){var r=t.props;return["p-divider p-component","p-divider-"+r.layout,"p-divider-"+r.type,{"p-divider-left":r.layout==="horizontal"&&(!r.align||r.align==="left")},{"p-divider-center":r.layout==="horizontal"&&r.align==="center"},{"p-divider-right":r.layout==="horizontal"&&r.align==="right"},{"p-divider-top":r.layout==="vertical"&&r.align==="top"},{"p-divider-center":r.layout==="vertical"&&(!r.align||r.align==="center")},{"p-divider-bottom":r.layout==="vertical"&&r.align==="bottom"}]},content:"p-divider-content"},A7=Xt.extend({name:"divider",style:$7,classes:I7,inlineStyles:S7}),O7={name:"BaseDivider",extends:qn,props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},style:A7,provide:function(){return{$pcDivider:this,$parentInstance:this}}};function Xc(e){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xc(e)}function gm(e,t,r){return(t=L7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L7(e){var t=F7(e,"string");return Xc(t)=="symbol"?t:t+""}function F7(e,t){if(Xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fP={name:"Divider",extends:O7,inheritAttrs:!1,computed:{dataP:function(){return Kn(gm(gm(gm({},this.align,this.align),this.layout,this.layout),this.type,this.type))}}},D7=["aria-orientation","data-p"],B7=["data-p"];function R7(e,t,r,n,o,s){return He(),at("div",Qe({class:e.cx("root"),style:e.sx("root"),role:"separator","aria-orientation":e.layout,"data-p":s.dataP},e.ptmi("root")),[e.$slots.default?(He(),at("div",Qe({key:0,class:e.cx("content"),"data-p":s.dataP},e.ptm("content")),[qt(e.$slots,"default")],16,B7)):Wt("",!0)],16,D7)}fP.render=R7;var z7=`
    .p-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        padding: dt('toolbar.padding');
        background: dt('toolbar.background');
        border: 1px solid dt('toolbar.border.color');
        color: dt('toolbar.color');
        border-radius: dt('toolbar.border.radius');
        gap: dt('toolbar.gap');
    }

    .p-toolbar-start,
    .p-toolbar-center,
    .p-toolbar-end {
        display: flex;
        align-items: center;
    }
`,N7={root:"p-toolbar p-component",start:"p-toolbar-start",center:"p-toolbar-center",end:"p-toolbar-end"},j7=Xt.extend({name:"toolbar",style:z7,classes:N7}),V7={name:"BaseToolbar",extends:qn,props:{ariaLabelledby:{type:String,default:null}},style:j7,provide:function(){return{$pcToolbar:this,$parentInstance:this}}},pP={name:"Toolbar",extends:V7,inheritAttrs:!1},W7=["aria-labelledby"];function U7(e,t,r,n,o,s){return He(),at("div",Qe({class:e.cx("root"),role:"toolbar","aria-labelledby":e.ariaLabelledby},e.ptmi("root")),[Ze("div",Qe({class:e.cx("start")},e.ptm("start")),[qt(e.$slots,"start")],16),Ze("div",Qe({class:e.cx("center")},e.ptm("center")),[qt(e.$slots,"center")],16),Ze("div",Qe({class:e.cx("end")},e.ptm("end")),[qt(e.$slots,"end")],16)],16,W7)}pP.render=U7;const G7="/favicon-32x32.png",H7="/android-chrome-192x192.png";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Da=typeof document<"u";function mP(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function K7(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&mP(e.default)}const cr=Object.assign;function _m(e,t){const r={};for(const n in t){const o=t[n];r[n]=Yo(o)?o.map(e):e(o)}return r}const mc=()=>{},Yo=Array.isArray,hP=/#/g,q7=/&/g,X7=/\//g,Q7=/=/g,Y7=/\?/g,gP=/\+/g,J7=/%5B/g,Z7=/%5D/g,_P=/%5E/g,eG=/%60/g,bP=/%7B/g,tG=/%7C/g,vP=/%7D/g,rG=/%20/g;function f_(e){return encodeURI(""+e).replace(tG,"|").replace(J7,"[").replace(Z7,"]")}function nG(e){return f_(e).replace(bP,"{").replace(vP,"}").replace(_P,"^")}function cg(e){return f_(e).replace(gP,"%2B").replace(rG,"+").replace(hP,"%23").replace(q7,"%26").replace(eG,"`").replace(bP,"{").replace(vP,"}").replace(_P,"^")}function oG(e){return cg(e).replace(Q7,"%3D")}function sG(e){return f_(e).replace(hP,"%23").replace(Y7,"%3F")}function iG(e){return e==null?"":sG(e).replace(X7,"%2F")}function Qc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const aG=/\/$/,lG=e=>e.replace(aG,"");function bm(e,t,r="/"){let n,o={},s="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),o=e(s)),a>-1&&(n=n||t.slice(0,a),i=t.slice(a,t.length)),n=fG(n??t,r),{fullPath:n+(s&&"?")+s+i,path:n,query:o,hash:Qc(i)}}function cG(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function FM(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function dG(e,t,r){const n=t.matched.length-1,o=r.matched.length-1;return n>-1&&n===o&&Ya(t.matched[n],r.matched[o])&&yP(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Ya(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function yP(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!uG(e[r],t[r]))return!1;return!0}function uG(e,t){return Yo(e)?DM(e,t):Yo(t)?DM(t,e):e===t}function DM(e,t){return Yo(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function fG(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),o=n[n.length-1];(o===".."||o===".")&&n.push("");let s=r.length-1,i,a;for(i=0;i<n.length;i++)if(a=n[i],a!==".")if(a==="..")s>1&&s--;else break;return r.slice(0,s).join("/")+"/"+n.slice(i).join("/")}const ri={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Yc;(function(e){e.pop="pop",e.push="push"})(Yc||(Yc={}));var hc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(hc||(hc={}));function pG(e){if(!e)if(Da){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),lG(e)}const mG=/^[^#]+#/;function hG(e,t){return e.replace(mG,"#")+t}function gG(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const $f=()=>({left:window.scrollX,top:window.scrollY});function _G(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;t=gG(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function BM(e,t){return(history.state?history.state.position-t:-1)+e}const dg=new Map;function bG(e,t){dg.set(e,t)}function vG(e){const t=dg.get(e);return dg.delete(e),t}let yG=()=>location.protocol+"//"+location.host;function wP(e,t){const{pathname:r,search:n,hash:o}=t,s=e.indexOf("#");if(s>-1){let a=o.includes(e.slice(s))?e.slice(s).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),FM(l,"")}return FM(r,e)+n+o}function wG(e,t,r,n){let o=[],s=[],i=null;const a=({state:f})=>{const p=wP(e,location),m=r.value,b=t.value;let E=0;if(f){if(r.value=p,t.value=f,i&&i===m){i=null;return}E=b?f.position-b.position:0}else n(p);o.forEach(h=>{h(r.value,m,{delta:E,type:Yc.pop,direction:E?E>0?hc.forward:hc.back:hc.unknown})})};function l(){i=r.value}function c(f){o.push(f);const p=()=>{const m=o.indexOf(f);m>-1&&o.splice(m,1)};return s.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(cr({},f.state,{scroll:$f()}),"")}function d(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function RM(e,t,r,n=!1,o=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:o?$f():null}}function MG(e){const{history:t,location:r}=window,n={value:wP(e,r)},o={value:t.state};o.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=e.indexOf("#"),f=d>-1?(r.host&&document.querySelector("base")?e:e.slice(d))+l:yG()+e+l;try{t[u?"replaceState":"pushState"](c,"",f),o.value=c}catch(p){console.error(p),r[u?"replace":"assign"](f)}}function i(l,c){const u=cr({},t.state,RM(o.value.back,l,o.value.forward,!0),c,{position:o.value.position});s(l,u,!0),n.value=l}function a(l,c){const u=cr({},o.value,t.state,{forward:l,scroll:$f()});s(u.current,u,!0);const d=cr({},RM(n.value,l,null),{position:u.position+1},c);s(l,d,!1),n.value=l}return{location:n,state:o,push:a,replace:i}}function xG(e){e=pG(e);const t=MG(e),r=wG(e,t.state,t.location,t.replace);function n(s,i=!0){i||r.pauseListeners(),history.go(s)}const o=cr({location:"",base:e,go:n,createHref:hG.bind(null,e)},t,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function TG(e){return typeof e=="string"||e&&typeof e=="object"}function MP(e){return typeof e=="string"||typeof e=="symbol"}const xP=Symbol("");var zM;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(zM||(zM={}));function Ja(e,t){return cr(new Error,{type:e,[xP]:!0},t)}function $s(e,t){return e instanceof Error&&xP in e&&(t==null||!!(e.type&t))}const NM="[^/]+?",CG={sensitive:!1,strict:!1,start:!0,end:!0},kG=/[.+*?^${}()[\]/\\]/g;function EG(e,t){const r=cr({},CG,t),n=[];let o=r.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];r.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=40+(r.sensitive?.25:0);if(f.type===0)d||(o+="/"),o+=f.value.replace(kG,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:b,optional:E,regexp:h}=f;s.push({name:m,repeatable:b,optional:E});const _=h||NM;if(_!==NM){p+=10;try{new RegExp(`(${_})`)}catch(g){throw new Error(`Invalid custom RegExp for param "${m}" (${_}): `+g.message)}}let T=b?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(T=E&&c.length<2?`(?:/${T})`:"/"+T),E&&(T+="?"),o+=T,p+=20,E&&(p+=-8),b&&(p+=-20),_===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(r.strict&&r.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}r.strict||(o+="/?"),r.end?o+="$":r.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const i=new RegExp(o,r.sensitive?"":"i");function a(c){const u=c.match(i),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=s[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of e){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:b,optional:E}=p,h=m in c?c[m]:"";if(Yo(h)&&!b)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const _=Yo(h)?h.join("/"):h;if(!_)if(E)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=_}}return u||"/"}return{re:i,score:n,keys:s,parse:a,stringify:l}}function PG(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function TP(e,t){let r=0;const n=e.score,o=t.score;for(;r<n.length&&r<o.length;){const s=PG(n[r],o[r]);if(s)return s;r++}if(Math.abs(o.length-n.length)===1){if(jM(n))return 1;if(jM(o))return-1}return o.length-n.length}function jM(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const $G={type:0,value:""},SG=/[a-zA-Z0-9_]/;function IG(e){if(!e)return[[]];if(e==="/")return[[$G]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(p){throw new Error(`ERR (${r})/"${c}": ${p}`)}let r=0,n=r;const o=[];let s;function i(){s&&o.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(r===0?s.push({type:0,value:c}):r===1||r===2||r===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(c&&d(),i()):l===":"?(d(),r=1):f();break;case 4:f(),r=n;break;case 1:l==="("?r=2:SG.test(l)?f():(d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:r=3:u+=l;break;case 3:d(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${c}"`),d(),i(),o}function AG(e,t,r){const n=EG(IG(e.path),r),o=cr(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function OG(e,t){const r=[],n=new Map;t=GM({strict:!1,end:!0,sensitive:!1},t);function o(d){return n.get(d)}function s(d,f,p){const m=!p,b=WM(d);b.aliasOf=p&&p.record;const E=GM(t,d),h=[b];if("alias"in d){const g=typeof d.alias=="string"?[d.alias]:d.alias;for(const M of g)h.push(WM(cr({},b,{components:p?p.record.components:b.components,path:M,aliasOf:p?p.record:b})))}let _,T;for(const g of h){const{path:M}=g;if(f&&M[0]!=="/"){const x=f.record.path,w=x[x.length-1]==="/"?"":"/";g.path=f.record.path+(M&&w+M)}if(_=AG(g,f,E),p?p.alias.push(_):(T=T||_,T!==_&&T.alias.push(_),m&&d.name&&!UM(_)&&i(d.name)),CP(_)&&l(_),b.children){const x=b.children;for(let w=0;w<x.length;w++)s(x[w],_,p&&p.children[w])}p=p||_}return T?()=>{i(T)}:mc}function i(d){if(MP(d)){const f=n.get(d);f&&(n.delete(d),r.splice(r.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=r.indexOf(d);f>-1&&(r.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function a(){return r}function l(d){const f=DG(d,r);r.splice(f,0,d),d.record.name&&!UM(d)&&n.set(d.record.name,d)}function c(d,f){let p,m={},b,E;if("name"in d&&d.name){if(p=n.get(d.name),!p)throw Ja(1,{location:d});E=p.record.name,m=cr(VM(f.params,p.keys.filter(T=>!T.optional).concat(p.parent?p.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),d.params&&VM(d.params,p.keys.map(T=>T.name))),b=p.stringify(m)}else if(d.path!=null)b=d.path,p=r.find(T=>T.re.test(b)),p&&(m=p.parse(b),E=p.record.name);else{if(p=f.name?n.get(f.name):r.find(T=>T.re.test(f.path)),!p)throw Ja(1,{location:d,currentLocation:f});E=p.record.name,m=cr({},f.params,d.params),b=p.stringify(m)}const h=[];let _=p;for(;_;)h.unshift(_.record),_=_.parent;return{name:E,path:b,params:m,matched:h,meta:FG(h)}}e.forEach(d=>s(d));function u(){r.length=0,n.clear()}return{addRoute:s,resolve:c,removeRoute:i,clearRoutes:u,getRoutes:a,getRecordMatcher:o}}function VM(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function WM(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:LG(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function LG(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="object"?r[n]:r;return t}function UM(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function FG(e){return e.reduce((t,r)=>cr(t,r.meta),{})}function GM(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function DG(e,t){let r=0,n=t.length;for(;r!==n;){const s=r+n>>1;TP(e,t[s])<0?n=s:r=s+1}const o=BG(e);return o&&(n=t.lastIndexOf(o,n-1)),n}function BG(e){let t=e;for(;t=t.parent;)if(CP(t)&&TP(e,t)===0)return t}function CP({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function RG(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const s=n[o].replace(gP," "),i=s.indexOf("="),a=Qc(i<0?s:s.slice(0,i)),l=i<0?null:Qc(s.slice(i+1));if(a in t){let c=t[a];Yo(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function HM(e){let t="";for(let r in e){const n=e[r];if(r=oG(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Yo(n)?n.map(s=>s&&cg(s)):[n&&cg(n)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+r,s!=null&&(t+="="+s))})}return t}function zG(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Yo(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const NG=Symbol(""),KM=Symbol(""),Sf=Symbol(""),kP=Symbol(""),ug=Symbol("");function Dl(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function r(){e=[]}return{add:t,list:()=>e.slice(),reset:r}}function ci(e,t,r,n,o,s=i=>i()){const i=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Ja(4,{from:r,to:t})):f instanceof Error?l(f):TG(f)?l(Ja(2,{from:t,to:f})):(i&&n.enterCallbacks[o]===i&&typeof f=="function"&&i.push(f),a())},u=s(()=>e.call(n&&n.instances[o],t,r,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function vm(e,t,r,n,o=s=>s()){const s=[];for(const i of e)for(const a in i.components){let l=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(mP(l)){const u=(l.__vccOpts||l)[t];u&&s.push(ci(u,r,n,i,a,o))}else{let c=l();s.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const d=K7(u)?u.default:u;i.mods[a]=u,i.components[a]=d;const p=(d.__vccOpts||d)[t];return p&&ci(p,r,n,i,a,o)()}))}}return s}function qM(e){const t=To(Sf),r=To(kP),n=Lr(()=>{const l=yr(e.to);return t.resolve(l)}),o=Lr(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=r.matched;if(!u||!d.length)return-1;const f=d.findIndex(Ya.bind(null,u));if(f>-1)return f;const p=XM(l[c-2]);return c>1&&XM(u)===p&&d[d.length-1].path!==p?d.findIndex(Ya.bind(null,l[c-2])):f}),s=Lr(()=>o.value>-1&&GG(r.params,n.value.params)),i=Lr(()=>o.value>-1&&o.value===r.matched.length-1&&yP(r.params,n.value.params));function a(l={}){if(UG(l)){const c=t[yr(e.replace)?"replace":"push"](yr(e.to)).catch(mc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Lr(()=>n.value.href),isActive:s,isExactActive:i,navigate:a}}function jG(e){return e.length===1?e[0]:e}const VG=Vs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:qM,setup(e,{slots:t}){const r=tl(qM(e)),{options:n}=To(Sf),o=Lr(()=>({[QM(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[QM(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const s=t.default&&jG(t.default(r));return e.custom?s:dd("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},s)}}}),WG=VG;function UG(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function GG(e,t){for(const r in t){const n=t[r],o=e[r];if(typeof n=="string"){if(n!==o)return!1}else if(!Yo(o)||o.length!==n.length||n.some((s,i)=>s!==o[i]))return!1}return!0}function XM(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const QM=(e,t,r)=>e??t??r,HG=Vs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=To(ug),o=Lr(()=>e.route||n.value),s=To(KM,0),i=Lr(()=>{let c=yr(s);const{matched:u}=o.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Lr(()=>o.value.matched[i.value]);Iu(KM,Lr(()=>i.value+1)),Iu(NG,a),Iu(ug,o);const l=eo();return Hn(()=>[l.value,a.value,e.name],([c,u,d],[f,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ya(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=o.value,u=e.name,d=a.value,f=d&&d.components[u];if(!f)return YM(r.default,{Component:f,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,E=dd(f,cr({},m,t,{onVnodeUnmounted:h=>{h.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return YM(r.default,{Component:E,route:c})||E}}});function YM(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const KG=HG;function qG(e){const t=OG(e.routes,e),r=e.parseQuery||RG,n=e.stringifyQuery||HM,o=e.history,s=Dl(),i=Dl(),a=Dl(),l=dE(ri);let c=ri;Da&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=_m.bind(null,de=>""+de),d=_m.bind(null,iG),f=_m.bind(null,Qc);function p(de,Te){let Pe,xe;return MP(de)?(Pe=t.getRecordMatcher(de),xe=Te):xe=de,t.addRoute(xe,Pe)}function m(de){const Te=t.getRecordMatcher(de);Te&&t.removeRoute(Te)}function b(){return t.getRoutes().map(de=>de.record)}function E(de){return!!t.getRecordMatcher(de)}function h(de,Te){if(Te=cr({},Te||l.value),typeof de=="string"){const q=bm(r,de,Te.path),pe=t.resolve({path:q.path},Te),ue=o.createHref(q.fullPath);return cr(q,pe,{params:f(pe.params),hash:Qc(q.hash),redirectedFrom:void 0,href:ue})}let Pe;if(de.path!=null)Pe=cr({},de,{path:bm(r,de.path,Te.path).path});else{const q=cr({},de.params);for(const pe in q)q[pe]==null&&delete q[pe];Pe=cr({},de,{params:d(q)}),Te.params=d(Te.params)}const xe=t.resolve(Pe,Te),Y=de.hash||"";xe.params=u(f(xe.params));const B=cG(n,cr({},de,{hash:nG(Y),path:xe.path})),I=o.createHref(B);return cr({fullPath:B,hash:Y,query:n===HM?zG(de.query):de.query||{}},xe,{redirectedFrom:void 0,href:I})}function _(de){return typeof de=="string"?bm(r,de,l.value.path):cr({},de)}function T(de,Te){if(c!==de)return Ja(8,{from:Te,to:de})}function g(de){return w(de)}function M(de){return g(cr(_(de),{replace:!0}))}function x(de){const Te=de.matched[de.matched.length-1];if(Te&&Te.redirect){const{redirect:Pe}=Te;let xe=typeof Pe=="function"?Pe(de):Pe;return typeof xe=="string"&&(xe=xe.includes("?")||xe.includes("#")?xe=_(xe):{path:xe},xe.params={}),cr({query:de.query,hash:de.hash,params:xe.path!=null?{}:de.params},xe)}}function w(de,Te){const Pe=c=h(de),xe=l.value,Y=de.state,B=de.force,I=de.replace===!0,q=x(Pe);if(q)return w(cr(_(q),{state:typeof q=="object"?cr({},Y,q.state):Y,force:B,replace:I}),Te||Pe);const pe=Pe;pe.redirectedFrom=Te;let ue;return!B&&dG(n,xe,Pe)&&(ue=Ja(16,{to:pe,from:xe}),W(xe,xe,!0,!1)),(ue?Promise.resolve(ue):L(pe,xe)).catch(oe=>$s(oe)?$s(oe,2)?oe:Me(oe):ne(oe,pe,xe)).then(oe=>{if(oe){if($s(oe,2))return w(cr({replace:I},_(oe.to),{state:typeof oe.to=="object"?cr({},Y,oe.to.state):Y,force:B}),Te||pe)}else oe=j(pe,xe,!0,I,Y);return G(pe,xe,oe),oe})}function $(de,Te){const Pe=T(de,Te);return Pe?Promise.reject(Pe):Promise.resolve()}function O(de){const Te=U.values().next().value;return Te&&typeof Te.runWithContext=="function"?Te.runWithContext(de):de()}function L(de,Te){let Pe;const[xe,Y,B]=XG(de,Te);Pe=vm(xe.reverse(),"beforeRouteLeave",de,Te);for(const q of xe)q.leaveGuards.forEach(pe=>{Pe.push(ci(pe,de,Te))});const I=$.bind(null,de,Te);return Pe.push(I),Le(Pe).then(()=>{Pe=[];for(const q of s.list())Pe.push(ci(q,de,Te));return Pe.push(I),Le(Pe)}).then(()=>{Pe=vm(Y,"beforeRouteUpdate",de,Te);for(const q of Y)q.updateGuards.forEach(pe=>{Pe.push(ci(pe,de,Te))});return Pe.push(I),Le(Pe)}).then(()=>{Pe=[];for(const q of B)if(q.beforeEnter)if(Yo(q.beforeEnter))for(const pe of q.beforeEnter)Pe.push(ci(pe,de,Te));else Pe.push(ci(q.beforeEnter,de,Te));return Pe.push(I),Le(Pe)}).then(()=>(de.matched.forEach(q=>q.enterCallbacks={}),Pe=vm(B,"beforeRouteEnter",de,Te,O),Pe.push(I),Le(Pe))).then(()=>{Pe=[];for(const q of i.list())Pe.push(ci(q,de,Te));return Pe.push(I),Le(Pe)}).catch(q=>$s(q,8)?q:Promise.reject(q))}function G(de,Te,Pe){a.list().forEach(xe=>O(()=>xe(de,Te,Pe)))}function j(de,Te,Pe,xe,Y){const B=T(de,Te);if(B)return B;const I=Te===ri,q=Da?history.state:{};Pe&&(xe||I?o.replace(de.fullPath,cr({scroll:I&&q&&q.scroll},Y)):o.push(de.fullPath,Y)),l.value=de,W(de,Te,Pe,I),Me()}let D;function re(){D||(D=o.listen((de,Te,Pe)=>{if(!be.listening)return;const xe=h(de),Y=x(xe);if(Y){w(cr(Y,{replace:!0,force:!0}),xe).catch(mc);return}c=xe;const B=l.value;Da&&bG(BM(B.fullPath,Pe.delta),$f()),L(xe,B).catch(I=>$s(I,12)?I:$s(I,2)?(w(cr(_(I.to),{force:!0}),xe).then(q=>{$s(q,20)&&!Pe.delta&&Pe.type===Yc.pop&&o.go(-1,!1)}).catch(mc),Promise.reject()):(Pe.delta&&o.go(-Pe.delta,!1),ne(I,xe,B))).then(I=>{I=I||j(xe,B,!1),I&&(Pe.delta&&!$s(I,8)?o.go(-Pe.delta,!1):Pe.type===Yc.pop&&$s(I,20)&&o.go(-1,!1)),G(xe,B,I)}).catch(mc)}))}let Z=Dl(),te=Dl(),ie;function ne(de,Te,Pe){Me(de);const xe=te.list();return xe.length?xe.forEach(Y=>Y(de,Te,Pe)):console.error(de),Promise.reject(de)}function ve(){return ie&&l.value!==ri?Promise.resolve():new Promise((de,Te)=>{Z.add([de,Te])})}function Me(de){return ie||(ie=!de,re(),Z.list().forEach(([Te,Pe])=>de?Pe(de):Te()),Z.reset()),de}function W(de,Te,Pe,xe){const{scrollBehavior:Y}=e;if(!Da||!Y)return Promise.resolve();const B=!Pe&&vG(BM(de.fullPath,0))||(xe||!Pe)&&history.state&&history.state.scroll||null;return od().then(()=>Y(de,Te,B)).then(I=>I&&_G(I)).catch(I=>ne(I,de,Te))}const R=de=>o.go(de);let J;const U=new Set,be={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:E,getRoutes:b,resolve:h,options:e,push:g,replace:M,go:R,back:()=>R(-1),forward:()=>R(1),beforeEach:s.add,beforeResolve:i.add,afterEach:a.add,onError:te.add,isReady:ve,install(de){const Te=this;de.component("RouterLink",WG),de.component("RouterView",KG),de.config.globalProperties.$router=Te,Object.defineProperty(de.config.globalProperties,"$route",{enumerable:!0,get:()=>yr(l)}),Da&&!J&&l.value===ri&&(J=!0,g(o.location).catch(Y=>{}));const Pe={};for(const Y in ri)Object.defineProperty(Pe,Y,{get:()=>l.value[Y],enumerable:!0});de.provide(Sf,Te),de.provide(kP,lE(Pe)),de.provide(ug,l);const xe=de.unmount;U.add(de),de.unmount=function(){U.delete(de),U.size<1&&(c=ri,D&&D(),D=null,l.value=ri,J=!1,ie=!1),xe()}}};function Le(de){return de.reduce((Te,Pe)=>Te.then(()=>O(Pe)),Promise.resolve())}return be}function XG(e,t){const r=[],n=[],o=[],s=Math.max(t.matched.length,e.matched.length);for(let i=0;i<s;i++){const a=t.matched[i];a&&(e.matched.find(c=>Ya(c,a))?n.push(a):r.push(a));const l=e.matched[i];l&&(t.matched.find(c=>Ya(c,l))||o.push(l))}return[r,n,o]}function QG(){return To(Sf)}const ym=eo("app.title"),wm=eo("");function YG(){const{t:e}=vi(),t=Lr(()=>e(ym.value)),r=s=>{ym.value=s},n=s=>{wm.value=s},o=()=>{ym.value="app.title",wm.value=""};return{appBarTitle:ao(t),appBarIcon:ao(wm),setTitle:r,setIcon:n,resetAppBar:o}}const JG={title:"Tobias Wrth ",subtitle:"Kreative Spielwiese ",mode:{dark:"Dunkler Modus",light:"Heller Modus"},language:"Sprache"},ZG={gallery:"Galerie",gallery2d:"Galerie 2D",reflectProsa:"Reflexions-Assistent Prosa",reflectEmotions:"Reflexions-Assistent Emotionen",reflectAffects:"Reflexions-Assistent Affekte"},eH={title:"Willkommen!",description:"Wohin mchtest du gehen?",features:{gallery:{title:"Galerie",description:"Meine Kunstwerke in chronologischer Reihenfolge"},gallery2d:{title:"Galerie 2D",description:"Meine Kunstwerke im 2D-Raum dargestellt"},reflectProsa:{title:"Reflexions-Assistent Prosa",description:"Strukturierte Selbstreflexion"},reflectEmotions:{title:"Reflexions-Assistent Emotionen",description:"Strukturierte Selbstreflexion"},reflectAffects:{title:"Reflexions-Assistent Affekte",description:"Strukturierte Selbstreflexion"}}},tH={title:"Galerie",loading:"Lade Galerie...",error:"Galerie konnte nicht geladen werden: {error}",columns:"Spalten",gridNotFound:"Raster-Element nicht gefunden",search:{placeholder:"Bilder suchen...",error:"Suche fehlgeschlagen: {error}",searching:"Suche luft...",loadingTitle:"Bildsuche wird vorbereitet",loadingDescription:"Da diese Suche von KI ermglicht wird, mssen ein paar Dinge vorbereitet werden. Das kann einen Moment dauern...",loadingEmbeddings:"Bild-Einbettungen",loadingModel:"KI-Modell",loadingComplete:"Fertig",poweredBy:"Ermglicht durch"}},rH={title:"Galerie 2D",loading:"Lade 2D-Galerie...",error:"Galerie konnte nicht initialisiert werden: {error}",clickToView:"Hochauflsendes Bild anzeigen: {name}",photo:"Foto: {name}",failedToLoad:"Bild konnte nicht geladen werden: {name}"},nH={title:"Reflexions-Assistent Prosa",description:"Diese App soll helfen, strukturiert zu reflektieren. Erfasse zu jedem Bereich stichwortartig deine heutigen Eindrcke.",disclaimer:'Die Website luft nur auf dem Client und es wird nichts gespeichert. Die Idee ist, dass die bersicht schlussendlich kopiert und andernorts abgelegt wird - falls das gewnscht ist. Du kannst mehrere Eintrge pro Bereich erstellen, indem du sie mit einem ";" oder Zeilenumbruch trennst.',categories:{sorrows:"Sorgen und Kummer",tasks:"Erledigungen und Ereignisse",insights:"Erkenntnisse und Einsichten",emotions:"Emotionen und Gefhle",happiness:"Glcksmomente und Hhepunkte",contacts:"Kontakte und soziale Interaktionen",gratitude:"Dankbarkeit und Demut",other:"Sonstiges"},overview:"bersicht",noThoughts:"Noch keine Gedanken erfasst.",copy:"Kopieren"},oH={title:"Reflexions-Assistent Emotionen",description:"Diese App soll helfen, strukturiert zu reflektieren. Erfasse zu jedem Gefhl, wie stark du es gerade fhlst. (Ausgerichtet nach Robert Plutchiks Rad der Emotionen.)",disclaimer:"Die Website luft nur auf dem Client und es wird nichts gespeichert. Die Idee ist, dass die bersicht schlussendlich kopiert und andernorts abgelegt wird - falls das gewnscht ist.",wheelAlt:"Plutchiks Rad der Emotionen",emotions:{anger:"Wut, rger, Verdruss",anticipation:"Wachsamkeit, Antizipation, Interesse",joy:"Freude, Ekstase, Gelassenheit",trust:"Anbetung, Vertrauen, Akzeptanz",fear:"Angst, Panik, Besorgnis",surprise:"berraschung, Verwunderung, Verstrtheit",sadness:"Traurigkeit, Kummer, Schwermdigkeit",disgust:"Ekel, Abscheu, Langeweile"},secondaryEmotions:{aggression:"Aggression",optimism:"Optimismus",love:"Liebe",submission:"Unterwrfigkeit",awe:"Ehrfurcht, Achtung",disapproval:"Ablehnung, Missbilligung",remorse:"Reue, Gewissensbisse, Bedauern",contempt:"Verachtung, Geringschtzung"},overview:"bersicht",copy:"Kopieren"},sH={title:"Reflexions-Assistent Affekte",description:"Diese App soll helfen, strukturiert zu reflektieren. Erfasse zu jedem Affekt, wie stark er dich gerade antreibt. (Ausgerichtet nach Jaak Panksepp)",disclaimer:"Die Website luft nur auf dem Client und es wird nichts gespeichert. Die Idee ist, dass die bersicht schlussendlich kopiert und andernorts abgelegt wird - falls das gewnscht ist.",affects:{lust:"LUST",seeking:"SUCHEN/Erwartung",play:"SPIEL/Gesellschaftsfreude",care:"FRSORGE/Pflege",rage:"WUT/rger",fear:"FURCHT/Angst",panic:"PANIK/Traurigkeit"},overview:"bersicht",copy:"Kopieren"},iH={success:"Erfolgreich kopiert!",successDetail:"Der Inhalt wurde in die Zwischenablage kopiert.",prosaSuccess:"Der Reflexionsinhalt wurde in die Zwischenablage kopiert.",emotionsSuccess:"Der Emotionsinhalt wurde in die Zwischenablage kopiert.",affectsSuccess:"Der Affect-Inhalt wurde in die Zwischenablage kopiert.",error:"Fehler beim Kopieren",errorDetail:"Der Inhalt konnte nicht kopiert werden. Bitte markieren und manuell kopieren."},aH={app:JG,navigation:ZG,home:eH,gallery:tH,gallery2d:rH,reflectProsa:nH,reflectEmotions:oH,reflectAffects:sH,clipboard:iH},lH={title:"Tobias Wrth ",subtitle:"Creative Playground ",mode:{dark:"Dark Mode",light:"Light Mode"},language:"Language"},cH={gallery:"Gallery",gallery2d:"Gallery 2D",reflectProsa:"Reflection Assistant Prosa",reflectEmotions:"Reflection Assistant Emotions",reflectAffects:"Reflection Assistant Affects"},dH={title:"Welcome!",description:"Where would you like to go?",features:{gallery:{title:"Gallery",description:"My artworks in chronological order"},gallery2d:{title:"Gallery 2D",description:"My artworks plotted in 2D space"},reflectProsa:{title:"Reflection Assistant Prosa",description:"Structured reflection of oneself"},reflectEmotions:{title:"Reflection Assistant Emotions",description:"Structured reflection of oneself"},reflectAffects:{title:"Reflection Assistant Affects",description:"Structured reflection of oneself"}}},uH={title:"Gallery",loading:"Loading gallery...",error:"Gallery could not be loaded: {error}",columns:"Columns",gridNotFound:"Grid element not found",search:{placeholder:"Search images...",error:"Search failed: {error}",searching:"Searching...",loadingTitle:"Preparing Image Search",loadingDescription:"Since this search is powered by AI, a few things need to be prepared. This may take a moment...",loadingEmbeddings:"Image Embeddings",loadingModel:"AI Model",loadingComplete:"Complete",poweredBy:"Powered by"}},fH={title:"Gallery 2D",loading:"Loading 2D Gallery...",error:"Failed to initialize gallery: {error}",clickToView:"View high resolution image: {name}",photo:"Photo: {name}",failedToLoad:"Failed to load image: {name}"},pH={title:"Reflection Assistant Prosa",description:"This app helps you reflect in a structured way. Record your daily impressions for each area in keywords.",disclaimer:'The website runs only on the client and nothing is saved. The idea is that the overview is eventually copied and stored elsewhere - if desired. You can create multiple entries per area by separating them with a ";" or line break.',categories:{sorrows:"Worries and Sorrows",tasks:"Tasks and Events",insights:"Insights and Realizations",emotions:"Emotions and Feelings",happiness:"Happy Moments and Highlights",contacts:"Contacts and Social Interactions",gratitude:"Gratitude and Humility",other:"Miscellaneous"},overview:"Overview",noThoughts:"No thoughts recorded yet.",copy:"Copy"},mH={title:"Reflection Assistant Emotions",description:"This app helps you reflect in a structured way. Record how strongly you feel each emotion right now. (Based on Robert Plutchik's Wheel of Emotions.)",disclaimer:"The website runs only on the client and nothing is saved. The idea is that the overview is eventually copied and stored elsewhere - if desired.",wheelAlt:"Plutchik's Wheel of Emotions",emotions:{anger:"Anger, Rage, Annoyance",anticipation:"Vigilance, Anticipation, Interest",joy:"Joy, Ecstasy, Serenity",trust:"Admiration, Trust, Acceptance",fear:"Fear, Terror, Apprehension",surprise:"Surprise, Amazement, Distraction",sadness:"Sadness, Grief, Pensiveness",disgust:"Disgust, Loathing, Boredom"},secondaryEmotions:{aggression:"Aggression",optimism:"Optimism",love:"Love",submission:"Submission",awe:"Awe, Reverence",disapproval:"Disapproval",remorse:"Remorse, Regret",contempt:"Contempt, Disdain"},overview:"Overview",copy:"Copy"},hH={title:"Reflection Assistant Affects",description:"This app helps you reflect in a structured way. Record how strongly each affect drives you right now. (Based on Jaak Panksepp)",disclaimer:"The website runs only on the client and nothing is saved. The idea is that the overview is eventually copied and stored elsewhere - if desired.",affects:{lust:"LUST",seeking:"SEEKING/Expectancy",play:"PLAY/Social Joy",care:"CARE/Nurturing",rage:"RAGE/Anger",fear:"FEAR/Anxiety",panic:"PANIC/Grief"},overview:"Overview",copy:"Copy"},gH={success:"Successfully copied!",successDetail:"The content has been copied to the clipboard.",prosaSuccess:"The reflection content has been copied to the clipboard.",emotionsSuccess:"The emotion content has been copied to the clipboard.",affectsSuccess:"The affect content has been copied to the clipboard.",error:"Error copying",errorDetail:"The content could not be copied. Please select and copy manually."},_H={app:lH,navigation:cH,home:dH,gallery:uH,gallery2d:fH,reflectProsa:pH,reflectEmotions:mH,reflectAffects:hH,clipboard:gH},bH={de:aH,en:_H},Ia=[{code:"de",name:"Deutsch",flag:"de"},{code:"en",name:"English",flag:"gb"}],ef="en",Bl=eo(ef);function vH(){const{locale:e}=vi(),t=()=>{const o=localStorage.getItem("locale");if(o&&Ia.some(s=>s.code===o))Bl.value=o;else{const s=navigator.language.split("-")[0],i=Ia.find(a=>a.code===s);Bl.value=i?.code||ef}e.value=Bl.value},r=o=>{Ia.some(s=>s.code===o)&&(Bl.value=o,e.value=o,localStorage.setItem("locale",o))},n=Lr(()=>Ia.find(o=>o.code===Bl.value)||Ia[0]);return{availableLocales:Ia,getCurrentLocale:n,setLocale:r,initLocale:t}}var EP={name:"WindowMaximizeIcon",extends:wi};function yH(e){return TH(e)||xH(e)||MH(e)||wH()}function wH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MH(e,t){if(e){if(typeof e=="string")return fg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fg(e,t):void 0}}function xH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TH(e){if(Array.isArray(e))return fg(e)}function fg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function CH(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),yH(t[0]||(t[0]=[Ze("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14ZM9.77805 7.42192C9.89013 7.534 10.0415 7.59788 10.2 7.59995C10.3585 7.59788 10.5099 7.534 10.622 7.42192C10.7341 7.30985 10.798 7.15844 10.8 6.99995V3.94242C10.8066 3.90505 10.8096 3.86689 10.8089 3.82843C10.8079 3.77159 10.7988 3.7157 10.7824 3.6623C10.756 3.55552 10.701 3.45698 10.622 3.37798C10.5099 3.2659 10.3585 3.20202 10.2 3.19995H7.00002C6.84089 3.19995 6.68828 3.26317 6.57576 3.37569C6.46324 3.48821 6.40002 3.64082 6.40002 3.79995C6.40002 3.95908 6.46324 4.11169 6.57576 4.22422C6.68828 4.33674 6.84089 4.39995 7.00002 4.39995H8.80006L6.19997 7.00005C6.10158 7.11005 6.04718 7.25246 6.04718 7.40005C6.04718 7.54763 6.10158 7.69004 6.19997 7.80005C6.30202 7.91645 6.44561 7.98824 6.59997 8.00005C6.75432 7.98824 6.89791 7.91645 6.99997 7.80005L9.60002 5.26841V6.99995C9.6021 7.15844 9.66598 7.30985 9.77805 7.42192ZM1.4 14H3.8C4.17066 13.9979 4.52553 13.8498 4.78763 13.5877C5.04973 13.3256 5.1979 12.9707 5.2 12.6V10.2C5.1979 9.82939 5.04973 9.47452 4.78763 9.21242C4.52553 8.95032 4.17066 8.80215 3.8 8.80005H1.4C1.02934 8.80215 0.674468 8.95032 0.412371 9.21242C0.150274 9.47452 0.00210008 9.82939 0 10.2V12.6C0.00210008 12.9707 0.150274 13.3256 0.412371 13.5877C0.674468 13.8498 1.02934 13.9979 1.4 14ZM1.25858 10.0586C1.29609 10.0211 1.34696 10 1.4 10H3.8C3.85304 10 3.90391 10.0211 3.94142 10.0586C3.97893 10.0961 4 10.147 4 10.2V12.6C4 12.6531 3.97893 12.704 3.94142 12.7415C3.90391 12.779 3.85304 12.8 3.8 12.8H1.4C1.34696 12.8 1.29609 12.779 1.25858 12.7415C1.22107 12.704 1.2 12.6531 1.2 12.6V10.2C1.2 10.147 1.22107 10.0961 1.25858 10.0586Z",fill:"currentColor"},null,-1)])),16)}EP.render=CH;var PP={name:"WindowMinimizeIcon",extends:wi};function kH(e){return SH(e)||$H(e)||PH(e)||EH()}function EH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PH(e,t){if(e){if(typeof e=="string")return pg(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pg(e,t):void 0}}function $H(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SH(e){if(Array.isArray(e))return pg(e)}function pg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function IH(e,t,r,n,o,s){return He(),at("svg",Qe({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),kH(t[0]||(t[0]=[Ze("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0ZM6.368 7.952C6.44137 7.98326 6.52025 7.99958 6.6 8H9.8C9.95913 8 10.1117 7.93678 10.2243 7.82426C10.3368 7.71174 10.4 7.55913 10.4 7.4C10.4 7.24087 10.3368 7.08826 10.2243 6.97574C10.1117 6.86321 9.95913 6.8 9.8 6.8H8.048L10.624 4.224C10.73 4.11026 10.7877 3.95982 10.7849 3.80438C10.7822 3.64894 10.7192 3.50063 10.6093 3.3907C10.4994 3.28077 10.3511 3.2178 10.1956 3.21506C10.0402 3.21232 9.88974 3.27002 9.776 3.376L7.2 5.952V4.2C7.2 4.04087 7.13679 3.88826 7.02426 3.77574C6.91174 3.66321 6.75913 3.6 6.6 3.6C6.44087 3.6 6.28826 3.66321 6.17574 3.77574C6.06321 3.88826 6 4.04087 6 4.2V7.4C6.00042 7.47975 6.01674 7.55862 6.048 7.632C6.07656 7.70442 6.11971 7.7702 6.17475 7.82524C6.2298 7.88029 6.29558 7.92344 6.368 7.952ZM1.4 8.80005H3.8C4.17066 8.80215 4.52553 8.95032 4.78763 9.21242C5.04973 9.47452 5.1979 9.82939 5.2 10.2V12.6C5.1979 12.9707 5.04973 13.3256 4.78763 13.5877C4.52553 13.8498 4.17066 13.9979 3.8 14H1.4C1.02934 13.9979 0.674468 13.8498 0.412371 13.5877C0.150274 13.3256 0.00210008 12.9707 0 12.6V10.2C0.00210008 9.82939 0.150274 9.47452 0.412371 9.21242C0.674468 8.95032 1.02934 8.80215 1.4 8.80005ZM3.94142 12.7415C3.97893 12.704 4 12.6531 4 12.6V10.2C4 10.147 3.97893 10.0961 3.94142 10.0586C3.90391 10.0211 3.85304 10 3.8 10H1.4C1.34696 10 1.29609 10.0211 1.25858 10.0586C1.22107 10.0961 1.2 10.147 1.2 10.2V12.6C1.2 12.6531 1.22107 12.704 1.25858 12.7415C1.29609 12.779 1.34696 12.8 1.4 12.8H3.8C3.85304 12.8 3.90391 12.779 3.94142 12.7415Z",fill:"currentColor"},null,-1)])),16)}PP.render=IH;var AH=`
    .p-dialog {
        max-height: 90%;
        transform: scale(1);
        border-radius: dt('dialog.border.radius');
        box-shadow: dt('dialog.shadow');
        background: dt('dialog.background');
        border: 1px solid dt('dialog.border.color');
        color: dt('dialog.color');
    }

    .p-dialog-content {
        overflow-y: auto;
        padding: dt('dialog.content.padding');
    }

    .p-dialog-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-shrink: 0;
        padding: dt('dialog.header.padding');
    }

    .p-dialog-title {
        font-weight: dt('dialog.title.font.weight');
        font-size: dt('dialog.title.font.size');
    }

    .p-dialog-footer {
        flex-shrink: 0;
        padding: dt('dialog.footer.padding');
        display: flex;
        justify-content: flex-end;
        gap: dt('dialog.footer.gap');
    }

    .p-dialog-header-actions {
        display: flex;
        align-items: center;
        gap: dt('dialog.header.gap');
    }

    .p-dialog-enter-active {
        transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
    }

    .p-dialog-leave-active {
        transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .p-dialog-enter-from,
    .p-dialog-leave-to {
        opacity: 0;
        transform: scale(0.7);
    }

    .p-dialog-top .p-dialog,
    .p-dialog-bottom .p-dialog,
    .p-dialog-left .p-dialog,
    .p-dialog-right .p-dialog,
    .p-dialog-topleft .p-dialog,
    .p-dialog-topright .p-dialog,
    .p-dialog-bottomleft .p-dialog,
    .p-dialog-bottomright .p-dialog {
        margin: 0.75rem;
        transform: translate3d(0px, 0px, 0px);
    }

    .p-dialog-top .p-dialog-enter-active,
    .p-dialog-top .p-dialog-leave-active,
    .p-dialog-bottom .p-dialog-enter-active,
    .p-dialog-bottom .p-dialog-leave-active,
    .p-dialog-left .p-dialog-enter-active,
    .p-dialog-left .p-dialog-leave-active,
    .p-dialog-right .p-dialog-enter-active,
    .p-dialog-right .p-dialog-leave-active,
    .p-dialog-topleft .p-dialog-enter-active,
    .p-dialog-topleft .p-dialog-leave-active,
    .p-dialog-topright .p-dialog-enter-active,
    .p-dialog-topright .p-dialog-leave-active,
    .p-dialog-bottomleft .p-dialog-enter-active,
    .p-dialog-bottomleft .p-dialog-leave-active,
    .p-dialog-bottomright .p-dialog-enter-active,
    .p-dialog-bottomright .p-dialog-leave-active {
        transition: all 0.3s ease-out;
    }

    .p-dialog-top .p-dialog-enter-from,
    .p-dialog-top .p-dialog-leave-to {
        transform: translate3d(0px, -100%, 0px);
    }

    .p-dialog-bottom .p-dialog-enter-from,
    .p-dialog-bottom .p-dialog-leave-to {
        transform: translate3d(0px, 100%, 0px);
    }

    .p-dialog-left .p-dialog-enter-from,
    .p-dialog-left .p-dialog-leave-to,
    .p-dialog-topleft .p-dialog-enter-from,
    .p-dialog-topleft .p-dialog-leave-to,
    .p-dialog-bottomleft .p-dialog-enter-from,
    .p-dialog-bottomleft .p-dialog-leave-to {
        transform: translate3d(-100%, 0px, 0px);
    }

    .p-dialog-right .p-dialog-enter-from,
    .p-dialog-right .p-dialog-leave-to,
    .p-dialog-topright .p-dialog-enter-from,
    .p-dialog-topright .p-dialog-leave-to,
    .p-dialog-bottomright .p-dialog-enter-from,
    .p-dialog-bottomright .p-dialog-leave-to {
        transform: translate3d(100%, 0px, 0px);
    }

    .p-dialog-left:dir(rtl) .p-dialog-enter-from,
    .p-dialog-left:dir(rtl) .p-dialog-leave-to,
    .p-dialog-topleft:dir(rtl) .p-dialog-enter-from,
    .p-dialog-topleft:dir(rtl) .p-dialog-leave-to,
    .p-dialog-bottomleft:dir(rtl) .p-dialog-enter-from,
    .p-dialog-bottomleft:dir(rtl) .p-dialog-leave-to {
        transform: translate3d(100%, 0px, 0px);
    }

    .p-dialog-right:dir(rtl) .p-dialog-enter-from,
    .p-dialog-right:dir(rtl) .p-dialog-leave-to,
    .p-dialog-topright:dir(rtl) .p-dialog-enter-from,
    .p-dialog-topright:dir(rtl) .p-dialog-leave-to,
    .p-dialog-bottomright:dir(rtl) .p-dialog-enter-from,
    .p-dialog-bottomright:dir(rtl) .p-dialog-leave-to {
        transform: translate3d(-100%, 0px, 0px);
    }

    .p-dialog-maximized {
        width: 100vw !important;
        height: 100vh !important;
        top: 0px !important;
        left: 0px !important;
        max-height: 100%;
        height: 100%;
        border-radius: 0;
    }

    .p-dialog-maximized .p-dialog-content {
        flex-grow: 1;
    }

    .p-dialog .p-resizable-handle {
        position: absolute;
        font-size: 0.1px;
        display: block;
        cursor: se-resize;
        width: 12px;
        height: 12px;
        right: 1px;
        bottom: 1px;
    }
`,OH={mask:function(t){var r=t.position,n=t.modal;return{position:"fixed",height:"100%",width:"100%",left:0,top:0,display:"flex",justifyContent:r==="left"||r==="topleft"||r==="bottomleft"?"flex-start":r==="right"||r==="topright"||r==="bottomright"?"flex-end":"center",alignItems:r==="top"||r==="topleft"||r==="topright"?"flex-start":r==="bottom"||r==="bottomleft"||r==="bottomright"?"flex-end":"center",pointerEvents:n?"auto":"none"}},root:{display:"flex",flexDirection:"column",pointerEvents:"auto"}},LH={mask:function(t){var r=t.props,n=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"],o=n.find(function(s){return s===r.position});return["p-dialog-mask",{"p-overlay-mask p-overlay-mask-enter":r.modal},o?"p-dialog-".concat(o):""]},root:function(t){var r=t.props,n=t.instance;return["p-dialog p-component",{"p-dialog-maximized":r.maximizable&&n.maximized}]},header:"p-dialog-header",title:"p-dialog-title",headerActions:"p-dialog-header-actions",pcMaximizeButton:"p-dialog-maximize-button",pcCloseButton:"p-dialog-close-button",content:"p-dialog-content",footer:"p-dialog-footer"},FH=Xt.extend({name:"dialog",style:AH,classes:LH,inlineStyles:OH}),DH={name:"BaseDialog",extends:qn,props:{header:{type:null,default:null},footer:{type:null,default:null},visible:{type:Boolean,default:!1},modal:{type:Boolean,default:null},contentStyle:{type:null,default:null},contentClass:{type:String,default:null},contentProps:{type:null,default:null},maximizable:{type:Boolean,default:!1},dismissableMask:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},position:{type:String,default:"center"},breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0},keepInViewport:{type:Boolean,default:!0},minX:{type:Number,default:0},minY:{type:Number,default:0},appendTo:{type:[String,Object],default:"body"},closeIcon:{type:String,default:void 0},maximizeIcon:{type:String,default:void 0},minimizeIcon:{type:String,default:void 0},closeButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},maximizeButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}},_instance:null},style:FH,provide:function(){return{$pcDialog:this,$parentInstance:this}}},$P={name:"Dialog",extends:DH,inheritAttrs:!1,emits:["update:visible","show","hide","after-hide","maximize","unmaximize","dragstart","dragend"],provide:function(){var t=this;return{dialogRef:Lr(function(){return t._instance})}},data:function(){return{containerVisible:this.visible,maximized:!1,focusableMax:null,focusableClose:null,target:null}},documentKeydownListener:null,container:null,mask:null,content:null,headerContainer:null,footerContainer:null,maximizableButton:null,closeButton:null,styleElement:null,dragging:null,documentDragListener:null,documentDragEndListener:null,lastPageX:null,lastPageY:null,maskMouseDownTarget:null,updated:function(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount:function(){this.unbindDocumentState(),this.unbindGlobalListeners(),this.destroyStyle(),this.mask&&this.autoZIndex&&Co.clear(this.mask),this.container=null,this.mask=null},mounted:function(){this.breakpoints&&this.createStyle()},methods:{close:function(){this.$emit("update:visible",!1)},onEnter:function(){this.$emit("show"),this.target=document.activeElement,this.enableDocumentSettings(),this.bindGlobalListeners(),this.autoZIndex&&Co.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal)},onAfterEnter:function(){this.focus()},onBeforeLeave:function(){this.modal&&!this.isUnstyled&&$c(this.mask,"p-overlay-mask-leave"),this.dragging&&this.documentDragEndListener&&this.documentDragEndListener()},onLeave:function(){this.$emit("hide"),Ho(this.target),this.target=null,this.focusableClose=null,this.focusableMax=null},onAfterLeave:function(){this.autoZIndex&&Co.clear(this.mask),this.containerVisible=!1,this.unbindDocumentState(),this.unbindGlobalListeners(),this.$emit("after-hide")},onMaskMouseDown:function(t){this.maskMouseDownTarget=t.target},onMaskMouseUp:function(){this.dismissableMask&&this.modal&&this.mask===this.maskMouseDownTarget&&this.close()},focus:function(){var t=function(o){return o&&o.querySelector("[autofocus]")},r=this.$slots.footer&&t(this.footerContainer);r||(r=this.$slots.header&&t(this.headerContainer),r||(r=this.$slots.default&&t(this.content),r||(this.maximizable?(this.focusableMax=!0,r=this.maximizableButton):(this.focusableClose=!0,r=this.closeButton)))),r&&Ho(r,{focusVisible:!0})},maximize:function(t){this.maximized?(this.maximized=!1,this.$emit("unmaximize",t)):(this.maximized=!0,this.$emit("maximize",t)),this.modal||(this.maximized?ig():ag())},enableDocumentSettings:function(){(this.modal||!this.modal&&this.blockScroll||this.maximizable&&this.maximized)&&ig()},unbindDocumentState:function(){(this.modal||!this.modal&&this.blockScroll||this.maximizable&&this.maximized)&&ag()},onKeyDown:function(t){t.code==="Escape"&&this.closeOnEscape&&this.close()},bindDocumentKeyDownListener:function(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener:function(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},containerRef:function(t){this.container=t},maskRef:function(t){this.mask=t},contentRef:function(t){this.content=t},headerContainerRef:function(t){this.headerContainer=t},footerContainerRef:function(t){this.footerContainer=t},maximizableRef:function(t){this.maximizableButton=t?t.$el:void 0},closeButtonRef:function(t){this.closeButton=t?t.$el:void 0},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var t;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",d_(this.styleElement,"nonce",(t=this.$primevue)===null||t===void 0||(t=t.config)===null||t===void 0||(t=t.csp)===null||t===void 0?void 0:t.nonce),document.head.appendChild(this.styleElement);var r="";for(var n in this.breakpoints)r+=`
                        @media screen and (max-width: `.concat(n,`) {
                            .p-dialog[`).concat(this.$attrSelector,`] {
                                width: `).concat(this.breakpoints[n],` !important;
                            }
                        }
                    `);this.styleElement.innerHTML=r}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},initDrag:function(t){t.target.closest("div").getAttribute("data-pc-section")!=="headeractions"&&this.draggable&&(this.dragging=!0,this.lastPageX=t.pageX,this.lastPageY=t.pageY,this.container.style.margin="0",document.body.setAttribute("data-p-unselectable-text","true"),!this.isUnstyled&&R2(document.body,{"user-select":"none"}),this.$emit("dragstart",t))},bindGlobalListeners:function(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.closeOnEscape&&this.bindDocumentKeyDownListener()},unbindGlobalListeners:function(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentKeyDownListener()},bindDocumentDragListener:function(){var t=this;this.documentDragListener=function(r){if(t.dragging){var n=pc(t.container),o=V2(t.container),s=r.pageX-t.lastPageX,i=r.pageY-t.lastPageY,a=t.container.getBoundingClientRect(),l=a.left+s,c=a.top+i,u=B2(),d=getComputedStyle(t.container),f=parseFloat(d.marginLeft),p=parseFloat(d.marginTop);t.container.style.position="fixed",t.keepInViewport?(l>=t.minX&&l+n<u.width&&(t.lastPageX=r.pageX,t.container.style.left=l-f+"px"),c>=t.minY&&c+o<u.height&&(t.lastPageY=r.pageY,t.container.style.top=c-p+"px")):(t.lastPageX=r.pageX,t.container.style.left=l-f+"px",t.lastPageY=r.pageY,t.container.style.top=c-p+"px")}},window.document.addEventListener("mousemove",this.documentDragListener)},unbindDocumentDragListener:function(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)},bindDocumentDragEndListener:function(){var t=this;this.documentDragEndListener=function(r){t.dragging&&(t.dragging=!1,document.body.removeAttribute("data-p-unselectable-text"),!t.isUnstyled&&(document.body.style["user-select"]=""),t.$emit("dragend",r))},window.document.addEventListener("mouseup",this.documentDragEndListener)},unbindDocumentDragEndListener:function(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}},computed:{maximizeIconComponent:function(){return this.maximized?this.minimizeIcon?"span":"WindowMinimizeIcon":this.maximizeIcon?"span":"WindowMaximizeIcon"},ariaLabelledById:function(){return this.header!=null||this.$attrs["aria-labelledby"]!==null?this.$id+"_header":null},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0},dataP:function(){return Kn({maximized:this.maximized,modal:this.modal})}},directives:{ripple:Pf,focustrap:iP},components:{Button:fd,Portal:ud,WindowMinimizeIcon:PP,WindowMaximizeIcon:EP,TimesIcon:Ef}};function Jc(e){"@babel/helpers - typeof";return Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(e)}function JM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ZM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JM(Object(r),!0).forEach(function(n){BH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BH(e,t,r){return(t=RH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RH(e){var t=zH(e,"string");return Jc(t)=="symbol"?t:t+""}function zH(e,t){if(Jc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NH=["data-p"],jH=["aria-labelledby","aria-modal","data-p"],VH=["id"],WH=["data-p"];function UH(e,t,r,n,o,s){var i=Po("Button"),a=Po("Portal"),l=ad("focustrap");return He(),Sr(a,{appendTo:e.appendTo},{default:zr(function(){return[o.containerVisible?(He(),at("div",Qe({key:0,ref:s.maskRef,class:e.cx("mask"),style:e.sx("mask",!0,{position:e.position,modal:e.modal}),onMousedown:t[1]||(t[1]=function(){return s.onMaskMouseDown&&s.onMaskMouseDown.apply(s,arguments)}),onMouseup:t[2]||(t[2]=function(){return s.onMaskMouseUp&&s.onMaskMouseUp.apply(s,arguments)}),"data-p":s.dataP},e.ptm("mask")),[Vt(Jg,Qe({name:"p-dialog",onEnter:s.onEnter,onAfterEnter:s.onAfterEnter,onBeforeLeave:s.onBeforeLeave,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave,appear:""},e.ptm("transition")),{default:zr(function(){return[e.visible?sd((He(),at("div",Qe({key:0,ref:s.containerRef,class:e.cx("root"),style:e.sx("root"),role:"dialog","aria-labelledby":s.ariaLabelledById,"aria-modal":e.modal,"data-p":s.dataP},e.ptmi("root")),[e.$slots.container?qt(e.$slots,"container",{key:0,closeCallback:s.close,maximizeCallback:function(u){return s.maximize(u)}}):(He(),at(pr,{key:1},[e.showHeader?(He(),at("div",Qe({key:0,ref:s.headerContainerRef,class:e.cx("header"),onMousedown:t[0]||(t[0]=function(){return s.initDrag&&s.initDrag.apply(s,arguments)})},e.ptm("header")),[qt(e.$slots,"header",{class:kn(e.cx("title"))},function(){return[e.header?(He(),at("span",Qe({key:0,id:s.ariaLabelledById,class:e.cx("title")},e.ptm("title")),fr(e.header),17,VH)):Wt("",!0)]}),Ze("div",Qe({class:e.cx("headerActions")},e.ptm("headerActions")),[e.maximizable?qt(e.$slots,"maximizebutton",{key:0,maximized:o.maximized,maximizeCallback:function(u){return s.maximize(u)}},function(){return[Vt(i,Qe({ref:s.maximizableRef,autofocus:o.focusableMax,class:e.cx("pcMaximizeButton"),onClick:s.maximize,tabindex:e.maximizable?"0":"-1",unstyled:e.unstyled},e.maximizeButtonProps,{pt:e.ptm("pcMaximizeButton"),"data-pc-group-section":"headericon"}),{icon:zr(function(c){return[qt(e.$slots,"maximizeicon",{maximized:o.maximized},function(){return[(He(),Sr(gs(s.maximizeIconComponent),Qe({class:[c.class,o.maximized?e.minimizeIcon:e.maximizeIcon]},e.ptm("pcMaximizeButton").icon),null,16,["class"]))]})]}),_:3},16,["autofocus","class","onClick","tabindex","unstyled","pt"])]}):Wt("",!0),e.closable?qt(e.$slots,"closebutton",{key:1,closeCallback:s.close},function(){return[Vt(i,Qe({ref:s.closeButtonRef,autofocus:o.focusableClose,class:e.cx("pcCloseButton"),onClick:s.close,"aria-label":s.closeAriaLabel,unstyled:e.unstyled},e.closeButtonProps,{pt:e.ptm("pcCloseButton"),"data-pc-group-section":"headericon"}),{icon:zr(function(c){return[qt(e.$slots,"closeicon",{},function(){return[(He(),Sr(gs(e.closeIcon?"span":"TimesIcon"),Qe({class:[e.closeIcon,c.class]},e.ptm("pcCloseButton").icon),null,16,["class"]))]})]}),_:3},16,["autofocus","class","onClick","aria-label","unstyled","pt"])]}):Wt("",!0)],16)],16)):Wt("",!0),Ze("div",Qe({ref:s.contentRef,class:[e.cx("content"),e.contentClass],style:e.contentStyle,"data-p":s.dataP},ZM(ZM({},e.contentProps),e.ptm("content"))),[qt(e.$slots,"default")],16,WH),e.footer||e.$slots.footer?(He(),at("div",Qe({key:1,ref:s.footerContainerRef,class:e.cx("footer")},e.ptm("footer")),[qt(e.$slots,"footer",{},function(){return[ra(fr(e.footer),1)]})],16)):Wt("",!0)],64))],16,jH)),[[l,{disabled:!e.modal}]]):Wt("",!0)]}),_:3},16,["onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])],16,NH)):Wt("",!0)]}),_:3},8,["appendTo"])}$P.render=UH;var GH=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,HH={root:function(t){var r=t.instance;return["p-progressbar p-component",{"p-progressbar-determinate":r.determinate,"p-progressbar-indeterminate":r.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},KH=Xt.extend({name:"progressbar",style:GH,classes:HH}),qH={name:"BaseProgressBar",extends:qn,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:KH,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},SP={name:"ProgressBar",extends:qH,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return Kn({determinate:this.determinate,indeterminate:this.indeterminate})}}},XH=["aria-valuenow","data-p"],QH=["data-p"],YH=["data-p"],JH=["data-p"];function ZH(e,t,r,n,o,s){return He(),at("div",Qe({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":s.dataP},e.ptmi("root")),[s.determinate?(He(),at("div",Qe({key:0,class:e.cx("value"),style:s.progressStyle,"data-p":s.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(He(),at("div",Qe({key:0,class:e.cx("label"),"data-p":s.dataP},e.ptm("label")),[qt(e.$slots,"default",{},function(){return[ra(fr(e.value+"%"),1)]})],16,YH)):Wt("",!0)],16,QH)):s.indeterminate?(He(),at("div",Qe({key:1,class:e.cx("value"),"data-p":s.dataP},e.ptm("value")),null,16,JH)):Wt("",!0)],16,XH)}SP.render=ZH;var eK=`
    .p-floatlabel {
        display: block;
        position: relative;
    }

    .p-floatlabel label {
        position: absolute;
        pointer-events: none;
        top: 50%;
        transform: translateY(-50%);
        transition-property: all;
        transition-timing-function: ease;
        line-height: 1;
        font-weight: dt('floatlabel.font.weight');
        inset-inline-start: dt('floatlabel.position.x');
        color: dt('floatlabel.color');
        transition-duration: dt('floatlabel.transition.duration');
    }

    .p-floatlabel:has(.p-textarea) label {
        top: dt('floatlabel.position.y');
        transform: translateY(0);
    }

    .p-floatlabel:has(.p-inputicon:first-child) label {
        inset-inline-start: calc((dt('form.field.padding.x') * 2) + dt('icon.size'));
    }

    .p-floatlabel:has(input:focus) label,
    .p-floatlabel:has(input.p-filled) label,
    .p-floatlabel:has(input:-webkit-autofill) label,
    .p-floatlabel:has(textarea:focus) label,
    .p-floatlabel:has(textarea.p-filled) label,
    .p-floatlabel:has(.p-inputwrapper-focus) label,
    .p-floatlabel:has(.p-inputwrapper-filled) label,
    .p-floatlabel:has(input[placeholder]) label,
    .p-floatlabel:has(textarea[placeholder]) label {
        top: dt('floatlabel.over.active.top');
        transform: translateY(0);
        font-size: dt('floatlabel.active.font.size');
        font-weight: dt('floatlabel.active.font.weight');
    }

    .p-floatlabel:has(input.p-filled) label,
    .p-floatlabel:has(textarea.p-filled) label,
    .p-floatlabel:has(.p-inputwrapper-filled) label {
        color: dt('floatlabel.active.color');
    }

    .p-floatlabel:has(input:focus) label,
    .p-floatlabel:has(input:-webkit-autofill) label,
    .p-floatlabel:has(textarea:focus) label,
    .p-floatlabel:has(.p-inputwrapper-focus) label {
        color: dt('floatlabel.focus.color');
    }

    .p-floatlabel-in .p-inputtext,
    .p-floatlabel-in .p-textarea,
    .p-floatlabel-in .p-select-label,
    .p-floatlabel-in .p-multiselect-label,
    .p-floatlabel-in .p-autocomplete-input-multiple,
    .p-floatlabel-in .p-cascadeselect-label,
    .p-floatlabel-in .p-treeselect-label {
        padding-block-start: dt('floatlabel.in.input.padding.top');
        padding-block-end: dt('floatlabel.in.input.padding.bottom');
    }

    .p-floatlabel-in:has(input:focus) label,
    .p-floatlabel-in:has(input.p-filled) label,
    .p-floatlabel-in:has(input:-webkit-autofill) label,
    .p-floatlabel-in:has(textarea:focus) label,
    .p-floatlabel-in:has(textarea.p-filled) label,
    .p-floatlabel-in:has(.p-inputwrapper-focus) label,
    .p-floatlabel-in:has(.p-inputwrapper-filled) label,
    .p-floatlabel-in:has(input[placeholder]) label,
    .p-floatlabel-in:has(textarea[placeholder]) label {
        top: dt('floatlabel.in.active.top');
    }

    .p-floatlabel-on:has(input:focus) label,
    .p-floatlabel-on:has(input.p-filled) label,
    .p-floatlabel-on:has(input:-webkit-autofill) label,
    .p-floatlabel-on:has(textarea:focus) label,
    .p-floatlabel-on:has(textarea.p-filled) label,
    .p-floatlabel-on:has(.p-inputwrapper-focus) label,
    .p-floatlabel-on:has(.p-inputwrapper-filled) label,
    .p-floatlabel-on:has(input[placeholder]) label,
    .p-floatlabel-on:has(textarea[placeholder]) label {
        top: 0;
        transform: translateY(-50%);
        border-radius: dt('floatlabel.on.border.radius');
        background: dt('floatlabel.on.active.background');
        padding: dt('floatlabel.on.active.padding');
    }

    .p-floatlabel:has([class^='p-'][class$='-fluid']) {
        width: 100%;
    }

    .p-floatlabel:has(.p-invalid) label {
        color: dt('floatlabel.invalid.color');
    }
`,tK={root:function(t){var r=t.props;return["p-floatlabel",{"p-floatlabel-over":r.variant==="over","p-floatlabel-on":r.variant==="on","p-floatlabel-in":r.variant==="in"}]}},rK=Xt.extend({name:"floatlabel",style:eK,classes:tK}),nK={name:"BaseFloatLabel",extends:qn,props:{variant:{type:String,default:"over"}},style:rK,provide:function(){return{$pcFloatLabel:this,$parentInstance:this}}},IP={name:"FloatLabel",extends:nK,inheritAttrs:!1};function oK(e,t,r,n,o,s){return He(),at("span",Qe({class:e.cx("root")},e.ptmi("root")),[qt(e.$slots,"default")],16)}IP.render=oK;var sK={name:"BaseInput",extends:lP,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var t;return(t=this.variant)!==null&&t!==void 0?t:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var t;return(t=this.fluid)!==null&&t!==void 0?t:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},iK=`
    .p-inputtext {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('inputtext.color');
        background: dt('inputtext.background');
        padding-block: dt('inputtext.padding.y');
        padding-inline: dt('inputtext.padding.x');
        border: 1px solid dt('inputtext.border.color');
        transition:
            background dt('inputtext.transition.duration'),
            color dt('inputtext.transition.duration'),
            border-color dt('inputtext.transition.duration'),
            outline-color dt('inputtext.transition.duration'),
            box-shadow dt('inputtext.transition.duration');
        appearance: none;
        border-radius: dt('inputtext.border.radius');
        outline-color: transparent;
        box-shadow: dt('inputtext.shadow');
    }

    .p-inputtext:enabled:hover {
        border-color: dt('inputtext.hover.border.color');
    }

    .p-inputtext:enabled:focus {
        border-color: dt('inputtext.focus.border.color');
        box-shadow: dt('inputtext.focus.ring.shadow');
        outline: dt('inputtext.focus.ring.width') dt('inputtext.focus.ring.style') dt('inputtext.focus.ring.color');
        outline-offset: dt('inputtext.focus.ring.offset');
    }

    .p-inputtext.p-invalid {
        border-color: dt('inputtext.invalid.border.color');
    }

    .p-inputtext.p-variant-filled {
        background: dt('inputtext.filled.background');
    }

    .p-inputtext.p-variant-filled:enabled:hover {
        background: dt('inputtext.filled.hover.background');
    }

    .p-inputtext.p-variant-filled:enabled:focus {
        background: dt('inputtext.filled.focus.background');
    }

    .p-inputtext:disabled {
        opacity: 1;
        background: dt('inputtext.disabled.background');
        color: dt('inputtext.disabled.color');
    }

    .p-inputtext::placeholder {
        color: dt('inputtext.placeholder.color');
    }

    .p-inputtext.p-invalid::placeholder {
        color: dt('inputtext.invalid.placeholder.color');
    }

    .p-inputtext-sm {
        font-size: dt('inputtext.sm.font.size');
        padding-block: dt('inputtext.sm.padding.y');
        padding-inline: dt('inputtext.sm.padding.x');
    }

    .p-inputtext-lg {
        font-size: dt('inputtext.lg.font.size');
        padding-block: dt('inputtext.lg.padding.y');
        padding-inline: dt('inputtext.lg.padding.x');
    }

    .p-inputtext-fluid {
        width: 100%;
    }
`,aK={root:function(t){var r=t.instance,n=t.props;return["p-inputtext p-component",{"p-filled":r.$filled,"p-inputtext-sm p-inputfield-sm":n.size==="small","p-inputtext-lg p-inputfield-lg":n.size==="large","p-invalid":r.$invalid,"p-variant-filled":r.$variant==="filled","p-inputtext-fluid":r.$fluid}]}},lK=Xt.extend({name:"inputtext",style:iK,classes:aK}),cK={name:"BaseInputText",extends:sK,style:lK,provide:function(){return{$pcInputText:this,$parentInstance:this}}};function Zc(e){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(e)}function dK(e,t,r){return(t=uK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uK(e){var t=fK(e,"string");return Zc(t)=="symbol"?t:t+""}function fK(e,t){if(Zc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AP={name:"InputText",extends:cK,inheritAttrs:!1,methods:{onInput:function(t){this.writeValue(t.target.value,t)}},computed:{attrs:function(){return Qe(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return Kn(dK({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},pK=["value","name","disabled","aria-invalid","data-p"];function mK(e,t,r,n,o,s){return He(),at("input",Qe({type:"text",class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.$invalid||void 0,"data-p":s.dataP,onInput:t[0]||(t[0]=function(){return s.onInput&&s.onInput.apply(s,arguments)})},s.attrs),null,16,pK)}AP.render=mK;const Fu=new Map,Hi=[],hK=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const n=Fu.get(e);if(n===void 0)Fu.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const o=Hi.indexOf(e);o!==-1&&Hi.splice(o,1);for(let s=0;s<Hi.length;s++)if(Fu.get(Hi[s]).priority<=r){Hi.splice(s,0,e);return}Hi.push(e)}return}throw new TypeError("not a valid backend")},gK=async e=>{const t=Fu.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},_K=async e=>{const t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?Hi:r;let o;const s=[],i=new Set;for(const l of n){const c=await gK(l);typeof c=="string"?s.push({name:l,err:c}):(o||(o=c),o===c&&i.add(l))}if(!o)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(const{name:l,err:c}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${c}`);const a=t.filter(l=>i.has(typeof l=="string"?l:l.name));return[o,new Proxy(e,{get:(l,c)=>c==="executionProviders"?a:Reflect.get(l,c)})]},bK="1.21.0";let ex="warning";const qo={wasm:{},webgl:{},webgpu:{},versions:{common:bK},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);ex=e}},get logLevel(){return ex}};Object.defineProperty(qo,"logLevel",{enumerable:!0});const vK=qo,yK=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(n!=null){let o,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[3]):(o=e.dims[3],s=e.dims[2]);const i=t?.format!==void 0?t.format:"RGB",a=t?.norm;let l,c;a===void 0||a.mean===void 0?l=[255,255,255,255]:typeof a.mean=="number"?l=[a.mean,a.mean,a.mean,a.mean]:(l=[a.mean[0],a.mean[1],a.mean[2],0],a.mean[3]!==void 0&&(l[3]=a.mean[3])),a===void 0||a.bias===void 0?c=[0,0,0,0]:typeof a.bias=="number"?c=[a.bias,a.bias,a.bias,a.bias]:(c=[a.bias[0],a.bias[1],a.bias[2],0],a.bias[3]!==void 0&&(c[3]=a.bias[3]));const u=s*o;let d=0,f=u,p=u*2,m=-1;i==="RGBA"?(d=0,f=u,p=u*2,m=u*3):i==="RGB"?(d=0,f=u,p=u*2):i==="RBG"&&(d=0,p=u,f=u*2);for(let b=0;b<s;b++)for(let E=0;E<o;E++){const h=(e.data[d++]-c[0])*l[0],_=(e.data[f++]-c[1])*l[1],T=(e.data[p++]-c[2])*l[2],g=m===-1?255:(e.data[m++]-c[3])*l[3];n.fillStyle="rgba("+h+","+_+","+T+","+g+")",n.fillRect(E,b,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},wK=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let n;if(r!=null){let o,s,i;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[1],i=e.dims[3]):(o=e.dims[3],s=e.dims[2],i=e.dims[1]);const a=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t?.norm;let c,u;l===void 0||l.mean===void 0?c=[255,255,255,255]:typeof l.mean=="number"?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(c[3]=l.mean[3])),l===void 0||l.bias===void 0?u=[0,0,0,0]:typeof l.bias=="number"?u=[l.bias,l.bias,l.bias,l.bias]:(u=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(u[3]=l.bias[3]));const d=s*o;if(t!==void 0&&(t.format!==void 0&&i===4&&t.format!=="RGBA"||i===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const f=4;let p=0,m=1,b=2,E=3,h=0,_=d,T=d*2,g=-1;a==="RGBA"?(h=0,_=d,T=d*2,g=d*3):a==="RGB"?(h=0,_=d,T=d*2):a==="RBG"&&(h=0,T=d,_=d*2),n=r.createImageData(o,s);for(let M=0;M<s*o;p+=f,m+=f,b+=f,E+=f,M++)n.data[p]=(e.data[h++]-u[0])*c[0],n.data[m]=(e.data[_++]-u[1])*c[1],n.data[b]=(e.data[T++]-u[2])*c[2],n.data[E]=g===-1?255:(e.data[g++]-u[3])*c[3]}else throw new Error("Can not access image data");return n},Mm=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,o=t.norm??{mean:255,bias:0};let s,i;typeof o.mean=="number"?s=[o.mean,o.mean,o.mean,o.mean]:s=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?i=[o.bias,o.bias,o.bias,o.bias]:i=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];const a=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",c=r*n,u=l==="RGBA"?new Float32Array(c*4):new Float32Array(c*3);let d=4,f=0,p=1,m=2,b=3,E=0,h=c,_=c*2,T=-1;a==="RGB"&&(d=3,f=0,p=1,m=2,b=-1),l==="RGBA"?T=c*3:l==="RBG"?(E=0,_=c,h=c*2):l==="BGR"&&(_=0,h=c,E=c*2);for(let M=0;M<c;M++,f+=d,m+=d,p+=d,b+=d)u[E++]=(e[f]+i[0])/s[0],u[h++]=(e[p]+i[1])/s[1],u[_++]=(e[m]+i[2])/s[2],T!==-1&&b!==-1&&(u[T++]=(e[b]+i[3])/s[3]);return l==="RGBA"?new Mo("float32",u,[1,4,r,n]):new Mo("float32",u,[1,3,r,n])},MK=async(e,t)=>{const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,o=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string";let i,a=t??{};const l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=u=>typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement||u instanceof OffscreenCanvas?u.getContext("2d"):null;if(r){const u=l();u.width=e.width,u.height=e.height;const d=c(u);if(d!=null){let f=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(a=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=f,a.width=p}else a.tensorFormat="RGBA",a.height=f,a.width=p;d.drawImage(e,0,0),i=d.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(n){let u,d;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(u=t.resizedHeight,d=t.resizedWidth):(u=e.height,d=e.width),t!==void 0&&(a=t),a.format="RGBA",a.height=u,a.width=d,t!==void 0){const f=l();f.width=d,f.height=u;const p=c(f);if(p!=null)p.putImageData(e,0,0),i=p.getImageData(0,0,d,u).data;else throw new Error("Can not access image data")}else i=e.data}else if(o){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const u=l();u.width=e.width,u.height=e.height;const d=c(u);if(d!=null){const f=e.height,p=e.width;return d.drawImage(e,0,0,p,f),i=d.getImageData(0,0,p,f).data,a.height=f,a.width=p,Mm(i,a)}else throw new Error("Can not access image data")}else{if(s)return new Promise((u,d)=>{const f=l(),p=c(f);if(!e||!p)return d();const m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{f.width=m.width,f.height=m.height,p.drawImage(m,0,0,f.width,f.height);const b=p.getImageData(0,0,f.width,f.height);a.height=f.height,a.width=f.width,u(Mm(b.data,a))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(i!==void 0)return Mm(i,a);throw new Error("Input data provided is not supported - aborted tensor creation")},xK=(e,t)=>{const{width:r,height:n,download:o,dispose:s}=t,i=[1,n,r,4];return new Mo({location:"texture",type:"float32",texture:e,dims:i,download:o,dispose:s})},TK=(e,t)=>{const{dataType:r,dims:n,download:o,dispose:s}=t;return new Mo({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:o,dispose:s})},CK=(e,t)=>{const{dataType:r,dims:n,download:o,dispose:s}=t;return new Mo({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:o,dispose:s})},kK=(e,t,r)=>new Mo({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]}),Na=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Du=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let tx=!1;const EK=()=>{if(!tx){tx=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(Na.set("int64",BigInt64Array),Du.set(BigInt64Array,"int64")),t&&(Na.set("uint64",BigUint64Array),Du.set(BigUint64Array,"uint64")),n?(Na.set("float16",r),Du.set(r,"float16")):Na.set("float16",Uint16Array)}},PK=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},$K=(e,t)=>{switch(e.location){case"cpu":return new Mo(e.type,e.data,t);case"cpu-pinned":return new Mo({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Mo({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Mo({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Mo({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let Mo=class{constructor(t,r,n){EK();let o,s;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,o=t.type,s=t.dims,t.location){case"cpu-pinned":{const a=Na.get(o);if(!a)throw new TypeError(`unsupported type "${o}" to create tensor from pinned buffer`);if(!(t.data instanceof a))throw new TypeError(`buffer should be of type ${a.name}`);this.cpuData=t.data;break}case"texture":{if(o!=="float32")throw new TypeError(`unsupported type "${o}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(o!=="float32"&&o!=="float16"&&o!=="int32"&&o!=="int64"&&o!=="uint32"&&o!=="uint64"&&o!=="int8"&&o!=="uint8"&&o!=="bool"&&o!=="uint4"&&o!=="int4")throw new TypeError(`unsupported type "${o}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let a,l;if(typeof t=="string")if(o=t,l=n,t==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");a=r}else{const c=Na.get(t);if(c===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(r)){if(t==="float16"&&c===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${c.name} as data.`);t==="uint64"||t==="int64"?a=c.from(r,BigInt):a=c.from(r)}else if(r instanceof c)a=r;else if(r instanceof Uint8ClampedArray)if(t==="uint8")a=Uint8Array.from(r);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&r instanceof Uint16Array&&c!==Uint16Array)a=new globalThis.Float16Array(r.buffer,r.byteOffset,r.length);else throw new TypeError(`A ${o} tensor's data must be type of ${c}`)}else if(l=r,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const c=typeof t[0];if(c==="string")o="string",a=t;else if(c==="boolean")o="bool",a=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${c}.`)}else if(t instanceof Uint8ClampedArray)o="uint8",a=Uint8Array.from(t);else{const c=Du.get(t.constructor);if(c===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);o=c,a=t}if(l===void 0)l=[a.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");s=l,this.cpuData=a,this.dataLocation="cpu"}const i=PK(s);if(this.cpuData&&i!==this.cpuData.length&&!((o==="uint4"||o==="int4")&&Math.ceil(i/2)===this.cpuData.length))throw new Error(`Tensor's size(${i}) does not match data length(${this.cpuData.length}).`);this.type=o,this.dims=s,this.size=i}static async fromImage(t,r){return MK(t,r)}static fromTexture(t,r){return xK(t,r)}static fromGpuBuffer(t,r){return TK(t,r)}static fromMLTensor(t,r){return CK(t,r)}static fromPinnedBuffer(t,r,n){return kK(t,r,n)}toDataURL(t){return yK(this,t)}toImageData(t){return wK(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,t&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return $K(this,t)}};const Ba=Mo,OP=(e,t)=>{(typeof qo.trace>"u"?!qo.wasm.trace:!qo.trace)||console.timeStamp(`${e}::ORT::${t}`)},LP=(e,t)=>{const r=new Error().stack?.split(/\r\n|\r|\n/g)||[];let n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let s=`FUNC_${e}::${r[o].trim().split(" ")[1]}`;t&&(s+=`::${t}`),OP("CPU",s);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},mg=e=>{(typeof qo.trace>"u"?!qo.wasm.trace:!qo.trace)||LP("BEGIN",e)},hg=e=>{(typeof qo.trace>"u"?!qo.wasm.trace:!qo.trace)||LP("END",e)};let SK=class FP{constructor(t){this.handler=t}async run(t,r,n){mg();const o={};let s={};if(typeof t!="object"||t===null||t instanceof Ba||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Ba)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(const c of r){if(typeof c!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(c)===-1)throw new RangeError(`'fetches' contains invalid output name: ${c}.`);o[c]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let c=!1;const u=Object.getOwnPropertyNames(r);for(const d of this.outputNames)if(u.indexOf(d)!==-1){const f=r[d];(f===null||f instanceof Ba)&&(c=!0,i=!1,o[d]=f)}if(c){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const c of this.inputNames)if(typeof t[c]>"u")throw new Error(`input '${c}' is missing in 'feeds'.`);if(i)for(const c of this.outputNames)o[c]=null;const a=await this.handler.run(t,o,s),l={};for(const c in a)if(Object.hasOwnProperty.call(a,c)){const u=a[c];u instanceof Ba?l[c]=u:l[c]=new Ba(u.type,u.data,u.dims)}return hg(),l}async release(){return this.handler.dispose()}static async create(t,r,n,o){mg();let s,i={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)i=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)i=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const u=t;let d=0,f=t.byteLength;if(typeof r=="object"&&r!==null)i=r;else if(typeof r=="number"){if(d=r,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=u.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${u.byteLength}).`);if(f=t.byteLength-d,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||d+f>u.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${u.byteLength-d}].`);if(typeof o=="object"&&o!==null)i=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(u,d,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[a,l]=await _K(i),c=await a.createInferenceSessionHandler(s,l);return hg(),new FP(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const IK=SK,AK=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:IK,TRACE:OP,TRACE_FUNC_BEGIN:mg,TRACE_FUNC_END:hg,Tensor:Ba,env:vK,registerBackend:hK},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.22.0-dev.20250409-89f8206ba4
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var p_=Object.defineProperty,OK=Object.getOwnPropertyDescriptor,LK=Object.getOwnPropertyNames,FK=Object.prototype.hasOwnProperty,DK=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),qe=(e,t)=>()=>(e&&(t=e(e=0)),t),rl=(e,t)=>{for(var r in t)p_(e,r,{get:t[r],enumerable:!0})},BK=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of LK(t))!FK.call(e,o)&&o!==r&&p_(e,o,{get:()=>t[o],enumerable:!(n=OK(t,o))||n.enumerable});return e},ed=e=>BK(p_({},"__esModule",{value:!0}),e),Rl,ni,Yi,rx,DP,BP=qe(()=>{Rl=new Map,ni=[],Yi=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let n=Rl.get(e);if(n===void 0)Rl.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let o=ni.indexOf(e);o!==-1&&ni.splice(o,1);for(let s=0;s<ni.length;s++)if(Rl.get(ni[s]).priority<=r){ni.splice(s,0,e);return}ni.push(e)}return}throw new TypeError("not a valid backend")},rx=async e=>{let t=Rl.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},DP=async e=>{let t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?ni:r,o,s=[],i=new Set;for(let l of n){let c=await rx(l);typeof c=="string"?s.push({name:l,err:c}):(o||(o=c),o===c&&i.add(l))}if(!o)throw new Error(`no available backend found. ERR: ${s.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(let{name:l,err:c}of s)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${c}`);let a=t.filter(l=>i.has(typeof l=="string"?l:l.name));return[o,new Proxy(e,{get:(l,c)=>c==="executionProviders"?a:Reflect.get(l,c)})]}}),RK=qe(()=>{BP()}),RP,zK=qe(()=>{RP="1.22.0-dev.20250409-89f8206ba4"}),xm,vo,zP=qe(()=>{zK(),xm="warning",vo={wasm:{},webgl:{},webgpu:{},versions:{common:RP},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);xm=e}},get logLevel(){return xm}},Object.defineProperty(vo,"logLevel",{enumerable:!0})}),Pr,NK=qe(()=>{zP(),Pr=vo}),NP,jP,jK=qe(()=>{NP=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let n=r.getContext("2d");if(n!=null){let o,s;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[3]):(o=e.dims[3],s=e.dims[2]);let i=t?.format!==void 0?t.format:"RGB",a=t?.norm,l,c;a===void 0||a.mean===void 0?l=[255,255,255,255]:typeof a.mean=="number"?l=[a.mean,a.mean,a.mean,a.mean]:(l=[a.mean[0],a.mean[1],a.mean[2],0],a.mean[3]!==void 0&&(l[3]=a.mean[3])),a===void 0||a.bias===void 0?c=[0,0,0,0]:typeof a.bias=="number"?c=[a.bias,a.bias,a.bias,a.bias]:(c=[a.bias[0],a.bias[1],a.bias[2],0],a.bias[3]!==void 0&&(c[3]=a.bias[3]));let u=s*o,d=0,f=u,p=u*2,m=-1;i==="RGBA"?(d=0,f=u,p=u*2,m=u*3):i==="RGB"?(d=0,f=u,p=u*2):i==="RBG"&&(d=0,p=u,f=u*2);for(let b=0;b<s;b++)for(let E=0;E<o;E++){let h=(e.data[d++]-c[0])*l[0],_=(e.data[f++]-c[1])*l[1],T=(e.data[p++]-c[2])*l[2],g=m===-1?255:(e.data[m++]-c[3])*l[3];n.fillStyle="rgba("+h+","+_+","+T+","+g+")",n.fillRect(E,b,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},jP=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let o,s,i;t?.tensorLayout!==void 0&&t.tensorLayout==="NHWC"?(o=e.dims[2],s=e.dims[1],i=e.dims[3]):(o=e.dims[3],s=e.dims[2],i=e.dims[1]);let a=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t?.norm,c,u;l===void 0||l.mean===void 0?c=[255,255,255,255]:typeof l.mean=="number"?c=[l.mean,l.mean,l.mean,l.mean]:(c=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(c[3]=l.mean[3])),l===void 0||l.bias===void 0?u=[0,0,0,0]:typeof l.bias=="number"?u=[l.bias,l.bias,l.bias,l.bias]:(u=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(u[3]=l.bias[3]));let d=s*o;if(t!==void 0&&(t.format!==void 0&&i===4&&t.format!=="RGBA"||i===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let f=4,p=0,m=1,b=2,E=3,h=0,_=d,T=d*2,g=-1;a==="RGBA"?(h=0,_=d,T=d*2,g=d*3):a==="RGB"?(h=0,_=d,T=d*2):a==="RBG"&&(h=0,T=d,_=d*2),n=r.createImageData(o,s);for(let M=0;M<s*o;p+=f,m+=f,b+=f,E+=f,M++)n.data[p]=(e.data[h++]-u[0])*c[0],n.data[m]=(e.data[_++]-u[1])*c[1],n.data[b]=(e.data[T++]-u[2])*c[2],n.data[E]=g===-1?255:(e.data[g++]-u[3])*c[3]}else throw new Error("Can not access image data");return n}}),gu,VP,WP,UP,GP,HP,VK=qe(()=>{m_(),gu=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=t,o=t.norm??{mean:255,bias:0},s,i;typeof o.mean=="number"?s=[o.mean,o.mean,o.mean,o.mean]:s=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?i=[o.bias,o.bias,o.bias,o.bias]:i=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let a=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",c=r*n,u=l==="RGBA"?new Float32Array(c*4):new Float32Array(c*3),d=4,f=0,p=1,m=2,b=3,E=0,h=c,_=c*2,T=-1;a==="RGB"&&(d=3,f=0,p=1,m=2,b=-1),l==="RGBA"?T=c*3:l==="RBG"?(E=0,_=c,h=c*2):l==="BGR"&&(_=0,h=c,E=c*2);for(let g=0;g<c;g++,f+=d,m+=d,p+=d,b+=d)u[E++]=(e[f]+i[0])/s[0],u[h++]=(e[p]+i[1])/s[1],u[_++]=(e[m]+i[2])/s[2],T!==-1&&b!==-1&&(u[T++]=(e[b]+i[3])/s[3]);return l==="RGBA"?new lo("float32",u,[1,4,r,n]):new lo("float32",u,[1,3,r,n])},VP=async(e,t)=>{let r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,o=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s=typeof e=="string",i,a=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},c=u=>typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement||u instanceof OffscreenCanvas?u.getContext("2d"):null;if(r){let u=l();u.width=e.width,u.height=e.height;let d=c(u);if(d!=null){let f=e.height,p=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(f=t.resizedHeight,p=t.resizedWidth),t!==void 0){if(a=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");a.tensorFormat="RGBA",a.height=f,a.width=p}else a.tensorFormat="RGBA",a.height=f,a.width=p;d.drawImage(e,0,0),i=d.getImageData(0,0,p,f).data}else throw new Error("Can not access image data")}else if(n){let u,d;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(u=t.resizedHeight,d=t.resizedWidth):(u=e.height,d=e.width),t!==void 0&&(a=t),a.format="RGBA",a.height=u,a.width=d,t!==void 0){let f=l();f.width=d,f.height=u;let p=c(f);if(p!=null)p.putImageData(e,0,0),i=p.getImageData(0,0,d,u).data;else throw new Error("Can not access image data")}else i=e.data}else if(o){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let u=l();u.width=e.width,u.height=e.height;let d=c(u);if(d!=null){let f=e.height,p=e.width;return d.drawImage(e,0,0,p,f),i=d.getImageData(0,0,p,f).data,a.height=f,a.width=p,gu(i,a)}else throw new Error("Can not access image data")}else{if(s)return new Promise((u,d)=>{let f=l(),p=c(f);if(!e||!p)return d();let m=new Image;m.crossOrigin="Anonymous",m.src=e,m.onload=()=>{f.width=m.width,f.height=m.height,p.drawImage(m,0,0,f.width,f.height);let b=p.getImageData(0,0,f.width,f.height);a.height=f.height,a.width=f.width,u(gu(b.data,a))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(i!==void 0)return gu(i,a);throw new Error("Input data provided is not supported - aborted tensor creation")},WP=(e,t)=>{let{width:r,height:n,download:o,dispose:s}=t,i=[1,n,r,4];return new lo({location:"texture",type:"float32",texture:e,dims:i,download:o,dispose:s})},UP=(e,t)=>{let{dataType:r,dims:n,download:o,dispose:s}=t;return new lo({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:o,dispose:s})},GP=(e,t)=>{let{dataType:r,dims:n,download:o,dispose:s}=t;return new lo({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:o,dispose:s})},HP=(e,t,r)=>new lo({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),qi,ec,Tm,KP,WK=qe(()=>{qi=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),ec=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Tm=!1,KP=()=>{if(!Tm){Tm=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(qi.set("int64",BigInt64Array),ec.set(BigInt64Array,"int64")),t&&(qi.set("uint64",BigUint64Array),ec.set(BigUint64Array,"uint64")),n?(qi.set("float16",r),ec.set(r,"float16")):qi.set("float16",Uint16Array)}}}),qP,XP,UK=qe(()=>{m_(),qP=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},XP=(e,t)=>{switch(e.location){case"cpu":return new lo(e.type,e.data,t);case"cpu-pinned":return new lo({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new lo({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new lo({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new lo({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),lo,m_=qe(()=>{jK(),VK(),WK(),UK(),lo=class{constructor(e,t,r){KP();let n,o;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,n=e.type,o=e.dims,e.location){case"cpu-pinned":{let i=qi.get(n);if(!i)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof i))throw new TypeError(`buffer should be of type ${i.name}`);this.cpuData=e.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint64"&&n!=="int8"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let i,a;if(typeof e=="string")if(n=e,a=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");i=t}else{let l=qi.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&l===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${l.name} as data.`);e==="uint64"||e==="int64"?i=l.from(t,BigInt):i=l.from(t)}else if(t instanceof l)i=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")i=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&l!==Uint16Array)i=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(a=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")n="string",i=e;else if(l==="boolean")n="bool",i=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else if(e instanceof Uint8ClampedArray)n="uint8",i=Uint8Array.from(e);else{let l=ec.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=l,i=e}if(a===void 0)a=[i.length];else if(!Array.isArray(a))throw new TypeError("A tensor's dims must be a number array");o=a,this.cpuData=i,this.dataLocation="cpu"}let s=qP(o);if(this.cpuData&&s!==this.cpuData.length&&!((n==="uint4"||n==="int4")&&Math.ceil(s/2)===this.cpuData.length))throw new Error(`Tensor's size(${s}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=o,this.size=s}static async fromImage(e,t){return VP(e,t)}static fromTexture(e,t){return WP(e,t)}static fromGpuBuffer(e,t){return UP(e,t)}static fromMLTensor(e,t){return GP(e,t)}static fromPinnedBuffer(e,t,r){return HP(e,t,r)}toDataURL(e){return NP(this,e)}toImageData(e){return jP(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return XP(this,e)}}}),Uo,QP=qe(()=>{m_(),Uo=lo}),td,Cm,Jo,ko,YP=qe(()=>{zP(),td=(e,t)=>{(typeof vo.trace>"u"?!vo.wasm.trace:!vo.trace)||console.timeStamp(`${e}::ORT::${t}`)},Cm=(e,t)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let s=`FUNC_${e}::${r[o].trim().split(" ")[1]}`;t&&(s+=`::${t}`),td("CPU",s);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},Jo=e=>{(typeof vo.trace>"u"?!vo.wasm.trace:!vo.trace)||Cm("BEGIN",e)},ko=e=>{(typeof vo.trace>"u"?!vo.wasm.trace:!vo.trace)||Cm("END",e)}}),JP,GK=qe(()=>{BP(),QP(),YP(),JP=class ZP{constructor(t){this.handler=t}async run(t,r,n){Jo();let o={},s={};if(typeof t!="object"||t===null||t instanceof Uo||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Uo)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(let c of r){if(typeof c!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(c)===-1)throw new RangeError(`'fetches' contains invalid output name: ${c}.`);o[c]=null}if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let c=!1,u=Object.getOwnPropertyNames(r);for(let d of this.outputNames)if(u.indexOf(d)!==-1){let f=r[d];(f===null||f instanceof Uo)&&(c=!0,i=!1,o[d]=f)}if(c){if(typeof n=="object"&&n!==null)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let c of this.inputNames)if(typeof t[c]>"u")throw new Error(`input '${c}' is missing in 'feeds'.`);if(i)for(let c of this.outputNames)o[c]=null;let a=await this.handler.run(t,o,s),l={};for(let c in a)if(Object.hasOwnProperty.call(a,c)){let u=a[c];u instanceof Uo?l[c]=u:l[c]=new Uo(u.type,u.data,u.dims)}return ko(),l}async release(){return this.handler.dispose()}static async create(t,r,n,o){Jo();let s,i={};if(typeof t=="string"){if(s=t,typeof r=="object"&&r!==null)i=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(s=t,typeof r=="object"&&r!==null)i=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let u=t,d=0,f=t.byteLength;if(typeof r=="object"&&r!==null)i=r;else if(typeof r=="number"){if(d=r,!Number.isSafeInteger(d))throw new RangeError("'byteOffset' must be an integer.");if(d<0||d>=u.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${u.byteLength}).`);if(f=t.byteLength-d,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||d+f>u.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${u.byteLength-d}].`);if(typeof o=="object"&&o!==null)i=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(u,d,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[a,l]=await DP(i),c=await a.createInferenceSessionHandler(s,l);return ko(),new ZP(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),h_,HK=qe(()=>{GK(),h_=JP}),KK=qe(()=>{}),qK=qe(()=>{}),XK=qe(()=>{}),QK=qe(()=>{}),e$={};rl(e$,{InferenceSession:()=>h_,TRACE:()=>td,TRACE_FUNC_BEGIN:()=>Jo,TRACE_FUNC_END:()=>ko,Tensor:()=>Uo,env:()=>Pr,registerBackend:()=>Yi});var Zo=qe(()=>{RK(),NK(),HK(),QP(),KK(),qK(),YP(),XK(),QK()}),g_=qe(()=>{}),t$={};rl(t$,{default:()=>r$});var km,Em,r$,YK=qe(()=>{aA(),la(),__(),km="ort-wasm-proxy-worker",Em=globalThis.self?.name===km,Em&&(self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":b_(r.wasm).then(()=>{D_(r).then(()=>{postMessage({type:t})},n=>{postMessage({type:t,err:n})})},n=>{postMessage({type:t,err:n})});break;case"init-ep":{let{epName:n,env:o}=r;B_(o,n).then(()=>{postMessage({type:t})},s=>{postMessage({type:t,err:s})});break}case"copy-from":{let{buffer:n}=r,o=lf(n);postMessage({type:t,out:o});break}case"create":{let{model:n,options:o}=r;R_(n,o).then(s=>{postMessage({type:t,out:s})},s=>{postMessage({type:t,err:s})});break}case"release":z_(r),postMessage({type:t});break;case"run":{let{sessionId:n,inputIndices:o,inputs:s,outputIndices:i,options:a}=r;N_(n,o,s,i,new Array(i.length).fill(null),a).then(l=>{l.some(c=>c[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:l},V_([...s,...l]))},l=>{postMessage({type:t,err:l})});break}case"end-profiling":j_(r),postMessage({type:t});break;default:}}catch(n){postMessage({type:t,err:n})}}),r$=Em?null:e=>new Worker(e??io,{type:"module",name:km})}),n$={};rl(n$,{default:()=>o$});var Pm,$m,o$,nx,JK=qe(()=>{$m=(Pm=import.meta.url,async function(e={}){var t,r,n=e,o=new Promise((v,P)=>{t=v,r=P}),s=typeof window=="object",i=typeof WorkerGlobalScope<"u",a=i&&self.name?.startsWith("em-pthread");n.mountExternalData=(v,P)=>{v.startsWith("./")&&(v=v.substring(2)),(n.Eb||(n.Eb=new Map)).set(v,P)},n.unmountExternalData=()=>{delete n.Eb};var l=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let c=v=>async(...P)=>{try{if(n.Fb)throw Error("Session already started");let F=n.Fb={dc:P[0],errors:[]},V=await v(...P);if(n.Fb!==F)throw Error("Session mismatch");n.Jb?.flush();let X=F.errors;if(0<X.length){let we=await Promise.all(X);if(we=we.filter(Fe=>Fe),0<we.length)throw Error(we.join(`
`))}return V}finally{n.Fb=null}};n.jsepInit=(v,P)=>{if(v==="webgpu"){[n.Jb,n.Ub,n.Yb,n.Kb,n.Xb,n.jb,n.Zb,n.ac,n.Vb,n.Wb,n.$b]=P;let F=n.Jb;n.jsepRegisterBuffer=(V,X,we,Fe)=>F.registerBuffer(V,X,we,Fe),n.jsepGetBuffer=V=>F.getBuffer(V),n.jsepCreateDownloader=(V,X,we)=>F.createDownloader(V,X,we),n.jsepOnCreateSession=V=>{F.onCreateSession(V)},n.jsepOnReleaseSession=V=>{F.onReleaseSession(V)},n.jsepOnRunStart=V=>F.onRunStart(V),n.bc=(V,X)=>{F.upload(V,X)}}else if(v==="webnn"){let F=P[0];[n.nc,n.Nb,n.webnnEnsureTensor,n.Ob,n.webnnDownloadTensor]=P.slice(1),n.webnnReleaseTensorId=n.Nb,n.webnnUploadTensor=n.Ob,n.webnnOnRunStart=V=>F.onRunStart(V),n.webnnOnRunEnd=F.onRunEnd.bind(F),n.webnnRegisterMLContext=(V,X)=>{F.registerMLContext(V,X)},n.webnnOnReleaseSession=V=>{F.onReleaseSession(V)},n.webnnCreateMLTensorDownloader=(V,X)=>F.createMLTensorDownloader(V,X),n.webnnRegisterMLTensor=(V,X,we,Fe)=>F.registerMLTensor(V,X,we,Fe),n.webnnCreateMLContext=V=>F.createMLContext(V),n.webnnRegisterMLConstant=(V,X,we,Fe,Ve,rt)=>F.registerMLConstant(V,X,we,Fe,Ve,n.Eb,rt),n.webnnRegisterGraphInput=F.registerGraphInput.bind(F),n.webnnIsGraphInput=F.isGraphInput.bind(F),n.webnnCreateTemporaryTensor=F.createTemporaryTensor.bind(F),n.webnnIsInt64Supported=F.isInt64Supported.bind(F)}};let u=()=>{let v=(P,F,V)=>(...X)=>{let we=hr,Fe=F?.();X=P(...X);let Ve=F?.();return Fe!==Ve&&(P=Ve,V(Fe),F=V=null),hr!=we?new Promise((rt,dt)=>{Yr={resolve:rt,reject:dt}}):X};(()=>{for(let P of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])n[P]=v(n[P],()=>n[P],F=>n[P]=F)})(),c!==void 0&&(n._OrtRun=c(n._OrtRun),n._OrtRunWithBinding=c(n._OrtRunWithBinding)),u=void 0};n.asyncInit=()=>{u?.()};var d,f,p=Object.assign({},n),m=(v,P)=>{throw P},b="";(s||i)&&(i?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),Pm&&(b=Pm),b=b.startsWith("blob:")?"":b.slice(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),i&&(f=v=>{var P=new XMLHttpRequest;return P.open("GET",v,!1),P.responseType="arraybuffer",P.send(null),new Uint8Array(P.response)}),d=async v=>{if(ve(v))return new Promise((F,V)=>{var X=new XMLHttpRequest;X.open("GET",v,!0),X.responseType="arraybuffer",X.onload=()=>{X.status==200||X.status==0&&X.response?F(X.response):V(X.status)},X.onerror=V,X.send(null)});var P=await fetch(v,{credentials:"same-origin"});if(P.ok)return P.arrayBuffer();throw Error(P.status+" : "+P.url)});var E=console.log.bind(console),h=console.error.bind(console),_=E,T=h;Object.assign(n,p),p=null;var g,M,x,w,$,O,L,G,j,D,re,Z,te,ie=n.wasmBinary,ne=!1,ve=v=>v.startsWith("file://");function Me(){return g.buffer!=w.buffer&&xe(),w}function W(){return g.buffer!=w.buffer&&xe(),$}function R(){return g.buffer!=w.buffer&&xe(),O}function J(){return g.buffer!=w.buffer&&xe(),L}function U(){return g.buffer!=w.buffer&&xe(),G}function be(){return g.buffer!=w.buffer&&xe(),j}function Le(){return g.buffer!=w.buffer&&xe(),D}function de(){return g.buffer!=w.buffer&&xe(),te}if(a){let v=function(P){try{var F=P.data,V=F.Bb;if(V==="load"){let X=[];self.onmessage=we=>X.push(we),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let we of X)v(we);self.onmessage=v};for(let we of F.Rb)n[we]&&!n[we].proxy||(n[we]=(...Fe)=>{postMessage({Bb:"callHandler",Qb:we,args:Fe})},we=="print"&&(_=n[we]),we=="printErr"&&(T=n[we]));g=F.kc,xe(),Te(F.lc)}else if(V==="run"){ir(F.Ab),Ii(F.Ab,0,0,1,0,0),_r(),me(F.Ab),Pe||(Pi(),Pe=!0);try{yn(F.fc,F.Hb)}catch(X){if(X!="unwind")throw X}}else F.target!=="setimmediate"&&(V==="checkMailbox"?Pe&&ge():V&&(T(`worker: received unknown command ${V}`),T(F)))}catch(X){throw yl(),X}};var Te,Pe=!1;T=function(...P){P=P.join(" "),console.error(P)},self.alert=function(...P){postMessage({Bb:"alert",text:P.join(" "),ic:$i()})},self.onunhandledrejection=P=>{throw P.reason||P},self.onmessage=v}function xe(){var v=g.buffer;n.HEAP8=w=new Int8Array(v),n.HEAP16=O=new Int16Array(v),n.HEAPU8=$=new Uint8Array(v),n.HEAPU16=L=new Uint16Array(v),n.HEAP32=G=new Int32Array(v),n.HEAPU32=j=new Uint32Array(v),n.HEAPF32=D=new Float32Array(v),n.HEAPF64=te=new Float64Array(v),n.HEAP64=re=new BigInt64Array(v),n.HEAPU64=Z=new BigUint64Array(v)}function Y(){a?startWorker(n):ht.Ca()}a||(g=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),xe());var B,I=0,q=null;function pe(){if(--I==0&&q){var v=q;q=null,v()}}function ue(v){throw T(v="Aborted("+v+")"),ne=!0,v=new WebAssembly.RuntimeError(v+". Build with -sASSERTIONS for more info."),r(v),v}function oe(){return{a:{L:ee,Aa:z,b:Hs,$:ws,A:Ot,pa:ts,X:K,Z:ae,qa:_e,na:Se,ga:Ne,ma:st,J:pt,Y:et,V:Dt,oa:Rt,W:tn,va:Xn,E:So,Q:rs,O:no,D:$n,u:We,r:Xe,P:it,z:da,R:Ce,ja:A,T:Ie,aa:tt,M:nt,F:ot,ia:me,sa:Je,t:Dr,Ba:ln,w:Oo,o:go,l:Jr,c:Qn,n:An,j:pd,v:md,p:hd,f:gd,s:_d,m:qs,e:bd,k:vd,i:yd,g:wd,d:Md,da:Xs,ea:xd,fa:Td,ba:fa,ca:al,N:cl,xa:dl,ua:ul,h:ml,C:hl,G:pa,ta:Cd,x:kd,ra:Ed,U:Pd,q:ll,y:$d,K:Sd,S:Id,za:Ad,ya:ha,ka:ss,la:gl,_:Ge,B:Od,I:_l,ha:Ld,H:ba,a:g,wa:Re}}}var N={829644:(v,P,F,V,X)=>{if(n===void 0||!n.Eb)return 1;if((v=mr(Number(v>>>0))).startsWith("./")&&(v=v.substring(2)),!(v=n.Eb.get(v)))return 2;if(P=Number(P>>>0),F=Number(F>>>0),V=Number(V>>>0),P+F>v.byteLength)return 3;try{let we=v.subarray(P,P+F);switch(X){case 0:W().set(we,V>>>0);break;case 1:n.mc?n.mc(V,we):n.bc(V,we);break;default:return 4}return 0}catch{return 4}},830468:(v,P,F)=>{n.Ob(v,W().subarray(P>>>0,P+F>>>0))},830532:()=>n.nc(),830574:v=>{n.Nb(v)},830611:()=>{n.Vb()},830642:()=>{n.Wb()},830671:()=>{n.$b()},830696:v=>n.Ub(v),830729:v=>n.Yb(v),830761:(v,P,F)=>{n.Kb(Number(v),Number(P),Number(F),!0)},830824:(v,P,F)=>{n.Kb(Number(v),Number(P),Number(F))},830881:()=>typeof wasmOffsetConverter<"u",830938:v=>{n.jb("Abs",v,void 0)},830989:v=>{n.jb("Neg",v,void 0)},831040:v=>{n.jb("Floor",v,void 0)},831093:v=>{n.jb("Ceil",v,void 0)},831145:v=>{n.jb("Reciprocal",v,void 0)},831203:v=>{n.jb("Sqrt",v,void 0)},831255:v=>{n.jb("Exp",v,void 0)},831306:v=>{n.jb("Erf",v,void 0)},831357:v=>{n.jb("Sigmoid",v,void 0)},831412:(v,P,F)=>{n.jb("HardSigmoid",v,{alpha:P,beta:F})},831491:v=>{n.jb("Log",v,void 0)},831542:v=>{n.jb("Sin",v,void 0)},831593:v=>{n.jb("Cos",v,void 0)},831644:v=>{n.jb("Tan",v,void 0)},831695:v=>{n.jb("Asin",v,void 0)},831747:v=>{n.jb("Acos",v,void 0)},831799:v=>{n.jb("Atan",v,void 0)},831851:v=>{n.jb("Sinh",v,void 0)},831903:v=>{n.jb("Cosh",v,void 0)},831955:v=>{n.jb("Asinh",v,void 0)},832008:v=>{n.jb("Acosh",v,void 0)},832061:v=>{n.jb("Atanh",v,void 0)},832114:v=>{n.jb("Tanh",v,void 0)},832166:v=>{n.jb("Not",v,void 0)},832217:(v,P,F)=>{n.jb("Clip",v,{min:P,max:F})},832286:v=>{n.jb("Clip",v,void 0)},832338:(v,P)=>{n.jb("Elu",v,{alpha:P})},832396:v=>{n.jb("Gelu",v,void 0)},832448:v=>{n.jb("Relu",v,void 0)},832500:(v,P)=>{n.jb("LeakyRelu",v,{alpha:P})},832564:(v,P)=>{n.jb("ThresholdedRelu",v,{alpha:P})},832634:(v,P)=>{n.jb("Cast",v,{to:P})},832692:v=>{n.jb("Add",v,void 0)},832743:v=>{n.jb("Sub",v,void 0)},832794:v=>{n.jb("Mul",v,void 0)},832845:v=>{n.jb("Div",v,void 0)},832896:v=>{n.jb("Pow",v,void 0)},832947:v=>{n.jb("Equal",v,void 0)},833e3:v=>{n.jb("Greater",v,void 0)},833055:v=>{n.jb("GreaterOrEqual",v,void 0)},833117:v=>{n.jb("Less",v,void 0)},833169:v=>{n.jb("LessOrEqual",v,void 0)},833228:(v,P,F,V,X)=>{n.jb("ReduceMean",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},833403:(v,P,F,V,X)=>{n.jb("ReduceMax",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},833577:(v,P,F,V,X)=>{n.jb("ReduceMin",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},833751:(v,P,F,V,X)=>{n.jb("ReduceProd",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},833926:(v,P,F,V,X)=>{n.jb("ReduceSum",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},834100:(v,P,F,V,X)=>{n.jb("ReduceL1",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},834273:(v,P,F,V,X)=>{n.jb("ReduceL2",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},834446:(v,P,F,V,X)=>{n.jb("ReduceLogSum",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},834623:(v,P,F,V,X)=>{n.jb("ReduceSumSquare",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},834803:(v,P,F,V,X)=>{n.jb("ReduceLogSumExp",v,{keepDims:!!P,noopWithEmptyAxes:!!F,axes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},834983:v=>{n.jb("Where",v,void 0)},835036:(v,P,F)=>{n.jb("Transpose",v,{perm:P?Array.from(U().subarray(Number(P)>>>0,Number(F)>>>0)):[]})},835160:(v,P,F,V)=>{n.jb("DepthToSpace",v,{blocksize:P,mode:mr(F),format:V?"NHWC":"NCHW"})},835293:(v,P,F,V)=>{n.jb("DepthToSpace",v,{blocksize:P,mode:mr(F),format:V?"NHWC":"NCHW"})},835426:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn,is)=>{n.jb("ConvTranspose",v,{format:rt?"NHWC":"NCHW",autoPad:P,dilations:[F],group:V,kernelShape:[X],pads:[we,Fe],strides:[Ve],wIsConst:()=>!!Me()[dt>>>0],outputPadding:kt?Array.from(U().subarray(Number(kt)>>>0,Number(jt)>>>0)):[],outputShape:rr?Array.from(U().subarray(Number(rr)>>>0,Number(dn)>>>0)):[],activation:mr(is)})},835859:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn)=>{n.jb("ConvTranspose",v,{format:Ve?"NHWC":"NCHW",autoPad:P,dilations:Array.from(U().subarray(Number(F)>>>0,2+(Number(F)>>>0)>>>0)),group:V,kernelShape:Array.from(U().subarray(Number(X)>>>0,2+(Number(X)>>>0)>>>0)),pads:Array.from(U().subarray(Number(we)>>>0,4+(Number(we)>>>0)>>>0)),strides:Array.from(U().subarray(Number(Fe)>>>0,2+(Number(Fe)>>>0)>>>0)),wIsConst:()=>!!Me()[rt>>>0],outputPadding:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],outputShape:jt?Array.from(U().subarray(Number(jt)>>>0,Number(rr)>>>0)):[],activation:mr(dn)})},836520:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn,is)=>{n.jb("ConvTranspose",v,{format:rt?"NHWC":"NCHW",autoPad:P,dilations:[F],group:V,kernelShape:[X],pads:[we,Fe],strides:[Ve],wIsConst:()=>!!Me()[dt>>>0],outputPadding:kt?Array.from(U().subarray(Number(kt)>>>0,Number(jt)>>>0)):[],outputShape:rr?Array.from(U().subarray(Number(rr)>>>0,Number(dn)>>>0)):[],activation:mr(is)})},836953:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn)=>{n.jb("ConvTranspose",v,{format:Ve?"NHWC":"NCHW",autoPad:P,dilations:Array.from(U().subarray(Number(F)>>>0,2+(Number(F)>>>0)>>>0)),group:V,kernelShape:Array.from(U().subarray(Number(X)>>>0,2+(Number(X)>>>0)>>>0)),pads:Array.from(U().subarray(Number(we)>>>0,4+(Number(we)>>>0)>>>0)),strides:Array.from(U().subarray(Number(Fe)>>>0,2+(Number(Fe)>>>0)>>>0)),wIsConst:()=>!!Me()[rt>>>0],outputPadding:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],outputShape:jt?Array.from(U().subarray(Number(jt)>>>0,Number(rr)>>>0)):[],activation:mr(dn)})},837614:(v,P)=>{n.jb("GlobalAveragePool",v,{format:P?"NHWC":"NCHW"})},837705:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn)=>{n.jb("AveragePool",v,{format:dn?"NHWC":"NCHW",auto_pad:P,ceil_mode:F,count_include_pad:V,storage_order:X,dilations:we?Array.from(U().subarray(Number(we)>>>0,Number(Fe)>>>0)):[],kernel_shape:Ve?Array.from(U().subarray(Number(Ve)>>>0,Number(rt)>>>0)):[],pads:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],strides:jt?Array.from(U().subarray(Number(jt)>>>0,Number(rr)>>>0)):[]})},838184:(v,P)=>{n.jb("GlobalAveragePool",v,{format:P?"NHWC":"NCHW"})},838275:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn)=>{n.jb("AveragePool",v,{format:dn?"NHWC":"NCHW",auto_pad:P,ceil_mode:F,count_include_pad:V,storage_order:X,dilations:we?Array.from(U().subarray(Number(we)>>>0,Number(Fe)>>>0)):[],kernel_shape:Ve?Array.from(U().subarray(Number(Ve)>>>0,Number(rt)>>>0)):[],pads:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],strides:jt?Array.from(U().subarray(Number(jt)>>>0,Number(rr)>>>0)):[]})},838754:(v,P)=>{n.jb("GlobalMaxPool",v,{format:P?"NHWC":"NCHW"})},838841:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn)=>{n.jb("MaxPool",v,{format:dn?"NHWC":"NCHW",auto_pad:P,ceil_mode:F,count_include_pad:V,storage_order:X,dilations:we?Array.from(U().subarray(Number(we)>>>0,Number(Fe)>>>0)):[],kernel_shape:Ve?Array.from(U().subarray(Number(Ve)>>>0,Number(rt)>>>0)):[],pads:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],strides:jt?Array.from(U().subarray(Number(jt)>>>0,Number(rr)>>>0)):[]})},839316:(v,P)=>{n.jb("GlobalMaxPool",v,{format:P?"NHWC":"NCHW"})},839403:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn)=>{n.jb("MaxPool",v,{format:dn?"NHWC":"NCHW",auto_pad:P,ceil_mode:F,count_include_pad:V,storage_order:X,dilations:we?Array.from(U().subarray(Number(we)>>>0,Number(Fe)>>>0)):[],kernel_shape:Ve?Array.from(U().subarray(Number(Ve)>>>0,Number(rt)>>>0)):[],pads:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],strides:jt?Array.from(U().subarray(Number(jt)>>>0,Number(rr)>>>0)):[]})},839878:(v,P,F,V,X)=>{n.jb("Gemm",v,{alpha:P,beta:F,transA:V,transB:X})},839982:v=>{n.jb("MatMul",v,void 0)},840036:(v,P,F,V)=>{n.jb("ArgMax",v,{keepDims:!!P,selectLastIndex:!!F,axis:V})},840144:(v,P,F,V)=>{n.jb("ArgMin",v,{keepDims:!!P,selectLastIndex:!!F,axis:V})},840252:(v,P)=>{n.jb("Softmax",v,{axis:P})},840315:(v,P)=>{n.jb("Concat",v,{axis:P})},840375:(v,P,F,V,X)=>{n.jb("Split",v,{axis:P,numOutputs:F,splitSizes:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},840531:v=>{n.jb("Expand",v,void 0)},840585:(v,P)=>{n.jb("Gather",v,{axis:Number(P)})},840656:(v,P)=>{n.jb("GatherElements",v,{axis:Number(P)})},840735:(v,P)=>{n.jb("GatherND",v,{batch_dims:Number(P)})},840814:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt)=>{n.jb("Resize",v,{antialias:P,axes:F?Array.from(U().subarray(Number(F)>>>0,Number(V)>>>0)):[],coordinateTransformMode:mr(X),cubicCoeffA:we,excludeOutside:Fe,extrapolationValue:Ve,keepAspectRatioPolicy:mr(rt),mode:mr(dt),nearestMode:mr(kt)})},841176:(v,P,F,V,X,we,Fe)=>{n.jb("Slice",v,{starts:P?Array.from(U().subarray(Number(P)>>>0,Number(F)>>>0)):[],ends:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[],axes:we?Array.from(U().subarray(Number(we)>>>0,Number(Fe)>>>0)):[]})},841440:v=>{n.jb("Tile",v,void 0)},841492:(v,P,F)=>{n.jb("InstanceNormalization",v,{epsilon:P,format:F?"NHWC":"NCHW"})},841606:(v,P,F)=>{n.jb("InstanceNormalization",v,{epsilon:P,format:F?"NHWC":"NCHW"})},841720:v=>{n.jb("Range",v,void 0)},841773:(v,P)=>{n.jb("Einsum",v,{equation:mr(P)})},841854:(v,P,F,V,X)=>{n.jb("Pad",v,{mode:P,value:F,pads:V?Array.from(U().subarray(Number(V)>>>0,Number(X)>>>0)):[]})},841997:(v,P,F,V,X,we)=>{n.jb("BatchNormalization",v,{epsilon:P,momentum:F,spatial:!!X,trainingMode:!!V,format:we?"NHWC":"NCHW"})},842166:(v,P,F,V,X,we)=>{n.jb("BatchNormalization",v,{epsilon:P,momentum:F,spatial:!!X,trainingMode:!!V,format:we?"NHWC":"NCHW"})},842335:(v,P,F)=>{n.jb("CumSum",v,{exclusive:Number(P),reverse:Number(F)})},842432:(v,P,F)=>{n.jb("DequantizeLinear",v,{axis:P,blockSize:F})},842522:(v,P,F,V,X)=>{n.jb("GridSample",v,{align_corners:P,mode:mr(F),padding_mode:mr(V),format:X?"NHWC":"NCHW"})},842692:(v,P,F,V,X)=>{n.jb("GridSample",v,{align_corners:P,mode:mr(F),padding_mode:mr(V),format:X?"NHWC":"NCHW"})},842862:(v,P)=>{n.jb("ScatterND",v,{reduction:mr(P)})},842947:(v,P,F,V,X,we,Fe,Ve,rt)=>{n.jb("Attention",v,{numHeads:P,isUnidirectional:F,maskFilterValue:V,scale:X,doRotary:we,qkvHiddenSizes:Fe?Array.from(U().subarray(Number(Ve)>>>0,Number(Ve)+Fe>>>0)):[],pastPresentShareBuffer:!!rt})},843219:v=>{n.jb("BiasAdd",v,void 0)},843274:v=>{n.jb("BiasSplitGelu",v,void 0)},843335:v=>{n.jb("FastGelu",v,void 0)},843391:(v,P,F,V,X,we,Fe,Ve,rt,dt,kt,jt,rr,dn,is,Bd)=>{n.jb("Conv",v,{format:jt?"NHWC":"NCHW",auto_pad:P,dilations:F?Array.from(U().subarray(Number(F)>>>0,Number(V)>>>0)):[],group:X,kernel_shape:we?Array.from(U().subarray(Number(we)>>>0,Number(Fe)>>>0)):[],pads:Ve?Array.from(U().subarray(Number(Ve)>>>0,Number(rt)>>>0)):[],strides:dt?Array.from(U().subarray(Number(dt)>>>0,Number(kt)>>>0)):[],w_is_const:()=>!!Me()[Number(rr)>>>0],activation:mr(dn),activation_params:is?Array.from(Le().subarray(Number(is)>>>0,Number(Bd)>>>0)):[]})},843975:v=>{n.jb("Gelu",v,void 0)},844027:(v,P,F,V,X,we,Fe,Ve,rt)=>{n.jb("GroupQueryAttention",v,{numHeads:P,kvNumHeads:F,scale:V,softcap:X,doRotary:we,rotaryInterleaved:Fe,smoothSoftmax:Ve,localWindowSize:rt})},844244:(v,P,F,V)=>{n.jb("LayerNormalization",v,{axis:P,epsilon:F,simplified:!!V})},844355:(v,P,F,V)=>{n.jb("LayerNormalization",v,{axis:P,epsilon:F,simplified:!!V})},844466:(v,P,F,V,X,we)=>{n.jb("MatMulNBits",v,{k:P,n:F,accuracyLevel:V,bits:X,blockSize:we})},844593:(v,P,F,V,X,we)=>{n.jb("MultiHeadAttention",v,{numHeads:P,isUnidirectional:F,maskFilterValue:V,scale:X,doRotary:we})},844752:(v,P)=>{n.jb("QuickGelu",v,{alpha:P})},844816:(v,P,F,V,X)=>{n.jb("RotaryEmbedding",v,{interleaved:!!P,numHeads:F,rotaryEmbeddingDim:V,scale:X})},844955:(v,P,F)=>{n.jb("SkipLayerNormalization",v,{epsilon:P,simplified:!!F})},845057:(v,P,F)=>{n.jb("SkipLayerNormalization",v,{epsilon:P,simplified:!!F})},845159:(v,P,F,V)=>{n.jb("GatherBlockQuantized",v,{gatherAxis:P,quantizeAxis:F,blockSize:V})},845280:v=>{n.Zb(v)},845314:(v,P)=>n.ac(Number(v),Number(P),n.Fb.dc,n.Fb.errors)};function z(v,P,F){return In(async()=>{await n.Xb(Number(v),Number(P),Number(F))})}function ee(){return typeof wasmOffsetConverter<"u"}class le{name="ExitStatus";constructor(P){this.message=`Program terminated with exit(${P})`,this.status=P}}var ke=v=>{v.terminate(),v.onmessage=()=>{}},fe=[],ce=v=>{Ke.length==0&&(zn(),xr(Ke[0]));var P=Ke.pop();if(!P)return 6;vt.push(P),gt[v.Ab]=P,P.Ab=v.Ab;var F={Bb:"run",fc:v.ec,Hb:v.Hb,Ab:v.Ab};return P.postMessage(F,v.Mb),0},he=0,$e=(v,P,...F)=>{for(var V=2*F.length,X=Ma(),we=Oi(8*V),Fe=we>>>3,Ve=0;Ve<F.length;Ve++){var rt=F[Ve];typeof rt=="bigint"?(re[Fe+2*Ve]=1n,re[Fe+2*Ve+1]=rt):(re[Fe+2*Ve]=0n,de()[Fe+2*Ve+1>>>0]=rt)}return v=wl(v,0,V,we,P),Ai(X),v};function Re(v){if(a)return $e(0,1,v);if(x=v,!(0<he)){for(var P of vt)ke(P);for(P of Ke)ke(P);Ke=[],vt=[],gt={},ne=!0}m(0,new le(v))}function ze(v){if(a)return $e(1,0,v);Ge(v)}var Ge=v=>{if(x=v,a)throw ze(v),"unwind";Re(v)},Ke=[],vt=[],Tt=[],gt={},Gr=v=>{var P=v.Ab;delete gt[P],Ke.push(v),vt.splice(vt.indexOf(v),1),v.Ab=0,va(P)};function _r(){Tt.forEach(v=>v())}var xr=v=>new Promise(P=>{v.onmessage=X=>{var we=(X=X.data).Bb;if(X.Gb&&X.Gb!=$i()){var Fe=gt[X.Gb];Fe?Fe.postMessage(X,X.Mb):T(`Internal error! Worker sent a message "${we}" to target pthread ${X.Gb}, but that thread no longer exists!`)}else we==="checkMailbox"?ge():we==="spawnThread"?ce(X):we==="cleanupThread"?Gr(gt[X.hc]):we==="loaded"?(v.loaded=!0,P(v)):we==="alert"?alert(`Thread ${X.ic}: ${X.text}`):X.target==="setimmediate"?v.postMessage(X):we==="callHandler"?n[X.Qb](...X.args):we&&T(`worker sent an unknown command ${we}`)},v.onerror=X=>{throw T(`worker sent an error! ${X.filename}:${X.lineno}: ${X.message}`),X};var F,V=[];for(F of[])n.propertyIsEnumerable(F)&&V.push(F);v.postMessage({Bb:"load",Rb:V,kc:g,lc:M})});function zn(){var v=new Worker((()=>{let P=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new P("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Ke.push(v)}var ir=v=>{xe();var P=be()[v+52>>>2>>>0];v=be()[v+56>>>2>>>0],xl(P,P-v),Ai(P)},yn=(v,P)=>{he=0,v=Tl(v,P),0<he?x=v:ya(v)};class Gs{constructor(P){this.Ib=P-24}}function Hs(v,P,F){var V=new Gs(v>>>=0);throw P>>>=0,F>>>=0,be()[V.Ib+16>>>2>>>0]=0,be()[V.Ib+4>>>2>>>0]=P,be()[V.Ib+8>>>2>>>0]=F,v}function ys(v,P,F,V){return a?$e(2,1,v,P,F,V):ws(v,P,F,V)}function ws(v,P,F,V){if(v>>>=0,F>>>=0,V>>>=0,l===void 0)return 6;var X=[];return a&&X.length===0?ys(v,P>>>=0,F,V):(v={ec:F,Ab:v,Hb:V,Mb:X},a?(v.Bb="spawnThread",postMessage(v,X),0):ce(v))}var _t=typeof TextDecoder<"u"?new TextDecoder:void 0,es=(v,P=0,F=NaN)=>{var V=(P>>>=0)+F;for(F=P;v[F]&&!(F>=V);)++F;if(16<F-P&&v.buffer&&_t)return _t.decode(v.buffer instanceof ArrayBuffer?v.subarray(P,F):v.slice(P,F));for(V="";P<F;){var X=v[P++];if(128&X){var we=63&v[P++];if((224&X)==192)V+=String.fromCharCode((31&X)<<6|we);else{var Fe=63&v[P++];65536>(X=(240&X)==224?(15&X)<<12|we<<6|Fe:(7&X)<<18|we<<12|Fe<<6|63&v[P++])?V+=String.fromCharCode(X):(X-=65536,V+=String.fromCharCode(55296|X>>10,56320|1023&X))}}else V+=String.fromCharCode(X)}return V},mr=(v,P)=>(v>>>=0)?es(W(),v,P):"";function Ot(v,P,F){return a?$e(3,1,v,P,F):0}function ts(v,P){if(a)return $e(4,1,v,P)}var S=v=>{for(var P=0,F=0;F<v.length;++F){var V=v.charCodeAt(F);127>=V?P++:2047>=V?P+=2:55296<=V&&57343>=V?(P+=4,++F):P+=3}return P},se=(v,P,F)=>{var V=W();if(P>>>=0,0<F){var X=P;F=P+F-1;for(var we=0;we<v.length;++we){var Fe=v.charCodeAt(we);if(55296<=Fe&&57343>=Fe&&(Fe=65536+((1023&Fe)<<10)|1023&v.charCodeAt(++we)),127>=Fe){if(P>=F)break;V[P++>>>0]=Fe}else{if(2047>=Fe){if(P+1>=F)break;V[P++>>>0]=192|Fe>>6}else{if(65535>=Fe){if(P+2>=F)break;V[P++>>>0]=224|Fe>>12}else{if(P+3>=F)break;V[P++>>>0]=240|Fe>>18,V[P++>>>0]=128|Fe>>12&63}V[P++>>>0]=128|Fe>>6&63}V[P++>>>0]=128|63&Fe}}V[P>>>0]=0,v=P-X}else v=0;return v};function K(v,P){if(a)return $e(5,1,v,P)}function ae(v,P,F){if(a)return $e(6,1,v,P,F)}function _e(v,P,F){return a?$e(7,1,v,P,F):0}function Se(v,P){if(a)return $e(8,1,v,P)}function Ne(v,P,F){if(a)return $e(9,1,v,P,F)}function st(v,P,F,V){if(a)return $e(10,1,v,P,F,V)}function pt(v,P,F,V){if(a)return $e(11,1,v,P,F,V)}function et(v,P,F,V){if(a)return $e(12,1,v,P,F,V)}function Dt(v){if(a)return $e(13,1,v)}function Rt(v,P){if(a)return $e(14,1,v,P)}function tn(v,P,F){if(a)return $e(15,1,v,P,F)}var tr,qr,Xn=()=>ue(""),Tr=v=>{for(var P="";W()[v>>>0];)P+=tr[W()[v++>>>0]];return P},rn={},po={};function Xr(v,P,F={}){return(function(V,X,we={}){var Fe=X.name;if(!V)throw new qr(`type "${Fe}" must have a positive integer typeid pointer`);if(po.hasOwnProperty(V)){if(we.Sb)return;throw new qr(`Cannot register type '${Fe}' twice`)}po[V]=X,rn.hasOwnProperty(V)&&(X=rn[V],delete rn[V],X.forEach(Ve=>Ve()))})(v,P,F)}var $o=(v,P,F)=>{switch(P){case 1:return F?V=>Me()[V>>>0]:V=>W()[V>>>0];case 2:return F?V=>R()[V>>>1>>>0]:V=>J()[V>>>1>>>0];case 4:return F?V=>U()[V>>>2>>>0]:V=>be()[V>>>2>>>0];case 8:return F?V=>re[V>>>3]:V=>Z[V>>>3];default:throw new TypeError(`invalid integer width (${P}): ${v}`)}};function So(v,P,F){F>>>=0,Xr(v>>>=0,{name:P=Tr(P>>>0),fromWireType:V=>V,toWireType:function(V,X){if(typeof X!="bigint"&&typeof X!="number")throw X=X===null?"null":(V=typeof X)=="object"||V==="array"||V==="function"?X.toString():""+X,new TypeError(`Cannot convert "${X}" to ${this.name}`);return typeof X=="number"&&(X=BigInt(X)),X},Cb:Pn,readValueFromPointer:$o(P,F,P.indexOf("u")==-1),Db:null})}var Pn=8;function rs(v,P,F,V){Xr(v>>>=0,{name:P=Tr(P>>>0),fromWireType:function(X){return!!X},toWireType:function(X,we){return we?F:V},Cb:Pn,readValueFromPointer:function(X){return this.fromWireType(W()[X>>>0])},Db:null})}var Io=[],Nr=[];function Qn(v){9<(v>>>=0)&&--Nr[v+1]==0&&(Nr[v]=void 0,Io.push(v))}var Qr=v=>{if(!v)throw new qr("Cannot use deleted val. handle = "+v);return Nr[v]},an=v=>{switch(v){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let P=Io.pop()||Nr.length;return Nr[P]=v,Nr[P+1]=1,P}};function mo(v){return this.fromWireType(be()[v>>>2>>>0])}var ns={name:"emscripten::val",fromWireType:v=>{var P=Qr(v);return Qn(v),P},toWireType:(v,P)=>an(P),Cb:Pn,readValueFromPointer:mo,Db:null};function no(v){return Xr(v>>>0,ns)}var Ms=(v,P)=>{switch(P){case 4:return function(F){return this.fromWireType(Le()[F>>>2>>>0])};case 8:return function(F){return this.fromWireType(de()[F>>>3>>>0])};default:throw new TypeError(`invalid float width (${P}): ${v}`)}};function $n(v,P,F){F>>>=0,Xr(v>>>=0,{name:P=Tr(P>>>0),fromWireType:V=>V,toWireType:(V,X)=>X,Cb:Pn,readValueFromPointer:Ms(P,F),Db:null})}function We(v,P,F,V,X){if(v>>>=0,F>>>=0,P=Tr(P>>>0),X===-1&&(X=4294967295),X=Ve=>Ve,V===0){var we=32-8*F;X=Ve=>Ve<<we>>>we}var Fe=P.includes("unsigned")?function(Ve,rt){return rt>>>0}:function(Ve,rt){return rt};Xr(v,{name:P,fromWireType:X,toWireType:Fe,Cb:Pn,readValueFromPointer:$o(P,F,V!==0),Db:null})}function Xe(v,P,F){function V(we){var Fe=be()[we>>>2>>>0];return we=be()[we+4>>>2>>>0],new X(Me().buffer,we,Fe)}var X=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][P];Xr(v>>>=0,{name:F=Tr(F>>>0),fromWireType:V,Cb:Pn,readValueFromPointer:V},{Sb:!0})}function it(v,P){Xr(v>>>=0,{name:P=Tr(P>>>0),fromWireType:function(F){for(var V,X=be()[F>>>2>>>0],we=F+4,Fe=we,Ve=0;Ve<=X;++Ve){var rt=we+Ve;Ve!=X&&W()[rt>>>0]!=0||(Fe=mr(Fe,rt-Fe),V===void 0?V=Fe:(V+="\0",V+=Fe),Fe=rt+1)}return so(F),V},toWireType:function(F,V){V instanceof ArrayBuffer&&(V=new Uint8Array(V));var X=typeof V=="string";if(!(X||V instanceof Uint8Array||V instanceof Uint8ClampedArray||V instanceof Int8Array))throw new qr("Cannot pass non-string to std::string");var we=X?S(V):V.length,Fe=Si(4+we+1),Ve=Fe+4;if(be()[Fe>>>2>>>0]=we,X)se(V,Ve,we+1);else if(X)for(X=0;X<we;++X){var rt=V.charCodeAt(X);if(255<rt)throw so(Fe),new qr("String has UTF-16 code units that do not fit in 8 bits");W()[Ve+X>>>0]=rt}else for(X=0;X<we;++X)W()[Ve+X>>>0]=V[X];return F!==null&&F.push(so,Fe),Fe},Cb:Pn,readValueFromPointer:mo,Db(F){so(F)}})}var Cr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,xs=(v,P)=>{for(var F=v>>1,V=F+P/2;!(F>=V)&&J()[F>>>0];)++F;if(32<(F<<=1)-v&&Cr)return Cr.decode(W().slice(v,F));for(F="",V=0;!(V>=P/2);++V){var X=R()[v+2*V>>>1>>>0];if(X==0)break;F+=String.fromCharCode(X)}return F},os=(v,P,F)=>{if(F??=2147483647,2>F)return 0;var V=P;F=(F-=2)<2*v.length?F/2:v.length;for(var X=0;X<F;++X){var we=v.charCodeAt(X);R()[P>>>1>>>0]=we,P+=2}return R()[P>>>1>>>0]=0,P-V},Ts=v=>2*v.length,Ao=(v,P)=>{for(var F=0,V="";!(F>=P/4);){var X=U()[v+4*F>>>2>>>0];if(X==0)break;++F,65536<=X?(X-=65536,V+=String.fromCharCode(55296|X>>10,56320|1023&X)):V+=String.fromCharCode(X)}return V},xi=(v,P,F)=>{if(P>>>=0,F??=2147483647,4>F)return 0;var V=P;F=V+F-4;for(var X=0;X<v.length;++X){var we=v.charCodeAt(X);if(55296<=we&&57343>=we&&(we=65536+((1023&we)<<10)|1023&v.charCodeAt(++X)),U()[P>>>2>>>0]=we,(P+=4)+4>F)break}return U()[P>>>2>>>0]=0,P-V},Ti=v=>{for(var P=0,F=0;F<v.length;++F){var V=v.charCodeAt(F);55296<=V&&57343>=V&&++F,P+=4}return P};function da(v,P,F){if(v>>>=0,P>>>=0,F=Tr(F>>>=0),P===2)var V=xs,X=os,we=Ts,Fe=Ve=>J()[Ve>>>1>>>0];else P===4&&(V=Ao,X=xi,we=Ti,Fe=Ve=>be()[Ve>>>2>>>0]);Xr(v,{name:F,fromWireType:Ve=>{for(var rt,dt=be()[Ve>>>2>>>0],kt=Ve+4,jt=0;jt<=dt;++jt){var rr=Ve+4+jt*P;jt!=dt&&Fe(rr)!=0||(kt=V(kt,rr-kt),rt===void 0?rt=kt:(rt+="\0",rt+=kt),kt=rr+P)}return so(Ve),rt},toWireType:(Ve,rt)=>{if(typeof rt!="string")throw new qr(`Cannot pass non-string to C++ string type ${F}`);var dt=we(rt),kt=Si(4+dt+P);return be()[kt>>>2>>>0]=dt/P,X(rt,kt+4,dt+P),Ve!==null&&Ve.push(so,kt),kt},Cb:Pn,readValueFromPointer:mo,Db(Ve){so(Ve)}})}function Ce(v,P){Xr(v>>>=0,{Tb:!0,name:P=Tr(P>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function A(v){Ii(v>>>0,!i,1,!s,131072,!1),_r()}var Q=v=>{if(!ne)try{if(v(),!(0<he))try{a?ya(x):Ge(x)}catch(P){P instanceof le||P=="unwind"||m(0,P)}}catch(P){P instanceof le||P=="unwind"||m(0,P)}};function me(v){v>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(U(),v>>>2,v).value.then(ge),v+=128,Atomics.store(U(),v>>>2,1))}var ge=()=>{var v=$i();v&&(me(v),Q(wa))};function Ie(v,P){(v>>>=0)==P>>>0?setTimeout(ge):a?postMessage({Gb:v,Bb:"checkMailbox"}):(v=gt[v])&&v.postMessage({Bb:"checkMailbox"})}var Be=[];function tt(v,P,F,V,X){for(P>>>=0,V/=2,Be.length=V,F=X>>>0>>>3,X=0;X<V;X++)Be[X]=re[F+2*X]?re[F+2*X+1]:de()[F+2*X+1>>>0];return(P?N[P]:Dd[v])(...Be)}var nt=()=>{he=0};function ot(v){v>>>=0,a?postMessage({Bb:"cleanupThread",hc:v}):Gr(gt[v])}function Je(v){}var Bt=(v,P)=>{var F=po[v];if(F===void 0)throw v=vl(v),F=Tr(v),so(v),new qr(`${P} has unknown type ${F}`);return F},Ct=(v,P,F)=>{var V=[];return v=v.toWireType(V,F),V.length&&(be()[P>>>2>>>0]=an(V)),v};function Dr(v,P,F){return P>>>=0,F>>>=0,v=Qr(v>>>0),P=Bt(P,"emval::as"),Ct(P,F,v)}function ln(v,P){return P>>>=0,v=Qr(v>>>0),(P=Bt(P,"emval::as")).toWireType(null,v)}var br=v=>{try{v()}catch(P){ue(P)}},Br=0,hr=null,Nn=0,ho=[],wn={},oo={},Ir=0,Yr=null,Sn=[];function In(v){return(function(P){if(!ne){if(Br===0){var F=!1,V=!1;P((X=0)=>{if(!ne&&(Nn=X,F=!0,V)){Br=2,br(()=>kl(hr)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),X=!1;try{var we=(function(){var rt=U()[hr+8>>>2>>>0];return rt=ht[oo[rt]],--he,rt()})()}catch(rt){we=rt,X=!0}var Fe=!1;if(!hr){var Ve=Yr;Ve&&(Yr=null,(X?Ve.reject:Ve.resolve)(we),Fe=!0)}if(X&&!Fe)throw we}}),V=!0,F||(Br=1,hr=(function(){var X=Si(65548),we=X+12;be()[X>>>2>>>0]=we,be()[X+4>>>2>>>0]=we+65536,we=ho[0];var Fe=wn[we];return Fe===void 0&&(Fe=Ir++,wn[we]=Fe,oo[Fe]=we),we=Fe,U()[X+8>>>2>>>0]=we,X})(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),br(()=>xa(hr)))}else Br===2?(Br=0,br(Ta),so(hr),hr=null,Sn.forEach(Q)):ue(`invalid state: ${Br}`);return Nn}})(P=>{v().then(P)})}function Oo(v){return v>>>=0,In(async()=>{var P=await Qr(v);return an(P)})}var nn=[];function go(v,P,F,V){return F>>>=0,V>>>=0,(v=nn[v>>>0])(null,P=Qr(P>>>0),F,V)}var cn={},kr=v=>{var P=cn[v];return P===void 0?Tr(v):P};function Jr(v,P,F,V,X){return F>>>=0,V>>>=0,X>>>=0,(v=nn[v>>>0])(P=Qr(P>>>0),P[F=kr(F)],V,X)}var Hr=()=>typeof globalThis=="object"?globalThis:Function("return this")();function An(v){return(v>>>=0)==0?an(Hr()):(v=kr(v),an(Hr()[v]))}var Ks=v=>{var P=nn.length;return nn.push(v),P},ua=(v,P)=>{for(var F=Array(v),V=0;V<v;++V)F[V]=Bt(be()[P+4*V>>>2>>>0],"parameter "+V);return F},Cs=(v,P)=>Object.defineProperty(P,"name",{value:v});function pd(v,P,F){var V=(P=ua(v,P>>>0)).shift();v--;var X=`return function (obj, func, destructorsRef, args) {
`,we=0,Fe=[];F===0&&Fe.push("obj");for(var Ve=["retType"],rt=[V],dt=0;dt<v;++dt)Fe.push("arg"+dt),Ve.push("argType"+dt),rt.push(P[dt]),X+=`  var arg${dt} = argType${dt}.readValueFromPointer(args${we?"+"+we:""});
`,we+=P[dt].Cb;return X+=`  var rv = ${F===1?"new func":"func.call"}(${Fe.join(", ")});
`,V.Tb||(Ve.push("emval_returnValue"),rt.push(Ct),X+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Ve.push(X+`};
`),v=(function(kt){var jt=Function;if(!(jt instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof jt} which is not a function`);var rr=Cs(jt.name||"unknownFunctionName",function(){});return rr.prototype=jt.prototype,rr=new rr,(kt=jt.apply(rr,kt))instanceof Object?kt:rr})(Ve)(...rt),F=`methodCaller<(${P.map(kt=>kt.name).join(", ")}) => ${V.name}>`,Ks(Cs(F,v))}function md(v){return v=kr(v>>>0),an(n[v])}function hd(v,P){return P>>>=0,v=Qr(v>>>0),P=Qr(P),an(v[P])}function gd(v){9<(v>>>=0)&&(Nr[v+1]+=1)}function _d(){return an([])}function qs(v){v=Qr(v>>>0);for(var P=Array(v.length),F=0;F<v.length;F++)P[F]=v[F];return an(P)}function bd(v){return an(kr(v>>>0))}function vd(){return an({})}function yd(v){for(var P=Qr(v>>>=0);P.length;){var F=P.pop();P.pop()(F)}Qn(v)}function wd(v,P,F){P>>>=0,F>>>=0,v=Qr(v>>>0),P=Qr(P),F=Qr(F),v[P]=F}function Md(v,P){return P>>>=0,v=(v=Bt(v>>>0,"_emval_take_value")).readValueFromPointer(P),an(v)}function Xs(v,P){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v),P>>>=0,v=new Date(1e3*v),U()[P>>>2>>>0]=v.getUTCSeconds(),U()[P+4>>>2>>>0]=v.getUTCMinutes(),U()[P+8>>>2>>>0]=v.getUTCHours(),U()[P+12>>>2>>>0]=v.getUTCDate(),U()[P+16>>>2>>>0]=v.getUTCMonth(),U()[P+20>>>2>>>0]=v.getUTCFullYear()-1900,U()[P+24>>>2>>>0]=v.getUTCDay(),v=(v.getTime()-Date.UTC(v.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,U()[P+28>>>2>>>0]=v}var ol=v=>v%4==0&&(v%100!=0||v%400==0),sl=[0,31,60,91,121,152,182,213,244,274,305,335],il=[0,31,59,90,120,151,181,212,243,273,304,334];function xd(v,P){v=-9007199254740992>v||9007199254740992<v?NaN:Number(v),P>>>=0,v=new Date(1e3*v),U()[P>>>2>>>0]=v.getSeconds(),U()[P+4>>>2>>>0]=v.getMinutes(),U()[P+8>>>2>>>0]=v.getHours(),U()[P+12>>>2>>>0]=v.getDate(),U()[P+16>>>2>>>0]=v.getMonth(),U()[P+20>>>2>>>0]=v.getFullYear()-1900,U()[P+24>>>2>>>0]=v.getDay();var F=(ol(v.getFullYear())?sl:il)[v.getMonth()]+v.getDate()-1|0;U()[P+28>>>2>>>0]=F,U()[P+36>>>2>>>0]=-60*v.getTimezoneOffset(),F=new Date(v.getFullYear(),6,1).getTimezoneOffset();var V=new Date(v.getFullYear(),0,1).getTimezoneOffset();v=0|(F!=V&&v.getTimezoneOffset()==Math.min(V,F)),U()[P+32>>>2>>>0]=v}function Td(v){v>>>=0;var P=new Date(U()[v+20>>>2>>>0]+1900,U()[v+16>>>2>>>0],U()[v+12>>>2>>>0],U()[v+8>>>2>>>0],U()[v+4>>>2>>>0],U()[v>>>2>>>0],0),F=U()[v+32>>>2>>>0],V=P.getTimezoneOffset(),X=new Date(P.getFullYear(),6,1).getTimezoneOffset(),we=new Date(P.getFullYear(),0,1).getTimezoneOffset(),Fe=Math.min(we,X);return 0>F?U()[v+32>>>2>>>0]=+(X!=we&&Fe==V):0<F!=(Fe==V)&&(X=Math.max(we,X),P.setTime(P.getTime()+6e4*((0<F?Fe:X)-V))),U()[v+24>>>2>>>0]=P.getDay(),F=(ol(P.getFullYear())?sl:il)[P.getMonth()]+P.getDate()-1|0,U()[v+28>>>2>>>0]=F,U()[v>>>2>>>0]=P.getSeconds(),U()[v+4>>>2>>>0]=P.getMinutes(),U()[v+8>>>2>>>0]=P.getHours(),U()[v+12>>>2>>>0]=P.getDate(),U()[v+16>>>2>>>0]=P.getMonth(),U()[v+20>>>2>>>0]=P.getYear(),v=P.getTime(),BigInt(isNaN(v)?-1:v/1e3)}function fa(v,P,F,V,X,we,Fe){return a?$e(16,1,v,P,F,V,X,we,Fe):-52}function al(v,P,F,V,X,we){if(a)return $e(17,1,v,P,F,V,X,we)}var Qs={},ll=()=>performance.timeOrigin+performance.now();function cl(v,P){if(a)return $e(18,1,v,P);if(Qs[v]&&(clearTimeout(Qs[v].id),delete Qs[v]),!P)return 0;var F=setTimeout(()=>{delete Qs[v],Q(()=>Ml(v,performance.timeOrigin+performance.now()))},P);return Qs[v]={id:F,qc:P},0}function dl(v,P,F,V){v>>>=0,P>>>=0,F>>>=0,V>>>=0;var X=new Date().getFullYear(),we=new Date(X,0,1).getTimezoneOffset();X=new Date(X,6,1).getTimezoneOffset();var Fe=Math.max(we,X);be()[v>>>2>>>0]=60*Fe,U()[P>>>2>>>0]=+(we!=X),v=(P=Ve=>{var rt=Math.abs(Ve);return`UTC${0<=Ve?"-":"+"}${String(Math.floor(rt/60)).padStart(2,"0")}${String(rt%60).padStart(2,"0")}`})(we),P=P(X),X<we?(se(v,F,17),se(P,V,17)):(se(v,V,17),se(P,F,17))}var Cd=()=>Date.now();function ul(v,P,F){return 0<=v&&3>=v?(v===0?v=Date.now():v=performance.timeOrigin+performance.now(),re[F>>>0>>>3]=BigInt(Math.round(1e6*v)),0):28}var fl=[],pl=(v,P)=>{fl.length=0;for(var F;F=W()[v++>>>0];){var V=F!=105;P+=(V&=F!=112)&&P%8?4:0,fl.push(F==112?be()[P>>>2>>>0]:F==106?re[P>>>3]:F==105?U()[P>>>2>>>0]:de()[P>>>3>>>0]),P+=V?8:4}return fl};function ml(v,P,F){return v>>>=0,P=pl(P>>>0,F>>>0),N[v](...P)}function hl(v,P,F){return v>>>=0,P=pl(P>>>0,F>>>0),N[v](...P)}var pa=()=>{};function kd(v,P){return T(mr(v>>>0,P>>>0))}var Ed=()=>{throw he+=1,"unwind"};function Pd(){return 4294901760}var $d=()=>navigator.hardwareConcurrency;function Sd(){return ue("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function Id(v){v>>>=0;var P=W().length;if(v<=P||4294901760<v)return!1;for(var F=1;4>=F;F*=2){var V=P*(1+.2/F);V=Math.min(V,v+100663296);e:{V=(Math.min(4294901760,65536*Math.ceil(Math.max(v,V)/65536))-g.buffer.byteLength+65535)/65536|0;try{g.grow(V),xe();var X=1;break e}catch{}X=void 0}if(X)return!0}return!1}var Ci=()=>(ue("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),Ys={},ma=v=>{v.forEach(P=>{Ci()})};function Ad(){var v=Error().stack.toString().split(`
`);return v[0]=="Error"&&v.shift(),ma(v),Ys.Lb=Ci(),Ys.cc=v,Ys.Lb}function ha(v,P,F){if(v>>>=0,P>>>=0,Ys.Lb==v)var V=Ys.cc;else(V=Error().stack.toString().split(`
`))[0]=="Error"&&V.shift(),ma(V);for(var X=3;V[X]&&Ci()!=v;)++X;for(v=0;v<F&&V[v+X];++v)U()[P+4*v>>>2>>>0]=Ci();return v}var ki,ga={},_a=()=>{if(!ki){var v,P={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(v in ga)ga[v]===void 0?delete P[v]:P[v]=ga[v];var F=[];for(v in P)F.push(`${v}=${P[v]}`);ki=F}return ki};function ss(v,P){if(a)return $e(19,1,v,P);v>>>=0,P>>>=0;var F=0;return _a().forEach((V,X)=>{var we=P+F;for(X=be()[v+4*X>>>2>>>0]=we,we=0;we<V.length;++we)Me()[X++>>>0]=V.charCodeAt(we);Me()[X>>>0]=0,F+=V.length+1}),0}function gl(v,P){if(a)return $e(20,1,v,P);v>>>=0,P>>>=0;var F=_a();be()[v>>>2>>>0]=F.length;var V=0;return F.forEach(X=>V+=X.length+1),be()[P>>>2>>>0]=V,0}function Od(v){return a?$e(21,1,v):52}function _l(v,P,F,V){return a?$e(22,1,v,P,F,V):52}function Ld(v,P,F,V){return a?$e(23,1,v,P,F,V):70}var Fd=[null,[],[]];function ba(v,P,F,V){if(a)return $e(24,1,v,P,F,V);P>>>=0,F>>>=0,V>>>=0;for(var X=0,we=0;we<F;we++){var Fe=be()[P>>>2>>>0],Ve=be()[P+4>>>2>>>0];P+=8;for(var rt=0;rt<Ve;rt++){var dt=W()[Fe+rt>>>0],kt=Fd[v];dt===0||dt===10?((v===1?_:T)(es(kt)),kt.length=0):kt.push(dt)}X+=Ve}return be()[V>>>2>>>0]=X,0}a||(function(){for(var v=n.numThreads-1;v--;)zn();fe.unshift(()=>{I++,(function(P){a?P():Promise.all(Ke.map(xr)).then(P)})(()=>pe())})})();for(var bl=Array(256),Ei=0;256>Ei;++Ei)bl[Ei]=String.fromCharCode(Ei);tr=bl,qr=n.BindingError=class extends Error{constructor(v){super(v),this.name="BindingError"}},n.InternalError=class extends Error{constructor(v){super(v),this.name="InternalError"}},Nr.push(0,1,void 0,1,null,1,!0,1,!1,1),n.count_emval_handles=()=>Nr.length/2-5-Io.length;var ht,Dd=[Re,ze,ys,Ot,ts,K,ae,_e,Se,Ne,st,pt,et,Dt,Rt,tn,fa,al,cl,ss,gl,Od,_l,Ld,ba];(async function(){function v(V,X){return ht=V.exports,ht=(function(){var we=ht,Fe={};for(let[Ve,rt]of Object.entries(we))Fe[Ve]=typeof rt=="function"?(...dt)=>{ho.push(Ve);try{return rt(...dt)}finally{ne||(ho.pop(),hr&&Br===1&&ho.length===0&&(Br=0,he+=1,br(Cl),typeof Fibers<"u"&&Fibers.rc()))}}:rt;return Fe})(),ht=(function(){var we=ht,Fe=rt=>dt=>rt(dt)>>>0,Ve=rt=>()=>rt()>>>0;return(we=Object.assign({},we)).Da=Fe(we.Da),we.fb=Ve(we.fb),we.hb=Fe(we.hb),we.tb=Fe(we.tb),we.ub=Ve(we.ub),we.__cxa_get_exception_ptr=Fe(we.__cxa_get_exception_ptr),we})(),Tt.push(ht.ib),M=X,pe(),ht}I++;var P=oe();if(n.instantiateWasm)return new Promise(V=>{n.instantiateWasm(P,(X,we)=>{v(X,we),V(X.exports)})});if(a)return new Promise(V=>{Te=X=>{var we=new WebAssembly.Instance(X,oe());V(v(we,X))}});B??=n.locateFile?n.locateFile?n.locateFile("ort-wasm-simd-threaded.jsep.wasm",b):b+"ort-wasm-simd-threaded.jsep.wasm":new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href;try{var F=await(async function(V){var X=B;if(!ie&&typeof WebAssembly.instantiateStreaming=="function"&&!ve(X))try{var we=fetch(X,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(we,V)}catch(Fe){T(`wasm streaming compile failed: ${Fe}`),T("falling back to ArrayBuffer instantiation")}return(async function(Fe,Ve){try{var rt=await(async function(dt){if(!ie)try{var kt=await d(dt);return new Uint8Array(kt)}catch{}if(dt==B&&ie)dt=new Uint8Array(ie);else{if(!f)throw"both async and sync fetching of the wasm failed";dt=f(dt)}return dt})(Fe);return await WebAssembly.instantiate(rt,Ve)}catch(dt){T(`failed to asynchronously prepare wasm: ${dt}`),ue(dt)}})(X,V)})(P);return v(F.instance,F.module)}catch(V){return r(V),Promise.reject(V)}})();var vl=v=>(vl=ht.Da)(v),Pi=()=>(Pi=ht.Ea)();n._OrtInit=(v,P)=>(n._OrtInit=ht.Fa)(v,P),n._OrtGetLastError=(v,P)=>(n._OrtGetLastError=ht.Ga)(v,P),n._OrtCreateSessionOptions=(v,P,F,V,X,we,Fe,Ve,rt,dt)=>(n._OrtCreateSessionOptions=ht.Ha)(v,P,F,V,X,we,Fe,Ve,rt,dt),n._OrtAppendExecutionProvider=(v,P,F,V,X)=>(n._OrtAppendExecutionProvider=ht.Ia)(v,P,F,V,X),n._OrtAddFreeDimensionOverride=(v,P,F)=>(n._OrtAddFreeDimensionOverride=ht.Ja)(v,P,F),n._OrtAddSessionConfigEntry=(v,P,F)=>(n._OrtAddSessionConfigEntry=ht.Ka)(v,P,F),n._OrtReleaseSessionOptions=v=>(n._OrtReleaseSessionOptions=ht.La)(v),n._OrtCreateSession=(v,P,F)=>(n._OrtCreateSession=ht.Ma)(v,P,F),n._OrtReleaseSession=v=>(n._OrtReleaseSession=ht.Na)(v),n._OrtGetInputOutputCount=(v,P,F)=>(n._OrtGetInputOutputCount=ht.Oa)(v,P,F),n._OrtGetInputOutputMetadata=(v,P,F,V)=>(n._OrtGetInputOutputMetadata=ht.Pa)(v,P,F,V),n._OrtFree=v=>(n._OrtFree=ht.Qa)(v),n._OrtCreateTensor=(v,P,F,V,X,we)=>(n._OrtCreateTensor=ht.Ra)(v,P,F,V,X,we),n._OrtGetTensorData=(v,P,F,V,X)=>(n._OrtGetTensorData=ht.Sa)(v,P,F,V,X),n._OrtReleaseTensor=v=>(n._OrtReleaseTensor=ht.Ta)(v),n._OrtCreateRunOptions=(v,P,F,V)=>(n._OrtCreateRunOptions=ht.Ua)(v,P,F,V),n._OrtAddRunConfigEntry=(v,P,F)=>(n._OrtAddRunConfigEntry=ht.Va)(v,P,F),n._OrtReleaseRunOptions=v=>(n._OrtReleaseRunOptions=ht.Wa)(v),n._OrtCreateBinding=v=>(n._OrtCreateBinding=ht.Xa)(v),n._OrtBindInput=(v,P,F)=>(n._OrtBindInput=ht.Ya)(v,P,F),n._OrtBindOutput=(v,P,F,V)=>(n._OrtBindOutput=ht.Za)(v,P,F,V),n._OrtClearBoundOutputs=v=>(n._OrtClearBoundOutputs=ht._a)(v),n._OrtReleaseBinding=v=>(n._OrtReleaseBinding=ht.$a)(v),n._OrtRunWithBinding=(v,P,F,V,X)=>(n._OrtRunWithBinding=ht.ab)(v,P,F,V,X),n._OrtRun=(v,P,F,V,X,we,Fe,Ve)=>(n._OrtRun=ht.bb)(v,P,F,V,X,we,Fe,Ve),n._OrtEndProfiling=v=>(n._OrtEndProfiling=ht.cb)(v),n._JsepOutput=(v,P,F)=>(n._JsepOutput=ht.db)(v,P,F),n._JsepGetNodeName=v=>(n._JsepGetNodeName=ht.eb)(v);var $i=()=>($i=ht.fb)(),so=n._free=v=>(so=n._free=ht.gb)(v),Si=n._malloc=v=>(Si=n._malloc=ht.hb)(v),Ii=(v,P,F,V,X,we)=>(Ii=ht.kb)(v,P,F,V,X,we),yl=()=>(yl=ht.lb)(),wl=(v,P,F,V,X)=>(wl=ht.mb)(v,P,F,V,X),va=v=>(va=ht.nb)(v),ya=v=>(ya=ht.ob)(v),Ml=(v,P)=>(Ml=ht.pb)(v,P),wa=()=>(wa=ht.qb)(),xl=(v,P)=>(xl=ht.rb)(v,P),Ai=v=>(Ai=ht.sb)(v),Oi=v=>(Oi=ht.tb)(v),Ma=()=>(Ma=ht.ub)(),Tl=n.dynCall_ii=(v,P)=>(Tl=n.dynCall_ii=ht.vb)(v,P),xa=v=>(xa=ht.wb)(v),Cl=()=>(Cl=ht.xb)(),kl=v=>(kl=ht.yb)(v),Ta=()=>(Ta=ht.zb)();return n.stackSave=()=>Ma(),n.stackRestore=v=>Ai(v),n.stackAlloc=v=>Oi(v),n.setValue=function(v,P,F="i8"){switch(F.endsWith("*")&&(F="*"),F){case"i1":case"i8":Me()[v>>>0]=P;break;case"i16":R()[v>>>1>>>0]=P;break;case"i32":U()[v>>>2>>>0]=P;break;case"i64":re[v>>>3]=BigInt(P);break;case"float":Le()[v>>>2>>>0]=P;break;case"double":de()[v>>>3>>>0]=P;break;case"*":be()[v>>>2>>>0]=P;break;default:ue(`invalid type for setValue: ${F}`)}},n.getValue=function(v,P="i8"){switch(P.endsWith("*")&&(P="*"),P){case"i1":case"i8":return Me()[v>>>0];case"i16":return R()[v>>>1>>>0];case"i32":return U()[v>>>2>>>0];case"i64":return re[v>>>3];case"float":return Le()[v>>>2>>>0];case"double":return de()[v>>>3>>>0];case"*":return be()[v>>>2>>>0];default:ue(`invalid type for getValue: ${P}`)}},n.UTF8ToString=mr,n.stringToUTF8=se,n.lengthBytesUTF8=S,(function v(){if(0<I)q=v;else if(a)t(n),Y();else{for(;0<fe.length;)fe.shift()(n);0<I?q=v:(n.calledRun=!0,ne||(Y(),t(n)))}})(),n.PTR_SIZE=4,o}),o$=$m,nx=globalThis.self?.name?.startsWith("em-pthread"),nx&&$m()}),Sm,gg,ox,io,s$,_u,sx,ix,Im,ax,Am,i$,Om,a$,__=qe(()=>{g_(),Sm=typeof location>"u"?void 0:location.origin,gg=import.meta.url>"file:"&&import.meta.url<"file;",ox=()=>{{if(gg){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,Sm).href}return import.meta.url}},io=ox(),s$=()=>{if(io&&!io.startsWith("blob:"))return io.substring(0,io.lastIndexOf("/")+1)},_u=(e,t)=>{try{let r=t??io;return(r?new URL(e,r):new URL(e)).origin===Sm}catch{return!1}},sx=(e,t)=>{let r=t??io;try{return(r?new URL(e,r):new URL(e)).href}catch{return}},ix=(e,t)=>`${t??"./"}${e}`,Im=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},ax=async e=>(await import(e)).default,Am=(YK(),ed(t$)).default,i$=async()=>{if(!io)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(_u(io))return[void 0,Am()];let e=await Im(io);return[e,Am(e)]},Om=(JK(),ed(n$)).default,a$=async(e,t,r)=>{if(!e&&!t&&Om&&io&&_u(io))return[void 0,Om];{let n="ort-wasm-simd-threaded.jsep.mjs",o=e??sx(n,t),s=r&&o&&!_u(o,t),i=s?await Im(o):o??ix(n,t);return[s?i:void 0,await ax(i)]}}}),Lm,bu,zl,Fm,lx,cx,dx,b_,wr,la=qe(()=>{__(),bu=!1,zl=!1,Fm=!1,lx=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},cx=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},dx=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},b_=async e=>{if(bu)return Promise.resolve();if(zl)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Fm)throw new Error("previous call to 'initializeWebAssembly()' failed.");zl=!0;let t=e.initTimeout,r=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!dx())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!cx())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let n=lx();r>1&&!n&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+r+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=r=1);let o=e.wasmPaths,s=typeof o=="string"?o:void 0,i=o?.mjs,a=i?.href??i,l=o?.wasm,c=l?.href??l,u=e.wasmBinary,[d,f]=await a$(a,s,r>1),p=!1,m=[];if(t>0&&m.push(new Promise(b=>{setTimeout(()=>{p=!0,b()},t)})),m.push(new Promise((b,E)=>{let h={numThreads:r};if(u)h.wasmBinary=u;else if(c||s)h.locateFile=_=>c??s+_;else if(a&&a.indexOf("blob:")!==0)h.locateFile=_=>new URL(_,a).href;else if(d){let _=s$();_&&(h.locateFile=T=>_+T)}f(h).then(_=>{zl=!1,bu=!0,Lm=_,b(),d&&URL.revokeObjectURL(d)},_=>{zl=!1,Fm=!0,E(_)})})),await Promise.race(m),p)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},wr=()=>{if(bu&&Lm)return Lm;throw new Error("WebAssembly is not initialized yet.")}}),Wo,tf,ar,v_=qe(()=>{la(),Wo=(e,t)=>{let r=wr(),n=r.lengthBytesUTF8(e)+1,o=r._malloc(n);return r.stringToUTF8(e,o,n),t.push(o),o},tf=(e,t,r,n)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([o,s])=>{let i=t?t+o:o;if(typeof s=="object")tf(s,i+".",r,n);else if(typeof s=="string"||typeof s=="number")n(i,s.toString());else if(typeof s=="boolean")n(i,s?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof s}`)})},ar=e=>{let t=wr(),r=t.stackSave();try{let n=t.PTR_SIZE,o=t.stackAlloc(2*n);t._OrtGetLastError(o,o+n);let s=Number(t.getValue(o,n===4?"i32":"i64")),i=t.getValue(o+n,"*"),a=i?t.UTF8ToString(i):"";throw new Error(`${e} ERROR_CODE: ${s}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}}}),l$,ZK=qe(()=>{la(),v_(),l$=e=>{let t=wr(),r=0,n=[],o=e||{};try{if(e?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(o.terminate=!1);let s=0;return e?.tag!==void 0&&(s=Wo(e.tag,n)),r=t._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,s),r===0&&ar("Can't create run options."),e?.extra!==void 0&&tf(e.extra,"",new WeakSet,(i,a)=>{let l=Wo(i,n),c=Wo(a,n);t._OrtAddRunConfigEntry(r,l,c)!==0&&ar(`Can't set a run config entry: ${i} - ${a}.`)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseRunOptions(r),n.forEach(i=>t._free(i)),s}}}),ux,fx,px,Nl,mx,c$,eq=qe(()=>{la(),v_(),ux=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},fx=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},px=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},Nl=(e,t,r,n)=>{let o=Wo(t,n),s=Wo(r,n);wr()._OrtAddSessionConfigEntry(e,o,s)!==0&&ar(`Can't set a session config entry: ${t} - ${r}.`)},mx=async(e,t,r)=>{for(let n of t){let o=typeof n=="string"?n:n.name,s=[];switch(o){case"webnn":if(o="WEBNN",typeof n!="string"){let u=n?.deviceType;u&&Nl(e,"deviceType",u,r)}break;case"webgpu":if(o="JS",typeof n!="string"){let u=n;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);Nl(e,"preferredLayout",u.preferredLayout,r)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let i=Wo(o,r),a=s.length,l=0,c=0;if(a>0){l=wr()._malloc(a*wr().PTR_SIZE),r.push(l),c=wr()._malloc(a*wr().PTR_SIZE),r.push(c);for(let u=0;u<a;u++)wr().setValue(l+u*wr().PTR_SIZE,s[u][0],"*"),wr().setValue(c+u*wr().PTR_SIZE,s[u][1],"*")}await wr()._OrtAppendExecutionProvider(e,i,l,c,a)!==0&&ar(`Can't append execution provider: ${o}.`)}},c$=async e=>{let t=wr(),r=0,n=[],o=e||{};px(o);try{let s=ux(o.graphOptimizationLevel??"all"),i=fx(o.executionMode??"sequential"),a=typeof o.logId=="string"?Wo(o.logId,n):0,l=o.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let c=o.logVerbosityLevel??0;if(!Number.isInteger(c)||c<0||c>4)throw new Error(`log verbosity level is not valid: ${c}`);let u=typeof o.optimizedModelFilePath=="string"?Wo(o.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(s,!!o.enableCpuMemArena,!!o.enableMemPattern,i,!!o.enableProfiling,0,a,l,c,u),r===0&&ar("Can't create session options."),o.executionProviders&&await mx(r,o.executionProviders,n),o.enableGraphCapture!==void 0){if(typeof o.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);Nl(r,"enableGraphCapture",o.enableGraphCapture.toString(),n)}if(o.freeDimensionOverrides)for(let[d,f]of Object.entries(o.freeDimensionOverrides)){if(typeof d!="string")throw new Error(`free dimension override name must be a string: ${d}`);if(typeof f!="number"||!Number.isInteger(f)||f<0)throw new Error(`free dimension override value must be a non-negative integer: ${f}`);let p=Wo(d,n);t._OrtAddFreeDimensionOverride(r,p,f)!==0&&ar(`Can't set a free dimension override: ${d} - ${f}.`)}return o.extra!==void 0&&tf(o.extra,"",new WeakSet,(d,f)=>{Nl(r,d,f,n)}),[r,n]}catch(s){throw r!==0&&t._OrtReleaseSessionOptions(r)!==0&&ar("Can't release session options."),n.forEach(i=>t._free(i)),s}}}),Ra,Fs,Xi,y_,rf,w_,M_,_g,xt=qe(()=>{Ra=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},Fs=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},Xi=(e,t)=>{let r=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],n=typeof t=="number"?t:t.reduce((o,s)=>o*s,1);return r>0?Math.ceil(n*r):void 0},y_=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},rf=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},w_=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",M_=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",_g=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),x_,d$=qe(()=>{g_(),x_=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let o=t.body.getReader(),s;try{s=new ArrayBuffer(n)}catch(a){if(a instanceof RangeError){let l=Math.ceil(n/65536);s=new WebAssembly.Memory({initial:l,maximum:l}).buffer}else throw a}let i=0;for(;;){let{done:a,value:l}=await o.read();if(a)break;let c=l.byteLength;new Uint8Array(s,i,c).set(l),i+=c}return new Uint8Array(s,0,n)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),hx,gx,_x,bx,T_,vx,Ut,Us=qe(()=>{xt(),hx=["V","I","W","E","F"],gx=(e,t)=>{console.log(`[${hx[e]},${new Date().toISOString()}]${t}`)},T_=(e,t)=>{_x=e,bx=t},vx=(e,t)=>{let r=rf(e),n=rf(_x);r>=n&&gx(r,typeof t=="function"?t():t)},Ut=(...e)=>{bx&&vx(...e)}}),yx,Za,Oe,nf,u$,f$,p$,St=qe(()=>{yx=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},Za=class{static calcShape(e,t,r=!1){let n=e.length,o=t.length;if(n===0)return t;if(o===0)return e;let s=Math.max(e.length,t.length),i=new Array(s);if(r){if(n<2||o<2)return;let a=yx.calcMatMulShape([e[n-2],e[n-1]],[t[o-2],t[o-1]]);if(a===void 0)return;[i[s-2],i[s-1]]=a}for(let a=r?3:1;a<=s;a++){let l=n-a<0?1:e[n-a],c=o-a<0?1:t[o-a];if(l!==c&&l>1&&c>1)return;let u=Math.max(l,c);if(l&&c)i[s-a]=Math.max(l,c);else{if(u>1)return;i[s-a]=0}}return i}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let o=1;o<=r;o++)if(e[r-o]!==1&&e[r-o]!==t[n-o])return!1;return!0}},Oe=class Bu{static size(t){return Bu.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let n=t.length;if(n===0)return[];let o=new Array(n),s=n-1;for(;s>=0;){if(t[s]%r===0){o[s]=t[s]/r;break}if(r%t[s]!==0)throw new Error("cannot convert shape");o[s]=1,r/=t[s],s--}for(s--;s>=0;s--)o[s]=t[s];return o}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return Bu.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return Bu.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,n){let o=1;for(let s=r;s<n;s++){if(t[s]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");o*=Number(t[s])}return o}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=t[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*t[o+1];return n}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(n=>this.normalizeAxis(n,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(n=>t[n]):t.slice().reverse()}static padShape(t,r){let n=t.length;return t.map((o,s)=>o+r[s]+r[s+n])}static areEqual(t,r){return t.length!==r.length?!1:t.every((n,o)=>n===r[o])}},nf=class tc{static adjustPoolAttributes(t,r,n,o,s,i){if(!t&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let a=0;a<r.length-2;a++)a>=n.length?n.push(r[a+2]):n[a]=r[a+2];for(let a=0;a<n.length;a++)if(a<o.length){if(o[a]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let a=0;a<n.length;a++)if(a<s.length){if(s[a]<0)throw new Error("dilations should be greater than or equal to 1")}else s.push(1);for(let a=0;a<n.length*2;a++)if(a<i.length){if(i[a]<0)throw new Error("pad should be greater than or equal to 1")}else i.push(0);for(let a=0;a<n.length;a++){if(n[a]<=0)throw new Error("kernel shapes need to be greater than 0");if(i[a]>=n[a]||i[a+n.length]>=n[a])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,n,o,s,i,a){if(a){if(s.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<t.length-2;l++)tc.adjustPadAndReturnShape(t[l+(i?1:2)],r[l],n[l],o[l],s,l,l+t.length-2,a)}}static computePoolOutputShape(t,r,n,o,s,i,a){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return tc.computeShapeHelper(t,r,l,n,o,s,i,a),l}static computeConvOutputShape(t,r,n,o,s,i,a){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return tc.computeShapeHelper(!1,t,l,n,o,s,i,a),l}static computeShapeHelper(t,r,n,o,s,i,a,l){if(t)for(let c=0;c<r.length-2;c++)n.push(1);else for(let c=0;c<r.length-2;c++)n.push(tc.adjustPadAndReturnShape(r[c+2],o[c],s[c],i[c],a,c,c+r.length-2,l))}static adjustPadAndReturnShape(t,r,n,o,s,i,a,l){let c=n*(o-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return s[i]=0,s[a]=0,Math.floor((t-c)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let u=((t+r-1)/r-1)*r+o-t;return s[i]=Math.floor(l==="SAME_LOWER"?(u+1)/2:u/2),s[a]=u-s[i],Math.floor((t+u-o)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+s[i]+s[a]-c)/r+1)}},u$=class{static getShapeOfGemmResult(e,t,r,n,o){if(e.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let s,i,a;t?(s=e[1],i=e[0]):(s=e[0],i=e[1]);let l=-1;if(n?(a=r[0],l=1):(a=r[1],l=0),r[l]!==i)throw new Error("dimension mismatch");if(s<=0||a<=0||i<=0)throw new Error("invalid shape specified");if(o&&!Za.isValidBroadcast(o,[s,a]))throw new Error("gemm: invalid bias shape for broadcast");return[s,a,i]}},f$=-34028234663852886e22,p$=34028234663852886e22}),C_,m$=qe(()=>{xt(),C_=(e,t)=>new(y_(t))(e)}),bg,Dm,wx,Bm,Mx,Rm,zm,Nm,xx,h$,tq=qe(()=>{Us(),bg=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let r=e.byteLength/8,n=new BigInt64Array(e.buffer,e.byteOffset,r),o=new Int32Array(r);for(let s=0;s<r;s++){let i=n[s];if(i>2147483647n||i<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${s}: ${i}`);o[s]=Number(i)}return t?new Uint8Array(o.buffer):o},Dm=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let r=e.byteLength/4,n=new Int32Array(e.buffer,e.byteOffset,r),o=BigInt64Array.from(n,BigInt);return t?new Uint8Array(o.buffer):o},wx=1,Bm=()=>wx++,Mx=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),Rm=(e,t)=>{let r=Mx.get(e);if(!r)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((n,o)=>n*o)*r/8):0},zm=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:r,tensor:n,dataType:o,shape:s,shouldConvertInt64toInt32:i=!1}=e;this.sessionId=t,this.mlContext=r,this.mlTensor=n,this.dataType=o,this.tensorShape=s,this.shouldConvertInt64toInt32=i}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return Rm(this.dataType,this.tensorShape)}destroy(){Ut("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let r=await this.mlContext.readTensor(this.mlTensor),n=Dm(new Uint8Array(r));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(n);return}else return n.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,r){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===r.length&&this.tensorShape.every((n,o)=>n===r[o])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},Nm=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,r,n){let o=t,s=this.tensorManager.getMLContext(e),i=o==="int64"&&!s.opSupportLimits().input.dataTypes.includes("int64");if(i&&(o="int32",Ut("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(s,o,r))return this.wrapper.tensor;if(n){if(this.wrapper.byteLength!==Rm(o,r))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let a=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,o,r,a,!0,!0,i),n&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=bg(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else Ut("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){if(this.activeUpload){let t=this.wrapper?.isInt64ToInt32Converted?Dm(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(t):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(t);return}else return t.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32,e):this.wrapper.read(this.wrapper?.shouldConvertInt64toInt32)}},xx=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=Bm();return this.tensorTrackersById.set(e,new Nm(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,r,n,o){Ut("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${r}, shape: ${n}, copyOld: ${o}}`);let s=this.tensorTrackersById.get(t);if(!s)throw new Error("Tensor not found.");return s.ensureTensor(e,r,n,o)}upload(e,t){let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");r.upload(t)}async download(e,t){Ut("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t?.byteLength}}`);let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");return r.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,r,n){let o=this.getMLContext(e),s=Bm(),i=new zm({sessionId:e,context:o,tensor:t,dataType:r,shape:n});return this.tensorTrackersById.set(s,new Nm(this,i)),this.externalTensors.add(i),s}async getCachedTensor(e,t,r,n,o,s,i=!1){let a=this.getMLContext(e);for(let[c,u]of this.freeTensors.entries())if(u.canReuseTensor(a,t,r)){Ut("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${r}}`);let d=this.freeTensors.splice(c,1)[0];return d.sessionId=e,d}Ut("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${r}}`);let l=await a.createTensor({dataType:t,shape:r,dimensions:r,usage:n,writable:o,readable:s});return new zm({sessionId:e,context:a,tensor:l,dataType:t,shape:r,shouldConvertInt64toInt32:i})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},h$=(...e)=>new xx(...e)}),vu,Tx,g$,rq=qe(()=>{xt(),la(),m$(),tq(),Us(),vu=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),Tx=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((o,s)=>o===n[s]&&e[o]===t[o])},g$=class{constructor(e){this.tensorManager=h$(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,T_(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){Ut("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){Ut("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let r of t)Ut("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${r}}`),this.tensorManager.releaseTensorId(r);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let r=this.mlContextCache.findIndex(n=>n.gpuDevice===e);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:n}),n}}else if(e===void 0){let r=this.mlContextCache.findIndex(n=>n.options===void 0&&n.gpuDevice===void 0);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:n}),n}}let t=this.mlContextCache.findIndex(r=>Tx(r.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:r}),r}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let r=this.sessionIdsByMLContext.get(t);r||(r=new Set,this.sessionIdsByMLContext.set(t,r)),r.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let r=this.sessionIdsByMLContext.get(t);if(r.delete(e),r.size===0){this.sessionIdsByMLContext.delete(t);let n=this.mlContextCache.findIndex(o=>o.mlContext===t);n!==-1&&this.mlContextCache.splice(n,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){Ut("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,r,n,o){let s=vu.get(r);if(!s)throw new Error(`Unsupported ONNX data type: ${r}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,s,n,o)}async createTemporaryTensor(e,t,r){Ut("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${r}}`);let n=vu.get(t);if(!n)throw new Error(`Unsupported ONNX data type: ${t}`);let o=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,o,n,r,!1);let s=this.temporarySessionTensorIds.get(e);return s?s.push(o):this.temporarySessionTensorIds.set(e,[o]),o}uploadTensor(e,t){if(!wr().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");Ut("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let r=await this.tensorManager.download(e);return C_(r,t)}}registerMLTensor(e,t,r,n){let o=vu.get(r);if(!o)throw new Error(`Unsupported ONNX data type: ${r}`);let s=this.tensorManager.registerTensor(e,t,o,n);return Ut("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${o}, dimensions: ${n}} -> {tensorId: ${s}}`),s}registerMLConstant(e,t,r,n,o,s,i=!1){if(!s)throw new Error("External mounted files are not available.");let a=e;e.startsWith("./")&&(a=e.substring(2));let l=s.get(a);if(!l)throw new Error(`File with name ${a} not found in preloaded files.`);if(t+r>l.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let c=l.slice(t,t+r).buffer,u;switch(o.dataType){case"float32":u=new Float32Array(c);break;case"float16":u=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(c):new Uint16Array(c);break;case"int32":u=new Int32Array(c);break;case"uint32":u=new Uint32Array(c);break;case"int64":i?(u=bg(new Uint8Array(c),!1),o.dataType="int32"):u=new BigInt64Array(c);break;case"uint64":u=new BigUint64Array(c);break;case"int8":u=new Int8Array(c);break;case"int4":case"uint4":case"uint8":u=new Uint8Array(c);break;default:throw new Error(`Unsupported data type: ${o.dataType} in creating WebNN Constant from external data.`)}return Ut("verbose",()=>`[WebNN] registerMLConstant {dataType: ${o.dataType}, shape: ${o.shape}}} ${i?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),n.constant(o,u)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let r=this.sessionGraphInputs.get(e);return r?r.includes(t):!1}isInt64Supported(e){return!!this.mlContextBySessionId.get(e)?.opSupportLimits().input.dataTypes.includes("int64")}flush(){}}}),k_=qe(()=>{}),jm,yu,wu,Cx,kx,Vm,vg,Ex,_$,nq=qe(()=>{Us(),k_(),jm=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),yu=[],wu=e=>Math.ceil(Number(e)/16)*16,Cx=e=>{for(let t=0;t<yu.length;t++){let r=yu[t];if(e<=r)return r}return Math.ceil(e/16)*16},kx=1,Vm=()=>kx++,vg=async(e,t,r,n)=>{let o=wu(r),s=e.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let i=e.getCommandEncoder();e.endComputePass(),i.copyBufferToBuffer(t,0,s,0,o),e.flush(),await s.mapAsync(GPUMapMode.READ);let a=s.getMappedRange();if(n){let l=n();return l.set(new Uint8Array(a,0,r)),l}else return new Uint8Array(a.slice(0,r))}finally{s.destroy()}},Ex=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of jm)yu.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let r=t.buffer,n=t.byteOffset,o=t.byteLength,s=wu(o),i=this.storageCache.get(e);if(!i)throw new Error("gpu data for uploading does not exist");if(Number(i.originalSize)!==o)throw new Error(`inconsistent data size. gpu data size=${i.originalSize}, data size=${o}`);let a=this.backend.device.createBuffer({mappedAtCreation:!0,size:s,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),l=a.getMappedRange();new Uint8Array(l).set(new Uint8Array(r,n,o)),a.unmap();let c=this.backend.device.createCommandEncoder();c.copyBufferToBuffer(a,0,i.gpuData.buffer,0,s),this.backend.device.queue.submit([c.finish()]),a.destroy(),Ut("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let o=wu(r.originalSize),s=this.backend.getCommandEncoder();this.backend.endComputePass(),s.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,o)}registerExternalBuffer(e,t,r){let n;if(r){if(n=r[0],e===r[1])return Ut("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, buffer is the same, skip.`),n;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else n=Vm();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),Ut("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, registered.`),n}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),Ut("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let r=Cx(e),n,o=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,s=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(o||s){let a=(o?this.freeBuffers:this.freeUniformBuffers).get(r);a?a.length>0?n=a.pop():n=this.backend.device.createBuffer({size:r,usage:t}):n=this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});let i={id:Vm(),type:0,buffer:n};return this.storageCache.set(i.id,{gpuData:i,originalSize:Number(e)}),Ut("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${i.id}`),i}get(e){return this.storageCache.get(e)?.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,r=this.storageCache.get(t);if(!r){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return Ut("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(e,t){let r=this.storageCache.get(Number(e));if(!r)throw new Error("data does not exist");await vg(this.backend,r.gpuData.buffer,r.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=jm.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let r=this.freeBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let r=this.freeUniformBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(r=>{r.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(Ut("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(r=>{r.gpuData.buffer.destroy()}),this.storageCache=new Map)}},_$=(...e)=>new Ex(...e)}),Px,er,Kr=qe(()=>{Px=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},er=e=>new Px(e)}),el,Mu,bn,Fn,mt,Wr,yg,ja,hi,ft,jl,De,ut,b$,E_,$x,v$,At=qe(()=>{xt(),St(),el=64,Mu=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},bn=(e,t=1)=>{let r=Mu(e,t);return typeof r=="string"?r:r[0]},Fn=(e,t=1)=>{let r=Mu(e,t);return typeof r=="string"?r:r[1]},mt=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:Oe.computeStrides(r)})}),t},Wr=e=>e%4===0?4:e%2===0?2:1,yg=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,ja=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,hi=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,ft=(e,t,r,n)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?n==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:n==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,jl=(e,t,r,n,o)=>{let s=typeof r=="number",i=s?r:r.length,a=[...new Array(i).keys()],l=i<2?"u32":i<=4?`vec${i}<u32>`:`array<u32, ${i}>`,c=Mu(t,o),u=typeof c=="string"?c:c[1],d=typeof c=="string"?c:c[0],f={indices:l,value:u,storage:d,tensor:t},p=W=>typeof W=="string"?W:`${W}u`,m={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},b=s?"uniforms.":"",E=`${b}${e}_shape`,h=`${b}${e}_strides`,_="";for(let W=0;W<i-1;W++)_+=`
    let dim${W} = current / ${ft(h,W,i)};
    let rest${W} = current % ${ft(h,W,i)};
    indices[${W}] = dim${W};
    current = rest${W};
    `;_+=`indices[${i-1}] = current;`;let T=i<2?"":`
  fn o2i_${e}(offset: u32) -> ${f.indices} {
    var indices: ${f.indices};
    var current = offset;
    ${_}
    return indices;
  }`,g=W=>(m.offsetToIndices=!0,i<2?W:`o2i_${e}(${W})`),M=[];if(i>=2)for(let W=i-1;W>=0;W--)M.push(`${ft(h,W,i)} * (indices[${W}])`);let x=i<2?"":`
  fn i2o_${e}(indices: ${f.indices}) -> u32 {
    return ${M.join("+")};
  }`,w=W=>(m.indicesToOffset=!0,i<2?W:`i2o_${e}(${W})`),$=(...W)=>i===0?"0u":`${f.indices}(${W.map(p).join(",")})`,O=(W,R)=>i<2?`${W}`:`${ft(W,R,i)}`,L=(W,R,J)=>i<2?`${W}=${J};`:`${ft(W,R,i)}=${J};`,G={},j=(W,R)=>{m.broadcastedIndicesToOffset=!0;let J=`${R.name}broadcastedIndicesTo${e}Offset`;if(J in G)return`${J}(${W})`;let U=[];for(let be=i-1;be>=0;be--){let Le=R.indicesGet("outputIndices",be+R.rank-i);U.push(`${O(h,be)} * (${Le} % ${O(E,be)})`)}return G[J]=`fn ${J}(outputIndices: ${R.type.indices}) -> u32 {
             return ${U.length>0?U.join("+"):"0u"};
           }`,`${J}(${W})`},D=(W,R)=>(()=>{if(f.storage===f.value)return`${e}[${W}]=${R};`;if(f.storage==="vec2<u32>"&&f.value==="i32")return`${e}[${W}]=vec2<u32>(u32(${R}), select(0u, 0xFFFFFFFFu, ${R} < 0));`;if(f.storage==="vec2<u32>"&&f.value==="u32")return`${e}[${W}]=vec2<u32>(u32(${R}), 0u);`;if(f.storage==="u32"&&f.value==="vec4<bool>")return`${e}[${W}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${R}));`;throw new Error(`not supported combination of storage type ${f.storage} and value type ${f.value} yet`)})(),re=W=>(()=>{if(f.storage===f.value)return`${e}[${W}]`;if(f.storage==="vec2<u32>"&&f.value==="i32")return`i32(${e}[${W}].x)`;if(f.storage==="vec2<u32>"&&f.value==="u32")return`u32(${e}[${W}].x)`;if(f.storage==="u32"&&f.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${W}] & 0xFFu), bool(${e}[${W}] & 0xFF00u), bool(${e}[${W}] & 0xFF0000u), bool(${e}[${W}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${f.storage} and value type ${f.value} yet`)})(),Z=i<2?"":`
  fn get_${e}ByIndices(indices: ${f.indices}) -> ${u} {
    return ${re(`i2o_${e}(indices)`)};
  }`,te=i<2?"":(()=>{let W=a.map(J=>`d${J}: u32`).join(", "),R=a.map(J=>`d${J}`).join(", ");return`
  fn get_${e}(${W}) -> ${u} {
    return get_${e}ByIndices(${$(R)});
  }`})(),ie=(...W)=>{if(W.length!==i)throw new Error(`indices length must be ${i}`);let R=W.map(p).join(",");return i===0?re("0u"):i===1?re(R[0]):(m.get=!0,m.getByIndices=!0,m.indicesToOffset=!0,`get_${e}(${R})`)},ne=W=>i<2?re(W):(m.getByIndices=!0,m.indicesToOffset=!0,`get_${e}ByIndices(${W})`),ve=i<2?"":`
  fn set_${e}ByIndices(indices: ${f.indices}, value: ${u}) {
    ${D(`i2o_${e}(indices)`,"value")}
  }`,Me=i<2?"":(()=>{let W=a.map(J=>`d${J}: u32`).join(", "),R=a.map(J=>`d${J}`).join(", ");return`
  fn set_${e}(${W}, value: ${u}) {
    set_${e}ByIndices(${$(R)}, value);
  }`})();return{impl:()=>{let W=[],R=!1;return m.offsetToIndices&&(W.push(T),R=!0),m.indicesToOffset&&(W.push(x),R=!0),m.broadcastedIndicesToOffset&&(Object.values(G).forEach(J=>W.push(J)),R=!0),m.set&&(W.push(Me),R=!0),m.setByIndices&&(W.push(ve),R=!0),m.get&&(W.push(te),R=!0),m.getByIndices&&(W.push(Z),R=!0),!s&&R&&W.unshift(`const ${E} = ${f.indices}(${r.join(",")});`,`const ${h} = ${f.indices}(${Oe.computeStrides(r).join(",")});`),W.join(`
`)},type:f,offsetToIndices:g,indicesToOffset:w,broadcastedIndicesToOffset:j,indices:$,indicesGet:O,indicesSet:L,set:(...W)=>{if(W.length!==i+1)throw new Error(`indices length must be ${i}`);let R=W[i];if(typeof R!="string")throw new Error("value must be string");let J=W.slice(0,i).map(p).join(",");return i===0?D("0u",R):i===1?D(J[0],R):(m.set=!0,m.setByIndices=!0,m.indicesToOffset=!0,`set_${e}(${J}, ${R})`)},setByOffset:D,setByIndices:(W,R)=>i<2?D(W,R):(m.setByIndices=!0,m.indicesToOffset=!0,`set_${e}ByIndices(${W}, ${R});`),get:ie,getByOffset:re,getByIndices:ne,usage:n,name:e,strides:h,shape:E,rank:i}},De=(e,t,r,n=1)=>jl(e,t,r,"input",n),ut=(e,t,r,n=1)=>jl(e,t,r,"output",n),b$=(e,t,r)=>jl(e,t,r,"atomicOutput",1),E_=(e,t,r,n=1)=>jl(e,t,r,"internal",n),$x=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=el){let t=typeof e=="number"?e:e[0],r=typeof e=="number"?1:e[1],n=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||r>this.limits.maxComputeWorkgroupSizeY||n>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*r*n>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let o=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,s=o?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,i=o?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*r*n}u + local_idx;`;return`@compute @workgroup_size(${t}, ${r}, ${n})
  fn main(${s}) {
    ${i}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let r=e.usage==="input"?"read":"read_write",n=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${r}> ${e.name}: array<${n}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,r=1){return this.uniforms.push({name:e,type:t,length:r}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:r,length:n}of this.uniforms)if(n&&n>4)r==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${r}>, ${Math.ceil(n/8)}>`):e.push(`${t}:array<vec4<${r}>, ${Math.ceil(n/4)}>`);else{let o=n==null||n===1?r:`vec${n}<${r}>`;e.push(`${t}:${o}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},v$=(e,t)=>new $x(e,t)}),Sx,Wm,Ix,Ax,Ox,Lx,uo,y$,w$,Mi=qe(()=>{xt(),St(),Kr(),At(),Sx=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},Wm=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),Ix=(e,t)=>Oe.sortBasedOnPerm(e,Wm(e.length,t)),Ax=(e,t,r,n)=>{let o=`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`;for(let s=0;s<t;++s)o+=`a[${e[s]}]=i[${s}];`;return o+="return a;}"},Ox=(e,t)=>{let r=[],n=[];for(let o=0;o<e.length;++o)e[o]!==1&&r.push(e[o]),e[t[o]]!==1&&n.push(t[o]);return{newShape:r,newPerm:n}},Lx=(e,t)=>{let r=0;for(let n=0;n<e.length;++n)if(t[e[n]]!==1){if(e[n]<r)return!1;r=e[n]}return!0},uo=(e,t)=>{let r=e.dataType,n=e.dims.length,o=Wm(n,t),s=Ix(e.dims,o),i=e.dims,a=s,l=n<2||Lx(o,e.dims),c;if(l)return c=m=>{let b=De("input",r,i,4),E=ut("output",r,a,4);return`
  ${m.registerUniform("output_size","u32").declareVariables(b,E)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let m=Oe.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64/4)},programUniforms:[{type:12,data:Math.ceil(m/4)}]}},getShaderSource:c};let{newShape:u,newPerm:d}=Ox(e.dims,o),f=Oe.areEqual(d,[2,3,1]),p=Oe.areEqual(d,[3,1,2]);if(u.length===2||f||p){i=f?[u[0],u[1]*u[2]]:p?[u[0]*u[1],u[2]]:u,a=[i[1],i[0]];let m=16;return c=b=>{let E=De("a",r,i.length),h=ut("output",r,a.length);return`
  ${b.registerUniform("output_size","u32").declareVariables(E,h)}
  var<workgroup> tile : array<array<${h.type.value}, ${m+1}>, ${m}>;
  ${b.mainStart([m,m,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${m} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${m}u + local_id.x;
    let input_row = workgroup_id_x * ${m}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${E.getByIndices(`${E.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${m}u + local_id.x;
    let output_row = workgroup_id_y * ${m}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${h.setByIndices(`${h.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let b=Oe.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(a[1]/m),y:Math.ceil(a[0]/m)},programUniforms:[{type:12,data:b},...mt(i,a)]}},getShaderSource:c}}return c=m=>{let b=De("a",r,i.length),E=ut("output",r,a.length);return`
  ${m.registerUniform("output_size","u32").declareVariables(b,E)}

  ${Ax(o,n,b,E)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${E.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${E.setByOffset("global_idx",b.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let m=Oe.size(s);return{outputs:[{dims:s,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},...mt(i,a)]}},getShaderSource:c}},y$=(e,t)=>{Sx(e.inputs,t.perm),e.compute(uo(e.inputs[0],t.perm))},w$=e=>er({perm:e.perm})}),Fx,Dx,Bx,Rx,zx,Nx,jx,Vx,Wx,Ux,Bo,M$,x$,T$,C$,k$,E$,P$,$$,S$,I$,oq=qe(()=>{xt(),St(),At(),P_(),Mi(),Fx={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Dx={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Bx={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Rx={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},zx=(e,t)=>{let r=[];for(let n=t-e;n<t;++n)r.push(n);return r},Nx=(e,t)=>{let r=[],n=e.length;for(let s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);let o=t.map(s=>e[s]);return[r,o]},jx=(e,t)=>{let r=e.length+t.length,n=[],o=0;for(let s=0;s<r;s++)t.indexOf(s)===-1?n.push(e[o++]):n.push(1);return n},Vx=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Wx=(e,t)=>{let r=[];if(!Vx(e,t)){for(let n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);e.forEach(n=>r.push(n))}return r},Ux=(e,t,r,n,o,s,i)=>{let a=r[0].dims,l=Oe.size(s),c=Oe.size(i),u=De("_A",r[0].dataType,a),d=ut("output",o,s),f=64;l===1&&(f=256);let p=`
          var<workgroup> aBestValues : array<f32, ${f}>;
       `,m=b=>`
        ${b.registerUniform("reduceSize","u32").declareVariables(u,d)}
        ${p}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${b.mainStart(f)}

          let outputIndex = global_idx / ${f};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${Bx[n]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${f}) {
           let candidate = f32(${u.getByOffset("offset + k")});
           bestValue = ${Fx[n]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${f}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Dx[n]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${d.setByOffset("outputIndex",`${n==="mean"?`${d.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${d.type.storage}(${Rx[n]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${f}`,inputDependencies:["type"]},getShaderSource:m,getRunData:()=>({outputs:[{dims:s,dataType:o}],dispatchGroup:{x:l},programUniforms:[{type:12,data:c}]})}},Bo=(e,t,r,n)=>{let o=e.inputs.length===1?r:wg(e.inputs,r),s=o.axes;s.length===0&&!o.noopWithEmptyAxes&&(s=e.inputs[0].dims.map((p,m)=>m));let i=Oe.normalizeAxes(s,e.inputs[0].dims.length),a=i,l=e.inputs[0],c=Wx(a,e.inputs[0].dims.length);c.length>0&&(l=e.compute(uo(e.inputs[0],c),{inputs:[0],outputs:[-1]})[0],a=zx(a.length,l.dims.length));let[u,d]=Nx(l.dims,a),f=u;o.keepDims&&(f=jx(u,i)),e.compute(Ux(t,o.cacheKey,[l],n,e.inputs[0].dataType,f,d),{inputs:[l]})},M$=(e,t)=>{Bo(e,"ReduceMeanShared",t,"mean")},x$=(e,t)=>{Bo(e,"ReduceL1Shared",t,"l1")},T$=(e,t)=>{Bo(e,"ReduceL2Shared",t,"l2")},C$=(e,t)=>{Bo(e,"ReduceLogSumExpShared",t,"logSumExp")},k$=(e,t)=>{Bo(e,"ReduceMaxShared",t,"max")},E$=(e,t)=>{Bo(e,"ReduceMinShared",t,"min")},P$=(e,t)=>{Bo(e,"ReduceProdShared",t,"prod")},$$=(e,t)=>{Bo(e,"ReduceSumShared",t,"sum")},S$=(e,t)=>{Bo(e,"ReduceSumSquareShared",t,"sumSquare")},I$=(e,t)=>{Bo(e,"ReduceLogSumShared",t,"logSum")}}),Ro,Gx,of,wg,zo,Hx,Kx,qx,Xx,Qx,Yx,Jx,Zx,eT,tT,No,A$,O$,L$,F$,D$,B$,R$,z$,N$,j$,P_=qe(()=>{xt(),St(),Kr(),At(),oq(),Ro=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Gx=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],of=(e,t,r,n,o,s,i=!1,a=!1)=>{let l=[],c=r[0].dims,u=c.length,d=Oe.normalizeAxes(o,u),f=!a&&d.length===0;c.forEach((b,E)=>{f||d.indexOf(E)>=0?i&&l.push(1):l.push(b)});let p=l.length,m=Oe.size(l);return{name:e,shaderCache:t,getShaderSource:b=>{let E=[],h=De("_A",r[0].dataType,u),_=ut("output",s,p),T=n(h,_,d),g=T[2];for(let M=0,x=0;M<u;M++)f||d.indexOf(M)>=0?(i&&x++,g=`for(var j${M}: u32 = 0; j${M} < ${c[M]}; j${M}++) {
                  ${T[2].includes("last_index")?`let last_index = j${M};`:""}
                  ${h.indicesSet("input_indices",M,`j${M}`)}
                  ${g}
                }`):(E.push(`${h.indicesSet("input_indices",M,_.indicesGet("output_indices",x))};`),x++);return`

        ${b.registerUniform("output_size","u32").declareVariables(h,_)}

        ${b.mainStart()}
          ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${h.type.indices};
          let output_indices = ${_.offsetToIndices("global_idx")};

          ${E.join(`
`)}
          ${T[0]}       // init ops for reduce max/min
          ${T[1]}
          ${g}
          ${T[3]}
          ${T.length===4?_.setByOffset("global_idx","value"):T.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:l,dataType:s}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},...mt(c,l)]})}},wg=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),er({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},zo=(e,t,r,n)=>{let o=e.inputs,s=o.length===1?r:wg(o,r);e.compute(of(t,{hint:s.cacheKey,inputDependencies:["rank"]},[o[0]],s.noopWithEmptyAxes&&s.axes.length===0?Gx:n,s.axes,o[0].dataType,s.keepDims,s.noopWithEmptyAxes),{inputs:[0]})},Hx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceLogSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,"value = log(value);"])},Kx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceL1",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${r.getByIndices("input_indices")});`,""])},qx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceL2",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Xx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceLogSumExp",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${r.getByIndices("input_indices")});`,"value = log(value);"])},Qx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceMax",t,(r,n,o)=>{let s=[];for(let i=0;i<r.rank;i++)(o.indexOf(i)>=0||o.length===0)&&s.push(r.indicesSet("input_indices",i,0));return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = max(value, ${r.getByIndices("input_indices")});`,""]})},Yx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceMean",t,(r,n,o)=>{let s=1;for(let i=0;i<r.rank;i++)(o.indexOf(i)>=0||o.length===0)&&(s*=e.inputs[0].dims[i]);return["var sum = f32(0);","",`sum += f32(${r.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${s});`]})},Jx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceMin",t,(r,n,o)=>{let s=[];for(let i=0;i<r.rank;i++)(o.indexOf(i)>=0||o.length===0)&&s.push(`input_indices[${i}] = 0;`);return[`${s.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = min(value, ${r.getByIndices("input_indices")});`,""]})},Zx=(e,t)=>{Ro(e.inputs),zo(e,"ReduceProd",t,(r,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${r.getByIndices("input_indices")};`,""])},eT=(e,t)=>{Ro(e.inputs),zo(e,"ReduceSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,""])},tT=(e,t)=>{Ro(e.inputs),zo(e,"ReduceSumSquare",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += t * t;`,""])},No=(e,t,r)=>{if(t.length===0)return r;let n=1,o=1;for(let s=0;s<t.length;s++)t.indexOf(s)===-1?n*=e[s]:o*=e[s];return o<32&&n>1024},A$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Yx(e,t):M$(e,t)},O$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kx(e,t):x$(e,t)},L$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?qx(e,t):T$(e,t)},F$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Xx(e,t):C$(e,t)},D$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Qx(e,t):k$(e,t)},B$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Jx(e,t):E$(e,t)},R$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Zx(e,t):P$(e,t)},z$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?eT(e,t):$$(e,t)},N$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?tT(e,t):S$(e,t)},j$=(e,t)=>{No(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hx(e,t):I$(e,t)}}),Um,V$,W$,Mg,sq=qe(()=>{xt(),Kr(),P_(),Um=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},V$=(e,t)=>{Um(e.inputs);let r=(n,o,s)=>{let i=[];for(let a=0;a<n.rank;a++)(s.indexOf(a)>=0||s.length===0)&&i.push(`input_indices[${a}] = 0;`);return[`${i.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",o.setByOffset("global_idx","best_index")]};e.compute(of("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},W$=(e,t)=>{Um(e.inputs);let r=(n,o,s)=>{let i=[];for(let a=0;a<n.rank;a++)(s.indexOf(a)>=0||s.length===0)&&i.push(`input_indices[${a}] = 0;`);return[`${i.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",o.setByOffset("global_idx","best_index")]};e.compute(of("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},Mg=e=>er(e)}),rT,xu,nT,oT,sT,rd,iT,U$,$_=qe(()=>{xt(),St(),k_(),At(),rT=(e,t)=>{let r=e[0],n=e[1],o=e[2],s=e[3],i=e[4],a=e[5];if(i&&a)throw new Error("Attention cannot have both past and attention_bias");if(r.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let l=r.dims[0],c=r.dims[1],u=r.dims[2];if(o.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(n.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==u)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(o.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let d=o.dims[0]/3,f=d,p=f;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let T of t.qkvHiddenSizes)if(T%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");d=t.qkvHiddenSizes[0],f=t.qkvHiddenSizes[1],p=t.qkvHiddenSizes[2]}let m=c;if(d!==f)throw new Error("qkv_hidden_sizes first element should be same as the second");if(o.dims[0]!==d+f+p)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let b=0;if(i){if(f!==p)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(i.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(i.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(i.dims[1]!==l)throw new Error('Input "past" second dimension must be batch_size');if(i.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(i.dims[4]!==f/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(b=i.dims[3])}let E=m+b,h=-1,_=0;if(s)throw new Error("Mask not supported");if(i)throw new Error("past is not supported");if(a){if(a.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(a.dims[0]!==l||a.dims[1]!==t.numHeads||a.dims[2]!==c||a.dims[3]!==E)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:l,sequenceLength:c,pastSequenceLength:b,kvSequenceLength:m,totalSequenceLength:E,maxSequenceLength:h,inputHiddenSize:u,hiddenSize:d,vHiddenSize:p,headSize:Math.floor(d/t.numHeads),vHeadSize:Math.floor(p/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:_,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},xu=(e,t,r)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e?.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${r?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,nT=(e,t,r,n,o,s,i,a)=>{let l=Wr(i?1:s),c=64,u=s/l;u<c&&(c=32);let d=Math.ceil(s/l/c),f=[{type:12,data:t},{type:12,data:r},{type:12,data:n},{type:12,data:o},{type:12,data:u},{type:12,data:d}],p=bn(e.dataType,l),m=Fn(1,l),b=["type"];i&&b.push("type"),a&&b.push("type");let E=h=>{let _=ut("x",e.dataType,e.dims,l),T=[_],g=i?De("seq_lens",i.dataType,i.dims):void 0;g&&T.push(g);let M=a?De("total_sequence_length_input",a.dataType,a.dims):void 0;M&&T.push(M);let x=Fn(e.dataType),w=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${c}>;
  var<workgroup> thread_sum: array<f32, ${c}>;
  ${h.registerUniforms(w).declareVariables(...T)}
  ${h.mainStart([c,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${xu(g,M,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${c}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${i?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${m}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${m}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(l){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${c}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${m}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${m}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(l){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${c}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${_.type.value}(${x}(1.0) / ${x}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${m}(x[offset + i]);
        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${i?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${_.type.value}(${x}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${c};${p};${l}`,inputDependencies:b},getShaderSource:E,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:o,z:t*r},programUniforms:f})}},oT=(e,t,r,n,o,s,i,a,l)=>{let c=i+s.kvSequenceLength,u=[s.batchSize,s.numHeads,s.sequenceLength,c],d=e>1&&n,f=s.kvNumHeads?s.kvNumHeads:s.numHeads,p=d?[s.batchSize,f,c,s.headSize]:void 0,m=s.nReps?s.nReps:1,b=s.scale===0?1/Math.sqrt(s.headSize):s.scale,E=Wr(s.headSize),h=s.headSize/E,_=12,T={x:Math.ceil(c/_),y:Math.ceil(s.sequenceLength/_),z:s.batchSize*s.numHeads},g=[{type:12,data:s.sequenceLength},{type:12,data:h},{type:12,data:c},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:1,data:b},{type:12,data:i},{type:12,data:s.kvSequenceLength},{type:12,data:m}],M=d&&n&&Oe.size(n.dims)>0,x=["type","type"];M&&x.push("type"),o&&x.push("type"),a&&x.push("type"),l&&x.push("type");let w=[{dims:u,dataType:t.dataType,gpuDataType:0}];d&&w.push({dims:p,dataType:t.dataType,gpuDataType:0});let $=O=>{let L=De("q",t.dataType,t.dims,E),G=De("key",r.dataType,r.dims,E),j=[L,G];if(M){let ve=De("past_key",n.dataType,n.dims,E);j.push(ve)}o&&j.push(De("attention_bias",o.dataType,o.dims));let D=a?De("seq_lens",a.dataType,a.dims):void 0;D&&j.push(D);let re=l?De("total_sequence_length_input",l.dataType,l.dims):void 0;re&&j.push(re);let Z=ut("output",t.dataType,u),te=[Z];d&&te.push(ut("present_key",t.dataType,p,E));let ie=Fn(1,E),ne=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${_}u;

  var<workgroup> tileQ: array<${L.type.storage}, ${_*_}>;
  var<workgroup> tileK: array<${L.type.storage}, ${_*_}>;
  ${O.registerUniforms(ne).declareVariables(...j,...te)}
  ${O.mainStart([_,_,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${m===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${m===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${xu(D,re,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${M&&d?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${d?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${ie}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${M&&d?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${d?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${ie}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(E){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${E}`)}})()};
        output[outputIdx] = ${Z.type.value} (sum * uniforms.alpha) + ${o?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${E};${o!==void 0};${n!==void 0};${e}`,inputDependencies:x},getRunData:()=>({outputs:w,dispatchGroup:T,programUniforms:g}),getShaderSource:$}},sT=(e,t,r,n,o,s,i=void 0,a=void 0)=>{let l=s+o.kvSequenceLength,c=o.nReps?o.nReps:1,u=o.vHiddenSize*c,d=e>1&&n,f=o.kvNumHeads?o.kvNumHeads:o.numHeads,p=d?[o.batchSize,f,l,o.headSize]:void 0,m=[o.batchSize,o.sequenceLength,u],b=12,E={x:Math.ceil(o.vHeadSize/b),y:Math.ceil(o.sequenceLength/b),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:l},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.headSize},{type:12,data:u},{type:12,data:s},{type:12,data:o.kvSequenceLength},{type:12,data:c}],_=d&&n&&Oe.size(n.dims)>0,T=["type","type"];_&&T.push("type"),i&&T.push("type"),a&&T.push("type");let g=[{dims:m,dataType:t.dataType,gpuDataType:0}];d&&g.push({dims:p,dataType:t.dataType,gpuDataType:0});let M=x=>{let w=De("probs",t.dataType,t.dims),$=De("v",r.dataType,r.dims),O=[w,$];_&&O.push(De("past_value",n.dataType,n.dims));let L=i?De("seq_lens",i.dataType,i.dims):void 0;i&&O.push(L);let G=a?De("total_sequence_length_input",a.dataType,a.dims):void 0;a&&O.push(G);let j=[ut("output",t.dataType,m)];d&&j.push(ut("present_value",t.dataType,p));let D=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${b}u;
  var<workgroup> tileQ: array<${w.type.value}, ${b*b}>;
  var<workgroup> tileV: array<${w.type.value}, ${b*b}>;
  ${x.registerUniforms(D).declareVariables(...O,...j)}
  ${x.mainStart([b,b,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${c===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${c===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${xu(L,G,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${_&&d?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${d?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${w.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${_&&d?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${d?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${n!==void 0};${e}`,inputDependencies:T},getRunData:()=>({outputs:g,dispatchGroup:E,programUniforms:h}),getShaderSource:M}},rd=(e,t,r,n,o,s,i,a,l,c,u=void 0,d=void 0)=>{let f=Math.min(e.outputCount,1+(i?1:0)+(a?1:0)),p=f>1?c.pastSequenceLength:0,m=p+c.kvSequenceLength,b=l&&Oe.size(l.dims)>0?l:void 0,E=[t,r];f>1&&i&&Oe.size(i.dims)>0&&E.push(i),b&&E.push(b),u&&E.push(u),d&&E.push(d);let h=e.compute(oT(f,t,r,i,b,c,p,u,d),{inputs:E,outputs:f>1?[-1,1]:[-1]})[0];e.compute(nT(h,c.batchSize,c.numHeads,p,c.sequenceLength,m,u,d),{inputs:u&&d?[h,u,d]:[h],outputs:[]});let _=[h,n];f>1&&a&&Oe.size(a.dims)>0&&_.push(a),u&&_.push(u),d&&_.push(d),e.compute(sT(f,h,n,a,c,p,u,d),{inputs:_,outputs:f>1?[0,2]:[0]})},iT=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,o=t.inputHiddenSize,s=t.headSize,i=12,a={x:Math.ceil(t.headSize/i),y:Math.ceil(t.sequenceLength/i),z:t.batchSize*t.numHeads},l=[e.inputs[0],e.inputs[1],e.inputs[2]],c=[{type:12,data:n},{type:12,data:o},{type:12,data:s},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],u=d=>{let f=ut("output_q",l[0].dataType,r),p=ut("output_k",l[0].dataType,r),m=ut("output_v",l[0].dataType,r),b=De("input",l[0].dataType,l[0].dims),E=De("weight",l[1].dataType,l[1].dims),h=De("bias",l[2].dataType,l[2].dims),_=b.type.storage,T=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${i}u;
  var<workgroup> tileInput: array<${_}, ${i*i}>;
  var<workgroup> tileWeightQ: array<${_}, ${i*i}>;
  var<workgroup> tileWeightK: array<${_}, ${i*i}>;
  var<workgroup> tileWeightV: array<${_}, ${i*i}>;
  ${d.registerUniforms(T).declareVariables(b,E,h,f,p,m)}
  ${d.mainStart([i,i,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${_}(0);
    var valueK = ${_}(0);
    var valueV = ${_}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:a,programUniforms:c}),getShaderSource:u},{inputs:l,outputs:[-1,-1,-1]})},U$=(e,t)=>{let r=rT(e.inputs,t),[n,o,s]=iT(e,r);return rd(e,n,o,s,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r)}}),aT,lT,cT,G$,iq=qe(()=>{Zo(),xt(),St(),Kr(),At(),aT=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(n,o,s)=>{let i=o.length;if(i!==n.length)throw new Error(`${s}: num dimensions != ${i}`);o.forEach((a,l)=>{if(a!==n[l])throw new Error(`${s}: dim[${l}] do not match`)})};if(e[0].dims.length>1){let n=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},lT=(e,t)=>{let{epsilon:r,spatial:n,format:o}=t,s=e[0].dims,i=n?Wr(s[s.length-1]):1,a=o==="NHWC"&&s.length>1?i:1,l=Oe.size(s)/i,c=n,u=c?s.length:s,d=De("x",e[0].dataType,e[0].dims,i),f=De("scale",e[1].dataType,e[1].dims,a),p=De("bias",e[2].dataType,e[2].dims,a),m=De("inputMean",e[3].dataType,e[3].dims,a),b=De("inputVar",e[4].dataType,e[4].dims,a),E=ut("y",e[0].dataType,u,i),h=()=>{let T="";if(n)T=`let cOffset = ${s.length===1?"0u":o==="NHWC"?`outputIndices[${s.length-1}] / ${i}`:"outputIndices[1]"};`;else if(o==="NCHW")T=`
            ${E.indicesSet("outputIndices","0","0")}
            let cOffset = ${E.indicesToOffset("outputIndices")};`;else{T=`var cIndices = ${f.type.indices}(0);
                       cIndices[0] = outputIndices[${s.length-1}];`;for(let g=1;g<f.rank;g++)T+=`cIndices[${g}] = outputIndices[${g}];`;T+=`let cOffset = ${f.indicesToOffset("cIndices")};`}return T},_=T=>`
  const epsilon = ${r};
  ${T.registerUniform("outputSize","u32").declareVariables(d,f,p,m,b,E)}
  ${T.mainStart()}
  ${T.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${E.offsetToIndices(`global_idx * ${i}`)};
    ${h()}
    let scale = ${f.getByOffset("cOffset")};
    let bias = ${p.getByOffset("cOffset")};
    let inputMean = ${m.getByOffset("cOffset")};
    let inputVar = ${b.getByOffset("cOffset")};
    let x = ${d.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${E.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${n}_${i}`,inputDependencies:c?["rank","type","type","type","type"]:void 0},getShaderSource:_,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c?[{type:12,data:l},...mt(s)]:[{type:12,data:l}]})}},cT=e=>er(e),G$=(e,t)=>{let{inputs:r,outputCount:n}=e,o=cT({...t,outputCount:n});if(Pr.webgpu.validateInputContent&&aT(r,o),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(lT(r,o))}}),dT,uT,H$,aq=qe(()=>{St(),At(),dT=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},uT=e=>{let t=e[0].dims,r=e[0].dims[2],n=Oe.size(t)/4,o=e[0].dataType,s=De("input",o,t,4),i=De("bias",o,[r],4),a=De("residual",o,t,4),l=ut("output",o,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}}),getShaderSource:c=>`
  const channels = ${r}u / 4;
  ${c.declareVariables(s,i,a,l)}

  ${c.mainStart()}
    ${c.guardAgainstOutOfBoundsWorkgroupSizes(n)}
    let value = ${s.getByOffset("global_idx")}
      + ${i.getByOffset("global_idx % channels")} + ${a.getByOffset("global_idx")};
    ${l.setByOffset("global_idx","value")}
  }`}},H$=e=>{dT(e.inputs),e.compute(uT(e.inputs))}}),fT,Qt,K$,q$,X$,Q$,Y$,J$,Z$,eS,tS,pT,rS,nS,oS,sS,rc,iS,Ru,aS,lS,cS,dS,uS,fS,pS,mS,hS,gS,_S,bS,vS,yS,wS,MS,Gm,xS,xg,Tg,TS,CS,kS,mT,hT,ES,S_=qe(()=>{xt(),St(),Kr(),At(),fT=(e,t,r,n,o,s,i)=>{let a=Math.ceil(t/4),l="";typeof o=="string"?l=`${o}(a)`:l=o("a");let c=De("inputData",r,[a],4),u=ut("outputData",n,[a],4),d=[{name:"vec_size",type:"u32"}];return i&&d.push(...i),`
      ${e.registerUniforms(d).declareVariables(c,u)}

  ${s??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${c.getByOffset("global_idx")};
    ${u.setByOffset("global_idx",l)}
  }`},Qt=(e,t,r,n,o,s=e.dataType,i,a)=>{let l=[{type:12,data:Math.ceil(Oe.size(e.dims)/4)}];return i&&l.push(...i),{name:t,shaderCache:{hint:o,inputDependencies:["type"]},getShaderSource:c=>fT(c,Oe.size(e.dims),e.dataType,s,r,n,a),getRunData:c=>({outputs:[{dims:e.dims,dataType:s}],dispatchGroup:{x:Math.ceil(Oe.size(c[0].dims)/64/4)},programUniforms:l})}},K$=e=>{e.compute(Qt(e.inputs[0],"Abs","abs"))},q$=e=>{e.compute(Qt(e.inputs[0],"Acos","acos"))},X$=e=>{e.compute(Qt(e.inputs[0],"Acosh","acosh"))},Q$=e=>{e.compute(Qt(e.inputs[0],"Asin","asin"))},Y$=e=>{e.compute(Qt(e.inputs[0],"Asinh","asinh"))},J$=e=>{e.compute(Qt(e.inputs[0],"Atan","atan"))},Z$=e=>{e.compute(Qt(e.inputs[0],"Atanh","atanh"))},eS=e=>er(e),tS=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(Qt(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},pT=e=>{let t,r,n=e.length>=2&&e[1].data!==0,o=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=n?e[1].getFloat32Array()[0]:-34028234663852886e22,r=o?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=n?e[1].getUint16Array()[0]:64511,r=o?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return er({min:t,max:r})},rS=(e,t)=>{let r=t||pT(e.inputs),n=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"Clip",o=>`clamp(${o}, vec4<${n}>(uniforms.min), vec4<${n}>(uniforms.max))`,void 0,r.cacheKey,void 0,[{type:e.inputs[0].dataType,data:r.min},{type:e.inputs[0].dataType,data:r.max}],[{name:"min",type:n},{name:"max",type:n}]),{inputs:[0]})},nS=e=>{e.compute(Qt(e.inputs[0],"Ceil","ceil"))},oS=e=>{e.compute(Qt(e.inputs[0],"Cos","cos"))},sS=e=>{e.compute(Qt(e.inputs[0],"Cosh","cosh"))},rc=e=>er(e),iS=(e,t)=>{let r=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"Elu",n=>`elu_vf32(${n})`,`
  const elu_alpha_ = ${r}(${t.alpha});

  fn elu_f32(a: ${r}) -> ${r} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},Ru=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,aS=e=>{let t=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,Ru(t)))},lS=e=>{e.compute(Qt(e.inputs[0],"Exp","exp"))},cS=e=>{e.compute(Qt(e.inputs[0],"Floor","floor"))},dS=e=>{let t=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,Ru(t)))},uS=(e,t)=>{let r=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"LeakyRelu",n=>`select(leaky_relu_alpha_ * ${n}, ${n}, ${n} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},fS=e=>{e.compute(Qt(e.inputs[0],"Not",t=>`!${t}`))},pS=e=>{e.compute(Qt(e.inputs[0],"Neg",t=>`-${t}`))},mS=e=>{e.compute(Qt(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},hS=e=>{let t=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},gS=e=>{e.compute(Qt(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},_S=e=>er(e),bS=(e,t)=>{let r=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"HardSigmoid",n=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${n} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},vS=e=>{e.compute(Qt(e.inputs[0],"Sin","sin"))},yS=e=>{e.compute(Qt(e.inputs[0],"Sinh","sinh"))},wS=e=>{e.compute(Qt(e.inputs[0],"Sqrt","sqrt"))},MS=e=>{e.compute(Qt(e.inputs[0],"Tan","tan"))},Gm=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,xS=e=>{e.compute(Qt(e.inputs[0],"Tanh",Gm))},xg=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${Gm("v")};
}
`,Tg=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,TS=e=>{let t=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"FastGelu",Tg,xg(t),void 0,e.inputs[0].dataType))},CS=(e,t)=>{let r=Fn(e.inputs[0].dataType);return e.compute(Qt(e.inputs[0],"ThresholdedRelu",n=>`select(vec4<${r}>(0.0), ${n}, ${n} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},kS=e=>{e.compute(Qt(e.inputs[0],"Log","log"))},mT=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,hT=e=>`quick_gelu_impl(${e})`,ES=(e,t)=>{let r=Fn(e.inputs[0].dataType);e.compute(Qt(e.inputs[0],"QuickGelu",hT,mT(r,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),gT,_T,PS,lq=qe(()=>{St(),At(),S_(),gT=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},_T=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=De("input",e[0].dataType,e[0].dims,4),n=De("bias",e[0].dataType,[e[0].dims[2]],4),o=ut("output",e[0].dataType,t,4),s=Oe.size(t)/4,i=bn(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)}}),getShaderSource:a=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${a.declareVariables(r,n,o)}

  ${Ru(i)}

  ${a.mainStart()}
    ${a.guardAgainstOutOfBoundsWorkgroupSizes(s)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${o.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},PS=e=>{gT(e.inputs),e.compute(_T(e.inputs))}}),bT,vT,jo,$S,SS,IS,AS,OS,LS,FS,DS,BS,RS,cq=qe(()=>{xt(),St(),At(),bT=(e,t,r,n,o,s,i,a,l,c,u,d)=>{let f,p;typeof a=="string"?f=p=(_,T)=>`${a}((${_}),(${T}))`:typeof a=="function"?f=p=a:(f=a.scalar,p=a.vector);let m=ut("outputData",u,n.length,4),b=De("aData",l,t.length,4),E=De("bData",c,r.length,4),h;if(o)if(s){let _=Oe.size(t)===1,T=Oe.size(r)===1,g=t.length>0&&t[t.length-1]%4===0,M=r.length>0&&r[r.length-1]%4===0;_||T?h=m.setByOffset("global_idx",p(_?`${b.type.value}(${b.getByOffset("0")}.x)`:b.getByOffset("global_idx"),T?`${E.type.value}(${E.getByOffset("0")}.x)`:E.getByOffset("global_idx"))):h=`
            let outputIndices = ${m.offsetToIndices("global_idx * 4u")};
            let offsetA = ${b.broadcastedIndicesToOffset("outputIndices",m)};
            let offsetB = ${E.broadcastedIndicesToOffset("outputIndices",m)};
            ${m.setByOffset("global_idx",p(i||g?b.getByOffset("offsetA / 4u"):`${b.type.value}(${b.getByOffset("offsetA / 4u")}[offsetA % 4u])`,i||M?E.getByOffset("offsetB / 4u"):`${E.type.value}(${E.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else h=m.setByOffset("global_idx",p(b.getByOffset("global_idx"),E.getByOffset("global_idx")));else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let _=(T,g,M="")=>{let x=`aData[indexA${g}][componentA${g}]`,w=`bData[indexB${g}][componentB${g}]`;return`
            let outputIndices${g} = ${m.offsetToIndices(`global_idx * 4u + ${g}u`)};
            let offsetA${g} = ${b.broadcastedIndicesToOffset(`outputIndices${g}`,m)};
            let offsetB${g} = ${E.broadcastedIndicesToOffset(`outputIndices${g}`,m)};
            let indexA${g} = offsetA${g} / 4u;
            let indexB${g} = offsetB${g} / 4u;
            let componentA${g} = offsetA${g} % 4u;
            let componentB${g} = offsetB${g} % 4u;
            ${T}[${g}] = ${M}(${f(x,w)});
          `};u===9?h=`
            var data = vec4<u32>(0);
            ${_("data",0,"u32")}
            ${_("data",1,"u32")}
            ${_("data",2,"u32")}
            ${_("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`
            ${_("outputData[global_idx]",0)}
            ${_("outputData[global_idx]",1)}
            ${_("outputData[global_idx]",2)}
            ${_("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(b,E,m)}

        ${d??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${h}
      }`},vT=(e,t,r,n,o,s,i=r.dataType)=>{let a=r.dims.map(b=>Number(b)??1),l=n.dims.map(b=>Number(b)??1),c=!Oe.areEqual(a,l),u=a,d=Oe.size(a),f=!1,p=!1,m=[c];if(c){let b=Za.calcShape(a,l,!1);if(!b)throw new Error("Can't perform binary op on the given tensors");u=b.slice(),d=Oe.size(u);let E=Oe.size(a)===1,h=Oe.size(l)===1,_=a.length>0&&a[a.length-1]%4===0,T=l.length>0&&l[l.length-1]%4===0;m.push(E),m.push(h),m.push(_),m.push(T);let g=1;for(let M=1;M<u.length;M++){let x=a[a.length-M],w=l[l.length-M];if(x===w)g*=x;else break}g%4===0?(p=!0,f=!0):(E||h||_||T)&&(f=!0)}else f=!0;return m.push(f),{name:e,shaderCache:{hint:t+m.map(b=>b.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:b=>bT(b,a,l,u,f,c,p,o,r.dataType,n.dataType,i,s),getRunData:()=>({outputs:[{dims:u,dataType:i}],dispatchGroup:{x:Math.ceil(d/64/4)},programUniforms:[{type:12,data:Math.ceil(Oe.size(u)/4)},...mt(a,l,u)]})}},jo=(e,t,r,n,o,s)=>{e.compute(vT(t,o??"",e.inputs[0],e.inputs[1],r,n,s))},$S=e=>{jo(e,"Add",(t,r)=>`${t}+${r}`)},SS=e=>{jo(e,"Div",(t,r)=>`${t}/${r}`)},IS=e=>{jo(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},AS=e=>{jo(e,"Mul",(t,r)=>`${t}*${r}`)},OS=e=>{let t=De("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;jo(e,"Pow",{scalar:(r,n)=>`pow_custom(${r},${n})`,vector:(r,n)=>`pow_vector_custom(${r},${n})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},LS=e=>{jo(e,"Sub",(t,r)=>`${t}-${r}`)},FS=e=>{jo(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},DS=e=>{jo(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},BS=e=>{jo(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},RS=e=>{jo(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}}),yT,wT,MT,xT,zS,NS,dq=qe(()=>{xt(),St(),Kr(),At(),yT=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,n=e[r],o=n.dataType,s=n.dims.length;e.forEach((i,a)=>{if(a!==r){if(i.dataType!==o)throw new Error("input tensors should be one type");if(i.dims.length!==s)throw new Error("input tensors should have the same shape");i.dims.forEach((l,c)=>{if(c!==t&&l!==n.dims[c])throw new Error("non concat dimensions must match")})}})},wT=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,MT=(e,t)=>{let r=e.length,n=[];for(let o=0;o<r;++o){let s=t.setByOffset("global_idx",e[o].getByIndices("indices"));r===1?n.push(s):o===0?n.push(`if (inputIndex == ${o}u) { ${s} }`):o===r-1?n.push(`else { ${s} }`):n.push(`else if (inputIndex == ${o}) { ${s} }`)}return n.join(`
`)},xT=(e,t,r,n)=>{let o=Oe.size(r),s=new Array(e.length),i=new Array(e.length),a=0,l=[],c=[],u=[{type:12,data:o}];for(let b=0;b<e.length;++b)a+=e[b].dims[t],s[b]=a,c.push(e[b].dims.length),i[b]=De(`input${b}`,n,c[b]),l.push("rank"),u.push({type:12,data:s[b]});for(let b=0;b<e.length;++b)u.push(...mt(e[b].dims));u.push(...mt(r));let d=ut("output",n,r.length),f=d.indicesGet("indices",t),p=Array.from(Array(s.length).keys()).map(b=>`uniforms.sizeInConcatAxis${b}`).join(","),m=b=>`

  ${(()=>{b.registerUniform("outputSize","u32");for(let E=0;E<e.length;E++)b.registerUniform(`sizeInConcatAxis${E}`,"u32");return b.declareVariables(...i,d)})()}

  ${wT(s.length,p)}

  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${d.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${f});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${s.length}u>(${p});
      ${f} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${MT(i,d)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:r,dataType:n}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:u}),getShaderSource:m}},zS=(e,t)=>{let r=e.inputs,n=r[0].dims,o=Oe.normalizeAxis(t.axis,n.length);yT(r,o);let s=n.slice();s[o]=r.reduce((a,l)=>a+(l.dims.length>o?l.dims[o]:0),0);let i=r.filter(a=>Oe.size(a.dims)>0);e.compute(xT(i,o,s,r[0].dataType),{inputs:i})},NS=e=>er({axis:e.axis})}),na,oa,sa,I_,ca=qe(()=>{xt(),St(),na=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},oa=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},sa=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},I_=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,n]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:n}}else if(t==="Clip"){let[r,n]=e?.activation_params||[f$,p$];return{activation:t,clipMax:n,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}}),Mn,jS,A_=qe(()=>{Mn=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},jS=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),VS,uq=qe(()=>{VS=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),gc,O_,L_=qe(()=>{xt(),St(),At(),ca(),gc=(e,t,r,n,o)=>{let s=n-r;return`
      ${Array.from({length:r}).map((i,a)=>`
      if (${ft(t.shape,a,t.rank)} != 1) {
        ${t.indicesSet(e,a,ft(o,a+s,n))}
      } else {
        ${t.indicesSet(e,a,0)}
      }`).join("")}
`},O_=(e,t,r,n,o=!1,s)=>{let i=e[0].dims,a=e[1].dims,l=i[i.length-2],c=a[a.length-1],u=i[i.length-1],d=Wr(c),f=Wr(u),p=Wr(l),m=Oe.size(r)/d/p,b=e.length>2,E=n?n.slice(0,-2):r.slice(0,-2),h=[Oe.size(E),l,c],_=[{type:12,data:m},{type:12,data:l},{type:12,data:c},{type:12,data:u}];oa(t,_),_.push(...mt(E,i,a)),b&&_.push(...mt(e[2].dims)),_.push(...mt(h));let T=g=>{let M=E_("batch_dims",e[0].dataType,E.length),x=De("a",e[0].dataType,i.length,f),w=De("b",e[1].dataType,a.length,d),$=ut("output",e[0].dataType,h.length,d),O=bn($.type.tensor),L=na(t,$.type.value,O),G=[x,w],j="";if(b){let Z=o?d:1;G.push(De("bias",e[2].dataType,e[2].dims.length,Z)),j=`${o?`value += bias[col / ${Z}];`:`value += ${$.type.value}(bias[row + i]);`}`}let D=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];sa(t,D);let re=()=>{let Z=`var a_data: ${x.type.value};`;for(let te=0;te<f;te++)Z+=`
              let b_data${te} = b[(b_offset + (k + ${te}) * uniforms.N + col) / ${d}];`;for(let te=0;te<p;te++){Z+=`a_data = a[(a_offset + (row + ${te}) * uniforms.K + k) / ${f}];`;for(let ie=0;ie<f;ie++)Z+=`
            values[${te}] = fma(${w.type.value}(a_data${f===1?"":`[${ie}]`}), b_data${ie}, values[${te}]);
`}return Z};return`
  ${g.registerUniforms(D).registerInternalVariables(M).declareVariables(...G,$)}
  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${d})) * ${d};
    var index1 = global_idx / (uniforms.N / ${d});
    let stride1 = uniforms.M / ${p};
    let row = (index1 % stride1) * ${p};
    let batch = index1 / stride1;

    ${r.length===2?"":`let batch_indices = ${M.offsetToIndices("batch")};`}

    var a_indices: ${x.type.indices};
    ${gc("a_indices",x,x.rank-2,M.rank,"batch_indices")}
    ${x.indicesSet("a_indices",x.rank-2,0)}
    ${x.indicesSet("a_indices",x.rank-1,0)}
    let a_offset = ${x.indicesToOffset("a_indices")};

    var b_indices: ${w.type.indices};
    ${gc("b_indices",w,w.rank-2,M.rank,"batch_indices")}
    ${w.indicesSet("b_indices",w.rank-2,0)}
    ${w.indicesSet("b_indices",w.rank-1,0)}
    let b_offset = ${w.indicesToOffset("b_indices")};
    var values: array<${$.type.value}, ${p}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${f}) {
      ${re()}
    }
    for (var i = 0u; i < ${p}u; i++) {
      var value = values[i];
      ${j}
      ${L}
      let cur_indices = ${$.type.indices}(batch, row + i, col);
      let offset = ${$.indicesToOffset("cur_indices")};
      ${$.setByOffset(`offset / ${d}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${f};${p};${o}`,inputDependencies:b?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:_}),getShaderSource:T}}}),TT,CT,Cg,Hm,kT,kg,ET,sf,F_=qe(()=>{xt(),St(),At(),ca(),L_(),A_(),TT=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,CT=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,Cg=(e,t,r="f32",n,o=!1,s=32,i=!1,a=32)=>{let l=t[1]*e[1],c=t[0]*e[0],u=o?l:s,d=o?s:l,f=u/t[0],p=s/t[1];if(!((o&&f===4&&e[1]===4||!o&&(f===3||f===4))&&u%t[0]===0&&s%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${o} is true, innerElementSize ${f} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${f} must be 3 or 4.
  tileAWidth ${u} must be divisible by workgroupSize[0]${t[0]}. tileInner ${s} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${f}<${r}>, ${u/f}>, ${d}>;
var<workgroup> mm_Bsub: array<array<vec4<${r}>, ${c/e[0]}>, ${s}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${f};
const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${i?"0":"i32(globalId.z)"};
  ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${l};

  let num_tiles = ${i?`${Math.ceil(a/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${i?`i32(globalId.z) * ${a}`:"0"};

  var acc: array<vec4<${r}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${p};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${TT(o,n)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${n?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${f===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${CT(o,f)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Hm=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,kT=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",kg=(e,t,r="f32",n,o=!1,s=32,i=!1,a=32,l=!1)=>{let c=e[1]*t[1],u=e[0]*t[0],d=o?c:s,f=o?s:c;if(!(f%t[1]===0&&d%t[0]===0&&s%t[1]===0))throw new Error(`tileAHight ${f} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}, tileInner ${s} must be divisible by workgroupSize[1]${t[1]}`);let p=f/t[1],m=d/t[0],b=s/t[1],E=l?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${c};
    let globalColStart = i32(workgroupId.x) * ${u};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${f}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {
          ${Hm(o,n)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${s}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${u}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${n?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${r}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${o?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${c};

let tileRowA = i32(localId.y) * ${p};
let tileColA = i32(localId.x) * ${m};
let tileRowB = i32(localId.y) * ${b};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${p}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${m}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Hm(o,n)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${b}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${n?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${r}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${kT(o)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${r}, ${d}>, ${f}>;
  var<workgroup> mm_Bsub : array<array<${r}, ${u}>, ${s}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${s};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${i?"0":"i32(globalId.z)"};
    ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${i?`${Math.ceil(a/s)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${i?`i32(globalId.z) * ${a}`:"0"};

    var acc : array<array<${r}, colPerThread>, rowPerThread>;
    ${E}
  }
`},ET=(e,t,r,n,o=!1)=>{let[s,i,a,l]=n,c=bn(n[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Mn(e,c)} {
      var value = ${Mn(e,c)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${i.type.indices};
        ${gc("aIndices",i,i.rank-2,s.rank,"batchIndices")}
        ${i.indicesSet("aIndices",i.rank-2,"u32(row)")}
        ${i.indicesSet("aIndices",i.rank-1,"u32(colIn)")}
        value = ${i.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${s.type.indices}) -> ${Mn(e,c)} {
      var value = ${Mn(e,c)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${a.type.indices};
        ${gc("bIndices",a,a.rank-2,s.rank,"batchIndices")}
        ${a.indicesSet("bIndices",a.rank-2,"u32(row)")}
        ${a.indicesSet("bIndices",a.rank-1,"u32(colIn)")}
        value = ${a.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${Mn(e,c)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${o?"bias[colIn]":`${Mn(e,c)}(bias[row])`};`:""}
        ${r}
        ${l.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},sf=(e,t,r,n,o=!1,s)=>{let i=e[0].dims,a=e[1].dims,l=i.slice(0,-2),c=a.slice(0,-2),u=n?n.slice(0,-2):r.slice(0,-2),d=Oe.size(u),f=i[i.length-2],p=i[i.length-1],m=a[a.length-1],b=p%4===0&&m%4===0,E=f<=8?[4,1,1]:[4,4,1],h=[8,8,1],_=[Math.ceil(m/h[0]/E[0]),Math.ceil(f/h[1]/E[1]),Math.ceil(d/h[2]/E[2])],T=b?4:1,g=[...l,f,p/T],M=g.length,x=[...c,p,m/T],w=x.length,$=[d,f,m/T],O=[{type:6,data:f},{type:6,data:m},{type:6,data:p}];oa(t,O),O.push(...mt(u,g,x));let L=["rank","rank"],G=e.length>2;G&&(O.push(...mt(e[2].dims)),L.push("rank")),O.push(...mt($));let j=D=>{let re=u.length,Z=E_("batchDims",e[0].dataType,re,1),te=bn(e[0].dataType),ie=De("a",e[0].dataType,M,T),ne=De("b",e[1].dataType,w,T),ve=ut("result",e[0].dataType,$.length,T),Me=[ie,ne];if(G){let be=o?T:1;Me.push(De("bias",e[2].dataType,e[2].dims.length,be))}let W=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];sa(t,W);let R=bn(ve.type.tensor),J=na(t,ve.type.value,R),U=ET(T,G,J,[Z,ie,ne,ve],o);return`
  ${D.registerUniforms(W).registerInternalVariables(Z).declareVariables(...Me,ve)}
  ${U}
  ${b?Cg(E,h,te,Z):kg(E,h,te,Z)}
                   `};return{name:"MatMul",shaderCache:{hint:`${E};${t.activation};${b};${o}`,inputDependencies:L},getRunData:()=>({outputs:[{dims:s?s(r):r,dataType:e[0].dataType}],dispatchGroup:{x:_[0],y:_[1],z:_[2]},programUniforms:O}),getShaderSource:j}}}),PT,WS,fq=qe(()=>{xt(),Us(),At(),ca(),A_(),uq(),F_(),PT=(e,t,r,n,o=!1,s,i=4,a=4,l=4,c="f32")=>{let u=O=>{switch(O){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${c}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${O} is not supported.`)}},d=O=>{switch(O){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${O} is not supported.`)}},f=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,p=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,m=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",b=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",E=e?"row":"col",h=e?"col":"row",_=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${E} / outWidth;
    let outCol = ${E} % outWidth;

    let WRow = ${h} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${h} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${h} % inChannels;
    var resData = ${Mn(i,c)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${m} && xCol >= 0 && xCol < ${b}) {
      ${f}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${u(i)}
    }
    return resData;`,T=e?t&&n?`
    let col = colIn * ${i};
    ${_}`:`
    let col = colIn * ${i};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${_}
    }
    return ${Mn(i,c)}(0.0);`:n&&r?`
    let col = colIn * ${i};
    ${_}`:`
    let col = colIn * ${i};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${_}
    }
    return ${Mn(i,c)}(0.0);`,g=e?n&&r?d(a):`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${d(a)}
    }
    return ${Mn(a,c)}(0.0);`:`
    let col = colIn * ${a};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${d(a)}
    }
    return ${Mn(a,c)}(0.0);`,M=Mn(l,c),x=Mn(e?i:a,c),w=Mn(e?a:i,c),$=na(s,M,c);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${x} {
      ${e?T:g}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${w} {
      ${e?g:T}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${M}) {
      let col = colIn * ${l};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${p}
      ${jS(o)}
      ${$}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},WS=(e,t,r,n,o,s,i,a,l)=>{let c=t.format==="NHWC",u=c?e[0].dims[3]:e[0].dims[1],d=r[0],f=c?r[2]:r[3],p=c?r[1]:r[2],m=c?r[3]:r[1],b=c&&(u%4===0||u%3===0)&&m%4===0,E=c?m:f*p,h=c?f*p:m,_=[8,8,1],T=n<=8?[4,1,1]:[4,4,1],g=[Math.ceil(E/_[0]/T[0]),Math.ceil(h/_[1]/T[1]),Math.ceil(d/_[2]/T[2])];Ut("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${g}`);let M=b?c&&u%4!==0?3:4:1,x=_[1]*T[1],w=_[0]*T[0],$=Math.max(_[0]*M,_[1]),O=n%x===0,L=o%w===0,G=s%$===0,j=b?[M,4,4]:[1,1,1],D=[{type:6,data:n},{type:6,data:o},{type:6,data:s},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];oa(t,D),D.push(...mt(e[0].dims,e[1].dims));let re=["rank","rank"];i&&(D.push(...mt(e[2].dims)),re.push("rank")),D.push(...mt(r));let Z=te=>{let ie=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];sa(t,ie);let ne=b?4:1,ve=bn(e[0].dataType),Me=`
      fn setOutputAtIndex(flatIndex : i32, value : ${b?`vec4<${ve}>`:ve}) {
        result[flatIndex] = ${b?`vec4<${ve}>`:ve}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${b?`vec4<${ve}>`:ve}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${b?"/ 4":""}, value);
      }`,W=De("x",e[0].dataType,e[0].dims.length,M===3?1:M),R=De("w",e[1].dataType,e[1].dims.length,ne),J=[W,R],U=ut("result",e[0].dataType,r.length,ne);if(i){let be=De("bias",e[2].dataType,e[2].dims.length,ne);J.push(be),Me+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${b?`vec4<${ve}>`:ve} {
          return bias[coords.${c?"w":"y"}${b?"/ 4":""}];
        }`}return`
        ${VS("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${te.registerUniforms(ie).declareVariables(...J,U)}
        ${Me}
        ${PT(c,O,L,G,i,t,j[0],j[1],j[2],ve)}
        ${b?Cg(T,_,ve,void 0,!c,$):kg(T,_,ve,void 0,!c,$,!1,void 0,a)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${M};${b};${O};${L};${G};${x};${w};${$}`,inputDependencies:re},getRunData:()=>({outputs:[{dims:l?l(r):r,dataType:e[0].dataType}],dispatchGroup:{x:g[0],y:g[1],z:g[2]},programUniforms:D}),getShaderSource:Z}}}),$T,Km,Vl,ST,qm,IT,US,GS,pq=qe(()=>{xt(),Us(),St(),At(),ca(),A_(),$T=e=>{let t=1;for(let r=0;r<e.length;r++)t*=e[r];return t},Km=e=>typeof e=="number"?[e,e,e]:e,Vl=(e,t)=>t<=1?e:e+(e-1)*(t-1),ST=(e,t,r,n=1)=>{let o=Vl(t,n);return Math.floor((e[0]*(r-1)-r+o)/2)},qm=(e,t,r,n,o)=>{o==null&&(o=ST(e,t[0],n[0]));let s=[0,0,0,r];for(let i=0;i<3;i++)e[i]+2*o>=t[i]&&(s[i]=Math.trunc((e[i]-t[i]+2*o)/n[i]+1));return s},IT=(e,t,r,n,o,s,i,a,l,c)=>{let u,d,f,p;if(e==="VALID"&&(e=0),typeof e=="number"){u={top:e,bottom:e,left:e,right:e,front:e,back:e};let m=qm([t,r,n,1],[a,l,c],1,[o,s,i],e);d=m[0],f=m[1],p=m[2]}else if(Array.isArray(e)){if(!e.every((b,E,h)=>b===h[0]))throw Error(`Unsupported padding parameter: ${e}`);u={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let m=qm([t,r,n,1],[a,l,c],1,[o,s,i],e[0]);d=m[0],f=m[1],p=m[2]}else if(e==="SAME_UPPER"){d=Math.ceil(t/o),f=Math.ceil(r/s),p=Math.ceil(n/i);let m=(d-1)*o+a-t,b=(f-1)*s+l-r,E=(p-1)*i+c-n,h=Math.floor(m/2),_=m-h,T=Math.floor(b/2),g=b-T,M=Math.floor(E/2),x=E-M;u={top:T,bottom:g,left:M,right:x,front:h,back:_}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outDepth:d,outHeight:f,outWidth:p}},US=(e,t,r,n,o,s=!1,i="channelsLast")=>{let a,l,c,u,d;if(i==="channelsLast")[a,l,c,u,d]=e;else if(i==="channelsFirst")[a,d,l,c,u]=e;else throw new Error(`Unknown dataFormat ${i}`);let[f,,p,m,b]=t,[E,h,_]=Km(r),[T,g,M]=Km(n),x=Vl(p,T),w=Vl(m,g),$=Vl(b,M),{padInfo:O,outDepth:L,outHeight:G,outWidth:j}=IT(o,l,c,u,E,h,_,x,w,$),D=s?f*d:f,re=[0,0,0,0,0];return i==="channelsFirst"?re=[a,D,L,G,j]:i==="channelsLast"&&(re=[a,L,G,j,D]),{batchSize:a,dataFormat:i,inDepth:l,inHeight:c,inWidth:u,inChannels:d,outDepth:L,outHeight:G,outWidth:j,outChannels:D,padInfo:O,strideDepth:E,strideHeight:h,strideWidth:_,filterDepth:p,filterHeight:m,filterWidth:b,effectiveFilterDepth:x,effectiveFilterHeight:w,effectiveFilterWidth:$,dilationDepth:T,dilationHeight:g,dilationWidth:M,inShape:e,outShape:re,filterShape:t}},GS=(e,t,r,n,o,s)=>{let i=s==="channelsLast";i?e[0].dims[3]:e[0].dims[1];let a=[64,1,1],l={x:r.map((E,h)=>h)},c=[Math.ceil($T(l.x.map(E=>r[E]))/a[0]),1,1];Ut("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${c}`);let u=1,d=Oe.size(r),f=[{type:12,data:d},{type:12,data:n},{type:12,data:o},{type:12,data:t.strides},{type:12,data:t.dilations}];oa(t,f),f.push(...mt(e[0].dims,e[1].dims));let p=["rank","rank"],m=e.length===3;m&&(f.push(...mt(e[2].dims)),p.push("rank")),f.push(...mt(r));let b=E=>{let h=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:n.length},{name:"pads",type:"u32",length:o.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];sa(t,h);let _=1,T=bn(e[0].dataType),g=De("x",e[0].dataType,e[0].dims.length,u),M=De("W",e[1].dataType,e[1].dims.length,_),x=[g,M],w=ut("result",e[0].dataType,r.length,_),$="";if(m){let G=De("bias",e[2].dataType,e[2].dims.length,_);x.push(G),$+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${T} {
          return bias[${i?ft("coords",4,5):ft("coords",1,5)}];
        }`}let O=Mn(u,T),L=na(t,O,T);return`
            ${$}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${g.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${M.getByIndices("aIndices")};
            }
          ${E.registerUniforms(h).declareVariables(...x,w)}
          ${E.mainStart()}
          ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${w.offsetToIndices("global_idx")};
              let batch = ${ft("coords",0,g.rank)};
              let d2 = ${i?ft("coords",g.rank-1,g.rank):ft("coords",1,g.rank)};
              let xFRCCorner = vec3<u32>(${i?ft("coords",1,g.rank):ft("coords",2,g.rank)},
              ${i?ft("coords",2,g.rank):ft("coords",3,g.rank)},
              ${i?ft("coords",3,g.rank):ft("coords",4,g.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${i?ft("uniforms.x_shape",1,g.rank):ft("uniforms.x_shape",2,g.rank)};
              let xShapeZ = ${i?ft("uniforms.x_shape",2,g.rank):ft("uniforms.x_shape",3,g.rank)};
              let xShapeW = ${i?ft("uniforms.x_shape",3,g.rank):ft("uniforms.x_shape",4,g.rank)};
              let xShapeU = ${i?ft("uniforms.x_shape",4,g.rank):ft("uniforms.x_shape",1,g.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${i?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${i?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${i?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${i?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${m?"value = value + getBiasByOutputCoords(coords)":""};
              ${L}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${i};${u};${m}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:c[0],y:c[1],z:c[2]},programUniforms:f}),getShaderSource:b}}}),HS,KS,mq=qe(()=>{xt(),St(),At(),ca(),HS=(e,t,r,n)=>{let o=e.length>2,s=o?"value += b[output_channel];":"",i=e[0].dims,a=e[1].dims,l=t.format==="NHWC",c=l?r[3]:r[1],u=c/t.group,d=l&&u>=4?Wr(c):1,f=Oe.size(r)/d,p=[{type:12,data:f},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:u}];oa(t,p),p.push(...mt(i,[a[0],a[1],a[2],a[3]/d]));let m=o?["rank","rank","rank"]:["rank","rank"];p.push(...mt([r[0],r[1],r[2],r[3]/d]));let b=E=>{let h=ut("output",e[0].dataType,r.length,d),_=bn(h.type.tensor),T=na(t,h.type.value,_),g=De("x",e[0].dataType,i.length),M=De("w",e[1].dataType,a.length,d),x=[g,M];o&&x.push(De("b",e[2].dataType,e[2].dims,d));let w=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];sa(t,w);let $=l?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${g.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${M.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${g.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${M.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${E.registerUniforms(w).declareVariables(...x,h)}

  ${E.mainStart()}
    ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${h.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${l?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${l?1:2}], outputIndices[${l?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${d} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${l?2:1}];

    var value: ${h.type.value} = ${h.type.value}(0);
    ${$}
    ${s}
    ${T}
    ${h.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${d}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:b}},KS=(e,t,r,n)=>{let o=e.length>2,s=Wr(r[3]),i=Wr(r[2]),a=Oe.size(r)/s/i,l=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/s],c=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/s],u=[r[0],r[1],r[2],r[3]/s],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];oa(t,d),d.push(...mt(l,c,u));let f=(i-1)*t.strides[1]+c[1],p=m=>{let b=ut("output",e[0].dataType,u.length,s),E=bn(b.type.tensor),h=na(t,b.type.value,E),_=De("x",e[0].dataType,l.length,s),T=De("w",e[1].dataType,c.length,s),g=[_,T];o&&g.push(De("b",e[2].dataType,e[2].dims,s));let M=o?"value += b[output_channel];":"",x=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return sa(t,x),`
  ${m.registerUniforms(x).declareVariables(...g,b)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${i}u;
    let col = (index1 % width1) * ${i}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${_.type.value}, ${f}>;
    var values: array<${b.type.value}, ${i}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${c[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${f}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${_.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${_.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${c[1]}; w_width++) {
          let w_val = ${T.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${i}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${i}u; i++) {
      var value = values[i];
      ${M}
      ${h}
      ${b.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${s};${i};${f};${c[0]};${c[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:p}}}),AT,Tu,OT,Cu,Eg,Xm,LT,FT,Pg,hq=qe(()=>{St(),fq(),pq(),F_(),mq(),ca(),L_(),Mi(),AT=(e,t,r,n,o,s)=>{let i=e[0],a=e.slice(s?1:2,s?3:4),l=a.length,c=t[0],u=t.slice(2).map((f,p)=>f+(f-1)*(r[p]-1)),d=a.map((f,p)=>f+n[p]+n[p+l]).map((f,p)=>Math.floor((f-u[p]+o[p])/o[p]));return d.splice(0,0,i),d.splice(s?3:1,0,c),d},Tu=[2,3,1,0],OT=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[1]*t.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let o=e[0].dims.length-2;if(t.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(t.strides.length!==o)throw new Error(`strides should be ${o}D`);if(t.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},Cu=(e,t)=>{let r=e.kernelShape.slice();r.length<t[1].dims.length-2&&r.push(...Array(t[1].dims.length-2-r.length).fill(0));for(let s=2;s<t[1].dims.length;++s)r[s-2]===0&&(r[s-2]=t[1].dims[s]);let n=e.pads.slice();nf.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.format==="NHWC",e.autoPad);let o=Object.assign({},e);return Object.assign(o,{kernelShape:r,pads:n}),o},Eg=e=>{let t=I_(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],o=e.dilations,s=e.group,i=e.kernel_shape,a=e.pads,l=e.strides,c=e.w_is_const();return{autoPad:n,format:r,dilations:o,group:s,kernelShape:i,pads:a,strides:l,wIsConst:c,...t,cacheKey:`${e.format};${t.activation};`}},Xm=(e,t,r,n)=>{let o=r.format==="NHWC",s=AT(t[0].dims,t[1].dims,r.dilations,r.pads,r.strides,o);if(r.group!==1){let x=[t[0]];if(o){let w=e.kernelCustomData.wT??e.compute(uo(t[1],Tu),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=w),x.push(w)}else x.push(t[1]);t.length===3&&x.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&o&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1?e.compute(KS(x,r,s,n),{inputs:x}):e.compute(HS(x,r,s,n),{inputs:x});return}let i=t.length===3,a=t[0].dims[o?1:2],l=t[0].dims[o?2:3],c=t[0].dims[o?3:1],u=t[1].dims[2],d=t[1].dims[3],f=s[o?1:2],p=s[o?2:3],m=s[o?3:1],b=o&&u===a&&d===l&&r.pads[0]===0&&r.pads[1]===0;if(b||u===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let x=s[0],w,$,O,L=[];if(o){let D=e.kernelCustomData.wT??e.compute(uo(t[1],Tu),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=D),b){let re=a*l*c;w=t[0].reshape([1,x,re]),$=D.reshape([1,re,m]),O=[1,x,m]}else w=t[0].reshape([x,a*l,c]),$=D.reshape([1,c,m]),O=[x,f*p,m];L.push(w),L.push($)}else w=t[0].reshape([x,c,a*l]),$=t[1].reshape([1,m,c]),O=[x,m,f*p],L.push($),L.push(w);i&&L.push(t[2]);let G=O[2],j=L[0].dims[L[0].dims.length-1];G<8&&j<8?e.compute(O_(L,r,s,O,o,n),{inputs:L}):e.compute(sf(L,r,s,O,o,n),{inputs:L});return}let E=!0,h=e.kernelCustomData.wT??e.compute(uo(t[1],Tu),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=h);let _=[t[0],h];i&&_.push(t[2]);let T=o?f*p:m,g=o?m:f*p,M=u*d*c;e.compute(WS(_,r,s,T,g,M,i,E,n),{inputs:_})},LT=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let o=[0,t.pads[0],0,t.pads[1]],s=[1].concat(t.strides),i=[1].concat(t.dilations),a=[1].concat(t.kernelShape),l=Cu({...t,pads:o,strides:s,dilations:i,kernelShape:a},n);Xm(e,n,l,c=>r?[c[0],c[2],c[3]]:[c[0],c[1],c[3]])},FT=(e,t,r)=>{let n=r.format==="NHWC"?"channelsLast":"channelsFirst",o=Cu(r,t),s=r.autoPad==="NOTSET"?r.pads:r.autoPad,i=US(t[0].dims,t[1].dims,r.strides,r.dilations,s,!1,n);e.compute(GS(t,o,i.outShape,[i.filterDepth,i.filterHeight,i.filterWidth],[i.padInfo.front,i.padInfo.top,i.padInfo.left],n))},Pg=(e,t)=>{if(OT(e.inputs,t),e.inputs[0].dims.length===3)LT(e,t);else if(e.inputs[0].dims.length===5)FT(e,e.inputs,t);else{let r=Cu(t,e.inputs);Xm(e,e.inputs,r)}}}),qS,gq=qe(()=>{xt(),Us(),St(),At(),qS=(e,t,r)=>{let n=e.length>2,o=t.outputShape,s=t.format==="NHWC",i=t.group,a=e[1].dims,l=a[2]/i,c=a[3],u=s?Wr(l):1,d=s&&c===1&&l>=4,f=d?Math.floor(l/4)*4:Math.floor(l/u)*u,p=l-f,m=s?Wr(c):1,b=s?c===1?u:m:1,E=Oe.size(o)/m,h=[Math.ceil(E/64),1,1];Ut("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${h}`);let _=["rank","rank"],T=[t.strides[0],t.strides[1]],g=[t.kernelShape[s?1:2],t.kernelShape[s?2:3]],M=[t.dilations[0],t.dilations[1]],x=[g[0]+(t.dilations[0]<=1?0:(t.kernelShape[s?1:2]-1)*(t.dilations[0]-1)),g[1]+(t.dilations[1]<=1?0:(t.kernelShape[s?2:3]-1)*(t.dilations[1]-1))],w=[x[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),x[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],$=[{type:12,data:E},{type:12,data:T},{type:12,data:g},{type:12,data:M},{type:12,data:x},{type:6,data:w},{type:12,data:f},{type:12,data:l},{type:12,data:c},...mt(e[0].dims,e[1].dims)];n&&($.push(...mt(e[2].dims)),_.push("rank")),$.push(...mt(o));let O=L=>{let G=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:T.length},{name:"filter_dims",type:"u32",length:g.length},{name:"dilations",type:"u32",length:g.length},{name:"effective_filter_dims",type:"u32",length:x.length},{name:"pads",type:"i32",length:w.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],j=bn(e[0].dataType),D=s?1:2,re=s?2:3,Z=s?3:1,te=De("W",e[1].dataType,e[1].dims.length,b),ie=De("Dy",e[0].dataType,e[0].dims.length,u),ne=[ie,te];n&&ne.push(De("bias",e[2].dataType,[o[Z]].length,m));let ve=ut("result",e[0].dataType,o.length,m),Me=()=>{let J="";if(d)u===4?J+=`
        let xValue = ${ie.getByOffset("x_offset")};
        let wValue = ${te.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:u===2?J+=`
          dotProd = dotProd + dot(vec4<${j}>(${ie.getByOffset("x_offset")}, ${ie.getByOffset("x_offset + 1u")}), vec4<${j}>(${te.getByOffset("w_offset")}, ${te.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:u===1&&(J+=`
          dotProd = dotProd + dot(vec4<${j}>(${ie.getByOffset("x_offset")}, ${ie.getByOffset("x_offset + 1u")}, ${ie.getByOffset("x_offset + 2u")}, ${ie.getByOffset("x_offset + 3u")}), vec4<${j}>(${te.getByOffset("w_offset")}, ${te.getByOffset("w_offset + 1u")}, ${te.getByOffset("w_offset + 2u")}, ${te.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(J+=`
                  let xValue = ${s?ie.getByOffset(`${ie.indicesToOffset(`${ie.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${u}`):ie.get("batch","inputChannel","idyR","idyC")};
        `,u===1)J+=`
          let w_offset = ${te.indicesToOffset(`${te.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${te.getByOffset(`w_offset / ${b}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let U=0;U<u;U++)J+=`
            let wValue${U} = ${te.getByOffset(`${te.indicesToOffset(`${te.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${U}, wOutChannel)`)} / ${b}`)};
            dotProd = dotProd + xValue[${U}] * wValue${U};`;return J},W=()=>{if(p===0)return"";if(!d)throw new Error(`packInputAs4 ${d} is not true.`);let J="";if(u===1){J+="dotProd = dotProd";for(let U=0;U<p;U++)J+=`
            + ${ie.getByOffset(`x_offset + ${U}`)} * ${te.getByOffset(`w_offset + ${U}`)}`;J+=";"}else if(u===2){if(p!==2)throw new Error(`Invalid inputChannelsRemainder ${p}.`);J+=`
          let xValue = ${ie.getByOffset("x_offset")};
          let wValue = ${te.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return J},R=`
            let outputIndices = ${ve.offsetToIndices(`global_idx * ${m}`)};
            let batch = ${ve.indicesGet("outputIndices",0)};
            let d1 = ${ve.indicesGet("outputIndices",Z)};
            let r = ${ve.indicesGet("outputIndices",D)};
            let c = ${ve.indicesGet("outputIndices",re)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${ve.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${j}(dyRCorner) + ${j}(wR)) / ${j}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${j}(uniforms.Dy_shape[${D}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${j}(dyCCorner) + ${j}(wC)) / ${j}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${j}(uniforms.Dy_shape[${re}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${d?`
                var x_offset = ${ie.indicesToOffset(`${ie.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${u};
                var w_offset = ${te.indicesToOffset(`${te.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${b};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${d?4:u}) {
                  ${Me()}
                  inputChannel = inputChannel + ${d?4:u};
                }
                ${W()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${n?` + bias[d1 / ${m}]`:""};
            ${ve.setByOffset("global_idx","value")};
          `;return`
    ${L.registerUniforms(G).declareVariables(...ne,ve)}
      ${L.mainStart()}
      ${L.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${R}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${u}${b}${m}${d}${p}`,inputDependencies:_},getRunData:()=>({dispatchGroup:{x:h[0],y:h[1],z:h[2]},outputs:[{dims:r?r(o):o,dataType:e[0].dataType}],programUniforms:$}),getShaderSource:O}}}),DT,BT,RT,Qm,XS,zT,Ym,NT,QS,_q=qe(()=>{gq(),ca(),Mi(),DT=(e,t,r,n,o,s)=>(e-1)*t+r+(n-1)*o+1-s,BT=(e,t,r,n,o)=>{let s=Math.floor(e/2);t==="SAME_UPPER"?(r[n]=s,r[o]=e-s):t==="SAME_LOWER"&&(r[n]=e-s,r[o]=s)},RT=(e,t,r,n,o,s,i,a,l,c)=>{let u=e.length-2,d=c.length===0;l.length<u&&l.push(...Array(u-l.length).fill(0));let f=e[0],p=t[a?3:1]*o;for(let m=0,b=e.length-u-(a?1:0);m<u;++m,++b){let E=e[b],h=d?E*i[m]:c[m],_=DT(E,i[m],s[m],t[b],r[m],h);BT(_,n,s,m,m+u),d&&c.push(i[m]*(E-1)+l[m]+(t[b]-1)*r[m]+1-s[m]-s[m+u])}c.splice(0,0,f),c.splice(a?3:1,0,p)},Qm=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((d,f)=>d*f,1)===0){r.length=0;for(let d=2;d<t[1].dims.length;++d)r.push(t[1].dims[d])}let n=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);let o=e.pads.slice(),s=e.outputShape.slice(),i=e.outputPadding.slice(),a=t[0].dims,l=e.dilations.slice();if(l.reduce((d,f)=>d+f,0)===0){let d=t[0].dims.length-2;l=new Array(d).fill(1)}let c=e.strides.slice();if(c.reduce((d,f)=>d+f,0)===0){let d=t[0].dims.length-2;c=new Array(d).fill(1)}RT(a,r,l,e.autoPad,e.group,o,c,n,i,s);let u=Object.assign({},e);return Object.assign(u,{kernelShape:r,pads:o,outputPadding:i,outputShape:s,dilations:l,strides:c}),u},XS=e=>{let t=I_(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],o=e.dilations,s=e.group,i=e.kernelShape,a=e.pads,l=e.strides,c=e.wIsConst(),u=e.outputPadding,d=e.outputShape;return{autoPad:n,format:r,dilations:o,group:s,kernelShape:i,outputPadding:u,outputShape:d,pads:a,strides:l,wIsConst:c,...t,cacheKey:`${e.format};${t.activation};`}},zT=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let o=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==o))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.reduce((i,a)=>i+a,0)>0&&t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.reduce((i,a)=>i+a,0)>0&&t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.reduce((i,a)=>i+a,0)>0&&t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.outputPadding.length!==s&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${s}D`);if(t.kernelShape.reduce((i,a)=>i+a,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Ym=(e,t,r,n)=>{let o=e.kernelCustomData.wT??e.compute(uo(t[1],[2,3,0,1]),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=o);let s=[t[0],o];t.length===3&&s.push(t[2]),e.compute(qS(s,r,n),{inputs:s})},NT=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let o=t.kernelShape;(o.length===0||o[0]===0)&&(o=[e.inputs[1].dims[2]]);let s=t.dilations;(s.length===0||s[0]===0)&&(s=[1]);let i=t.strides;(i.length===0||i[0]===0)&&(i=[1]);let a=t.pads;a.length===0&&(a=[0,0]),a=[0,a[0],0,a[1]],i=[1].concat(i),s=[1].concat(s),o=[1].concat(o);let l=t.outputPadding;l=[0].concat(l);let c=Qm({...t,pads:a,strides:i,dilations:s,kernelShape:o,outputPadding:l},n);Ym(e,n,c,u=>r?[u[0],u[2],u[3]]:[u[0],u[1],u[3]])},QS=(e,t)=>{if(zT(e.inputs,t),e.inputs[0].dims.length===3)NT(e,t);else{let r=Qm(t,e.inputs);Ym(e,e.inputs,r)}}}),jT,YS,JS,bq=qe(()=>{xt(),St(),Kr(),At(),jT=(e,t,r,n)=>{let o=Oe.size(t),s=t.length,i=De("input",e,s),a=ut("output",e,s),l=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),c=Oe.normalizeAxis(l,s),u=d=>{let f=` i32(${i.indicesGet("inputIndices","uniforms.axis")}) `,p=ft("uniforms.input_shape","uniforms.axis",s),m=n.reverse?f+(n.exclusive?" + 1":""):"0",b=n.reverse?p:f+(n.exclusive?"":" + 1");return`
                ${d.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(i,a)}
                ${d.mainStart()}
                  ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${a.offsetToIndices("global_idx")};
                  var sum = ${a.type.value}(0);
                  let first : i32 = ${m};
                  let last : i32 = ${b};
                  for (var i : i32 = first; i < last; i++) {
                    ${i.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${i.getByIndices("inputIndices")};
                  }
                  ${a.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:[{type:12,data:o},{type:12,data:c},...mt(t,t)]}),getShaderSource:u}},YS=(e,t)=>{let r=e.inputs[0].dims,n=e.inputs[0].dataType,o=e.inputs[1];e.compute(jT(n,r,o,t),{inputs:[0]})},JS=e=>{let t=e.exclusive===1,r=e.reverse===1;return er({exclusive:t,reverse:r})}}),VT,WT,UT,ZS,eI,vq=qe(()=>{xt(),St(),Kr(),At(),VT=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},WT=(e,t,r,n)=>{let o=[];o.push(`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`);for(let s=0;s<t;++s)o.push(r.indicesSet("a",e[s],`i[${s}]`));return o.push("return a;}"),o.join(`
`)},UT=(e,t)=>{let r,n,o,s,i,a,l=t.format==="NHWC",c=t.blocksize,u=t.mode==="DCR";l?([r,n,o,s]=e.dims,i=u?[r,n,o,c,c,s/c**2]:[r,n,o,s/c**2,c,c],a=u?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,n,o,s]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],i=u?[r,c,c,s/c**2,n,o]:[r,s/c**2,c,c,n,o],a=u?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let d=e.reshape(i),f=d.dims.length,p=e.dataType,m=De("a",p,f),b=ut("output",p,f),E=h=>`
  ${h.registerUniform("output_size","u32").declareVariables(m,b)}

  ${WT(a,f,m,b)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${b.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${b.setByOffset("global_idx",m.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:h=>{let _=l?[r,n*c,o*c,s/c**2]:[r,s/c**2,n*c,o*c],T=Oe.size(_),g=d.dims,M=Oe.sortBasedOnPerm(g,a);return{outputs:[{dims:_,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(T/64)},programUniforms:[{type:12,data:T},...mt(g,M)]}},getShaderSource:E}},ZS=(e,t)=>{VT(e.inputs),e.compute(UT(e.inputs[0],t))},eI=e=>er({blocksize:e.blocksize,mode:e.mode,format:e.format})}),ku,Wl,Jm,GT,HT,KT,qT,Zm,XT,tI,rI,yq=qe(()=>{xt(),St(),Kr(),At(),ku="[a-zA-Z]|\\.\\.\\.",Wl="("+ku+")+",Jm="^"+Wl+"$",GT="("+Wl+",)*"+Wl,HT="^"+GT+"$",KT=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let r=this.symbolToIndices.get(e);r===void 0?r=[t]:r.push(t),this.symbolToIndices.set(e,r)}},qT=class{constructor(e,t){this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[r,n]=t.includes("->")?t.split("->",2):[t,""];if(!r.match(RegExp(HT)))throw new Error("Invalid LHS term");if(r.split(",").forEach((o,s)=>{let i=e[s].dims.slice();if(!o.match(RegExp(Jm)))throw new Error("Invalid LHS term");let a=this.processTerm(o,!0,i,s);this.lhs.push(a)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([o,s])=>s.count===1||o==="...").map(([o])=>o).join("");else if(!n.match(RegExp(Wl)))throw new Error("Invalid RHS");n.match(RegExp(ku,"g"))?.forEach(o=>{if(o==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let s=this.symbolToInfo.get(o);if(s===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(s.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(e,t,r){let n=this.symbolToInfo.get(e);if(n!==void 0){if(n.dimValue!==t&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r)}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n)}processTerm(e,t,r,n=-1){let o=r.length,s=!1,i=[],a=0;if(!e.match(RegExp(Jm))&&!t&&e!=="")throw new Error("Invalid LHS term");let l=e.match(RegExp(ku,"g")),c=new KT(n);return l?.forEach((u,d)=>{if(u==="..."){if(s)throw new Error("Only one ellipsis is allowed per input term");s=!0;let f=o-l.length+1;if(f<0)throw new Error("Ellipsis out of bounds");if(i=r.slice(a,a+f),this.hasEllipsis){if(this.ellipsisDims.length!==i.length||this.ellipsisDims.toString()!==i.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=i;else throw new Error("Ellipsis must be specified in the LHS");for(let p=0;p<i.length;p++){let m=String.fromCharCode(48+p);c.addSymbol(m,d+p),this.addSymbol(m,r[a++],n)}}else c.addSymbol(u,d+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(u,r[a++],n)}),c}},Zm=e=>e+"_max",XT=(e,t,r,n)=>{let o=e.map(c=>c.length).map((c,u)=>De(`input${u}`,t,c)),s=Oe.size(n),i=ut("output",t,n.length),a=[...r.symbolToInfo.keys()].filter(c=>!r.rhs.symbolToIndices.has(c)),l=c=>{let u=[],d="var prod = 1.0;",f="var sum = 0.0;",p="sum += prod;",m=[],b=[],E=[],h=[],_=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((g,M)=>{if(r.rhs.symbolToIndices.has(M)){let x=r.rhs.symbolToIndices.get(M)?.[0];x!==void 0&&r.lhs.forEach((w,$)=>{if(g.inputIndices.includes($)){let O=w.symbolToIndices.get(M);if(O===void 0)throw new Error("Invalid symbol error");O.forEach(L=>{u.push(`${o[$].indicesSet(`input${$}Indices`,L,i.indicesGet("outputIndices",x))}`)})}})}else r.lhs.forEach((x,w)=>{if(g.inputIndices.includes(w)){let $=x.symbolToIndices.get(M);if($===void 0)throw new Error("Invalid symbol error");$.forEach(O=>{m.push(`${o[w].indicesSet(`input${w}Indices`,O,`${M}`)}`)}),h.push(`prod *= ${o[w].getByIndices(`input${w}Indices`)};`)}}),b.push(`for(var ${M}: u32 = 0; ${M} < uniforms.${Zm(M)}; ${M}++) {`),E.push("}")});let T=_?[...u,`let sum = ${o.map((g,M)=>g.getByIndices(`input${M}Indices`)).join(" * ")};`]:[...u,f,...b,...m,d,...h,p,...E];return`
            ${c.registerUniforms(a.map(g=>({name:`${Zm(g)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...o,i)}

            ${c.mainStart()}
            ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${i.offsetToIndices("global_idx")};
            ${o.map((g,M)=>`var input${M}Indices: ${o[M].type.indices};`).join(`
`)}
            ${T.join(`
`)};
            ${i.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let c=a.filter(d=>r.symbolToInfo.has(d)).map(d=>({type:12,data:r.symbolToInfo.get(d)?.dimValue||0}));c.push({type:12,data:s});let u=e.map((d,f)=>[...mt(d)]).reduce((d,f)=>d.concat(f),c);return u.push(...mt(n)),{outputs:[{dims:n,dataType:t}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:u}},getShaderSource:l}},tI=(e,t)=>{let r=new qT(e.inputs,t.equation),n=r.outputDims,o=e.inputs.map((s,i)=>s.dims);e.compute(XT(o,e.inputs[0].dataType,r,n))},rI=e=>{let t=e.equation.replace(/\s+/g,"");return er({equation:t})}}),QT,eh,YT,JT,nI,wq=qe(()=>{xt(),St(),At(),QT=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,o=t.length<r.length?0:t.length-r.length;for(;n<r.length&&o<t.length;++n,++o)if(r[n]!==t[o]&&r[n]!==1&&t[o]!==1)throw new Error("Expand requires shape to be broadcastable to input")},eh=(e,t)=>{let r=e.length-t.length,n=[];for(let o=0;o<r;++o)n.push(e[o]);for(let o=0;o<t.length;++o)n.push(t[o]===1?e[o+r]:t[o]);return n},YT=(e,t)=>e.length>t.length?eh(e,t):eh(t,e),JT=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=YT(t,r),o=e[0].dataType,s=o===9||Oe.size(t)===1,i=o===9||t.length>0&&t[t.length-1]%4===0?4:1,a=s||n.length>0&&n[n.length-1]%4===0?4:1,l=Math.ceil(Oe.size(n)/a),c=d=>{let f=De("input",o,t.length,i),p=ut("output",o,n.length,a),m;if(o===9){let b=(E,h,_="")=>`
          let outputIndices${h} = ${p.offsetToIndices(`outputOffset + ${h}u`)};
          let offset${h} = ${f.broadcastedIndicesToOffset(`outputIndices${h}`,p)};
          let index${h} = offset${h} / 4u;
          let component${h} = offset${h} % 4u;
          ${E}[${h}] = ${_}(${f.getByOffset(`index${h}`)}[component${h}]);
        `;m=`
        let outputOffset = global_idx * ${a};
        var data = vec4<u32>(0);
        ${b("data",0,"u32")}
        ${b("data",1,"u32")}
        ${b("data",2,"u32")}
        ${b("data",3,"u32")}
        ${p.setByOffset("global_idx","data")}
      }`}else m=`
        let outputIndices = ${p.offsetToIndices(`global_idx * ${a}`)};
        let inputOffset = ${f.broadcastedIndicesToOffset("outputIndices",p)};
        let data = ${p.type.value}(${f.getByOffset(`inputOffset / ${i}`)});
        ${p.setByOffset("global_idx","data")}
      }`;return`
    ${d.registerUniform("vec_size","u32").declareVariables(f,p)}
    ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${m}`},u=[{type:12,data:l},...mt(t,n)];return{name:"Expand",shaderCache:{hint:`${n.length};${i}${a}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u})}},nI=e=>{QT(e.inputs),e.compute(JT(e.inputs),{inputs:[0]})}}),ZT,oI,Mq=qe(()=>{xt(),St(),At(),S_(),ZT=e=>{let t=e[0].dataType,r=Oe.size(e[0].dims),n=Oe.size(e[1].dims),o=n%4===0,s=i=>{let a=De("x",t,[1],4),l=De("bias",t,[1],4),c=ut("y",t,[1],4),u=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],d=p=>`
      let bias${p}_offset: u32 = (global_idx * 4 + ${p}) % uniforms.bias_size;
      let bias${p} = ${l.getByOffset(`bias${p}_offset / 4`)}[bias${p}_offset % 4];`,f=o?`
      let bias = ${l.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${d(0)}${d(1)}${d(2)}${d(3)}
      let bias = ${a.type.value}(bias0, bias1, bias2, bias3);`;return`${i.registerUniforms(u).declareVariables(a,l,c)}

    ${xg(Fn(t))}

    ${i.mainStart(el)}
      ${i.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${a.getByOffset("global_idx")};
      ${f}
      let x_in = x + bias;
      ${c.setByOffset("global_idx",Tg("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${o}`,inputDependencies:["type","type"]},getShaderSource:s,getRunData:i=>({outputs:[{dims:i[0].dims,dataType:i[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:n}],dispatchGroup:{x:Math.ceil(r/el/4)}})}},oI=e=>{e.inputs.length<2||Oe.size(e.inputs[1].dims)===0?TS(e):e.compute(ZT(e.inputs))}}),eC,tC,sI,iI,xq=qe(()=>{xt(),St(),Kr(),At(),eC=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},tC=(e,t)=>{let r=e[0].dims,n=e[1].dims,o=r.length,s=Oe.normalizeAxis(t.axis,o),i=r.slice(0);i.splice(s,1,...n);let a=r[s],l=e[0].dataType===9?4:1,c=Math.ceil(Oe.size(i)/l),u=[{type:12,data:c},{type:6,data:a},{type:12,data:s},...mt(e[0].dims,e[1].dims,i)],d=f=>{let p=De("data",e[0].dataType,e[0].dims.length,l),m=De("inputIndices",e[1].dataType,e[1].dims.length),b=ut("output",e[0].dataType,i.length,l),E=_=>{let T=n.length,g=`var indicesIndices${_}  = ${m.type.indices}(0);`;for(let M=0;M<T;M++)g+=`${T>1?`indicesIndices${_}[${M}]`:`indicesIndices${_}`} = ${i.length>1?`outputIndices${_}[uniforms.axis + ${M}]`:`outputIndices${_}`};`;g+=`
          var idx${_} = ${m.getByIndices(`indicesIndices${_}`)};
          if (idx${_} < 0) {
            idx${_} = idx${_} + uniforms.axisDimLimit;
          }
          var dataIndices${_} : ${p.type.indices};
        `;for(let M=0,x=0;M<o;M++)M===s?(g+=`${o>1?`dataIndices${_}[${M}]`:`dataIndices${_}`} = u32(idx${_});`,x+=T):(g+=`${o>1?`dataIndices${_}[${M}]`:`dataIndices${_}`} = ${i.length>1?`outputIndices${_}[${x}]`:`outputIndices${_}`};`,x++);return g},h;if(e[0].dataType===9){let _=(T,g,M="")=>`
          let outputIndices${g} = ${b.offsetToIndices(`outputOffset + ${g}u`)};
          ${E(g)};
          let offset${g} = ${p.indicesToOffset(`dataIndices${g}`)};
          let index${g} = offset${g} / 4u;
          let component${g} = offset${g} % 4u;
          ${T}[${g}] = ${M}(${p.getByOffset(`index${g}`)}[component${g}]);
        `;h=`
        let outputOffset = global_idx * ${l};
        var value = vec4<u32>(0);
        ${_("value",0,"u32")}
        ${_("value",1,"u32")}
        ${_("value",2,"u32")}
        ${_("value",3,"u32")}
        ${b.setByOffset("global_idx","value")}
      `}else h=`
      let outputIndices = ${b.offsetToIndices("global_idx")};
      ${E("")};
      let value = ${p.getByIndices("dataIndices")};
      ${b.setByOffset("global_idx","value")};
      `;return`
      ${f.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(p,m,b)}
      ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${h}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:u}),getShaderSource:d}},sI=e=>er({axis:e.axis}),iI=(e,t)=>{let r=e.inputs;eC(r),e.compute(tC(e.inputs,t))}}),rC,aI,lI,Tq=qe(()=>{xt(),St(),At(),rC=(e,t,r,n,o,s,i,a,l)=>{let c=[{type:12,data:s},{type:12,data:n},{type:12,data:o},{type:12,data:r},{type:12,data:i},{type:12,data:a},{type:12,data:l}],u=[s];c.push(...mt(t.dims,u));let d=f=>{let p=De("indices_data",t.dataType,t.dims.length),m=ut("input_slice_offsets_data",12,1,1),b=[p,m],E=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:o.length},{name:"sizes_from_slice_dims_data",type:"u32",length:r.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${f.registerUniforms(E).declareVariables(...b)}
  ${f.mainStart()}
    ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${o.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${r.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${o.length}_${r.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:u,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:c}),getShaderSource:d},{inputs:[t],outputs:[-1]})[0]},aI=(e,t)=>{let r=e.inputs,n=r[0].dims,o=r[0].dataType,s=r[1].dims,i=s[s.length-1],a=Oe.sizeToDimension(s,s.length-1),l=Oe.sizeFromDimension(n,t.batchDims+i),c=Oe.sizeToDimension(n,t.batchDims),u=Oe.sizeFromDimension(n,t.batchDims),d=a/c,f=new Array(i),p=l;for(let g=0;g<i;++g)f[i-1-g]=p,p*=n[t.batchDims+i-1-g];let m=rC(e,r[1],f,t.batchDims,n,a,d,u,i),b=t.batchDims+i;if(b>n.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let E=s.slice(0,-1).concat(n.slice(b)),h=Oe.size(E),_=[{type:12,data:h},{type:12,data:l},...mt(r[0].dims,m.dims,E)],T=g=>{let M=De("data",r[0].dataType,r[0].dims.length),x=De("slice_offsets",12,m.dims.length),w=ut("output",r[0].dataType,E.length);return`
          ${g.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(M,x,w)}
            ${g.mainStart()}
            ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:E,dataType:o}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:_}),getShaderSource:T},{inputs:[r[0],m]})},lI=e=>({batchDims:e.batch_dims,cacheKey:""})}),nC,oC,cI,dI,Cq=qe(()=>{xt(),St(),Kr(),At(),nC=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let r=Oe.normalizeAxis(t.quantizeAxis,e[0].dims.length),n=t.blockSize,o=e[0],s=e[2],i=e.length===4?e[3]:void 0;if(s.dims.length!==o.dims.length||!o.dims.map((a,l)=>l===r?Math.ceil(a/n)===s.dims[l]:a===s.dims[l]).reduce((a,l)=>a&&l,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(i){if(i.dataType!==o.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(i.dims.length!==s.dims.length||!i.dims.map((a,l)=>a===s.dims[l]).reduce((a,l)=>a&&l,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},oC=(e,t)=>{let r=e[0].dims,n=e[1].dims,o=r.length,s=Oe.normalizeAxis(t.gatherAxis,o),i=Oe.normalizeAxis(t.quantizeAxis,o),a=r.slice(0);a.splice(s,1,...n);let l=Oe.size(a),c=e[2].dataType,u=e[0].dataType===22,d=[{type:12,data:l},{type:12,data:i},{type:12,data:s},{type:12,data:t.blockSize},...mt(...e.map((p,m)=>p.dims),a)],f=p=>{let m=De("data",e[0].dataType,e[0].dims.length),b=De("inputIndices",e[1].dataType,e[1].dims.length),E=De("scales",e[2].dataType,e[2].dims.length),h=e.length>3?De("zeroPoint",e[3].dataType,e[3].dims.length):void 0,_=ut("output",c,a.length),T=[m,b,E];h&&T.push(h);let g=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${p.registerUniforms(g).declareVariables(...T,_)}
        ${p.mainStart()}
        let output_indices = ${_.offsetToIndices("global_idx")};
        var indices_indices = ${b.type.indices}(0);
        ${n.length>1?`
          for (var i: u32 = 0; i < ${n.length}; i++) {
            let index = ${_.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${b.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${_.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${m.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${_.indicesGet("output_indices","i")};
          ${m.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${b.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${r[s]};
        }
        ${m.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${a.length}; i++) {
          let index = ${_.indicesGet("output_indices",`i + ${n.length} - 1`)};
          ${m.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${m.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${m.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${u?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${E.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${E.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${E.getByIndices("scale_indices")};
        ${h?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${h.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${h.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${u?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${Fn(c)}(quantized_data - zero_point) * scale;
        ${_.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((p,m)=>m!==1).map(p=>p.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(p,m)=>"rank")},getRunData:()=>({outputs:[{dims:a,dataType:c}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d}),getShaderSource:f}},cI=(e,t)=>{let r=e.inputs;nC(r,t),e.compute(oC(e.inputs,t))},dI=e=>er({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),sC,iC,uI,fI,kq=qe(()=>{xt(),St(),Kr(),At(),sC=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},iC=(e,t)=>{let r=e[0].dims,n=e[0].dataType,o=r.length,s=e[1].dims,i=e[1].dataType,a=Oe.normalizeAxis(t.axis,o),l=r[a],c=s.slice(0),u=Oe.size(c),d=De("input",n,o),f=De("indicesInput",i,s.length),p=ut("output",n,c.length),m=[{type:12,data:u},{type:6,data:l},{type:12,data:a}];return m.push(...mt(r,s,c)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:m}),getShaderSource:b=>`
      ${b.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(d,f,p)}
      ${b.mainStart()}
      ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${p.offsetToIndices("global_idx")};

      var idx = ${f.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${d.type.indices}(outputIndices);
      ${d.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${d.getByIndices("inputIndices")};

      ${p.setByOffset("global_idx","value")};
  }`}},uI=e=>er({axis:e.axis}),fI=(e,t)=>{let r=e.inputs;sC(r),e.compute(iC(e.inputs,t))}}),aC,lC,pI,mI,Eq=qe(()=>{xt(),St(),At(),aC=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},lC=(e,t)=>{let r=e[0].dims.slice(),n=e[1].dims.slice(),[o,s,i]=u$.getShapeOfGemmResult(r,t.transA,n,t.transB,e.length===3?e[2].dims:void 0),a=[o,s];if(!a)throw new Error("Can't use gemm on the given tensors");let l=16,c=Math.ceil(s/l),u=Math.ceil(o/l),d=!0,f=Oe.size(a),p=[{type:12,data:d?c:f},{type:12,data:o},{type:12,data:s},{type:12,data:i},{type:1,data:t.alpha},{type:1,data:t.beta}],m=["type","type"];e.length===3&&(p.push(...mt(e[2].dims)),m.push("rank")),p.push(...mt(a));let b=h=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let T=t.alpha===1?"":"value *= uniforms.alpha;",g=De("a",e[0].dataType,e[0].dims),M=De("b",e[1].dataType,e[1].dims),x=g.type.value,w=null,$=[g,M];e.length===3&&(w=De("c",e[2].dataType,e[2].dims.length),$.push(w));let O=ut("output",e[0].dataType,a.length);$.push(O);let L=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${h.registerUniforms(L).declareVariables(...$)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${x}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${_}
    }

    ${T}
    ${w!=null?`let cOffset = ${w.broadcastedIndicesToOffset("vec2(m, n)",O)}; value += ${x}(uniforms.beta) * ${w.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},E=h=>{let _=De("a",e[0].dataType,e[0].dims),T=De("b",e[1].dataType,e[1].dims),g=null,M=[_,T];e.length===3&&(g=De("c",e[2].dataType,e[2].dims.length),M.push(g));let x=ut("output",e[0].dataType,a.length);M.push(x);let w=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],$="",O="";t.transA&&t.transB?(O=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${T.type.value}(0);
      }
      `,$="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(O=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${T.type.value}(0);
      }
      `,$="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(O=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${T.type.value}(0);
      }
      `,$="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(O=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${_.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${T.type.value}(0);
      }
      `,$="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let L=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${h.registerUniforms(w).declareVariables(...M)}
  var<workgroup> tile_a: array<array<${_.type.storage}, ${l}>, ${l}>;
  var<workgroup> tile_b: array<array<${T.type.storage}, ${l}>, ${l}>;
  ${h.mainStart([l,l,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${l};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${l};
    let num_tiles = (uniforms.K - 1) / ${l} + 1;
    var k_start = 0u;
    var value = ${x.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${O}
      k_start = k_start + ${l};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${l}; k++) {
        ${$}
      }
      workgroupBarrier();
    }

    ${L}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${g!=null?`let cOffset = ${g.broadcastedIndicesToOffset("vec2(m, n)",x)}; value += ${x.type.value}(uniforms.beta) * ${g.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return d?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:c*u},programUniforms:p}),getShaderSource:E}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:p}),getShaderSource:b}},pI=e=>{let t=e.transA,r=e.transB,n=e.alpha,o=e.beta;return{transA:t,transB:r,alpha:n,beta:o,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},mI=(e,t)=>{aC(e.inputs),e.compute(lC(e.inputs,t))}}),us,Ss,ji,Vi,cC,dC,uC,fC,pC,mC,hC,gC,hI,gI,Pq=qe(()=>{xt(),St(),Kr(),At(),[us,Ss,ji,Vi]=[0,1,2,3],cC=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},dC=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,uC=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,fC=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,pC=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,mC=(e,t,r)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${us}] = batch;
     indices[${Ss}] = channel;`+(()=>{switch(r.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${ji}] = u32(r);
            indices[${Vi}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${ji}] = u32(clamp(r, 0, H - 1));
          indices[${Vi}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${ji}] = gs_reflect(r, border[1], border[3]);
          indices[${Vi}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${r.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,hC=(e,t,r)=>(()=>{switch(r.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${us}], indices[${Ss}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${us}], indices[${Ss}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${us}], indices[${Ss}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${us}], indices[${Ss}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${us}], indices[${Ss}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${us}], indices[${Ss}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${r.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,gC=(e,t)=>{let r=De("x",e[0].dataType,e[0].dims.length),n=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],o=De("grid",e[1].dataType,n.length,2),s=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(s=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[us,Ss,ji,Vi]=[0,3,1,2]);let i=ut("output",e[0].dataType,s.length),a=r.type.value,l=Oe.size(s),c=[{type:12,data:l},...mt(e[0].dims,n,s)],u=d=>`
  ${d.registerUniform("output_size","u32").declareVariables(r,o,i)}
  ${dC}
  ${uC(a)}
  ${fC(t)}
  ${pC(t)}
  ${mC(r,a,t)}

  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${ji}]);
      let W_in = i32(uniforms.x_shape[${Vi}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${i.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${us}], indices[${ji}], indices[${Vi}]);
      let nxy = ${o.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${hC(i,a,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:d=>{let f=Oe.size(s);return{outputs:[{dims:s,dataType:d[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:c}},getShaderSource:u}},hI=(e,t)=>{cC(e.inputs),e.compute(gC(e.inputs,t))},gI=e=>er({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),Vn,_C,_I,th,bC,nc,bI,vI=qe(()=>{xt(),St(),Kr(),k_(),$_(),At(),Mi(),Vn=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,_C=(e,t)=>{let r=e[0],n=Vn(e,1),o=Vn(e,2),s=Vn(e,3),i=Vn(e,4),a=Vn(e,5),l=Vn(e,6),c=Vn(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let u=r.dims[0],d=r.dims[1],f=r.dims.length===3?r.dims[2]:t.numHeads*r.dims[4],p=d,m=0,b=0,E=Math.floor(f/t.numHeads);if(l&&c&&Oe.size(l.dims)&&Oe.size(c.dims)){if(l.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims[0]!==u||l.dims[1]!==t.numHeads||l.dims[3]!==E)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(c.dims[0]!==u||c.dims[1]!==t.numHeads||c.dims[3]!==E)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(l.dims[2]!==c.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(c.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');m=l.dims[2],b=l.dims[2]}else if(l&&Oe.size(l.dims)||c&&Oe.size(c.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let h;if(n&&Oe.size(n.dims)>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');h=2,p=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==E)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(o)throw new Error('Expect "value" be none when "key" has packed kv format.');h=5,p=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==E)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');h=0,p=n.dims[2]}}else{if(r.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(r.dims[2]!==t.numHeads||r.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');h=3}if(s&&Oe.size(s.dims)>0){if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let _=m+p,T=0;if(i&&Oe.size(i.dims)>0){T=8;let w=i.dims;throw w.length===1?w[0]===u?T=1:w[0]===3*u+2&&(T=3):w.length===2&&w[0]===u&&w[1]===_&&(T=5),T===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let g=!1,M=f;if(o&&Oe.size(o.dims)>0){if(o.dims.length!==3&&o.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==o.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(o.dims.length===3){if(p!==o.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');M=o.dims[2]}else{if(p!==o.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');M=o.dims[1]*o.dims[3],g=!0}}let x=!1;if(i&&Oe.size(i.dims)>0)throw new Error("Key padding mask is not supported");if(a&&Oe.size(a.dims)>0){if(a.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(a.dims[0]!==u||a.dims[1]!==t.numHeads||a.dims[2]!==d||a.dims[3]!==_)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:u,sequenceLength:d,pastSequenceLength:m,kvSequenceLength:p,totalSequenceLength:_,maxSequenceLength:b,inputHiddenSize:0,hiddenSize:f,vHiddenSize:M,headSize:E,vHeadSize:Math.floor(M/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:T,scale:t.scale,broadcastResPosBias:x,passPastInKv:g,qkvFormat:h}},_I=e=>er({...e}),th=er({perm:[0,2,1,3]}),bC=(e,t,r,n,o,s,i)=>{let a=[n,o,s],l=Oe.size(a),c=[{type:12,data:l},{type:12,data:i},{type:12,data:s}],u=d=>{let f=ut("qkv_with_bias",t.dataType,a),p=De("qkv",t.dataType,a),m=De("bias",r.dataType,a),b=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${d.registerUniforms(b).declareVariables(p,m,f)}
  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:c}),getShaderSource:u},{inputs:[t,r],outputs:[-1]})[0]},nc=(e,t,r,n,o,s,i,a)=>{let l=s;if(i&&Oe.size(i.dims)>0){if(n===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return l=bC(e,s,i,t,n,r*o,a),l=l.reshape([t,n,r,o]),r===1||n===1?l:e.compute(uo(l,th.perm),{inputs:[l],outputs:[-1]})[0]}else return s.dims.length===3&&(l=s.reshape([t,n,r,o])),r===1||n===1?l:e.compute(uo(l,th.perm),{inputs:[l],outputs:[-1]})[0]},bI=(e,t)=>{let r=_C(e.inputs,t),n=e.inputs[0],o=Vn(e.inputs,1),s=Vn(e.inputs,2),i=Vn(e.inputs,3),a=Vn(e.inputs,4),l=Vn(e.inputs,5),c=Vn(e.inputs,6),u=Vn(e.inputs,7);if(n.dims.length===5)throw new Error("Packed QKV is not implemented");if(o?.dims.length===5)throw new Error("Packed KV is not implemented");let d=o&&s&&o.dims.length===4&&s.dims.length===4,f=nc(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,n,i,0);if(d)return rd(e,f,o,s,a,void 0,c,u,l,r);if(!o||!s)throw new Error("key and value must be provided");let p=nc(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,o,i,r.hiddenSize),m=nc(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,s,i,2*r.hiddenSize);rd(e,f,p,m,a,void 0,c,u,l,r)}}),vC,yC,wC,MC,$g,yI,wI,MI=qe(()=>{xt(),St(),Kr(),At(),vC=e=>{if(!e||e.length<1)throw new Error("too few inputs")},yC=(e,t)=>{let r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),n=r.length),er({numOutputs:n,axis:t.axis,splitSizes:r})},wC=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${ft("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,MC=e=>{let t=e.length,r=[];for(let n=0;n<t;++n){let o=e[n].setByIndices("indices","input[global_idx]");t===1?r.push(o):n===0?r.push(`if (output_number == ${n}u) { ${o} }`):n===t-1?r.push(`else { ${o} }`):r.push(`else if (output_number == ${n}) { ${o} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${r.join(`
`)}
      }`},$g=(e,t)=>{let r=e[0].dims,n=Oe.size(r),o=e[0].dataType,s=Oe.normalizeAxis(t.axis,r.length),i=new Array(t.numOutputs),a=De("input",o,r.length),l=new Array(t.numOutputs),c=[],u=[],d=0,f=[{type:12,data:n}];for(let m=0;m<t.numOutputs;m++){d+=t.splitSizes[m],l[m]=d;let b=r.slice();b[s]=t.splitSizes[m],u.push(b),i[m]=ut(`output${m}`,o,b.length),c.push({dims:u[m],dataType:e[0].dataType})}f.push({type:12,data:l},...mt(r,...u));let p=m=>`
  ${m.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",l.length).declareVariables(a,...i)}
  ${wC(l.length)}
  ${MC(i)}

  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${a.offsetToIndices("global_idx")};
    var index = ${a.indicesGet("indices",s)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${ft("uniforms.size_in_split_axis","output_number - 1u",l.length)};
      ${a.indicesSet("indices",s,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:p,getRunData:()=>({outputs:c,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:f})}},yI=(e,t)=>{vC(e.inputs);let r=e.inputs.length===1?t:yC(e.inputs,t);e.compute($g(e.inputs,r),{inputs:[0]})},wI=e=>{let t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return er({axis:t,numOutputs:n,splitSizes:r})}}),xC,af,xI,TI=qe(()=>{xt(),St(),Kr(),At(),xC=(e,t)=>{let[r,n,o,s]=e,{numHeads:i,rotaryEmbeddingDim:a}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!Oe.areEqual(n.dims,[])&&!Oe.areEqual(n.dims,[1])&&n.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${n.dims.length}`);if(o.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${o.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(!Oe.areEqual(o.dims,s.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(a>0&&i===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let l=r.dims[0],c=r.dims[r.dims.length-2],u=o.dims[0],d=Oe.sizeFromDimension(r.dims,1)/c,f=a===0?o.dims[1]*2:d/i;if(a>f)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(n.dims.length===2){if(l!==n.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${n.dims[0]}`);if(c!==n.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${n.dims[1]}`)}if(f/2!==o.dims[1]&&a/2!==o.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${o.dims[1]}`);if(c>u)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},af=(e,t)=>{let{interleaved:r,numHeads:n,rotaryEmbeddingDim:o,scale:s}=t,i=e[0].dims[0],a=Oe.sizeFromDimension(e[0].dims,1),l=e[0].dims[e[0].dims.length-2],c=a/l,u=e[2].dims[1],d=o===0?u*2:c/n,f=new Array(i,l,c/d,d-u),p=Oe.computeStrides(f),m=[{type:1,data:s},{type:12,data:f},{type:12,data:p},...e[0].dims.length===3?new Array({type:12,data:[a,c,d,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[a,d,l*d,1]}):[],...mt(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],b=E=>{let h=De("input",e[0].dataType,e[0].dims.length),_=De("position_ids",e[1].dataType,e[1].dims.length),T=De("cos_cache",e[2].dataType,e[2].dims.length),g=De("sin_cache",e[3].dataType,e[3].dims.length),M=ut("output",e[0].dataType,e[0].dims.length);return E.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:f.length},{name:"global_strides",type:"u32",length:p.length},{name:"input_output_strides",type:"u32",length:p.length}]),`
        ${E.declareVariables(h,_,T,g,M)}

        ${E.mainStart(el)}
          let half_rotary_emb_dim = uniforms.${T.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${E.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${_.broadcastedIndicesToOffset("bsnh.xy",ut("",_.type.tensor,2))};
            let position_id =
                u32(${_.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});
            let j = i + select(half_rotary_emb_dim, 1, ${r});
            let re = ${h.getByOffset("i")} * ${T.get("position_id","bsnh[3]")} -
                ${h.getByOffset("j")} * ${g.get("position_id","bsnh[3]")};
            ${M.setByOffset("i","re")}
            let im = ${h.getByOffset("i")} * ${g.get("position_id","bsnh[3]")} +
                ${h.getByOffset("j")} * ${T.get("position_id","bsnh[3]")};
            ${M.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${M.setByOffset("k",h.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:er({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:b,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Oe.size(f)/el)},programUniforms:m})}},xI=(e,t)=>{xC(e.inputs,t),e.compute(af(e.inputs,t))}}),TC,CC,rh,kC,CI,$q=qe(()=>{Kr(),xt(),$_(),vI(),MI(),Mi(),TI(),At(),TC=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let r=e[0],n=e[1],o=e[2],s=e[3],i=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let a=!1,l=r.dims[0],c=r.dims[1],u=r.dims.length===3?a?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],d=c,f=0,p=!n||n.dims.length===0,m=Math.floor(p?u/(t.numHeads+2*t.kvNumHeads):u/t.numHeads);p&&(u=m*t.numHeads);let b=s&&s.dims.length!==0,E=i&&i.dims.length!==0;if(b&&s.dims.length===4&&s.dims[0]===l&&s.dims[1]!==t.kvNumHeads&&s.dims[2]===t.kvNumHeads&&s.dims[3]===m)throw new Error("BSNH pastKey/pastValue is not supported");if(b&&E){if(s.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(i.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');f=s.dims[2]}else if(b||E)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let h=1;if(n&&n.dims.length>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(r.dims[2]%n.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');d=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==m)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(o)throw new Error('Expect "value" be none when "key" has packed kv format.');d=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==m)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');d=n.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');h=3}let _=0,T=!1,g=t.kvNumHeads?m*t.kvNumHeads:u;if(o&&o.dims.length>0){if(o.dims.length!==3&&o.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==o.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(o.dims.length===3){if(d!==o.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');g=o.dims[2]}else{if(d!==o.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');g=o.dims[1]*o.dims[3],T=!0}}let M=e.length>4?e[5]:void 0;if(M&&M.dims.length!==1&&M.dims[0]!==l)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:l,sequenceLength:c,pastSequenceLength:f,kvSequenceLength:d,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:u,vHiddenSize:g,headSize:m,vHeadSize:Math.floor(g/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:_,scale:t.scale,broadcastResPosBias:!1,passPastInKv:T,qkvFormat:h}},CC=er({perm:[0,2,1,3]}),rh=(e,t,r)=>{let n=t,o=r.kvNumHeads;return t.dims.length===3&&r.kvSequenceLength!==0&&(n=t.reshape([r.batchSize,r.kvSequenceLength,o,r.headSize]),n=e.compute(uo(n,CC.perm),{inputs:[n],outputs:[-1]})[0]),n},kC=(e,t,r,n)=>{let o=7,s=["type","type"],i=[e*t],a=e*t,l=[{type:12,data:a},{type:12,data:t},{type:12,data:e}],c=u=>{let d=De("seq_lens",r.dataType,r.dims),f=De("total_seq_lens",n.dataType,n.dims),p=ut("pos_ids",o,i),m=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${u.registerUniforms(m).declareVariables(d,f,p)}
  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${f.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${d.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${p.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${p.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:s},getRunData:()=>({outputs:[{dims:i,dataType:o}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:l}),getShaderSource:c}},CI=(e,t)=>{let r=TC(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(e.inputs[1]?.dims.length===5)throw new Error("Packed KV is not implemented");let n=e.inputs[0],o=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,s=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,i=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,a=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,l=e.inputs.length>4?e.inputs[5]:void 0,c=e.inputs.length>5?e.inputs[6]:void 0,u=r.kvNumHeads?r.kvNumHeads:r.numHeads,d=er({axis:2,numOutputs:3,splitSizes:[r.numHeads*r.headSize,u*r.headSize,u*r.headSize]}),[f,p,m]=!o&&!s?e.compute($g([n],d),{inputs:[n],outputs:[-1,-1,-1]}):[n,o,s],b,E;if(t.doRotary){let g=e.compute(kC(r.batchSize,r.sequenceLength,l,c),{inputs:[l,c],outputs:[-1]})[0],M=e.inputs[7],x=e.inputs[8],w=er({interleaved:t.rotaryInterleaved!==0,numHeads:r.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),$=[f,g,M,x],O=[-1];b=e.compute(af($,w),{inputs:$,outputs:O})[0],$.splice(0,1,p);let L=er({interleaved:t.rotaryInterleaved!==0,numHeads:r.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});E=e.compute(af($,L),{inputs:$,outputs:O})[0]}let h=nc(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,t.doRotary?b:f,void 0,0),_=rh(e,t.doRotary?E:p,r),T=rh(e,m,r);rd(e,h,_,T,void 0,void 0,i,a,void 0,r,l,c)}}),nh,EC,PC,kI,Sq=qe(()=>{xt(),St(),Mi(),At(),nh=(e,t,r,n,o,s,i,a)=>{let l=Wr(s),c=l===1?"f32":`vec${l}f`,u=l===1?"vec2f":`mat2x${l}f`,d=o*i,f=64;d===1&&(f=256);let p=[o,i,s/l],m=[o,i,2],b=["rank","type","type"],E=[];E.push(...mt(p,m));let h=_=>{let T=De("x",t.dataType,3,l),g=De("scale",r.dataType,r.dims),M=De("bias",n.dataType,n.dims),x=ut("output",1,3,2),w=[T,g,M,x];return`
  var<workgroup> workgroup_shared : array<${u}, ${f}>;
  const workgroup_size = ${f}u;
  ${_.declareVariables(...w)}
  ${_.mainStart(f)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${c}(0);
    var squared_sum = ${c}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${c}(${T.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${u}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${hi("workgroup_shared[0][0]",l)} / f32(hight * ${l});
      let squared_sum_final = ${hi("workgroup_shared[0][1]",l)} / f32(hight * ${l});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${a}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${l};${a};${f}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:m,dataType:1}],dispatchGroup:{x:d},programUniforms:E}),getShaderSource:h},{inputs:[t,r,n],outputs:[-1]})[0]},EC=(e,t,r)=>{let n=t[0].dims,o=n,s=2,i=n[0],a=n[1],l=Oe.sizeFromDimension(n,s),c=Wr(l),u=Oe.size(o)/c,d=nh(e,t[0],t[1],t[2],i,l,a,r.epsilon),f=[i,a,l/c],p=[i,a],m=["type","none"],b=E=>{let h=De("x",t[0].dataType,f.length,c),_=De("scale_shift",1,p.length,2),T=ut("output",t[0].dataType,f.length,c),g=[h,_,T];return`
  ${E.registerUniform("output_size","u32").declareVariables(...g)}
  ${E.mainStart()}
  ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${T.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${_.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${h.getByOffset("global_idx")} * ${T.type.value}(scale_shift.x) + ${T.type.value}(scale_shift.y);
      ${T.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${c}`,inputDependencies:m},getRunData:()=>({outputs:[{dims:o,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)},programUniforms:[{type:12,data:u},...mt(f,p,f)]}),getShaderSource:b},{inputs:[t[0],d]})},PC=(e,t,r)=>{let n=t[0].dims,o=n,s=n[0],i=n[n.length-1],a=Oe.sizeFromDimension(n,1)/i,l=Wr(i),c=Oe.size(o)/l,u=[{type:12,data:a},{type:12,data:Math.floor(i/l)}],d=["type","type"],f=!1,p=[0,n.length-1];for(let h=0;h<n.length-2;h++)f=f||n[h+1]!==1,p.push(h+1);f=f&&n[n.length-1]!==1;let m=f?e.compute(uo(e.inputs[0],p),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:n.length},(h,_)=>n[p[_]])),b=nh(e,m,t[1],t[2],s,a,i,r.epsilon),E=h=>{let _=bn(t[0].dataType),T=l===1?"vec2f":`mat${l}x2f`,g=w=>{let $=w===0?"x":"y",O=l===1?"f32":`vec${l}f`;switch(l){case 1:return`${_}(${O}(scale.${$}))`;case 2:return`vec2<${_}>(${O}(scale[0].${$}, scale[1].${$}))`;case 4:return`vec4<${_}>(${O}(scale[0].${$}, scale[1].${$}, scale[2].${$}, scale[3].${$}))`;default:throw new Error(`Not supported compoents ${l}`)}},M=De("input",t[0].dataType,t[0].dims,l),x=ut("output",t[0].dataType,o,l);return`
  @group(0) @binding(0) var<storage, read> input : array<${M.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${T}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${x.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${h.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${g(0)}, ${g(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${l}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(c/64)},programUniforms:u}),getShaderSource:E},{inputs:[t[0],b]})},kI=(e,t)=>{t.format==="NHWC"?PC(e,e.inputs,t):EC(e,e.inputs,t)}}),$C,SC,EI,Iq=qe(()=>{xt(),St(),At(),$C=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},SC=(e,t,r)=>{let n=t.simplified,o=e[0].dims,s=e[1],i=!n&&e[2],a=o,l=Oe.normalizeAxis(t.axis,o.length),c=Oe.sizeToDimension(o,l),u=Oe.sizeFromDimension(o,l),d=Oe.size(s.dims),f=i?Oe.size(i.dims):0;if(d!==u||i&&f!==u)throw new Error(`Size of X.shape()[axis:] == ${u}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${d} and bias size of ${f}`);let p=[];for(let M=0;M<o.length;++M)M<l?p.push(o[M]):p.push(1);let m=Wr(u),b=["type","type"],E=[{type:12,data:c},{type:1,data:u},{type:12,data:Math.floor(u/m)},{type:1,data:t.epsilon}];i&&b.push("type");let h=r>1,_=r>2,T=M=>{let x=bn(e[0].dataType),w=[De("x",e[0].dataType,e[0].dims,m),De("scale",s.dataType,s.dims,m)];i&&w.push(De("bias",i.dataType,i.dims,m)),w.push(ut("output",e[0].dataType,a,m)),h&&w.push(ut("mean_data_output",1,p)),_&&w.push(ut("inv_std_output",1,p));let $=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${M.registerUniforms($).declareVariables(...w)}
  ${M.mainStart()}
    ${M.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${yg("f32",m)};
    var mean_square_vector = ${yg("f32",m)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${ja(x,m,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${hi("mean_vector",m)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${hi("mean_square_vector",m)} / uniforms.norm_size ${n?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${ja(x,m,"x[j + offset]")};
      let f32scale = ${ja(x,m,"scale[j]")};
      output[j + offset] = ${w[0].type.value}((f32input ${n?"":"- mean"}) * inv_std_dev * f32scale
        ${i?`+ ${ja(x,m,"bias[j]")}`:""}
      );
    }

    ${h?"mean_data_output[global_idx] = mean":""};
    ${_?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},g=[{dims:a,dataType:e[0].dataType}];return h&&g.push({dims:p,dataType:1}),_&&g.push({dims:p,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${m};${r};${n}`,inputDependencies:b},getRunData:()=>({outputs:g,dispatchGroup:{x:Math.ceil(c/64)},programUniforms:E}),getShaderSource:T}},EI=(e,t)=>{$C(e.inputs),e.compute(SC(e.inputs,t,e.outputCount))}}),IC,PI,Aq=qe(()=>{St(),L_(),F_(),IC=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},PI=e=>{IC(e.inputs);let t=Za.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];if(r<8&&n<8)e.compute(O_(e.inputs,{activation:""},t));else{let o=t[t.length-2],s=Oe.size(e.inputs[0].dims.slice(0,-2)),i=Oe.size(e.inputs[1].dims.slice(0,-2));if(s!==1&&o===1&&i===1){let a=e.inputs[0].reshape([1,s,n]),l=e.inputs[1].reshape([1,n,r]),c=[1,s,r],u=[a,l];e.compute(sf(u,{activation:""},t,c),{inputs:u})}else e.compute(sf(e.inputs,{activation:""},t))}}}),AC,OC,LC,$I,SI,Oq=qe(()=>{xt(),St(),Kr(),At(),AC=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],n=r.dims.length;if(r.dims[n-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let o=Math.floor((t.k+t.blockSize-1)/t.blockSize),s=t.blockSize/8*t.bits,i=e[1];if(!Oe.areEqual(i.dims,[t.n,o,s]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let a=e[2].dims;if(Oe.size(a)!==t.n*o)throw new Error("scales input size error.");if(e.length===4){let l=e[3].dims,c=t.bits>4?t.n*o:t.n*Math.floor((o+1)/2);if(Oe.size(l)!==c)throw new Error("zeroPoints input size error.")}},OC=(e,t)=>{let r=e[0].dims,n=r.length,o=r[n-2],s=t.k,i=t.n,a=r.slice(0,n-2),l=Oe.size(a),c=e[1].dims[2]/4,u=e[0].dataType,d=Wr(t.k),f=Wr(c),p=Wr(i),m=a.concat([o,i]),b=o>1&&i/p%2===0?2:1,E=Oe.size(m)/p/b,h=64,_=[],T=[l,o,s/d],g=Oe.convertShape(e[1].dims).slice();g.splice(-1,1,c/f),_.push(...mt(T)),_.push(...mt(g)),_.push(...mt(e[2].dims)),e.length===4&&_.push(...mt(Oe.convertShape(e[3].dims)));let M=[l,o,i/p];_.push(...mt(M));let x=w=>{let $=T.length,O=De("a",e[0].dataType,$,d),L=De("b",12,g.length,f),G=De("scales",e[2].dataType,e[2].dims.length),j=[O,L,G],D=e.length===4?De("zero_points",12,e[3].dims.length):void 0;D&&j.push(D);let re=M.length,Z=ut("output",e[0].dataType,re,p),te=bn(e[0].dataType),ie=(()=>{switch(d){case 1:return`array<${te}, 8>`;case 2:return`mat4x2<${te}>`;case 4:return`mat2x4<${te}>`;default:throw new Error(`${d}-component is not supported.`)}})(),ne=()=>{let W=`
          // reuse a data
            var input_offset = ${O.indicesToOffset(`${O.type.indices}(batch, row, word_offset)`)};
            var a_data: ${ie};
            for (var j: u32 = 0; j < ${8/d}; j++) {
              a_data[j] = ${O.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let R=0;R<p*b;R++)W+=`
            b_value = ${f===1?`b${R}_data`:`b${R}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${ie}(${Array.from({length:4},(J,U)=>`${te}(b_value_lower[${U}]), ${te}(b_value_upper[${U}])`).join(", ")});
            b_dequantized_values = ${d===1?`${ie}(${Array.from({length:8},(J,U)=>`(b_quantized_values[${U}] - ${D?`zero_point${R}`:"zero_point"}) * scale${R}`).join(", ")});`:`(b_quantized_values - ${ie}(${Array(8).fill(`${D?`zero_point${R}`:"zero_point"}`).join(",")})) * scale${R};`};
            workgroup_shared[local_id.x * ${b} + ${Math.floor(R/p)}]${p>1?`[${R%p}]`:""} += ${Array.from({length:8/d},(J,U)=>`${d===1?`a_data[${U}] * b_dequantized_values[${U}]`:`dot(a_data[${U}], b_dequantized_values[${U}])`}`).join(" + ")};
          `;return W},ve=()=>{let W=`
            var col_index = col * ${p};
            ${D?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${te}(8);`}
            `;for(let R=0;R<p*b;R++)W+=`
            let scale${R} = ${G.getByOffset("col_index * nBlocksPerCol + block")};
            ${D?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${D.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${R} = ${te}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return W},Me=()=>{let W=`col_index = col * ${p};`;for(let R=0;R<p*b;R++)W+=`
            let b${R}_data = ${L.getByIndices(`${L.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return W+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${ie};
            var b_dequantized_values: ${ie};`,W};return`
        var<workgroup> workgroup_shared: array<${Z.type.value}, ${b*h}>;
        ${w.declareVariables(...j,Z)}
        ${w.mainStart([h,1,1])}
          let output_indices = ${Z.offsetToIndices(`(global_idx / ${h}) * ${b}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${h}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/d};
            ${ve()}
            for (var word: u32 = 0; word < ${c}; word += ${f}) {
              ${Me()}
              for (var i: u32 = 0; i < ${f}; i++) {
                ${ne()}
                word_offset += ${8/d};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${b}) {
            var output_value: ${Z.type.value} = ${Z.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${h}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${b};
            }
            ${Z.setByIndices(`${Z.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${d};${f};${p};${b};${h}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:m,dataType:u}],dispatchGroup:{x:E},programUniforms:_}),getShaderSource:x}},LC=(e,t)=>{let r=e[0].dims,n=r.length,o=r[n-2],s=t.k,i=t.n,a=r.slice(0,n-2),l=Oe.size(a),c=e[1].dims[2]/4,u=e[0].dataType,d=Wr(t.k),f=Wr(c),p=a.concat([o,i]),m=128,b=i%8===0?8:i%4===0?4:1,E=m/b,h=E*f*8,_=h/d,T=h/t.blockSize,g=Oe.size(p)/b,M=[],x=[l,o,s/d],w=Oe.convertShape(e[1].dims).slice();w.splice(-1,1,c/f),M.push(...mt(x)),M.push(...mt(w)),M.push(...mt(e[2].dims)),e.length===4&&M.push(...mt(Oe.convertShape(e[3].dims)));let $=[l,o,i];M.push(...mt($));let O=L=>{let G=x.length,j=De("a",e[0].dataType,G,d),D=De("b",12,w.length,f),re=De("scales",e[2].dataType,e[2].dims.length),Z=[j,D,re],te=e.length===4?De("zero_points",12,e[3].dims.length):void 0;te&&Z.push(te);let ie=$.length,ne=ut("output",e[0].dataType,ie),ve=bn(e[0].dataType),Me=()=>{switch(d){case 1:return`
          let a_data0 = vec4<${ve}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${ve}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${ve}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${ve}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${d}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${j.type.value}, ${_}>;
        var<workgroup> inter_results: array<array<${ne.type.value}, ${E}>, ${b}>;
        ${L.declareVariables(...Z,ne)}
        ${L.mainStart([E,b,1])}
          let output_indices = ${ne.offsetToIndices(`workgroup_index * ${b}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${T} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${_};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${_}; a_offset += ${m})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${j.getByIndices(`${j.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${j.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${T} + local_id.x;
            ${te?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${te.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${ve}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${ve}(8);`}
            let scale = ${re.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${D.getByIndices(`${D.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/d};
            for (var i: u32 = 0; i < ${f}; i++) {
              ${Me()}
              let b_value = ${f===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${ve}>(${Array.from({length:4},(W,R)=>`${ve}(b_value_lower[${R}]), ${ve}(b_value_upper[${R}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${ve}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(W,R)=>`${`dot(a_data${R}, b_dequantized_values[${R}])`}`).join(" + ")};
              word_offset += ${8/d};
            }
            workgroupBarrier();
          }

          if (local_idx < ${b}) {
            var output_value: ${ne.type.value} = ${ne.type.value}(0);
            for (var b = 0u; b < ${E}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${ne.setByIndices(`${ne.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${d};${f};${E};${b}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:p,dataType:u}],dispatchGroup:{x:g},programUniforms:M}),getShaderSource:O}},$I=(e,t)=>{AC(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(LC(e.inputs,t)):e.compute(OC(e.inputs,t))},SI=e=>er(e)}),FC,DC,BC,RC,zC,NC,jC,VC,II,Lq=qe(()=>{xt(),St(),At(),FC=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},DC=(e,t,r)=>{let n="";for(let o=t-1;o>=0;--o)n+=`
            k = i32(${e.indicesGet("indices",o)}) - ${ft("uniforms.pads",o,r)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${ft("uniforms.x_shape",o,t)})) {
              break;
            }
            offset += k * i32(${ft("uniforms.x_strides",o,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${n}
            value = x[offset];
          }
      `},BC=(e,t,r)=>{let n="";for(let o=t-1;o>=0;--o)n+=`
                k = i32(${e.indicesGet("indices",o)}) - ${ft("uniforms.pads",o,r)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${ft("uniforms.x_shape",o,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${ft("uniforms.x_shape",o,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${ft("uniforms.x_strides",o,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},RC=(e,t,r)=>{let n="";for(let o=t-1;o>=0;--o)n+=`
                k = i32(${e.indicesGet("indices",o)}) - ${ft("uniforms.pads",o,r)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${ft("uniforms.x_shape",o,t)})) {
                  k = i32(${ft("uniforms.x_shape",o,t)}) - 1;
                }
                offset += k * i32(${ft("uniforms.x_strides",o,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},zC=(e,t,r)=>{let n="";for(let o=t-1;o>=0;--o)n+=`
                k = i32(${e.indicesGet("indices",o)}) - ${ft("uniforms.pads",o,r)};
                if (k < 0)  {
                  k += i32(${ft("uniforms.x_shape",o,t)}]);
                }
                if (k >= i32(${ft("uniforms.x_shape",o,t)})) {
                  k -= i32(${ft("uniforms.x_shape",o,t)});
                }
                offset += k * i32(${ft("uniforms.x_strides",o,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},NC=(e,t,r)=>{switch(r.mode){case 0:return DC(e,t,r.pads.length);case 1:return BC(e,t,r.pads.length);case 2:return RC(e,t,r.pads.length);case 3:return zC(e,t,r.pads.length);default:throw new Error("Invalid mode")}},jC=(e,t)=>{let r=Oe.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,o=Oe.size(r),s=[{type:12,data:o},{type:6,data:t.pads}],i=e.length>=3&&e[2].data;t.mode===0&&s.push({type:i?e[2].dataType:1,data:t.value}),s.push(...mt(e[0].dims,r));let a=["rank"],l=c=>{let u=ut("output",e[0].dataType,r.length),d=De("x",e[0].dataType,n.length),f=d.type.value,p=NC(u,n.length,t),m=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&m.push({name:"constant_value",type:i?f:"f32"}),`
            ${c.registerUniforms(m).declareVariables(d,u)}
            ${c.mainStart()}
            ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${u.offsetToIndices("global_idx")};

            var value = ${f}(0);
            ${p}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${i}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(Oe.size(r)/64)},programUniforms:s}),getShaderSource:l}},VC=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,o=e[0].dims.length,s=new Int32Array(2*o).fill(0);if(e.length>=4){let a=e[3].getBigInt64Array();for(let l=0;l<a.length;l++)s[Number(a[l])]=Number(r[l]),s[Number(a[l])+o]=Number(r[l+a.length])}else r.forEach((a,l)=>s[Number(l)]=Number(a));let i=[];return s.forEach(a=>i.push(a)),{mode:t.mode,value:n,pads:i}}else return t},II=(e,t)=>{FC(e.inputs);let r=VC(e.inputs,t);e.compute(jC(e.inputs,r),{inputs:[0]})}}),Ul,oh,sh,ih,ah,WC,UC,lh,ch,AI,OI,dh,LI,FI,uh,DI,BI,RI,zI,Fq=qe(()=>{Zo(),xt(),St(),At(),Ul=e=>{if(Pr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},oh=(e,t,r)=>{let n=t.format==="NHWC",o=e.dims.slice();n&&o.splice(1,0,o.pop());let s=Object.hasOwnProperty.call(t,"dilations"),i=t.kernelShape.slice(),a=t.strides.slice(),l=s?t.dilations.slice():[],c=t.pads.slice();nf.adjustPoolAttributes(r,o,i,a,l,c);let u=nf.computePoolOutputShape(r,o,a,l,i,c,t.autoPad),d=Object.assign({},t);s?Object.assign(d,{kernelShape:i,strides:a,pads:c,dilations:l,cacheKey:t.cacheKey}):Object.assign(d,{kernelShape:i,strides:a,pads:c,cacheKey:t.cacheKey});let f=u.slice();return f.push(f.splice(1,1)[0]),[d,n?f:u]},sh=(e,t)=>{let r=t.format==="NHWC",n=Oe.size(e),o=Oe.size(t.kernelShape),s=[{type:12,data:n},{type:12,data:o}],i=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let a=t.kernelShape[t.kernelShape.length-1],l=t.strides[t.strides.length-1],c=t.pads[t.pads.length/2-1],u=t.pads[t.pads.length-1],d=!!(c+u);s.push({type:12,data:a},{type:12,data:l},{type:12,data:c},{type:12,data:u}),i.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let f=!1;if(t.kernelShape.length===2){let p=t.kernelShape[t.kernelShape.length-2],m=t.strides[t.strides.length-2],b=t.pads[t.pads.length/2-2],E=t.pads[t.pads.length-2];f=!!(b+E),s.push({type:12,data:p},{type:12,data:m},{type:12,data:b},{type:12,data:E}),i.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[s,i,!0,d,f]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let a=Oe.computeStrides(t.kernelShape);s.push({type:12,data:a},{type:12,data:t.pads},{type:12,data:t.strides}),i.push({name:"kernelStrides",type:"u32",length:a.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let l=t.pads.reduce((c,u)=>c+u);return[s,i,!!l,!1,!1]}},ih=(e,t,r,n,o,s,i,a,l,c,u,d)=>{let f=o.format==="NHWC",p=t.type.value,m=ut("output",t.type.tensor,n);if(o.kernelShape.length<=2){let b="",E="",h="",_=r-(f?2:1);if(u?b=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${_}] = indices[${_}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${_}] < 0 || xIndices[${_}]
                      >= uniforms.x_shape[${_}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`:b=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${_}] = indices[${_}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${s}
                }`,o.kernelShape.length===2){let T=r-(f?3:2);d?E=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${T}] = indices[${T}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${T}] < 0 || xIndices[${T}] >= uniforms.x_shape[${T}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:E=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${T}] = indices[${T}] * uniforms.sh - uniforms.phStart + j;
                `,h=`
              }
            `}return`
            ${e.registerUniforms(l).declareVariables(t,m)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${m.offsetToIndices("global_idx")};
              var xIndices = ${m.offsetToIndices("global_idx")};

              var value = ${p}(${a});
              var pad = 0;
              ${E}
              ${b}
              ${h}
              ${i}

              output[global_idx] = value;
            }`}else{if(f)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let b=o.kernelShape.length,E=o.pads.length,h="";return c?h=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${s}
              }`:h=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${s}
            `,`
            ${e.registerUniforms(l).declareVariables(t,m)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${m.offsetToIndices("global_idx")};
              var xIndices = ${m.offsetToIndices("global_idx")};

              var offsets: array<u32, ${b}>;

              var value = ${p}(${a});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${b-1}u; j++) {
                  offsets[j] = offset / ${ft("uniforms.kernelStrides","j",b)};
                  offset -= offsets[j] * ${ft("uniforms.kernelStrides","j",b)};
                }
                offsets[${b-1}] = offset;

                isPad = false;
                for (var j = ${r-b}u; j < ${r}u; j++) {
                  xIndices[j] = indices[j] * ${ft("uniforms.strides",`j - ${r-b}u`,b)}
                    + offsets[j - ${r-b}u] - ${ft("uniforms.pads","j - 2u",E)};
                  ${h}
              }
              ${i}

              output[global_idx] = value;
            }`}},ah=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,WC=e=>`${ah(e)};${e.countIncludePad}`,UC=e=>`${ah(e)};${e.storageOrder};${e.dilations}`,lh=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),ch=(e,t,r,n)=>{let[o,s]=oh(t,n,r),i=De("x",t.dataType,t.dims.length),a=i.type.value,l="value += x_val;",c="";o.countIncludePad?c+=`value /= ${a}(uniforms.kernelSize);`:c+=`value /= ${a}(i32(uniforms.kernelSize) - pad);`;let[u,d,f,p,m]=sh(s,o);u.push(...mt(t.dims,s));let b=["rank"];return{name:e,shaderCache:{hint:`${n.cacheKey};${f};${p};${m}`,inputDependencies:b},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Oe.size(s)/64)},programUniforms:u}),getShaderSource:E=>ih(E,i,t.dims.length,s.length,o,l,c,0,d,f,p,m)}},AI=e=>{let t=e.count_include_pad!==0,r=lh(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let n={countIncludePad:t,...r,cacheKey:""};return{...n,cacheKey:WC(n)}},OI=(e,t)=>{Ul(e.inputs),e.compute(ch("AveragePool",e.inputs[0],!1,t))},dh={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},LI=e=>{let t=e.format;return{format:t,...dh,cacheKey:t}},FI=(e,t)=>{Ul(e.inputs),e.compute(ch("GlobalAveragePool",e.inputs[0],!0,t))},uh=(e,t,r,n)=>{let[o,s]=oh(t,n,r),i=`
      value = max(x_val, value);
    `,a="",l=De("x",t.dataType,t.dims.length),c=["rank"],[u,d,f,p,m]=sh(s,o);return u.push(...mt(t.dims,s)),{name:e,shaderCache:{hint:`${n.cacheKey};${f};${p};${m}`,inputDependencies:c},getRunData:()=>({outputs:[{dims:s,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(Oe.size(s)/64)},programUniforms:u}),getShaderSource:b=>ih(b,l,t.dims.length,s.length,o,i,a,t.dataType===10?-65504:-1e5,d,f,p,m)}},DI=(e,t)=>{Ul(e.inputs),e.compute(uh("MaxPool",e.inputs[0],!1,t))},BI=e=>{let t=e.storage_order,r=e.dilations,n=lh(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let o={storageOrder:t,dilations:r,...n,cacheKey:""};return{...o,cacheKey:UC(o)}},RI=e=>{let t=e.format;return{format:t,...dh,cacheKey:t}},zI=(e,t)=>{Ul(e.inputs),e.compute(uh("GlobalMaxPool",e.inputs[0],!0,t))}}),GC,HC,NI,jI,Dq=qe(()=>{xt(),St(),Kr(),At(),GC=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((r,n)=>r===e[2].dims[n]).reduce((r,n)=>r&&n,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((o,s)=>s===t.axis||o===e[0].dims[s]).reduce((o,s)=>o&&s,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let r=e[0].dims[t.axis],n=e[1].dims[t.axis];if(t.blockSize<Math.ceil(r/n)||t.blockSize>Math.ceil(r/(n-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},HC=(e,t)=>{let r=Oe.normalizeAxis(t.axis,e[0].dims.length),n=e[0].dataType,o=n===3,s=e[0].dims,i=e[1].dataType,a=Oe.size(s),l=n===3||n===2,c=l?[Math.ceil(Oe.size(e[0].dims)/4)]:e[0].dims,u=e[1].dims,d=e.length>2?e[2]:void 0,f=d?l?[Math.ceil(Oe.size(d.dims)/4)]:d.dims:void 0,p=u.length===0||u.length===1&&u[0]===1,m=p===!1&&u.length===1,b=Wr(a),E=p&&(!l||b===4),h=E?b:1,_=E&&!l?b:1,T=De("input",l?12:n,c.length,_),g=De("scale",i,u.length),M=d?De("zero_point",l?12:n,f.length):void 0,x=ut("output",i,s.length,h),w=[T,g];M&&w.push(M);let $=[c,u];d&&$.push(f);let O=[{type:12,data:a/h},{type:12,data:r},{type:12,data:t.blockSize},...mt(...$,s)],L=G=>{let j=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${G.registerUniforms(j).declareVariables(...w,x)}
      ${G.mainStart()}
          ${G.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${x.offsetToIndices("global_idx")};

          // Set input x
          ${l?`
            let input = ${T.getByOffset("global_idx / 4")};
            let x_vec = ${o?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${h===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${T.getByOffset("global_idx")};`};

          // Set scale input
          ${p?`let scale_value= ${g.getByOffset("0")}`:m?`
            let scale_index = ${x.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${g.getByOffset("scale_index")};`:`
            var scale_indices: ${g.type.indices} = output_indices;
            let index = ${g.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${g.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${g.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${M?p?l?`
                let zero_point_input = ${M.getByOffset("0")};
                let zero_point_vec =  ${o?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${M.getByOffset("0")}`:m?l?`
                let zero_point_index = ${x.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${M.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${o?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${x.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${M.getByOffset("zero_point_index")};`:l?`
                let zero_point_offset = ${g.indicesToOffset("scale_indices")};
                let zero_point_input = ${M.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${o?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${M.getByIndices("scale_indices")};`:`let zero_point_value = ${l?o?"i32":"u32":T.type.value}(0);`};
      // Compute and write output
      ${x.setByOffset("global_idx",`${x.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:M?["rank","rank","rank"]:["rank","rank"]},getShaderSource:L,getRunData:()=>({outputs:[{dims:s,dataType:i}],dispatchGroup:{x:Math.ceil(a/h/64),y:1,z:1},programUniforms:O})}},NI=(e,t)=>{GC(e.inputs,t),e.compute(HC(e.inputs,t))},jI=e=>er({axis:e.axis,blockSize:e.blockSize})}),KC,qC,VI,Bq=qe(()=>{Zo(),xt(),At(),KC=(e,t,r)=>{let n=e===t,o=e<t&&r<0,s=e>t&&r>0;if(n||o||s)throw new Error("Range these inputs' contents are invalid.")},qC=(e,t,r,n)=>{let o=Math.abs(Math.ceil((t-e)/r)),s=[o],i=o,a=[{type:12,data:i},{type:n,data:e},{type:n,data:r},...mt(s)],l=c=>{let u=ut("output",n,s.length),d=u.type.value,f=[{name:"outputSize",type:"u32"},{name:"start",type:d},{name:"delta",type:d}];return`
        ${c.registerUniforms(f).declareVariables(u)}
        ${c.mainStart()}
        ${c.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${d}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${n}`},getShaderSource:l,getRunData:()=>({outputs:[{dims:s,dataType:n}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:a})}},VI=e=>{let t=0,r=0,n=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),Pr.webgpu.validateInputContent&&KC(t,r,n),e.compute(qC(t,r,n,e.inputs[0].dataType),{inputs:[]})}}),XC,fh,ph,QC,WI,UI,Rq=qe(()=>{xt(),St(),Kr(),At(),XC=(e,t,r,n)=>{if(e!=="none"&&n!=="i32"&&n!=="u32"&&n!=="f32")throw new Error(`Input ${n} is not supported with reduction ${e}.`);let o=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,s=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${r};`;case"add":return n==="i32"||n==="u32"?`atomicAdd(&${t}, bitcast<${n}>(${r}));`:`
              ${o}bitcast<${n}>(oldValue) + (${r})${s}`;case"max":return n==="i32"||n==="u32"?`atomicMax(&${t}, bitcast<${n}>(${r}));`:`
                ${o}max(bitcast<f32>(oldValue), (${r}))${s}`;case"min":return n==="i32"||n==="u32"?`atomicMin(&${t}, bitcast<${n}>(${r}));`:`${o}min(bitcast<${n}>(oldValue), (${r}))${s}`;case"mul":return`${o}(bitcast<${n}>(oldValue) * (${r}))${s}`;default:throw new Error(`Reduction ${e} is not supported.`)}},fh=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,ph=(e,t,r)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${r?"global_idx":"idx"} + i];
        ${XC(e.reduction,"output[data_offset + i]","value",t)}
      }`,QC=(e,t)=>{let r=e[0].dims,n=e[1].dims,o=r,s=1,i=Math.ceil(Oe.size(n)/s),a=n[n.length-1],l=Oe.sizeFromDimension(r,a),c=Oe.sizeFromDimension(n,0)/a,u=[{type:12,data:i},{type:12,data:a},{type:12,data:l},...mt(e[1].dims,e[2].dims,o)],d=f=>{let p=De("indices",e[1].dataType,e[1].dims.length),m=De("updates",e[2].dataType,e[2].dims.length,s),b=t.reduction!=="none"&&t.reduction!==""?b$("output",e[0].dataType,o.length):ut("output",e[0].dataType,o.length,s);return`
      ${f.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(p,m,b)}
      ${f.mainStart()}
        ${f.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${c}; i = i + 1) {
      for (var j = i + 1; j < ${c}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${c}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${fh(r.length,!1)}
      }
      ${ph(t,b.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${fh(r.length,!0)}
  }
  ${ph(t,b.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:u}),getShaderSource:d}},WI=e=>er({reduction:e.reduction}),UI=(e,t)=>{e.compute(QC(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),YC,JC,ZC,mh,ek,tk,rk,nk,ok,sk,ik,ak,hh,lk,ck,dk,uk,fk,GI,HI,zq=qe(()=>{xt(),St(),Kr(),At(),YC=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},JC=(e,t,r)=>{t.every(o=>o>=0&&o<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let n=new Array(r).fill(1);return t.forEach((o,s)=>n[o]=e[s]),n},ZC=(e,t,r,n,o,s)=>{let[i,a,l]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],c=e[0].dims.length;if(i>0&&e.length>i&&e[i].dims.length>0)e[i].getFloat32Array().forEach(u=>s.push(u));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(a>0&&e.length>a&&e[a].dims.length===1&&e[a].dims[0]>0){if(e[a].getFloat32Array().forEach(u=>n.push(u)),n.length!==0&&n.length!==c&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");YC(n,t),t.axes.length>0&&JC(n,t.axes,c).forEach((u,d)=>n[d]=u)}if(l>0&&e.length>l&&e[l].dims.length===1&&e[l].dims[0]>0&&(e[l].getBigInt64Array().forEach(u=>o.push(Number(u))),o.length!==0&&o.length!==c&&r>=18&&o.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==0&&n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(o.length!==0&&o.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof n<"u"&&typeof o<"u"&&n.length>0&&o.length>c)throw new Error("Resize requires only of scales or sizes to be specified")},mh=(e,t,r,n)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${n}(big / (${r}));
  let fract = ${n}(big % (${r})) / ${n}(${r});
  return whole + fract;
`,ek=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${mh("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${mh("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",tk=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",rk=(e,t,r)=>{let n=new Array(r).fill(0).concat(new Array(r).fill(1)),o=e.length===0?n:e.slice();return t.length>0?(t.forEach((s,i)=>{n[s]=o[i],n[i+r]=o[t.length+i]}),n):o},nk=(e,t,r,n)=>{let o=[];if(r.length>0)if(n.length>0){if(e.forEach(s=>o.push(s)),Math.max(...n)>e.length)throw new Error("axes is out of bound");n.forEach((s,i)=>o[s]=r[i])}else r.forEach(s=>o.push(s));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");o=e.map((s,i)=>Math.round(s*t[i]))}return o},ok=(e,t,r)=>{let n=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(s=>t[s]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(s=>t[s]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let o=e.slice();return r.axes.length>0?(r.axes.forEach(s=>t[s]=n),r.axes.forEach(s=>o[s]=Math.round(e[s]*t[s]))):(t.fill(n,0,t.length),o.forEach((s,i)=>o[i]=Math.round(s*t[i]))),o},sk=(e,t,r,n,o)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {
      var original_indices: array<${e.type.value}, ${r.length}>;
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${ft("uniforms.scales","i",n)};
        var roi_low = ${ft("uniforms.roi","i",o)};
        var roi_hi = ${ft("uniforms.roi",`i + ${t.length}`,o)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${ft("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${ft("uniforms.output_shape","i",r.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,ik=(e,t,r,n,o,s,i)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${ft("uniforms.scales","i",o)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${ft("uniforms.roi","i",s)};
          var roi_hi = ${ft("uniforms.roi",`i + ${r.length}`,s)};
          var input_shape_i = ${ft("uniforms.input_shape","i",r.length)};
          var output_shape_i = ${ft("uniforms.output_shape","i",n.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${i} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,ak=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${ft("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,hh=(e,t,r,n)=>e.rank>n?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",r,"batch")};
`:"",lk=(e,t,r,n,o)=>{let[s,i,a,l]=r.length===2?[-1,0,1,-1]:[0,2,3,1],c=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${c} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",i,`max(0, min(row, ${r[i]} - 1))`)};
      ${e.indicesSet("input_indices",a,`max(0, min(col, ${r[a]} - 1))`)};
      ${hh(e,l,s,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${c} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${c} = originalIndices[${i}];
      var col:${c} = originalIndices[${a}];
      ${n?`if (row < 0 || row > (${r[i]} - 1) || col < 0 || col > (${r[a]} - 1)) {
        return ${o};
      }`:""};
      row = max(0, min(row, ${r[i]} - 1));
      col = max(0, min(col, ${r[a]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${r.length>2?`u32(originalIndices[${l}])`:"0"};
      var batch: u32 =  ${r.length>2?`u32(originalIndices[${s}])`:"0"};
      var x11: ${c} = getInputValue(batch, channel, row1, col1);
      var x12: ${c} = getInputValue(batch, channel, row1, col2);
      var x21: ${c} = getInputValue(batch, channel, row2, col1);
      var x22: ${c} = getInputValue(batch, channel, row2, col2);
      var dx1: ${c} = abs(row - ${c}(row1));
      var dx2: ${c} = abs(${c}(row2) - row);
      var dy1: ${c} = abs(col - ${c}(col1));
      var dy2: ${c} = abs(${c}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},ck=(e,t,r,n,o,s,i,a,l,c)=>{let u=r.length===2,[d,f]=u?[0,1]:[2,3],p=e.type.value,m=b=>{let E=b===d?"row":"col";return`
      fn ${E}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${p} {
        var output_index = ${t.indicesGet("output_indices",b)};
        var originalIdx: ${p} = getOriginalCoordinateFromResizedCoordinate(output_index, ${o[b]},
        ${n[b]}, ${r[b]}, ${s[b]}, ${s[b]} + ${r.length});
        var fractOriginalIdx: ${p} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${a} && (originalIdx < 0 || originalIdx > (${r[b]} - 1))) {
          return ${l};
        }
        var data: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${E}: ${p} = originalIdx + ${p}(i);
          if (${E} < 0 || ${E} >= ${r[b]}) {
            ${c?`coefs[i + 1] = 0.0;
                        continue;`:a?`return ${l};`:`${E} = max(0, min(${E}, ${r[b]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",b,`u32(${E})`)};
          data[i + 1] = ${b===d?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${m(d)};
    ${m(f)};
  fn getCubicInterpolationCoefs(s: ${p}) -> array<${p}, 4> {
    var absS = abs(s);
    var coeffs: array<${p}, 4> = array<${p}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${p} = 1.0 - absS;
    var twoMinusAbsS: ${p} = 2.0 - absS;
    var onePlusAbsS: ${p} = 1.0 + absS;
    coeffs[0] = ((${i} * onePlusAbsS - 5 * ${i}) * onePlusAbsS + 8 * ${i}) * onePlusAbsS - 4 * ${i};
    coeffs[1] = ((${i} + 2) * absS - (${i} + 3)) * absS * absS + 1;
    coeffs[2] = ((${i} + 2) * oneMinusAbsS - (${i} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${i} * twoMinusAbsS - 5 * ${i}) * twoMinusAbsS + 8 * ${i}) * twoMinusAbsS - 4 * ${i};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${p}, 4>, coefs: array<${p}, 4>) -> ${p} {
    var coefsSum: ${p} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${p} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},dk=(e,t,r,n,o)=>{let[s,i,a,l,c]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],u=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${u} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",i,`max(0, min(depth, ${r[i]} - 1))`)};
      ${e.indicesSet("input_indices",a,`max(0, min(height, ${r[a]} - 1))`)};
      ${e.indicesSet("input_indices",l,`max(0, min(width, ${r[l]} - 1))`)};
      ${hh(e,c,s,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${u} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${u} = originalIndices[${i}];
      var height:${u} = originalIndices[${a}];
      var width:${u} = originalIndices[${l}];
      ${n?`if (depth < 0 || depth > (${r[i]} - 1) || height < 0 || height > (${r[a]} - 1) || width < 0 || (width > ${r[l]} - 1)) {
      return ${o};
        }`:""};

    depth = max(0, min(depth, ${r[i]} - 1));
      height = max(0, min(height, ${r[a]} - 1));
      width = max(0, min(width, ${r[l]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${r.length>3?`u32(originalIndices[${c}])`:"0"};
      var batch: u32 =  ${r.length>3?`u32(originalIndices[${s}])`:"0"};

      var x111: ${u} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${u} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${u} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${u} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${u} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${u} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${u} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${u} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${u} = abs(depth - ${u}(depth1));
      var dx2: ${u} = abs(${u}(depth2) - depth);
      var dy1: ${u} = abs(height - ${u}(height1));
      var dy2: ${u} = abs(${u}(height2) - height);
      var dz1: ${u} = abs(width - ${u}(width1));
      var dz2: ${u} = abs(${u}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},uk=(e,t,r,n,o,s)=>{let i=e.dims,a=rk(s,t.axes,i.length),l=nk(i,n,o,t.axes),c=n.slice();n.length===0&&(c=i.map((_,T)=>_===0?1:l[T]/_),t.keepAspectRatioPolicy!=="stretch"&&(l=ok(i,c,t)));let u=ut("output",e.dataType,l.length),d=De("input",e.dataType,i.length),f=Oe.size(l),p=i.length===l.length&&i.every((_,T)=>_===l[T]),m=t.coordinateTransformMode==="tf_crop_and_resize",b=t.extrapolationValue,E=d.type.value,h=_=>`
      ${p?"":`
      ${ek(t.coordinateTransformMode,E)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${ak(d,i)};
              ${tk(t.nearestMode,r,E)};
              ${ik(d,u,i,l,c.length,a.length,m)};
              `;case"linear":return`
              ${sk(u,i,l,c.length,a.length)};
              ${(()=>{if(i.length===2||i.length===4)return`${lk(d,u,i,m,b)}`;if(i.length===3||i.length===5)return`${dk(d,u,i,m,b)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(i.length===2||i.length===4)return`${ck(d,u,i,l,c,a,t.cubicCoeffA,m,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${_.registerUniform("output_size","u32").registerUniform("scales","f32",c.length).registerUniform("roi","f32",a.length).declareVariables(d,u)}
      ${_.mainStart()}
        ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${p?"output[global_idx] = input[global_idx];":`
        let output_indices = ${u.offsetToIndices("global_idx")};
        var input_indices: ${d.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${d.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${i.length===2||i.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${c.length>0?t.mode==="cubic"?c:c.length:""}|${o.length>0?o:""}|${a.length>0?a:""}|${p}|${t.mode==="nearest"?i.length:i}`,inputDependencies:["rank"]},getShaderSource:h,getRunData:()=>({outputs:[{dims:l,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:[{type:12,data:f},{type:1,data:c},{type:1,data:a},...mt(i,l)]})}},fk=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},GI=(e,t)=>{let r=[],n=[],o=[],s=fk(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");ZC(e.inputs,t,s,r,n,o),e.compute(uk(e.inputs[0],t,s,r,n,o),{inputs:[0]})},HI=e=>{let t=e.antialias,r=e.axes,n=e.coordinateTransformMode,o=e.cubicCoeffA,s=e.excludeOutside!==0,i=e.extrapolationValue,a=e.keepAspectRatioPolicy,l=e.mode,c=e.nearestMode===""?"simple":e.nearestMode;return er({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:o,excludeOutside:s,extrapolationValue:i,keepAspectRatioPolicy:a,mode:l,nearestMode:c})}}),pk,mk,KI,Nq=qe(()=>{xt(),St(),At(),pk=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let o=t.dims[t.dims.length-1],s=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==o)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==s)throw new Error("Skip must have the same sequence length as input");if(n.dims.length!==1)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==o)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let i=e[3];if(i.dims.length!==1)throw new Error("Beta must be 1D");if(i.dims[i.dims.length-1]!==o)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let i=e[4];if(i.dims.length!==1)throw new Error("Bias must be 1D");if(i.dims[i.dims.length-1]!==o)throw new Error("Bias must have the same hidden size as input")}},mk=(e,t,r,n)=>{let o=t.simplified,s=e[0].dims,i=Oe.size(s),a=s,l=i,c=s.slice(-1)[0],u=n?s.slice(0,-1).concat(1):[],d=!o&&e.length>3,f=e.length>4,p=n&&r>1,m=n&&r>2,b=r>3,E=64,h=Wr(c),_=[{type:12,data:l},{type:12,data:h},{type:12,data:c},{type:1,data:t.epsilon}],T=M=>{let x=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],w=[De("x",e[0].dataType,e[0].dims,h),De("skip",e[1].dataType,e[1].dims,h),De("gamma",e[2].dataType,e[2].dims,h)];d&&w.push(De("beta",e[3].dataType,e[3].dims,h)),f&&w.push(De("bias",e[4].dataType,e[4].dims,h)),w.push(ut("output",e[0].dataType,a,h)),p&&w.push(ut("mean_output",1,u)),m&&w.push(ut("inv_std_output",1,u)),b&&w.push(ut("input_skip_bias_sum",e[0].dataType,a,h));let $=bn(e[0].dataType),O=bn(1,h);return`

      ${M.registerUniforms(x).declareVariables(...w)}
      var<workgroup> sum_shared : array<${O}, ${E}>;
      var<workgroup> sum_squared_shared : array<${O}, ${E}>;

      ${M.mainStart([E,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${E};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${E};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${E-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${f?"bias[offset1d + i]":$+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${b?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${ja($,h,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${E};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${hi("sum",h)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${hi("square_sum",h)} / f32(uniforms.hidden_size) ${o?"":"- mean * mean"} + uniforms.epsilon);
        ${p?"mean_output[global_idx] = mean;":""}
        ${m?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${o?"":`- ${$}(mean)`}) *
            ${$}(inv_std_dev) * gamma[offset1d + i]
            ${d?"+ beta[offset1d + i]":""};
        }
      }`},g=[{dims:a,dataType:e[0].dataType}];return r>1&&g.push({dims:u,dataType:1}),r>2&&g.push({dims:u,dataType:1}),r>3&&g.push({dims:s,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${h};${p};${m};${b}`,inputDependencies:e.map((M,x)=>"type")},getShaderSource:T,getRunData:()=>({outputs:g,dispatchGroup:{x:Math.ceil(l/c)},programUniforms:_})}},KI=(e,t)=>{pk(e.inputs);let r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(mk(e.inputs,t,e.outputCount,!1),{outputs:r})}}),hk,Gl,gk,gh,_k,bk,qI,XI,jq=qe(()=>{xt(),St(),Kr(),At(),hk=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,n)=>{if(e[n+1].dataType!==6&&e[n+1].dataType!==7)throw new Error(`Input ${n} must be an array of int32 or int64`)})},Gl=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(n=>r.push(Number(n)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(n=>r.push(Number(n)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},gk=(e,t)=>{if(e.length>1){let r=Gl(e,1),n=Gl(e,2),o=Gl(e,3);return o.length===0&&(o=[...Array(e[0].dims.length).keys()]),er({starts:r,ends:n,axes:o})}else return t},gh=(e,t,r,n,o)=>{let s=e;return e<0&&(s+=r[n[t]]),o[t]<0?Math.max(0,Math.min(s,r[n[t]]-1)):Math.max(0,Math.min(s,r[n[t]]))},_k=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${r.length}; i >= 0; i--) {
            let input_shape_i = ${ft("uniforms.input_shape","i",r.length)};
            let steps_i = ${ft("uniforms.steps","i",r.length)};
            let signs_i = ${ft("uniforms.signs","i",r.length)};
            let starts_i = ${ft("uniforms.starts","i",r.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,bk=(e,t)=>{let r=e[0].dims,n=Oe.size(r),o=t.axes.length>0?Oe.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],s=Gl(e,4);s.forEach(h=>h!==0||(()=>{throw new Error("step cannot be 0")})),s.length===0&&(s=Array(o.length).fill(1));let i=t.starts.map((h,_)=>gh(h,_,r,o,s)),a=t.ends.map((h,_)=>gh(h,_,r,o,s));if(o.length!==i.length||o.length!==a.length)throw new Error("start, ends and axes should have the same number of elements");if(o.length!==r.length)for(let h=0;h<r.length;++h)o.includes(h)||(i.splice(h,0,0),a.splice(h,0,r[h]),s.splice(h,0,1));let l=s.map(h=>Math.sign(h));s.forEach((h,_,T)=>{if(h<0){let g=(a[_]-i[_])/h,M=i[_],x=M+g*s[_];i[_]=x,a[_]=M,T[_]=-h}});let c=r.slice(0);o.forEach((h,_)=>{c[h]=Math.ceil((a[h]-i[h])/s[h])});let u={dims:c,dataType:e[0].dataType},d=ut("output",e[0].dataType,c.length),f=De("input",e[0].dataType,e[0].dims.length),p=Oe.size(c),m=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:i.length},{name:"signs",type:"i32",length:l.length},{name:"steps",type:"u32",length:s.length}],b=[{type:12,data:p},{type:12,data:i},{type:6,data:l},{type:12,data:s},...mt(e[0].dims,c)],E=h=>`
      ${h.registerUniforms(m).declareVariables(f,d)}
        ${_k(f,d,r)}
        ${h.mainStart()}
          ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${d.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${d.setByOffset("global_idx",f.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${l.length}_${i.length}_${s.length}`,inputDependencies:["rank"]},getShaderSource:E,getRunData:()=>({outputs:[u],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:b})}},qI=(e,t)=>{hk(e.inputs,t);let r=gk(e.inputs,t);e.compute(bk(e.inputs,r),{inputs:[0]})},XI=e=>{let t=e.starts,r=e.ends,n=e.axes;return er({starts:t,ends:r,axes:n})}}),vk,yk,QI,YI,Vq=qe(()=>{xt(),St(),Kr(),Mi(),At(),vk=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},yk=(e,t)=>{let r=e.inputs[0],n=r.dims,o=Oe.size(n),s=n.length,i=Oe.normalizeAxis(t.axis,s),a=i<n.length-1,l,c=[];a?(c=Array.from({length:s},(w,$)=>$),c[i]=s-1,c[s-1]=i,l=e.compute(uo(r,c),{inputs:[r],outputs:[-1]})[0]):l=r;let u=l.dims,d=u[s-1],f=o/d,p=Wr(d),m=d/p,b=64;f===1&&(b=256);let E=(w,$)=>$===4?`max(max(${w}.x, ${w}.y), max(${w}.z, ${w}.w))`:$===2?`max(${w}.x, ${w}.y)`:$===3?`max(max(${w}.x, ${w}.y), ${w}.z)`:w,h=De("x",l.dataType,l.dims,p),_=ut("result",l.dataType,l.dims,p),T=h.type.value,g=bn(l.dataType)==="f32"?`var threadMax = ${T}(-3.402823e+38f);`:`var threadMax = ${T}(-65504.0h);`,M=w=>`
      var<workgroup> rowMaxShared : ${T};
      var<workgroup> rowSumShared : ${T};
      var<workgroup> threadShared : array<${T}, ${b}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${T} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${T}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${w.registerUniform("packedCols","i32").declareVariables(h,_)}
      ${w.mainStart(b)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${b};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${g}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${T}(${E("threadShared[0]",p)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${T}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${T}(${hi("threadShared[0]",p)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,x=e.compute({name:"Softmax",shaderCache:{hint:`${p};${b}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:u,dataType:l.dataType}],dispatchGroup:{x:f},programUniforms:[{type:6,data:m}]}),getShaderSource:M},{inputs:[l],outputs:[a?-1:0]})[0];a&&e.compute(uo(x,c),{inputs:[x]})},QI=(e,t)=>{vk(e.inputs),yk(e,t)},YI=e=>er({axis:e.axis})}),_h,wk,Mk,xk,JI,Wq=qe(()=>{xt(),St(),At(),_h=e=>Array.from(e.getBigInt64Array(),Number),wk=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(_h(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Mk=(e,t)=>{let r=[];for(let n=0;n<e.length;++n)r.push(e[n]*t[n]);return r},xk=(e,t)=>{let r=e[0].dims,n=t??_h(e[1]),o=Mk(r,n),s=Oe.size(o),i=e[0].dataType,a=De("input",i,r.length),l=ut("output",i,o.length),c=u=>`
      const inputShape = ${a.indices(...r)};
      ${u.registerUniform("output_size","u32").declareVariables(a,l)}
      ${u.mainStart()}
      ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${l.offsetToIndices("global_idx")};
      var input_indices: ${a.type.indices};
      for (var i = 0; i < ${r.length}; i++) {
        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${l.indicesGet("output_indices","i")}  % input_dim_i;

        ${a.indicesSet("input_indices","i","input_dim_value")}
      }
      ${l.setByOffset("global_idx",a.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:[{type:12,data:s},...mt(e[0].dims,o)]}),getShaderSource:c}},JI=e=>{wk(e.inputs),e.compute(xk(e.inputs),{inputs:[0]})}}),Tk,Ck,ZI,Uq=qe(()=>{xt(),St(),At(),Tk=(e,t,r,n,o)=>{let s=ut("output_data",o,r.length,4),i=De("a_data",t[1].dataType,t[1].dims.length,4),a=De("b_data",t[2].dataType,t[2].dims.length,4),l=De("c_data",t[0].dataType,t[0].dims.length,4),c,u=(d,f,p)=>`select(${f}, ${d}, ${p})`;if(!n)c=s.setByOffset("global_idx",u(i.getByOffset("global_idx"),a.getByOffset("global_idx"),l.getByOffset("global_idx")));else{let d=(f,p,m="")=>{let b=`a_data[index_a${p}][component_a${p}]`,E=`b_data[index_b${p}][component_b${p}]`,h=`bool(c_data[index_c${p}] & (0xffu << (component_c${p} * 8)))`;return`
            let output_indices${p} = ${s.offsetToIndices(`global_idx * 4u + ${p}u`)};
            let offset_a${p} = ${i.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let offset_b${p} = ${a.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let offset_c${p} = ${l.broadcastedIndicesToOffset(`output_indices${p}`,s)};
            let index_a${p} = offset_a${p} / 4u;
            let index_b${p} = offset_b${p} / 4u;
            let index_c${p} = offset_c${p} / 4u;
            let component_a${p} = offset_a${p} % 4u;
            let component_b${p} = offset_b${p} % 4u;
            let component_c${p} = offset_c${p} % 4u;
            ${f}[${p}] = ${m}(${u(b,E,h)});
          `};o===9?c=`
            var data = vec4<u32>(0);
            ${d("data",0,"u32")}
            ${d("data",1,"u32")}
            ${d("data",2,"u32")}
            ${d("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:c=`
            ${d("output_data[global_idx]",0)}
            ${d("output_data[global_idx]",1)}
            ${d("output_data[global_idx]",2)}
            ${d("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(l,i,a,s)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${c}
      }`},Ck=e=>{let t=e[1].dims,r=e[2].dims,n=e[0].dims,o=e[1].dataType,s=!(Oe.areEqual(t,r)&&Oe.areEqual(r,n)),i=t,a=Oe.size(t);if(s){let c=Za.calcShape(Za.calcShape(t,r,!1),n,!1);if(!c)throw new Error("Can't perform where op on the given tensors");i=c,a=Oe.size(i)}let l=Math.ceil(a/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:c=>Tk(c,e,i,s,o),getRunData:()=>({outputs:[{dims:i,dataType:o}],dispatchGroup:{x:Math.ceil(a/64/4)},programUniforms:[{type:12,data:l},...mt(n,t,r,i)]})}},ZI=e=>{e.compute(Ck(e.inputs))}}),eA,Gq=qe(()=>{sq(),$_(),iq(),aq(),lq(),cq(),dq(),hq(),_q(),bq(),vq(),yq(),wq(),Mq(),xq(),Tq(),Cq(),kq(),Eq(),Pq(),$q(),Sq(),Iq(),Aq(),Oq(),vI(),Lq(),Fq(),Dq(),Bq(),Rq(),P_(),zq(),TI(),Nq(),jq(),Vq(),MI(),Wq(),Mi(),S_(),Uq(),eA=new Map([["Abs",[K$]],["Acos",[q$]],["Acosh",[X$]],["Add",[$S]],["ArgMax",[W$,Mg]],["ArgMin",[V$,Mg]],["Asin",[Q$]],["Asinh",[Y$]],["Atan",[J$]],["Atanh",[Z$]],["Attention",[U$]],["AveragePool",[OI,AI]],["BatchNormalization",[G$]],["BiasAdd",[H$]],["BiasSplitGelu",[PS]],["Cast",[tS,eS]],["Ceil",[nS]],["Clip",[rS]],["Concat",[zS,NS]],["Conv",[Pg,Eg]],["ConvTranspose",[QS,XS]],["Cos",[oS]],["Cosh",[sS]],["CumSum",[YS,JS]],["DepthToSpace",[ZS,eI]],["DequantizeLinear",[NI,jI]],["Div",[SS]],["Einsum",[tI,rI]],["Elu",[iS,rc]],["Equal",[IS]],["Erf",[aS]],["Exp",[lS]],["Expand",[nI]],["FastGelu",[oI]],["Floor",[cS]],["FusedConv",[Pg,Eg]],["Gather",[iI,sI]],["GatherElements",[fI,uI]],["GatherBlockQuantized",[cI,dI]],["GatherND",[aI,lI]],["Gelu",[dS]],["Gemm",[mI,pI]],["GlobalAveragePool",[FI,LI]],["GlobalMaxPool",[zI,RI]],["Greater",[FS]],["GreaterOrEqual",[BS]],["GridSample",[hI,gI]],["GroupQueryAttention",[CI]],["HardSigmoid",[bS,_S]],["InstanceNormalization",[kI]],["LayerNormalization",[EI]],["LeakyRelu",[uS,rc]],["Less",[DS]],["LessOrEqual",[RS]],["Log",[kS]],["MatMul",[PI]],["MatMulNBits",[$I,SI]],["MaxPool",[DI,BI]],["Mul",[AS]],["MultiHeadAttention",[bI,_I]],["Neg",[pS]],["Not",[fS]],["Pad",[II]],["Pow",[OS]],["QuickGelu",[ES,rc]],["Range",[VI]],["Reciprocal",[mS]],["ReduceMin",[B$]],["ReduceMean",[A$]],["ReduceMax",[D$]],["ReduceSum",[z$]],["ReduceProd",[R$]],["ReduceL1",[O$]],["ReduceL2",[L$]],["ReduceLogSum",[j$]],["ReduceLogSumExp",[F$]],["ReduceSumSquare",[N$]],["Relu",[hS]],["Resize",[GI,HI]],["RotaryEmbedding",[xI]],["ScatterND",[UI,WI]],["Sigmoid",[gS]],["Sin",[vS]],["Sinh",[yS]],["Slice",[qI,XI]],["SkipLayerNormalization",[KI]],["Split",[yI,wI]],["Sqrt",[wS]],["Softmax",[QI,YI]],["Sub",[LS]],["Tan",[MS]],["Tanh",[xS]],["ThresholdedRelu",[CS,rc]],["Tile",[JI]],["Transpose",[y$,w$]],["Where",[ZI]]])}),tA,Hq=qe(()=>{Zo(),Us(),At(),tA=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r,n,o){Jo(e.programInfo.name);let s=this.backend.device,i=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let a=[];for(let c of t)a.push({binding:a.length,resource:{buffer:c.buffer}});for(let c of r)a.push({binding:a.length,resource:{buffer:c.buffer}});o&&a.push({binding:a.length,resource:o});let l=s.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:a,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let c={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:l,dispatchGroup:n};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(c)}i.setPipeline(e.computePipeline),i.setBindGroup(0,l),i.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ko(e.programInfo.name)}dispose(){}build(e,t){Jo(e.name);let r=this.backend.device,n=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(c=>{r.features.has(c.feature)&&n.push(`enable ${c.extension};`)});let o=v$(t,this.backend.device.limits),s=e.getShaderSource(o),i=`${n.join(`
`)}
${o.additionalImplementations}
${s}`,a=r.createShaderModule({code:i,label:e.name});Ut("verbose",()=>`[WebGPU] ${e.name} shader code: ${i}`);let l=r.createComputePipeline({compute:{module:a,entryPoint:"main"},layout:"auto",label:e.name});return ko(e.name),{programInfo:e,computePipeline:l,uniformVariablesInfo:o.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,r=typeof e=="number"?1:e.y||1,n=typeof e=="number"?1:e.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=o&&r<=o&&n<=o)return[t,r,n];let s=t*r*n,i=Math.ceil(Math.sqrt(s));if(i>o){if(i=Math.ceil(Math.cbrt(s)),i>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[i,i,i]}else return[i,i,1]}}}),rA={};rl(rA,{WebGpuBackend:()=>nA});var kk,Ek,Pk,nA,Kq=qe(()=>{Zo(),xt(),Us(),m$(),nq(),Gq(),Hq(),kk=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let n=0;n<e.length;++n){let o=e[n].dataType;switch(t[n]){case"none":{r.push("");break}case"type":{r.push(`${o}`);break}case"rank":{let s=e[n].dims.length;r.push(`${o};${s}`);break}case"dims":{let s=e[n].dims.join(",");r.push(`${o};${s}`);break}default:throw new Error(`unsupported input dependency: ${t[n]}`)}}return r.join("|")},Ek=(e,t,r)=>{let n=e.name;return e.shaderCache?.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+`:${kk(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,n},Pk=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},nA=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r},o=s=>t.features.has(s)&&r.push(s)&&!0;o("chromium-experimental-timestamp-query-inside-passes")||o("timestamp-query"),o("shader-f16"),o("subgroups"),this.device=await t.requestDevice(n),this.adapterInfo=new Pk(t.info||await t.requestAdapterInfo()),this.gpuDataManager=_$(this),this.programManager=new tA(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,T_(e.logLevel,!!e.debug),this.device.onuncapturederror=s=>{s.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${s.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;Jo(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{let t=new BigUint64Array(e.getMappedRange()),r=this.pendingQueries.get(e);for(let n=0;n<t.length/2;n++){let o=r[n],s=o.kernelId,i=this.kernels.get(s),a=i.kernelType,l=i.kernelName,c=o.programName,u=o.inputTensorViews,d=o.outputTensorViews,f=t[n*2],p=t[n*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=f);let m=Number(f-this.queryTimeBase),b=Number(p-this.queryTimeBase);if(!Number.isSafeInteger(m)||!Number.isSafeInteger(b))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:u.map(E=>({dims:E.dims,dataType:Fs(E.dataType)})),outputsMetadata:d.map(E=>({dims:E.dims,dataType:Fs(E.dataType)})),kernelId:s,kernelType:a,kernelName:l,programName:c,startTime:m,endTime:b});else{let E="";u.forEach((_,T)=>{E+=`input[${T}]: [${_.dims}] | ${Fs(_.dataType)}, `});let h="";d.forEach((_,T)=>{h+=`output[${T}]: [${_.dims}] | ${Fs(_.dataType)}, `}),console.log(`[profiling] kernel "${s}|${a}|${l}|${c}" ${E}${h}execution time: ${b-m} ns`)}td("GPU",`${c}::${f}::${p}`)}e.unmap(),this.pendingQueries.delete(e)}),ko()}run(e,t,r,n,o,s){Jo(e.name);let i=[];for(let _=0;_<t.length;++_){let T=t[_].data;if(T===0)continue;let g=this.gpuDataManager.get(T);if(!g)throw new Error(`no GPU data for input: ${T}`);i.push(g)}let{outputs:a,dispatchGroup:l,programUniforms:c}=e.getRunData(t),u=r.length===0?a.map((_,T)=>T):r;if(u.length!==a.length)throw new Error(`Output size ${u.length} must be equal to ${a.length}.`);let d=[],f=[];for(let _=0;_<a.length;++_){if(!Number.isInteger(u[_])||u[_]<-3||u[_]>=s)throw new Error(`Invalid output index: ${u[_]}`);if(u[_]===-3)continue;let T=u[_]===-1,g=u[_]===-2,M=T||g?o(a[_].dataType,a[_].dims):n(u[_],a[_].dataType,a[_].dims);if(d.push(M),M.data===0)continue;let x=this.gpuDataManager.get(M.data);if(!x)throw new Error(`no GPU data for output: ${M.data}`);if(T&&this.temporaryData.push(x),g){let w=this.kernelPersistentData.get(this.currentKernelId);w||(w=[],this.kernelPersistentData.set(this.currentKernelId,w)),w.push(x)}f.push(x)}if(i.length!==t.length||f.length!==d.length){if(f.length===0)return ko(e.name),d;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let p;if(c){let _=0,T=[];c.forEach(w=>{let $=typeof w.data=="number"?[w.data]:w.data;if($.length===0)return;let O=w.type===10?2:4,L,G;w.type===10?(G=$.length>4?16:$.length>2?8:$.length*O,L=$.length>4?16:O*$.length):(G=$.length<=2?$.length*O:16,L=16),_=Math.ceil(_/G)*G,T.push(_);let j=w.type===10?8:4;_+=$.length>4?Math.ceil($.length/j)*L:$.length*O});let g=16;_=Math.ceil(_/g)*g;let M=new ArrayBuffer(_);c.forEach((w,$)=>{let O=T[$],L=typeof w.data=="number"?[w.data]:w.data;if(w.type===6)new Int32Array(M,O,L.length).set(L);else if(w.type===12)new Uint32Array(M,O,L.length).set(L);else if(w.type===10)new Uint16Array(M,O,L.length).set(L);else if(w.type===1)new Float32Array(M,O,L.length).set(L);else throw new Error(`Unsupported uniform type: ${Fs(w.type)}`)});let x=this.gpuDataManager.create(_,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(x.buffer,0,M,0,_),this.gpuDataManager.release(x.id),p={offset:0,size:_,buffer:x.buffer}}let m=this.programManager.normalizeDispatchGroupSize(l),b=m[1]===1&&m[2]===1,E=Ek(e,t,b),h=this.programManager.getArtifact(E);if(h||(h=this.programManager.build(e,m),this.programManager.setArtifact(E,h),Ut("info",()=>`[artifact] key: ${E}, programName: ${e.name}`)),c&&h.uniformVariablesInfo){if(c.length!==h.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${h.uniformVariablesInfo.length}, got ${c.length} in program "${h.programInfo.name}".`);for(let _=0;_<c.length;_++){let T=c[_],g=T.type,M=typeof T.data=="number"?1:T.data.length,[x,w]=h.uniformVariablesInfo[_];if(g!==x||M!==w)throw new Error(`Uniform variable ${_} mismatch: expect type ${x} with size ${w}, got type ${g} with size ${M} in program "${h.programInfo.name}".`)}}if(Ut("info",()=>`[ProgramManager] run "${e.name}" (key=${E}) with ${m[0]}x${m[1]}x${m[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let _={kernelId:this.currentKernelId,programName:h.programInfo.name,inputTensorViews:t,outputTensorViews:d};this.pendingKernels.push(_),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(_)}return this.programManager.run(h,i,f,m,p),ko(e.name),d}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,r,n){let o=eA.get(e);if(!o)throw new Error(`kernel not implemented: ${e}`);let s={kernelType:e,kernelName:n,kernelEntry:o[0],attributes:[o[1],r]};this.kernels.set(t,s)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let r of t)this.gpuDataManager.release(r.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,r){let n=this.kernels.get(e);if(!n)throw new Error(`kernel not created: ${e}`);let o=n.kernelType,s=n.kernelName,i=n.kernelEntry,a=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${o}] ${s}" is not allowed to be called recursively`);this.currentKernelId=e,a[0]&&(a[1]=a[0](a[1]),a[0]=void 0),Ut("info",()=>`[WebGPU] Start to run kernel "[${o}] ${s}"...`);let l=this.env.debug;this.temporaryData=[];try{return l&&this.device.pushErrorScope("validation"),i(t,a[1]),0}catch(c){return r.push(Promise.resolve(`[WebGPU] Kernel "[${o}] ${s}" failed. ${c}`)),1}finally{l&&r.push(this.device.popErrorScope().then(c=>c?`GPU validation error for kernel "[${o}] ${s}": ${c.message}`:null));for(let c of this.temporaryData)this.gpuDataManager.release(c.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,r,n){let o=this.sessionExternalDataMapping.get(e);o||(o=new Map,this.sessionExternalDataMapping.set(e,o));let s=o.get(t),i=this.gpuDataManager.registerExternalBuffer(r,n,s);return o.set(t,[i,r]),i}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(r=>this.gpuDataManager.unregisterExternalBuffer(r[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,r){return async()=>{let n=await vg(this,e,t);return C_(n.buffer,r)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ut("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ut("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ut("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),r=e.length;this.pendingKernels=[];for(let n=0;n<r;n++){let o=this.getComputePassEncoder(),s=e[n];this.writeTimestamp(this.pendingDispatchNumber*2),o.setPipeline(s.computePipeline),o.setBindGroup(0,s.bindGroup),o.dispatchWorkgroups(...s.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[n]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),oA={};rl(oA,{init:()=>sA});var Eu,$k,sA,qq=qe(()=>{xt(),Us(),St(),rq(),Eu=class iA{constructor(t,r,n,o){this.module=t,this.dataType=r,this.data=n,this.dims=o}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=Oe.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(Oe.size(t)!==Oe.size(this.dims))throw new Error("Invalid new shape");return new iA(this.module,this.dataType,this.data,t)}},$k=class{constructor(e,t,r){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let n=e.PTR_SIZE,o=r/e.PTR_SIZE,s=n===4?"i32":"i64";this.opKernelContext=Number(e.getValue(n*o++,s));let i=Number(e.getValue(n*o++,s));this.outputCount=Number(e.getValue(n*o++,s)),this.customDataOffset=Number(e.getValue(n*o++,"*")),this.customDataSize=Number(e.getValue(n*o++,s));let a=[];for(let l=0;l<i;l++){let c=Number(e.getValue(n*o++,s)),u=Number(e.getValue(n*o++,"*")),d=Number(e.getValue(n*o++,s)),f=[];for(let p=0;p<d;p++)f.push(Number(e.getValue(n*o++,s)));a.push(new Eu(e,c,u,f))}this.inputs=a}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){let r=t?.inputs?.map(i=>typeof i=="number"?this.inputs[i]:i)??this.inputs,n=t?.outputs??[],o=(i,a,l)=>new Eu(this.module,a,this.output(i,l),l),s=(i,a)=>{let l=Xi(i,a);if(!l)throw new Error(`Unsupported data type: ${i}`);let c=l>0?this.backend.gpuDataManager.create(l).id:0;return new Eu(this.module,i,c,a)};return this.backend.run(e,r,n,o,s,this.outputCount)}output(e,t){let r=this.module.stackSave();try{let n=this.module.PTR_SIZE,o=n===4?"i32":"i64",s=this.module.stackAlloc((1+t.length)*n);this.module.setValue(s,t.length,o);for(let i=0;i<t.length;i++)this.module.setValue(s+n*(i+1),t[i],o);return this.module._JsepOutput(this.opKernelContext,e,s)}catch(n){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(r)}}},sA=async(e,t,r,n)=>{let o=t.jsepInit;if(!o)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let s=(Kq(),ed(rA)).WebGpuBackend,i=new s;await i.initialize(r,n),o("webgpu",[i,a=>i.alloc(Number(a)),a=>i.free(a),(a,l,c,u=!1)=>{if(u)Ut("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(a)}, dst=${Number(l)}, size=${Number(c)}`),i.memcpy(Number(a),Number(l));else{Ut("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(a)}, gpuDataId=${Number(l)}, size=${Number(c)}`);let d=t.HEAPU8.subarray(Number(a>>>0),Number(a>>>0)+Number(c));i.upload(Number(l),d)}},async(a,l,c)=>{Ut("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${l}, size=${c}`),await i.download(Number(a),()=>t.HEAPU8.subarray(Number(l)>>>0,Number(l+c)>>>0))},(a,l,c)=>i.createKernel(a,Number(l),c,t.UTF8ToString(t._JsepGetNodeName(Number(l)))),a=>i.releaseKernel(a),(a,l,c,u)=>{Ut("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${c}, kernel=${a}, contextDataOffset=${l}`);let d=new $k(t,i,Number(l));return i.computeKernel(Number(a),d,u)},()=>i.captureBegin(),()=>i.captureEnd(),()=>i.replay()])}else{let s=new g$(r);o("webnn",[s,()=>s.reserveTensorId(),i=>s.releaseTensorId(i),async(i,a,l,c,u)=>s.ensureTensor(i,a,l,c,u),(i,a)=>{s.uploadTensor(i,a)},async(i,a)=>s.downloadTensor(i,a)])}}}),Sk,D_,B_,oi,Ik,bh,lf,R_,z_,vh,N_,j_,V_,aA=qe(()=>{ZK(),eq(),xt(),la(),v_(),d$(),Sk=(e,t)=>{wr()._OrtInit(e,t)!==0&&ar("Can't initialize onnxruntime.")},D_=async e=>{Sk(e.wasm.numThreads,rf(e.logLevel))},B_=async(e,t)=>{wr().asyncInit?.();{let r=(qq(),ed(oA)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let n=e.webgpu.adapter;if(n){if(typeof n.limits!="object"||typeof n.features!="object"||typeof n.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let o=e.webgpu.powerPreference;if(o!==void 0&&o!=="low-power"&&o!=="high-performance")throw new Error(`Invalid powerPreference setting: "${o}"`);let s=e.webgpu.forceFallbackAdapter;if(s!==void 0&&typeof s!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${s}"`);if(n=await navigator.gpu.requestAdapter({powerPreference:o,forceFallbackAdapter:s}),!n)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await r("webgpu",wr(),e,n)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",wr(),e)}}},oi=new Map,Ik=e=>{let t=wr(),r=t.stackSave();try{let n=t.PTR_SIZE,o=t.stackAlloc(2*n);t._OrtGetInputOutputCount(e,o,o+n)!==0&&ar("Can't get session input/output count.");let s=n===4?"i32":"i64";return[Number(t.getValue(o,s)),Number(t.getValue(o+n,s))]}finally{t.stackRestore(r)}},bh=(e,t)=>{let r=wr(),n=r.stackSave(),o=0;try{let s=r.PTR_SIZE,i=r.stackAlloc(2*s);r._OrtGetInputOutputMetadata(e,t,i,i+s)!==0&&ar("Can't get session input/output metadata.");let a=Number(r.getValue(i,"*"));o=Number(r.getValue(i+s,"*"));let l=r.HEAP32[o/4];if(l===0)return[a,0];let c=r.HEAPU32[o/4+1],u=[];for(let d=0;d<c;d++){let f=Number(r.getValue(o+8+d*s,"*"));u.push(f!==0?r.UTF8ToString(f):Number(r.getValue(o+8+(d+c)*s,"*")))}return[a,l,u]}finally{r.stackRestore(n),o!==0&&r._OrtFree(o)}},lf=e=>{let t=wr(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},R_=async(e,t)=>{let r,n,o=wr();Array.isArray(e)?[r,n]=e:e.buffer===o.HEAPU8.buffer?[r,n]=[e.byteOffset,e.byteLength]:[r,n]=lf(e);let s=0,i=0,a=0,l=[],c=[],u=[];try{if([i,l]=await c$(t),t?.externalData&&o.mountExternalData){let g=[];for(let M of t.externalData){let x=typeof M=="string"?M:M.path;g.push(x_(typeof M=="string"?M:M.data).then(w=>{o.mountExternalData(x,w)}))}await Promise.all(g)}for(let g of t?.executionProviders??[])if((typeof g=="string"?g:g.name)==="webnn"){if(o.shouldTransferToMLTensor=!1,typeof g!="string"){let M=g,x=M?.context,w=M?.gpuDevice,$=M?.deviceType,O=M?.powerPreference;x?o.currentContext=x:w?o.currentContext=await o.webnnCreateMLContext(w):o.currentContext=await o.webnnCreateMLContext({deviceType:$,powerPreference:O})}else o.currentContext=await o.webnnCreateMLContext();break}s=await o._OrtCreateSession(r,n,i),o.webgpuOnCreateSession?.(s),s===0&&ar("Can't create a session."),o.jsepOnCreateSession?.(),o.currentContext&&(o.webnnRegisterMLContext(s,o.currentContext),o.currentContext=void 0,o.shouldTransferToMLTensor=!0);let[d,f]=Ik(s),p=!!t?.enableGraphCapture,m=[],b=[],E=[],h=[],_=[];for(let g=0;g<d;g++){let[M,x,w]=bh(s,g);M===0&&ar("Can't get an input name."),c.push(M);let $=o.UTF8ToString(M);m.push($),E.push(x===0?{name:$,isTensor:!1}:{name:$,isTensor:!0,type:Fs(x),shape:w})}for(let g=0;g<f;g++){let[M,x,w]=bh(s,g+d);M===0&&ar("Can't get an output name."),u.push(M);let $=o.UTF8ToString(M);b.push($),h.push(x===0?{name:$,isTensor:!1}:{name:$,isTensor:!0,type:Fs(x),shape:w});{if(p&&t?.preferredOutputLocation===void 0){_.push("gpu-buffer");continue}let O=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[$]??"cpu";if(O!=="cpu"&&O!=="cpu-pinned"&&O!=="gpu-buffer"&&O!=="ml-tensor")throw new Error(`Not supported preferred output location: ${O}.`);if(p&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);_.push(O)}}let T=null;return _.some(g=>g==="gpu-buffer"||g==="ml-tensor")&&(a=o._OrtCreateBinding(s),a===0&&ar("Can't create IO binding."),T={handle:a,outputPreferredLocations:_,outputPreferredLocationsEncoded:_.map(g=>_g(g))}),oi.set(s,[s,c,u,T,p,!1]),[s,m,b,E,h]}catch(d){throw c.forEach(f=>o._OrtFree(f)),u.forEach(f=>o._OrtFree(f)),a!==0&&o._OrtReleaseBinding(a)!==0&&ar("Can't release IO binding."),s!==0&&o._OrtReleaseSession(s)!==0&&ar("Can't release session."),d}finally{o._free(r),i!==0&&o._OrtReleaseSessionOptions(i)!==0&&ar("Can't release session options."),l.forEach(d=>o._free(d)),o.unmountExternalData?.()}},z_=e=>{let t=wr(),r=oi.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[n,o,s,i,a]=r;i&&(a&&t._OrtClearBoundOutputs(i.handle)!==0&&ar("Can't clear bound outputs."),t._OrtReleaseBinding(i.handle)!==0&&ar("Can't release IO binding.")),t.jsepOnReleaseSession?.(e),t.webnnOnReleaseSession?.(e),t.webgpuOnReleaseSession?.(e),o.forEach(l=>t._OrtFree(l)),s.forEach(l=>t._OrtFree(l)),t._OrtReleaseSession(n)!==0&&ar("Can't release session."),oi.delete(e)},vh=async(e,t,r,n,o,s,i=!1)=>{if(!e){t.push(0);return}let a=wr(),l=a.PTR_SIZE,c=e[0],u=e[1],d=e[3],f=d,p,m;if(c==="string"&&(d==="gpu-buffer"||d==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(i&&d!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${s} when enableGraphCapture is true.`);if(d==="gpu-buffer"){let h=e[2].gpuBuffer;m=Xi(Ra(c),u);{let _=a.jsepRegisterBuffer;if(!_)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');p=_(n,s,h,m)}}else if(d==="ml-tensor"){let h=e[2].mlTensor;m=Xi(Ra(c),u);let _=a.webnnRegisterMLTensor;if(!_)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');p=_(n,h,Ra(c),u)}else{let h=e[2];if(Array.isArray(h)){m=l*h.length,p=a._malloc(m),r.push(p);for(let _=0;_<h.length;_++){if(typeof h[_]!="string")throw new TypeError(`tensor data at index ${_} is not a string`);a.setValue(p+_*l,Wo(h[_],r),"*")}}else{let _=a.webnnIsGraphInput;if(c!=="string"&&_){let T=a.UTF8ToString(o);if(_(n,T)){let g=Ra(c);m=Xi(g,u),f="ml-tensor";let M=a.webnnCreateTemporaryTensor,x=a.webnnUploadTensor;if(!M||!x)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let w=await M(n,g,u);x(w,new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),p=w}else m=h.byteLength,p=a._malloc(m),r.push(p),a.HEAPU8.set(new Uint8Array(h.buffer,h.byteOffset,m),p)}else m=h.byteLength,p=a._malloc(m),r.push(p),a.HEAPU8.set(new Uint8Array(h.buffer,h.byteOffset,m),p)}}let b=a.stackSave(),E=a.stackAlloc(4*u.length);try{u.forEach((_,T)=>a.setValue(E+T*l,_,l===4?"i32":"i64"));let h=a._OrtCreateTensor(Ra(c),p,m,E,u.length,_g(f));h===0&&ar(`Can't create tensor for input/output. session=${n}, index=${s}.`),t.push(h)}finally{a.stackRestore(b)}},N_=async(e,t,r,n,o,s)=>{let i=wr(),a=i.PTR_SIZE,l=oi.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let c=l[0],u=l[1],d=l[2],f=l[3],p=l[4],m=l[5],b=t.length,E=n.length,h=0,_=[],T=[],g=[],M=[],x=i.stackSave(),w=i.stackAlloc(b*a),$=i.stackAlloc(b*a),O=i.stackAlloc(E*a),L=i.stackAlloc(E*a);try{[h,_]=l$(s);for(let D=0;D<b;D++)await vh(r[D],T,M,e,u[t[D]],t[D],p);for(let D=0;D<E;D++)await vh(o[D],g,M,e,d[n[D]],b+n[D],p);for(let D=0;D<b;D++)i.setValue(w+D*a,T[D],"*"),i.setValue($+D*a,u[t[D]],"*");for(let D=0;D<E;D++)i.setValue(O+D*a,g[D],"*"),i.setValue(L+D*a,d[n[D]],"*");if(f&&!m){let{handle:D,outputPreferredLocations:re,outputPreferredLocationsEncoded:Z}=f;if(u.length!==b)throw new Error(`input count from feeds (${b}) is expected to be always equal to model's input count (${u.length}).`);for(let te=0;te<b;te++){let ie=t[te];await i._OrtBindInput(D,u[ie],T[te])!==0&&ar(`Can't bind input[${te}] for session=${e}.`)}for(let te=0;te<E;te++){let ie=n[te];o[te]?.[3]?i._OrtBindOutput(D,d[ie],g[te],0)!==0&&ar(`Can't bind pre-allocated output[${te}] for session=${e}.`):i._OrtBindOutput(D,d[ie],0,Z[ie])!==0&&ar(`Can't bind output[${te}] to ${re[te]} for session=${e}.`)}oi.set(e,[c,u,d,f,p,!0])}i.jsepOnRunStart?.(c),i.webnnOnRunStart?.(c);let G;f?G=await i._OrtRunWithBinding(c,f.handle,E,O,h):G=await i._OrtRun(c,$,w,b,L,E,O,h),G!==0&&ar("failed to call OrtRun().");let j=[];for(let D=0;D<E;D++){let re=Number(i.getValue(O+D*a,"*"));if(re===g[D]){j.push(o[D]);continue}let Z=i.stackSave(),te=i.stackAlloc(4*a),ie=!1,ne,ve=0;try{i._OrtGetTensorData(re,te,te+a,te+2*a,te+3*a)!==0&&ar(`Can't access output tensor data on index ${D}.`);let Me=a===4?"i32":"i64",W=Number(i.getValue(te,Me));ve=i.getValue(te+a,"*");let R=i.getValue(te+a*2,"*"),J=Number(i.getValue(te+a*3,Me)),U=[];for(let de=0;de<J;de++)U.push(Number(i.getValue(R+de*a,Me)));i._OrtFree(R)!==0&&ar("Can't free memory for tensor dims.");let be=U.reduce((de,Te)=>de*Te,1);ne=Fs(W);let Le=f?.outputPreferredLocations[n[D]];if(ne==="string"){if(Le==="gpu-buffer"||Le==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let de=[];for(let Te=0;Te<be;Te++){let Pe=i.getValue(ve+Te*a,"*"),xe=i.getValue(ve+(Te+1)*a,"*"),Y=Te===be-1?void 0:xe-Pe;de.push(i.UTF8ToString(Pe,Y))}j.push([ne,U,de,"cpu"])}else if(Le==="gpu-buffer"&&be>0){let de=i.jsepGetBuffer;if(!de)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let Te=de(ve),Pe=Xi(W,be);if(Pe===void 0||!w_(ne))throw new Error(`Unsupported data type: ${ne}`);ie=!0,j.push([ne,U,{gpuBuffer:Te,download:i.jsepCreateDownloader(Te,Pe,ne),dispose:()=>{i._OrtReleaseTensor(re)!==0&&ar("Can't release tensor.")}},"gpu-buffer"])}else if(Le==="ml-tensor"&&be>0){let de=i.webnnEnsureTensor,Te=i.webnnIsInt64Supported;if(!de||!Te)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(Xi(W,be)===void 0||!M_(ne))throw new Error(`Unsupported data type: ${ne}`);if(ne==="int64"&&!Te(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let Pe=await de(e,ve,W,U,!1);ie=!0,j.push([ne,U,{mlTensor:Pe,download:i.webnnCreateMLTensorDownloader(ve,ne),dispose:()=>{i.webnnReleaseTensorId(ve),i._OrtReleaseTensor(re)}},"ml-tensor"])}else{let de=y_(ne),Te=new de(be);new Uint8Array(Te.buffer,Te.byteOffset,Te.byteLength).set(i.HEAPU8.subarray(ve,ve+Te.byteLength)),j.push([ne,U,Te,"cpu"])}}finally{i.stackRestore(Z),ne==="string"&&ve&&i._free(ve),ie||i._OrtReleaseTensor(re),i.webnnOnRunEnd?.(c)}}return f&&!p&&(i._OrtClearBoundOutputs(f.handle)!==0&&ar("Can't clear bound outputs."),oi.set(e,[c,u,d,f,p,!1])),j}finally{i.stackRestore(x),T.forEach(G=>i._OrtReleaseTensor(G)),g.forEach(G=>i._OrtReleaseTensor(G)),M.forEach(G=>i._free(G)),h!==0&&i._OrtReleaseRunOptions(h),_.forEach(G=>i._free(G))}},j_=e=>{let t=wr(),r=oi.get(e);if(!r)throw new Error("invalid session id");let n=r[0],o=t._OrtEndProfiling(n);o===0&&ar("Can't get an profile file name."),t._OrtFree(o)},V_=e=>{let t=[];for(let r of e){let n=r[2];!Array.isArray(n)&&"buffer"in n&&t.push(n.buffer)}return t}}),si,bo,Aa,Hl,Kl,Pu,yh,$u,Wi,Ui,Ak,lA,cA,dA,uA,fA,pA,mA,hA=qe(()=>{Zo(),aA(),la(),__(),si=()=>!!Pr.wasm.proxy&&typeof document<"u",Aa=!1,Hl=!1,Kl=!1,$u=new Map,Wi=(e,t)=>{let r=$u.get(e);r?r.push(t):$u.set(e,[t])},Ui=()=>{if(Aa||!Hl||Kl||!bo)throw new Error("worker not ready")},Ak=e=>{switch(e.data.type){case"init-wasm":Aa=!1,e.data.err?(Kl=!0,yh[1](e.data.err)):(Hl=!0,yh[0]()),Pu&&(URL.revokeObjectURL(Pu),Pu=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=$u.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},lA=async()=>{if(!Hl){if(Aa)throw new Error("multiple calls to 'initWasm()' detected.");if(Kl)throw new Error("previous call to 'initWasm()' failed.");if(Aa=!0,si())return new Promise((e,t)=>{bo?.terminate(),i$().then(([r,n])=>{try{bo=n,bo.onerror=s=>t(s),bo.onmessage=Ak,yh=[e,t];let o={type:"init-wasm",in:Pr};!o.in.wasm.wasmPaths&&(r||gg)&&(o.in.wasm.wasmPaths={wasm:new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),bo.postMessage(o),Pu=r}catch(o){t(o)}},t)});try{await b_(Pr.wasm),await D_(Pr),Hl=!0}catch(e){throw Kl=!0,e}finally{Aa=!1}}},cA=async e=>{if(si())return Ui(),new Promise((t,r)=>{Wi("init-ep",[t,r]);let n={type:"init-ep",in:{epName:e,env:Pr}};bo.postMessage(n)});await B_(Pr,e)},dA=async e=>si()?(Ui(),new Promise((t,r)=>{Wi("copy-from",[t,r]);let n={type:"copy-from",in:{buffer:e}};bo.postMessage(n,[e.buffer])})):lf(e),uA=async(e,t)=>{if(si()){if(t?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Ui(),new Promise((r,n)=>{Wi("create",[r,n]);let o={type:"create",in:{model:e,options:{...t}}},s=[];e instanceof Uint8Array&&s.push(e.buffer),bo.postMessage(o,s)})}else return R_(e,t)},fA=async e=>{if(si())return Ui(),new Promise((t,r)=>{Wi("release",[t,r]);let n={type:"release",in:e};bo.postMessage(n)});z_(e)},pA=async(e,t,r,n,o,s)=>{if(si()){if(r.some(i=>i[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(i=>i))throw new Error("pre-allocated output tensor is not supported for proxy.");return Ui(),new Promise((i,a)=>{Wi("run",[i,a]);let l=r,c={type:"run",in:{sessionId:e,inputIndices:t,inputs:l,outputIndices:n,options:s}};bo.postMessage(c,V_(l))})}else return N_(e,t,r,n,o,s)},mA=async e=>{if(si())return Ui(),new Promise((t,r)=>{Wi("end-profiling",[t,r]);let n={type:"end-profiling",in:e};bo.postMessage(n)});j_(e)}}),wh,Ok,gA,Xq=qe(()=>{Zo(),hA(),xt(),g_(),d$(),wh=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},Ok=e=>{switch(e[3]){case"cpu":return new Uo(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!w_(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:o}=e[2];return Uo.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:o})}case"ml-tensor":{let t=e[0];if(!M_(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:r,download:n,dispose:o}=e[2];return Uo.fromMLTensor(r,{dataType:t,dims:e[1],download:n,dispose:o})}default:throw new Error(`invalid data location: ${e[3]}`)}},gA=class{async fetchModelAndCopyToWasmMemory(e){return dA(await x_(e))}async loadModel(e,t){Jo();let r;typeof e=="string"?r=await this.fetchModelAndCopyToWasmMemory(e):r=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await uA(r,t),ko()}async dispose(){return fA(this.sessionId)}async run(e,t,r){Jo();let n=[],o=[];Object.entries(e).forEach(d=>{let f=d[0],p=d[1],m=this.inputNames.indexOf(f);if(m===-1)throw new Error(`invalid input '${f}'`);n.push(p),o.push(m)});let s=[],i=[];Object.entries(t).forEach(d=>{let f=d[0],p=d[1],m=this.outputNames.indexOf(f);if(m===-1)throw new Error(`invalid output '${f}'`);s.push(p),i.push(m)});let a=n.map((d,f)=>wh(d,()=>`input "${this.inputNames[o[f]]}"`)),l=s.map((d,f)=>d?wh(d,()=>`output "${this.outputNames[i[f]]}"`):null),c=await pA(this.sessionId,o,a,i,l,r),u={};for(let d=0;d<c.length;d++)u[this.outputNames[i[d]]]=s[d]??Ok(c[d]);return ko(),u}startProfiling(){}endProfiling(){mA(this.sessionId)}}}),_A={};rl(_A,{OnnxruntimeWebAssemblyBackend:()=>Ig,initializeFlags:()=>Sg,wasmBackend:()=>bA});var Sg,Ig,bA,Qq=qe(()=>{Zo(),hA(),Xq(),Sg=()=>{(typeof Pr.wasm.initTimeout!="number"||Pr.wasm.initTimeout<0)&&(Pr.wasm.initTimeout=0);let e=Pr.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),Pr.wasm.simd=!1),typeof Pr.wasm.proxy!="boolean"&&(Pr.wasm.proxy=!1),typeof Pr.wasm.trace!="boolean"&&(Pr.wasm.trace=!1),typeof Pr.wasm.numThreads!="number"||!Number.isInteger(Pr.wasm.numThreads)||Pr.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)Pr.wasm.numThreads=1;else{let t=typeof navigator>"u"?DK("node:os").cpus().length:navigator.hardwareConcurrency;Pr.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Ig=class{async init(e){Sg(),await lA(),await cA(e)}async createInferenceSessionHandler(e,t){let r=new gA;return await r.loadModel(e,t),r}},bA=new Ig});Zo();Zo();Zo();var Yq="1.22.0-dev.20250409-89f8206ba4",Jq=e$;{let e=(Qq(),ed(_A)).wasmBackend;Yi("webgpu",e,5),Yi("webnn",e,5),Yi("cpu",e,10),Yi("wasm",e,10)}Object.defineProperty(Pr.versions,"web",{value:Yq,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zq=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return h_},get TRACE(){return td},get TRACE_FUNC_BEGIN(){return Jo},get TRACE_FUNC_END(){return ko},get Tensor(){return Uo},default:Jq,get env(){return Pr},get registerBackend(){return Yi}},Symbol.toStringTag,{value:"Module"}));var Mh={},eX={"onnxruntime-common":(e=>{e.exports=AK}),"onnxruntime-web":(e=>{e.exports=Zq}),"?2ce3":(()=>{}),"?7992":(()=>{}),"?5af5":(()=>{}),"?2b25":(()=>{}),"?db59":(()=>{}),"?383f":(()=>{}),"?fa4b":(()=>{}),"./node_modules/@huggingface/jinja/dist/index.js":((e,t,r)=>{r.r(t),r.d(t,{Environment:()=>ze,Interpreter:()=>Ke,Template:()=>ts,parse:()=>Le,tokenize:()=>u});var n=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),o=class{constructor(S,se){this.value=S,this.type=se}};function s(S){return/\w/.test(S)}function i(S){return/[0-9]/.test(S)}var a=[["{%",n.OpenStatement],["%}",n.CloseStatement],["{{",n.OpenExpression],["}}",n.CloseExpression],["(",n.OpenParen],[")",n.CloseParen],["{",n.OpenCurlyBracket],["}",n.CloseCurlyBracket],["[",n.OpenSquareBracket],["]",n.CloseSquareBracket],[",",n.Comma],[".",n.Dot],[":",n.Colon],["|",n.Pipe],["<=",n.ComparisonBinaryOperator],[">=",n.ComparisonBinaryOperator],["==",n.ComparisonBinaryOperator],["!=",n.ComparisonBinaryOperator],["<",n.ComparisonBinaryOperator],[">",n.ComparisonBinaryOperator],["+",n.AdditiveBinaryOperator],["-",n.AdditiveBinaryOperator],["~",n.AdditiveBinaryOperator],["*",n.MultiplicativeBinaryOperator],["/",n.MultiplicativeBinaryOperator],["%",n.MultiplicativeBinaryOperator],["=",n.Equals]],l=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function c(S,se={}){return S.endsWith(`
`)&&(S=S.slice(0,-1)),se.lstrip_blocks&&(S=S.replace(/^[ \t]*({[#%-])/gm,"$1")),se.trim_blocks&&(S=S.replace(/([#%-]})\n/g,"$1")),S.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*(end)?generation\s*%}/gs,"")}function u(S,se={}){const K=[],ae=c(S,se);let _e=0,Se=0;const Ne=st=>{let pt="";for(;st(ae[_e]);){if(ae[_e]==="\\"){if(++_e,_e>=ae.length)throw new SyntaxError("Unexpected end of input");const et=ae[_e++],Dt=l.get(et);if(Dt===void 0)throw new SyntaxError(`Unexpected escaped character: ${et}`);pt+=Dt;continue}if(pt+=ae[_e++],_e>=ae.length)throw new SyntaxError("Unexpected end of input")}return pt};e:for(;_e<ae.length;){const st=K.at(-1)?.type;if(st===void 0||st===n.CloseStatement||st===n.CloseExpression||st===n.Comment){let et="";for(;_e<ae.length&&!(ae[_e]==="{"&&(ae[_e+1]==="%"||ae[_e+1]==="{"||ae[_e+1]==="#"));)et+=ae[_e++];if(et.length>0){K.push(new o(et,n.Text));continue}}if(ae[_e]==="{"&&ae[_e+1]==="#"){_e+=2;let et="";for(;ae[_e]!=="#"||ae[_e+1]!=="}";){if(_e+2>=ae.length)throw new SyntaxError("Missing end of comment tag");et+=ae[_e++]}K.push(new o(et,n.Comment)),_e+=2;continue}Ne(et=>/\s/.test(et));const pt=ae[_e];if(pt==="-"||pt==="+"){const et=K.at(-1)?.type;if(et===n.Text||et===void 0)throw new SyntaxError(`Unexpected character: ${pt}`);switch(et){case n.Identifier:case n.NumericLiteral:case n.StringLiteral:case n.CloseParen:case n.CloseSquareBracket:break;default:{++_e;const Dt=Ne(i);K.push(new o(`${pt}${Dt}`,Dt.length>0?n.NumericLiteral:n.UnaryOperator));continue}}}for(const[et,Dt]of a){if(et==="}}"&&Se>0)continue;if(ae.slice(_e,_e+et.length)===et){K.push(new o(et,Dt)),Dt===n.OpenExpression?Se=0:Dt===n.OpenCurlyBracket?++Se:Dt===n.CloseCurlyBracket&&--Se,_e+=et.length;continue e}}if(pt==="'"||pt==='"'){++_e;const et=Ne(Dt=>Dt!==pt);K.push(new o(et,n.StringLiteral)),++_e;continue}if(i(pt)){let et=Ne(i);if(ae[_e]==="."&&i(ae[_e+1])){++_e;const Dt=Ne(i);et=`${et}.${Dt}`}K.push(new o(et,n.NumericLiteral));continue}if(s(pt)){const et=Ne(s);K.push(new o(et,n.Identifier));continue}throw new SyntaxError(`Unexpected character: ${pt}`)}return K}var d=class{type="Statement"},f=class extends d{constructor(S){super(),this.body=S}type="Program"},p=class extends d{constructor(S,se,K){super(),this.test=S,this.body=se,this.alternate=K}type="If"},m=class extends d{constructor(S,se,K,ae){super(),this.loopvar=S,this.iterable=se,this.body=K,this.defaultBlock=ae}type="For"},b=class extends d{type="Break"},E=class extends d{type="Continue"},h=class extends d{constructor(S,se,K){super(),this.assignee=S,this.value=se,this.body=K}type="Set"},_=class extends d{constructor(S,se,K){super(),this.name=S,this.args=se,this.body=K}type="Macro"},T=class extends d{constructor(S){super(),this.value=S}type="Comment"},g=class extends d{type="Expression"},M=class extends g{constructor(S,se,K){super(),this.object=S,this.property=se,this.computed=K}type="MemberExpression"},x=class extends g{constructor(S,se){super(),this.callee=S,this.args=se}type="CallExpression"},w=class extends g{constructor(S){super(),this.value=S}type="Identifier"},$=class extends g{constructor(S){super(),this.value=S}type="Literal"},O=class extends ${type="IntegerLiteral"},L=class extends ${type="FloatLiteral"},G=class extends ${type="StringLiteral"},j=class extends ${type="ArrayLiteral"},D=class extends ${type="TupleLiteral"},re=class extends ${type="ObjectLiteral"},Z=class extends g{constructor(S,se,K){super(),this.operator=S,this.left=se,this.right=K}type="BinaryExpression"},te=class extends g{constructor(S,se){super(),this.operand=S,this.filter=se}type="FilterExpression"},ie=class extends d{constructor(S,se){super(),this.filter=S,this.body=se}type="FilterStatement"},ne=class extends g{constructor(S,se){super(),this.lhs=S,this.test=se}type="SelectExpression"},ve=class extends g{constructor(S,se,K){super(),this.operand=S,this.negate=se,this.test=K}type="TestExpression"},Me=class extends g{constructor(S,se){super(),this.operator=S,this.argument=se}type="UnaryExpression"},W=class extends g{constructor(S=void 0,se=void 0,K=void 0){super(),this.start=S,this.stop=se,this.step=K}type="SliceExpression"},R=class extends g{constructor(S,se){super(),this.key=S,this.value=se}type="KeywordArgumentExpression"},J=class extends g{constructor(S){super(),this.argument=S}type="SpreadExpression"},U=class extends d{constructor(S,se,K){super(),this.call=S,this.callerArgs=se,this.body=K}type="CallStatement"},be=class extends g{constructor(S,se,K){super(),this.condition=S,this.trueExpr=se,this.falseExpr=K}type="Ternary"};function Le(S){const se=new f([]);let K=0;function ae(We,Xe){const it=S[K++];if(!it||it.type!==We)throw new Error(`Parser Error: ${Xe}. ${it.type} !== ${We}.`);return it}function _e(We){if(!pt(We))throw new SyntaxError(`Expected ${We}`);++K}function Se(){switch(S[K].type){case n.Comment:return new T(S[K++].value);case n.Text:return et();case n.OpenStatement:return Dt();case n.OpenExpression:return Rt();default:throw new SyntaxError(`Unexpected token type: ${S[K].type}`)}}function Ne(...We){return K+We.length<=S.length&&We.every((Xe,it)=>Xe===S[K+it].type)}function st(...We){return S[K]?.type===n.OpenStatement&&S[K+1]?.type===n.Identifier&&We.includes(S[K+1]?.value)}function pt(...We){return K+We.length<=S.length&&We.every((Xe,it)=>S[K+it].type==="Identifier"&&Xe===S[K+it].value)}function et(){return new G(ae(n.Text,"Expected text token").value)}function Dt(){if(ae(n.OpenStatement,"Expected opening statement token"),S[K].type!==n.Identifier)throw new SyntaxError(`Unknown statement, got ${S[K].type}`);const We=S[K].value;let Xe;switch(We){case"set":++K,Xe=tn();break;case"if":++K,Xe=tr(),ae(n.OpenStatement,"Expected {% token"),_e("endif"),ae(n.CloseStatement,"Expected %} token");break;case"macro":++K,Xe=qr(),ae(n.OpenStatement,"Expected {% token"),_e("endmacro"),ae(n.CloseStatement,"Expected %} token");break;case"for":++K,Xe=Tr(),ae(n.OpenStatement,"Expected {% token"),_e("endfor"),ae(n.CloseStatement,"Expected %} token");break;case"call":{++K;let it=null;Ne(n.OpenParen)&&(it=Qn());const Cr=$n();if(Cr.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const xs=Qn();ae(n.CloseStatement,"Expected closing statement token");const os=[];for(;!st("endcall");)os.push(Se());ae(n.OpenStatement,"Expected '{%'"),_e("endcall"),ae(n.CloseStatement,"Expected closing statement token");const Ts=new x(Cr,xs);Xe=new U(Ts,it,os);break}case"break":++K,ae(n.CloseStatement,"Expected closing statement token"),Xe=new b;break;case"continue":++K,ae(n.CloseStatement,"Expected closing statement token"),Xe=new E;break;case"filter":{++K;let it=$n();it instanceof w&&Ne(n.OpenParen)&&(it=Nr(it)),ae(n.CloseStatement,"Expected closing statement token");const Cr=[];for(;!st("endfilter");)Cr.push(Se());ae(n.OpenStatement,"Expected '{%'"),_e("endfilter"),ae(n.CloseStatement,"Expected '%}'"),Xe=new ie(it,Cr);break}default:throw new SyntaxError(`Unknown statement type: ${We}`)}return Xe}function Rt(){ae(n.OpenExpression,"Expected opening expression token");const We=rn();return ae(n.CloseExpression,"Expected closing expression token"),We}function tn(){const We=Xn();let Xe=null;const it=[];if(Ne(n.Equals))++K,Xe=Xn();else{for(ae(n.CloseStatement,"Expected %} token");!st("endset");)it.push(Se());ae(n.OpenStatement,"Expected {% token"),_e("endset")}return ae(n.CloseStatement,"Expected closing statement token"),new h(We,Xe,it)}function tr(){const We=rn();ae(n.CloseStatement,"Expected closing statement token");const Xe=[],it=[];for(;!st("elif","else","endif");)Xe.push(Se());if(st("elif")){++K,++K;const Cr=tr();it.push(Cr)}else if(st("else"))for(++K,++K,ae(n.CloseStatement,"Expected closing statement token");!st("endif");)it.push(Se());return new p(We,Xe,it)}function qr(){const We=$n();if(We.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const Xe=Qn();ae(n.CloseStatement,"Expected closing statement token");const it=[];for(;!st("endmacro");)it.push(Se());return new _(We,Xe,it)}function Xn(We=!1){const Xe=We?$n:rn,it=[Xe()],Cr=Ne(n.Comma);for(;Cr&&(++K,it.push(Xe()),!!Ne(n.Comma)););return Cr?new D(it):it[0]}function Tr(){const We=Xn(!0);if(!(We instanceof w||We instanceof D))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${We.type} instead`);if(!pt("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++K;const Xe=rn();ae(n.CloseStatement,"Expected closing statement token");const it=[];for(;!st("endfor","else");)it.push(Se());const Cr=[];if(st("else"))for(++K,++K,ae(n.CloseStatement,"Expected closing statement token");!st("endfor");)Cr.push(Se());return new m(We,Xe,it,Cr)}function rn(){return po()}function po(){const We=Xr();if(pt("if")){++K;const Xe=Xr();if(pt("else")){++K;const it=po();return new be(Xe,We,it)}else return new ne(We,Xe)}return We}function Xr(){let We=$o();for(;pt("or");){const Xe=S[K];++K;const it=$o();We=new Z(Xe,We,it)}return We}function $o(){let We=So();for(;pt("and");){const Xe=S[K];++K;const it=So();We=new Z(Xe,We,it)}return We}function So(){let We;for(;pt("not");){const Xe=S[K];++K;const it=So();We=new Me(Xe,it)}return We??Pn()}function Pn(){let We=rs();for(;;){let Xe;if(pt("not","in"))Xe=new o("not in",n.Identifier),K+=2;else if(pt("in"))Xe=S[K++];else if(Ne(n.ComparisonBinaryOperator))Xe=S[K++];else break;const it=rs();We=new Z(Xe,We,it)}return We}function rs(){let We=ns();for(;Ne(n.AdditiveBinaryOperator);){const Xe=S[K];++K;const it=ns();We=new Z(Xe,We,it)}return We}function Io(){const We=mo($n());return Ne(n.OpenParen)?Nr(We):We}function Nr(We){let Xe=new x(We,Qn());return Xe=mo(Xe),Ne(n.OpenParen)&&(Xe=Nr(Xe)),Xe}function Qn(){ae(n.OpenParen,"Expected opening parenthesis for arguments list");const We=Qr();return ae(n.CloseParen,"Expected closing parenthesis for arguments list"),We}function Qr(){const We=[];for(;!Ne(n.CloseParen);){let Xe;if(S[K].type===n.MultiplicativeBinaryOperator&&S[K].value==="*"){++K;const it=rn();Xe=new J(it)}else if(Xe=rn(),Ne(n.Equals)){if(++K,!(Xe instanceof w))throw new SyntaxError("Expected identifier for keyword argument");const it=rn();Xe=new R(Xe,it)}We.push(Xe),Ne(n.Comma)&&++K}return We}function an(){const We=[];let Xe=!1;for(;!Ne(n.CloseSquareBracket);)Ne(n.Colon)?(We.push(void 0),++K,Xe=!0):(We.push(rn()),Ne(n.Colon)&&(++K,Xe=!0));if(We.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Xe){if(We.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new W(...We)}return We[0]}function mo(We){for(;Ne(n.Dot)||Ne(n.OpenSquareBracket);){const Xe=S[K];++K;let it;const Cr=Xe.type===n.OpenSquareBracket;if(Cr)it=an(),ae(n.CloseSquareBracket,"Expected closing square bracket");else if(it=$n(),it.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");We=new M(We,it,Cr)}return We}function ns(){let We=no();for(;Ne(n.MultiplicativeBinaryOperator);){const Xe=S[K++],it=no();We=new Z(Xe,We,it)}return We}function no(){let We=Ms();for(;pt("is");){++K;const Xe=pt("not");Xe&&++K;const it=$n();if(!(it instanceof w))throw new SyntaxError("Expected identifier for the test");We=new ve(We,Xe,it)}return We}function Ms(){let We=Io();for(;Ne(n.Pipe);){++K;let Xe=$n();if(!(Xe instanceof w))throw new SyntaxError("Expected identifier for the filter");Ne(n.OpenParen)&&(Xe=Nr(Xe)),We=new te(We,Xe)}return We}function $n(){const We=S[K++];switch(We.type){case n.NumericLiteral:{const Xe=We.value;return Xe.includes(".")?new L(Number(Xe)):new O(Number(Xe))}case n.StringLiteral:{let Xe=We.value;for(;Ne(n.StringLiteral);)Xe+=S[K++].value;return new G(Xe)}case n.Identifier:return new w(We.value);case n.OpenParen:{const Xe=Xn();return ae(n.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),Xe}case n.OpenSquareBracket:{const Xe=[];for(;!Ne(n.CloseSquareBracket);)Xe.push(rn()),Ne(n.Comma)&&++K;return++K,new j(Xe)}case n.OpenCurlyBracket:{const Xe=new Map;for(;!Ne(n.CloseCurlyBracket);){const it=rn();ae(n.Colon,"Expected colon between key and value in object literal");const Cr=rn();Xe.set(it,Cr),Ne(n.Comma)&&++K}return++K,new re(Xe)}default:throw new SyntaxError(`Unexpected token: ${We.type}`)}}for(;K<S.length;)se.body.push(Se());return se}function de(S,se,K=1){se===void 0&&(se=S,S=0);const ae=[];for(let _e=S;_e<se;_e+=K)ae.push(_e);return ae}function Te(S,se,K,ae=1){const _e=Math.sign(ae);_e>=0?(se=(se??=0)<0?Math.max(S.length+se,0):Math.min(se,S.length),K=(K??=S.length)<0?Math.max(S.length+K,0):Math.min(K,S.length)):(se=(se??=S.length-1)<0?Math.max(S.length+se,-1):Math.min(se,S.length-1),K=(K??=-1)<-1?Math.max(S.length+K,-1):Math.min(K,S.length-1));const Se=[];for(let Ne=se;_e*Ne<_e*K;Ne+=ae)Se.push(S[Ne]);return Se}function Pe(S){return S.replace(/\b\w/g,se=>se.toUpperCase())}function xe(S){return Y(new Date,S)}function Y(S,se){const K=new Intl.DateTimeFormat(void 0,{month:"long"}),ae=new Intl.DateTimeFormat(void 0,{month:"short"}),_e=Se=>Se<10?"0"+Se:Se.toString();return se.replace(/%[YmdbBHM%]/g,Se=>{switch(Se){case"%Y":return S.getFullYear().toString();case"%m":return _e(S.getMonth()+1);case"%d":return _e(S.getDate());case"%b":return ae.format(S);case"%B":return K.format(S);case"%H":return _e(S.getHours());case"%M":return _e(S.getMinutes());case"%%":return"%";default:return Se}})}function B(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(S,se,K,ae){if(ae===0)return S;let _e=ae==null||ae<0?1/0:ae;const Se=se.length===0?new RegExp("(?=)","gu"):new RegExp(B(se),"gu");return S.replaceAll(Se,Ne=>_e>0?(--_e,K):Ne)}var q=class extends Error{},pe=class extends Error{},ue=class{type="RuntimeValue";value;builtins=new Map;constructor(S=void 0){this.value=S}__bool__(){return new ee(!!this.value)}toString(){return String(this.value)}},oe=class extends ue{type="IntegerValue"},N=class extends ue{type="FloatValue";toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},z=class extends ue{type="StringValue";builtins=new Map([["upper",new he(()=>new z(this.value.toUpperCase()))],["lower",new he(()=>new z(this.value.toLowerCase()))],["strip",new he(()=>new z(this.value.trim()))],["title",new he(()=>new z(Pe(this.value)))],["capitalize",new he(()=>new z(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new oe(this.value.length)],["rstrip",new he(()=>new z(this.value.trimEnd()))],["lstrip",new he(()=>new z(this.value.trimStart()))],["startswith",new he(S=>{if(S.length===0)throw new Error("startswith() requires at least one argument");const se=S[0];if(se instanceof z)return new ee(this.value.startsWith(se.value));if(se instanceof fe){for(const K of se.value){if(!(K instanceof z))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(K.value))return new ee(!0)}return new ee(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new he(S=>{if(S.length===0)throw new Error("endswith() requires at least one argument");const se=S[0];if(se instanceof z)return new ee(this.value.endsWith(se.value));if(se instanceof fe){for(const K of se.value){if(!(K instanceof z))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(K.value))return new ee(!0)}return new ee(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new he(S=>{const se=S[0]??new $e;if(!(se instanceof z||se instanceof $e))throw new Error("sep argument must be a string or null");const K=S[1]??new oe(-1);if(!(K instanceof oe))throw new Error("maxsplit argument must be a number");let ae=[];if(se instanceof $e){const _e=this.value.trimStart();for(const{0:Se,index:Ne}of _e.matchAll(/\S+/g)){if(K.value!==-1&&ae.length>=K.value&&Ne!==void 0){ae.push(Se+_e.slice(Ne+Se.length));break}ae.push(Se)}}else{if(se.value==="")throw new Error("empty separator");ae=this.value.split(se.value),K.value!==-1&&ae.length>K.value&&ae.push(ae.splice(K.value).join(se.value))}return new fe(ae.map(_e=>new z(_e)))})],["replace",new he(S=>{if(S.length<2)throw new Error("replace() requires at least two arguments");const se=S[0],K=S[1];if(!(se instanceof z&&K instanceof z))throw new Error("replace() arguments must be strings");let ae;if(S.length>2?S[2].type==="KeywordArgumentsValue"?ae=S[2].value.get("count")??new $e:ae=S[2]:ae=new $e,!(ae instanceof oe||ae instanceof $e))throw new Error("replace() count argument must be a number or null");return new z(I(this.value,se.value,K.value,ae.value))})]])},ee=class extends ue{type="BooleanValue"},le=class extends ue{type="ObjectValue";__bool__(){return new ee(this.value.size>0)}builtins=new Map([["get",new he(([S,se])=>{if(!(S instanceof z))throw new Error(`Object key must be a string: got ${S.type}`);return this.value.get(S.value)??se??new $e})],["items",new he(()=>this.items())],["keys",new he(()=>this.keys())],["values",new he(()=>this.values())]]);items(){return new fe(Array.from(this.value.entries()).map(([S,se])=>new fe([new z(S),se])))}keys(){return new fe(Array.from(this.value.keys()).map(S=>new z(S)))}values(){return new fe(Array.from(this.value.values()))}},ke=class extends le{type="KeywordArgumentsValue"},fe=class extends ue{type="ArrayValue";builtins=new Map([["length",new oe(this.value.length)]]);__bool__(){return new ee(this.value.length>0)}},ce=class extends fe{type="TupleValue"},he=class extends ue{type="FunctionValue"},$e=class extends ue{type="NullValue"},Re=class extends ue{type="UndefinedValue"},ze=class{constructor(S){this.parent=S}variables=new Map([["namespace",new he(S=>{if(S.length===0)return new le(new Map);if(S.length!==1||!(S[0]instanceof le))throw new Error("`namespace` expects either zero arguments or a single object argument");return S[0]})]]);tests=new Map([["boolean",S=>S.type==="BooleanValue"],["callable",S=>S instanceof he],["odd",S=>{if(!(S instanceof oe))throw new Error(`cannot odd on ${S.type}`);return S.value%2!==0}],["even",S=>{if(!(S instanceof oe))throw new Error(`cannot even on ${S.type}`);return S.value%2===0}],["false",S=>S.type==="BooleanValue"&&!S.value],["true",S=>S.type==="BooleanValue"&&S.value],["none",S=>S.type==="NullValue"],["string",S=>S.type==="StringValue"],["number",S=>S instanceof oe||S instanceof N],["integer",S=>S instanceof oe],["iterable",S=>S.type==="ArrayValue"||S.type==="StringValue"],["mapping",S=>S.type==="ObjectValue"],["lower",S=>{const se=S.value;return S.type==="StringValue"&&se===se.toLowerCase()}],["upper",S=>{const se=S.value;return S.type==="StringValue"&&se===se.toUpperCase()}],["none",S=>S.type==="NullValue"],["defined",S=>S.type!=="UndefinedValue"],["undefined",S=>S.type==="UndefinedValue"],["equalto",(S,se)=>S.value===se.value],["eq",(S,se)=>S.value===se.value]]);set(S,se){return this.declareVariable(S,vt(se))}declareVariable(S,se){if(this.variables.has(S))throw new SyntaxError(`Variable already declared: ${S}`);return this.variables.set(S,se),se}setVariable(S,se){return this.variables.set(S,se),se}resolve(S){if(this.variables.has(S))return this;if(this.parent)return this.parent.resolve(S);throw new Error(`Unknown variable: ${S}`)}lookupVariable(S){try{return this.resolve(S).variables.get(S)??new Re}catch{return new Re}}};function Ge(S){S.set("false",!1),S.set("true",!0),S.set("none",null),S.set("raise_exception",se=>{throw new Error(se)}),S.set("range",de),S.set("strftime_now",xe),S.set("True",!0),S.set("False",!1),S.set("None",null)}var Ke=class{global;constructor(S){this.global=S??new ze}run(S){return this.evaluate(S,this.global)}evaluateBinaryExpression(S,se){const K=this.evaluate(S.left,se);switch(S.operator.value){case"and":return K.__bool__().value?this.evaluate(S.right,se):K;case"or":return K.__bool__().value?K:this.evaluate(S.right,se)}const ae=this.evaluate(S.right,se);switch(S.operator.value){case"==":return new ee(K.value==ae.value);case"!=":return new ee(K.value!=ae.value)}if(K instanceof Re||ae instanceof Re){if(ae instanceof Re&&["in","not in"].includes(S.operator.value))return new ee(S.operator.value==="not in");throw new Error(`Cannot perform operation ${S.operator.value} on undefined values`)}else{if(K instanceof $e||ae instanceof $e)throw new Error("Cannot perform operation on null values");if(S.operator.value==="~")return new z(K.value.toString()+ae.value.toString());if((K instanceof oe||K instanceof N)&&(ae instanceof oe||ae instanceof N)){const _e=K.value,Se=ae.value;switch(S.operator.value){case"+":case"-":case"*":{const Ne=S.operator.value==="+"?_e+Se:S.operator.value==="-"?_e-Se:_e*Se;return K instanceof N||ae instanceof N?new N(Ne):new oe(Ne)}case"/":return new N(_e/Se);case"%":{const Ne=_e%Se;return K instanceof N||ae instanceof N?new N(Ne):new oe(Ne)}case"<":return new ee(_e<Se);case">":return new ee(_e>Se);case">=":return new ee(_e>=Se);case"<=":return new ee(_e<=Se)}}else if(K instanceof fe&&ae instanceof fe)switch(S.operator.value){case"+":return new fe(K.value.concat(ae.value))}else if(ae instanceof fe){const _e=ae.value.find(Se=>Se.value===K.value)!==void 0;switch(S.operator.value){case"in":return new ee(_e);case"not in":return new ee(!_e)}}}if(K instanceof z||ae instanceof z)switch(S.operator.value){case"+":return new z(K.value.toString()+ae.value.toString())}if(K instanceof z&&ae instanceof z)switch(S.operator.value){case"in":return new ee(ae.value.includes(K.value));case"not in":return new ee(!ae.value.includes(K.value))}if(K instanceof z&&ae instanceof le)switch(S.operator.value){case"in":return new ee(ae.value.has(K.value));case"not in":return new ee(!ae.value.has(K.value))}throw new SyntaxError(`Unknown operator "${S.operator.value}" between ${K.type} and ${ae.type}`)}evaluateArguments(S,se){const K=[],ae=new Map;for(const _e of S)if(_e.type==="SpreadExpression"){const Se=_e,Ne=this.evaluate(Se.argument,se);if(!(Ne instanceof fe))throw new Error(`Cannot unpack non-iterable type: ${Ne.type}`);for(const st of Ne.value)K.push(st)}else if(_e.type==="KeywordArgumentExpression"){const Se=_e;ae.set(Se.key.value,this.evaluate(Se.value,se))}else{if(ae.size>0)throw new Error("Positional arguments must come before keyword arguments");K.push(this.evaluate(_e,se))}return[K,ae]}applyFilter(S,se,K){if(se.type==="Identifier"){const ae=se;if(ae.value==="tojson")return new z(Tt(S));if(S instanceof fe)switch(ae.value){case"list":return S;case"first":return S.value[0];case"last":return S.value[S.value.length-1];case"length":return new oe(S.value.length);case"reverse":return new fe(S.value.reverse());case"sort":return new fe(S.value.sort((_e,Se)=>{if(_e.type!==Se.type)throw new Error(`Cannot compare different types: ${_e.type} and ${Se.type}`);switch(_e.type){case"IntegerValue":case"FloatValue":return _e.value-Se.value;case"StringValue":return _e.value.localeCompare(Se.value);default:throw new Error(`Cannot compare type: ${_e.type}`)}}));case"join":return new z(S.value.map(_e=>_e.value).join(""));case"string":return new z(Tt(S));case"unique":{const _e=new Set,Se=[];for(const Ne of S.value)_e.has(Ne.value)||(_e.add(Ne.value),Se.push(Ne));return new fe(Se)}default:throw new Error(`Unknown ArrayValue filter: ${ae.value}`)}else if(S instanceof z)switch(ae.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const _e=S.builtins.get(ae.value);if(_e instanceof he)return _e.value([],K);if(_e instanceof oe)return _e;throw new Error(`Unknown StringValue filter: ${ae.value}`)}case"trim":return new z(S.value.trim());case"indent":return new z(S.value.split(`
`).map((_e,Se)=>Se===0||_e.length===0?_e:"    "+_e).join(`
`));case"join":case"string":return S;case"int":{const _e=parseInt(S.value,10);return new oe(isNaN(_e)?0:_e)}case"float":{const _e=parseFloat(S.value);return new N(isNaN(_e)?0:_e)}default:throw new Error(`Unknown StringValue filter: ${ae.value}`)}else if(S instanceof oe||S instanceof N)switch(ae.value){case"abs":return S instanceof oe?new oe(Math.abs(S.value)):new N(Math.abs(S.value));case"int":return new oe(Math.floor(S.value));case"float":return new N(S.value);default:throw new Error(`Unknown NumericValue filter: ${ae.value}`)}else if(S instanceof le)switch(ae.value){case"items":return new fe(Array.from(S.value.entries()).map(([_e,Se])=>new fe([new z(_e),Se])));case"length":return new oe(S.value.size);default:throw new Error(`Unknown ObjectValue filter: ${ae.value}`)}else if(S instanceof ee)switch(ae.value){case"bool":return new ee(S.value);case"int":return new oe(S.value?1:0);case"float":return new N(S.value?1:0);case"string":return new z(S.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${ae.value}`)}throw new Error(`Cannot apply filter "${ae.value}" to type: ${S.type}`)}else if(se.type==="CallExpression"){const ae=se;if(ae.callee.type!=="Identifier")throw new Error(`Unknown filter: ${ae.callee.type}`);const _e=ae.callee.value;if(_e==="tojson"){const[,Se]=this.evaluateArguments(ae.args,K),Ne=Se.get("indent")??new $e;if(!(Ne instanceof oe||Ne instanceof $e))throw new Error("If set, indent must be a number");return new z(Tt(S,Ne.value))}else if(_e==="join"){let Se;if(S instanceof z)Se=Array.from(S.value);else if(S instanceof fe)Se=S.value.map(et=>et.value);else throw new Error(`Cannot apply filter "${_e}" to type: ${S.type}`);const[Ne,st]=this.evaluateArguments(ae.args,K),pt=Ne.at(0)??st.get("separator")??new z("");if(!(pt instanceof z))throw new Error("separator must be a string");return new z(Se.join(pt.value))}else if(_e==="int"||_e==="float"){const[Se,Ne]=this.evaluateArguments(ae.args,K),st=Se.at(0)??Ne.get("default")??(_e==="int"?new oe(0):new N(0));if(S instanceof z){const pt=_e==="int"?parseInt(S.value,10):parseFloat(S.value);return isNaN(pt)?st:_e==="int"?new oe(pt):new N(pt)}else{if(S instanceof oe||S instanceof N)return S;if(S instanceof ee)return _e==="int"?new oe(S.value?1:0):new N(S.value?1:0);throw new Error(`Cannot apply filter "${_e}" to type: ${S.type}`)}}else if(_e==="default"){const[Se,Ne]=this.evaluateArguments(ae.args,K),st=Se[0]??new z(""),pt=Se[1]??Ne.get("boolean")??new ee(!1);if(!(pt instanceof ee))throw new Error("`default` filter flag must be a boolean");return S instanceof Re||pt.value&&!S.__bool__().value?st:S}if(S instanceof fe){switch(_e){case"selectattr":case"rejectattr":{const Se=_e==="selectattr";if(S.value.some(Rt=>!(Rt instanceof le)))throw new Error(`\`${_e}\` can only be applied to array of objects`);if(ae.args.some(Rt=>Rt.type!=="StringLiteral"))throw new Error(`arguments of \`${_e}\` must be strings`);const[Ne,st,pt]=ae.args.map(Rt=>this.evaluate(Rt,K));let et;if(st){const Rt=K.tests.get(st.value);if(!Rt)throw new Error(`Unknown test: ${st.value}`);et=Rt}else et=(...Rt)=>Rt[0].__bool__().value;const Dt=S.value.filter(Rt=>{const tn=Rt.value.get(Ne.value),tr=tn?et(tn,pt):!1;return Se?tr:!tr});return new fe(Dt)}case"map":{const[,Se]=this.evaluateArguments(ae.args,K);if(Se.has("attribute")){const Ne=Se.get("attribute");if(!(Ne instanceof z))throw new Error("attribute must be a string");const st=Se.get("default"),pt=S.value.map(et=>{if(!(et instanceof le))throw new Error("items in map must be an object");return et.value.get(Ne.value)??st??new Re});return new fe(pt)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${_e}`)}else if(S instanceof z){switch(_e){case"indent":{const[Se,Ne]=this.evaluateArguments(ae.args,K),st=Se.at(0)??Ne.get("width")??new oe(4);if(!(st instanceof oe))throw new Error("width must be a number");const pt=Se.at(1)??Ne.get("first")??new ee(!1),et=Se.at(2)??Ne.get("blank")??new ee(!1),Dt=S.value.split(`
`),Rt=" ".repeat(st.value),tn=Dt.map((tr,qr)=>!pt.value&&qr===0||!et.value&&tr.length===0?tr:Rt+tr);return new z(tn.join(`
`))}case"replace":{const Se=S.builtins.get("replace");if(!(Se instanceof he))throw new Error("replace filter not available");const[Ne,st]=this.evaluateArguments(ae.args,K);return Se.value([...Ne,new ke(st)],K)}}throw new Error(`Unknown StringValue filter: ${_e}`)}else throw new Error(`Cannot apply filter "${_e}" to type: ${S.type}`)}throw new Error(`Unknown filter: ${se.type}`)}evaluateFilterExpression(S,se){const K=this.evaluate(S.operand,se);return this.applyFilter(K,S.filter,se)}evaluateTestExpression(S,se){const K=this.evaluate(S.operand,se),ae=se.tests.get(S.test.value);if(!ae)throw new Error(`Unknown test: ${S.test.value}`);const _e=ae(K);return new ee(S.negate?!_e:_e)}evaluateSelectExpression(S,se){return this.evaluate(S.test,se).__bool__().value?this.evaluate(S.lhs,se):new Re}evaluateUnaryExpression(S,se){const K=this.evaluate(S.argument,se);switch(S.operator.value){case"not":return new ee(!K.value);default:throw new SyntaxError(`Unknown operator: ${S.operator.value}`)}}evaluateTernaryExpression(S,se){return this.evaluate(S.condition,se).__bool__().value?this.evaluate(S.trueExpr,se):this.evaluate(S.falseExpr,se)}evalProgram(S,se){return this.evaluateBlock(S.body,se)}evaluateBlock(S,se){let K="";for(const ae of S){const _e=this.evaluate(ae,se);_e.type!=="NullValue"&&_e.type!=="UndefinedValue"&&(K+=_e.toString())}return new z(K)}evaluateIdentifier(S,se){return se.lookupVariable(S.value)}evaluateCallExpression(S,se){const[K,ae]=this.evaluateArguments(S.args,se);ae.size>0&&K.push(new ke(ae));const _e=this.evaluate(S.callee,se);if(_e.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${_e.type}`);return _e.value(K,se)}evaluateSliceExpression(S,se,K){if(!(S instanceof fe||S instanceof z))throw new Error("Slice object must be an array or string");const ae=this.evaluate(se.start,K),_e=this.evaluate(se.stop,K),Se=this.evaluate(se.step,K);if(!(ae instanceof oe||ae instanceof Re))throw new Error("Slice start must be numeric or undefined");if(!(_e instanceof oe||_e instanceof Re))throw new Error("Slice stop must be numeric or undefined");if(!(Se instanceof oe||Se instanceof Re))throw new Error("Slice step must be numeric or undefined");return S instanceof fe?new fe(Te(S.value,ae.value,_e.value,Se.value)):new z(Te(Array.from(S.value),ae.value,_e.value,Se.value).join(""))}evaluateMemberExpression(S,se){const K=this.evaluate(S.object,se);let ae;if(S.computed){if(S.property.type==="SliceExpression")return this.evaluateSliceExpression(K,S.property,se);ae=this.evaluate(S.property,se)}else ae=new z(S.property.value);let _e;if(K instanceof le){if(!(ae instanceof z))throw new Error(`Cannot access property with non-string: got ${ae.type}`);_e=K.value.get(ae.value)??K.builtins.get(ae.value)}else if(K instanceof fe||K instanceof z)if(ae instanceof oe)_e=K.value.at(ae.value),K instanceof z&&(_e=new z(K.value.at(ae.value)));else if(ae instanceof z)_e=K.builtins.get(ae.value);else throw new Error(`Cannot access property with non-string/non-number: got ${ae.type}`);else{if(!(ae instanceof z))throw new Error(`Cannot access property with non-string: got ${ae.type}`);_e=K.builtins.get(ae.value)}return _e instanceof ue?_e:new Re}evaluateSet(S,se){const K=S.value?this.evaluate(S.value,se):this.evaluateBlock(S.body,se);if(S.assignee.type==="Identifier"){const ae=S.assignee.value;se.setVariable(ae,K)}else if(S.assignee.type==="TupleLiteral"){const ae=S.assignee;if(!(K instanceof fe))throw new Error(`Cannot unpack non-iterable type in set: ${K.type}`);const _e=K.value;if(_e.length!==ae.value.length)throw new Error(`Too ${ae.value.length>_e.length?"few":"many"} items to unpack in set`);for(let Se=0;Se<ae.value.length;++Se){const Ne=ae.value[Se];if(Ne.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${Ne.type}`);se.setVariable(Ne.value,_e[Se])}}else if(S.assignee.type==="MemberExpression"){const ae=S.assignee,_e=this.evaluate(ae.object,se);if(!(_e instanceof le))throw new Error("Cannot assign to member of non-object");if(ae.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");_e.value.set(ae.property.value,K)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(S.assignee)}`);return new $e}evaluateIf(S,se){const K=this.evaluate(S.test,se);return this.evaluateBlock(K.__bool__().value?S.body:S.alternate,se)}evaluateFor(S,se){const K=new ze(se);let ae,_e;if(S.iterable.type==="SelectExpression"){const et=S.iterable;_e=this.evaluate(et.lhs,K),ae=et.test}else _e=this.evaluate(S.iterable,K);if(!(_e instanceof fe||_e instanceof le))throw new Error(`Expected iterable or object type in for loop: got ${_e.type}`);_e instanceof le&&(_e=_e.keys());const Se=[],Ne=[];for(let et=0;et<_e.value.length;++et){const Dt=new ze(K),Rt=_e.value[et];let tn;if(S.loopvar.type==="Identifier")tn=tr=>tr.setVariable(S.loopvar.value,Rt);else if(S.loopvar.type==="TupleLiteral"){const tr=S.loopvar;if(Rt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${Rt.type}`);const qr=Rt;if(tr.value.length!==qr.value.length)throw new Error(`Too ${tr.value.length>qr.value.length?"few":"many"} items to unpack`);tn=Xn=>{for(let Tr=0;Tr<tr.value.length;++Tr){if(tr.value[Tr].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${tr.value[Tr].type}`);Xn.setVariable(tr.value[Tr].value,qr.value[Tr])}}}else throw new Error(`Invalid loop variable(s): ${S.loopvar.type}`);ae&&(tn(Dt),!this.evaluate(ae,Dt).__bool__().value)||(Se.push(Rt),Ne.push(tn))}let st="",pt=!0;for(let et=0;et<Se.length;++et){const Dt=new Map([["index",new oe(et+1)],["index0",new oe(et)],["revindex",new oe(Se.length-et)],["revindex0",new oe(Se.length-et-1)],["first",new ee(et===0)],["last",new ee(et===Se.length-1)],["length",new oe(Se.length)],["previtem",et>0?Se[et-1]:new Re],["nextitem",et<Se.length-1?Se[et+1]:new Re]]);K.setVariable("loop",new le(Dt)),Ne[et](K);try{const Rt=this.evaluateBlock(S.body,K);st+=Rt.value}catch(Rt){if(Rt instanceof pe)continue;if(Rt instanceof q)break;throw Rt}pt=!1}if(pt){const et=this.evaluateBlock(S.defaultBlock,K);st+=et.value}return new z(st)}evaluateMacro(S,se){return se.setVariable(S.name.value,new he((K,ae)=>{const _e=new ze(ae);K=K.slice();let Se;K.at(-1)?.type==="KeywordArgumentsValue"&&(Se=K.pop());for(let Ne=0;Ne<S.args.length;++Ne){const st=S.args[Ne],pt=K[Ne];if(st.type==="Identifier"){const et=st;if(!pt)throw new Error(`Missing positional argument: ${et.value}`);_e.setVariable(et.value,pt)}else if(st.type==="KeywordArgumentExpression"){const et=st,Dt=pt??Se?.value.get(et.key.value)??this.evaluate(et.value,_e);_e.setVariable(et.key.value,Dt)}else throw new Error(`Unknown argument type: ${st.type}`)}return this.evaluateBlock(S.body,_e)})),new $e}evaluateCallStatement(S,se){const K=new he((st,pt)=>{const et=new ze(pt);if(S.callerArgs)for(let Dt=0;Dt<S.callerArgs.length;++Dt){const Rt=S.callerArgs[Dt];if(Rt.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${Rt.type}`);et.setVariable(Rt.value,st[Dt]??new Re)}return this.evaluateBlock(S.body,et)}),[ae,_e]=this.evaluateArguments(S.call.args,se);ae.push(new ke(_e));const Se=this.evaluate(S.call.callee,se);if(Se.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Se.type}`);const Ne=new ze(se);return Ne.setVariable("caller",K),Se.value(ae,Ne)}evaluateFilterStatement(S,se){const K=this.evaluateBlock(S.body,se);return this.applyFilter(K,S.filter,se)}evaluate(S,se){if(!S)return new Re;switch(S.type){case"Program":return this.evalProgram(S,se);case"Set":return this.evaluateSet(S,se);case"If":return this.evaluateIf(S,se);case"For":return this.evaluateFor(S,se);case"Macro":return this.evaluateMacro(S,se);case"CallStatement":return this.evaluateCallStatement(S,se);case"Break":throw new q;case"Continue":throw new pe;case"IntegerLiteral":return new oe(S.value);case"FloatLiteral":return new N(S.value);case"StringLiteral":return new z(S.value);case"ArrayLiteral":return new fe(S.value.map(K=>this.evaluate(K,se)));case"TupleLiteral":return new ce(S.value.map(K=>this.evaluate(K,se)));case"ObjectLiteral":{const K=new Map;for(const[ae,_e]of S.value){const Se=this.evaluate(ae,se);if(!(Se instanceof z))throw new Error(`Object keys must be strings: got ${Se.type}`);K.set(Se.value,this.evaluate(_e,se))}return new le(K)}case"Identifier":return this.evaluateIdentifier(S,se);case"CallExpression":return this.evaluateCallExpression(S,se);case"MemberExpression":return this.evaluateMemberExpression(S,se);case"UnaryExpression":return this.evaluateUnaryExpression(S,se);case"BinaryExpression":return this.evaluateBinaryExpression(S,se);case"FilterExpression":return this.evaluateFilterExpression(S,se);case"FilterStatement":return this.evaluateFilterStatement(S,se);case"TestExpression":return this.evaluateTestExpression(S,se);case"SelectExpression":return this.evaluateSelectExpression(S,se);case"Ternary":return this.evaluateTernaryExpression(S,se);case"Comment":return new $e;default:throw new SyntaxError(`Unknown node type: ${S.type}`)}}};function vt(S){switch(typeof S){case"number":return Number.isInteger(S)?new oe(S):new N(S);case"string":return new z(S);case"boolean":return new ee(S);case"undefined":return new Re;case"object":return S===null?new $e:Array.isArray(S)?new fe(S.map(vt)):new le(new Map(Object.entries(S).map(([se,K])=>[se,vt(K)])));case"function":return new he((se,K)=>{const ae=S(...se.map(_e=>_e.value))??null;return vt(ae)});default:throw new Error(`Cannot convert to runtime value: ${S}`)}}function Tt(S,se,K){const ae=K??0;switch(S.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(S.value);case"ArrayValue":case"ObjectValue":{const _e=se?" ".repeat(se):"",Se=`
`+_e.repeat(ae),Ne=Se+_e;if(S.type==="ArrayValue"){const st=S.value.map(pt=>Tt(pt,se,ae+1));return se?`[${Ne}${st.join(`,${Ne}`)}${Se}]`:`[${st.join(", ")}]`}else{const st=Array.from(S.value.entries()).map(([pt,et])=>{const Dt=`"${pt}": ${Tt(et,se,ae+1)}`;return se?`${Ne}${Dt}`:Dt});return se?`{${st.join(",")}${Se}}`:`{${st.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${S.type}`)}}var gt=`
`,Gr="{%- ",_r=" -%}";function xr(S){switch(S.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return S.operator.value==="and"?1:S.operator.value==="in"||S.operator.value==="not in"?2:0}return 0}function zn(S,se="	"){const K=typeof se=="number"?" ".repeat(se):se;return yn(S.body,0,K).replace(/\n$/,"")}function ir(...S){return Gr+S.join(" ")+_r}function yn(S,se,K){return S.map(ae=>Gs(ae,se,K)).join(gt)}function Gs(S,se,K){const ae=K.repeat(se);switch(S.type){case"Program":return yn(S.body,se,K);case"If":return Hs(S,se,K);case"For":return ys(S,se,K);case"Set":return ws(S,se,K);case"Macro":return _t(S,se,K);case"Break":return ae+ir("break");case"Continue":return ae+ir("continue");case"CallStatement":return es(S,se,K);case"FilterStatement":return mr(S,se,K);case"Comment":return ae+"{# "+S.value+" #}";default:return ae+"{{- "+Ot(S)+" -}}"}}function Hs(S,se,K){const ae=K.repeat(se),_e=[];let Se=S;for(;Se&&(_e.push({test:Se.test,body:Se.body}),Se.alternate.length===1&&Se.alternate[0].type==="If");)Se=Se.alternate[0];let Ne=ae+ir("if",Ot(_e[0].test))+gt+yn(_e[0].body,se+1,K);for(let st=1;st<_e.length;++st)Ne+=gt+ae+ir("elif",Ot(_e[st].test))+gt+yn(_e[st].body,se+1,K);return Se&&Se.alternate.length>0&&(Ne+=gt+ae+ir("else")+gt+yn(Se.alternate,se+1,K)),Ne+=gt+ae+ir("endif"),Ne}function ys(S,se,K){const ae=K.repeat(se);let _e="";if(S.iterable.type==="SelectExpression"){const Ne=S.iterable;_e=`${Ot(Ne.lhs)} if ${Ot(Ne.test)}`}else _e=Ot(S.iterable);let Se=ae+ir("for",Ot(S.loopvar),"in",_e)+gt+yn(S.body,se+1,K);return S.defaultBlock.length>0&&(Se+=gt+ae+ir("else")+gt+yn(S.defaultBlock,se+1,K)),Se+=gt+ae+ir("endfor"),Se}function ws(S,se,K){const ae=K.repeat(se),_e=Ot(S.assignee),Se=S.value?Ot(S.value):"",Ne=ae+ir("set",`${_e}${S.value?" = "+Se:""}`);return S.body.length===0?Ne:Ne+gt+yn(S.body,se+1,K)+gt+ae+ir("endset")}function _t(S,se,K){const ae=K.repeat(se),_e=S.args.map(Ot).join(", ");return ae+ir("macro",`${S.name.value}(${_e})`)+gt+yn(S.body,se+1,K)+gt+ae+ir("endmacro")}function es(S,se,K){const ae=K.repeat(se),_e=S.callerArgs&&S.callerArgs.length>0?`(${S.callerArgs.map(Ot).join(", ")})`:"",Se=Ot(S.call);let Ne=ae+ir(`call${_e}`,Se)+gt;return Ne+=yn(S.body,se+1,K)+gt,Ne+=ae+ir("endcall"),Ne}function mr(S,se,K){const ae=K.repeat(se),_e=S.filter.type==="Identifier"?S.filter.value:Ot(S.filter);let Se=ae+ir("filter",_e)+gt;return Se+=yn(S.body,se+1,K)+gt,Se+=ae+ir("endfilter"),Se}function Ot(S,se=-1){switch(S.type){case"SpreadExpression":return`*${Ot(S.argument)}`;case"Identifier":return S.value;case"IntegerLiteral":return`${S.value}`;case"FloatLiteral":return`${S.value}`;case"StringLiteral":return JSON.stringify(S.value);case"BinaryExpression":{const K=S,ae=xr(K),_e=Ot(K.left,ae),Se=Ot(K.right,ae+1),Ne=`${_e} ${K.operator.value} ${Se}`;return ae<se?`(${Ne})`:Ne}case"UnaryExpression":{const K=S;return K.operator.value+(K.operator.value==="not"?" ":"")+Ot(K.argument,1/0)}case"CallExpression":{const K=S,ae=K.args.map(Ot).join(", ");return`${Ot(K.callee)}(${ae})`}case"MemberExpression":{const K=S;let ae=Ot(K.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(K.object.type)||(ae=`(${ae})`);let _e=Ot(K.property);return!K.computed&&K.property.type!=="Identifier"&&(_e=`(${_e})`),K.computed?`${ae}[${_e}]`:`${ae}.${_e}`}case"FilterExpression":{const K=S,ae=Ot(K.operand,1/0);return K.filter.type==="CallExpression"?`${ae} | ${Ot(K.filter)}`:`${ae} | ${K.filter.value}`}case"SelectExpression":{const K=S;return`${Ot(K.lhs)} if ${Ot(K.test)}`}case"TestExpression":{const K=S;return`${Ot(K.operand)} is${K.negate?" not":""} ${K.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const K=S.value.map(Ot),ae=S.type==="ArrayLiteral"?"[]":"()";return`${ae[0]}${K.join(", ")}${ae[1]}`}case"ObjectLiteral":return`{${Array.from(S.value.entries()).map(([ae,_e])=>`${Ot(ae)}: ${Ot(_e)}`).join(", ")}}`;case"SliceExpression":{const K=S,ae=K.start?Ot(K.start):"",_e=K.stop?Ot(K.stop):"",Se=K.step?`:${Ot(K.step)}`:"";return`${ae}:${_e}${Se}`}case"KeywordArgumentExpression":{const K=S;return`${K.key.value}=${Ot(K.value)}`}case"Ternary":{const K=S,ae=`${Ot(K.trueExpr)} if ${Ot(K.condition,0)} else ${Ot(K.falseExpr)}`;return se>-1?`(${ae})`:ae}default:throw new Error(`Unknown expression type: ${S.type}`)}}var ts=class{parsed;constructor(S){const se=u(S,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=Le(se)}render(S){const se=new ze;if(Ge(se),S)for(const[_e,Se]of Object.entries(S))se.set(_e,Se);return new Ke(se).run(this.parsed).value}format(S){return zn(this.parsed,S?.indent||"	")}}}),"./src/backends/onnx.js":((e,t,r)=>{var n;r.r(t),r.d(t,{Tensor:()=>a.Tensor,createInferenceSession:()=>E,deviceToExecutionProviders:()=>m,isONNXProxy:()=>T,isONNXTensor:()=>h});var o=r("./src/env.js"),s=r("?2ce3"),i=r("onnxruntime-web"),a=r("onnxruntime-common");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),c=[];let u,d;const f=Symbol.for("onnxruntime");if(f in globalThis)d=globalThis[f];else if(o.apis.IS_NODE_ENV){switch(d=s??(n||(n=r.t(s,2))),process.platform){case"win32":c.push("dml");break;case"linux":process.arch==="x64"&&c.push("cuda");break}c.push("cpu"),u=["cpu"]}else d=i,o.apis.IS_WEBNN_AVAILABLE&&c.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),o.apis.IS_WEBGPU_AVAILABLE&&c.push("webgpu"),c.push("wasm"),u=["wasm"];const p=d.InferenceSession;function m(g=null){if(!g)return u;switch(g){case"auto":return c;case"gpu":return c.filter(M=>["webgpu","cuda","dml","webnn-gpu"].includes(M))}if(c.includes(g))return[l[g]??g];throw new Error(`Unsupported device: "${g}". Should be one of: ${c.join(", ")}.`)}let b=null;async function E(g,M,x){b&&await b;const w=p.create(g,M);b??=w;const $=await w;return $.config=x,$}function h(g){return g instanceof d.Tensor}const _=d?.env;_?.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!_.wasm.wasmPaths&&(_.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${o.env.version}/dist/`),_.wasm.proxy=!1),_?.webgpu&&(_.webgpu.powerPreference="high-performance");function T(){return _?.wasm?.proxy}o.env.backends.onnx=_}),"./src/base/feature_extraction_utils.js":((e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>i,validate_audio_inputs:()=>a});var n=r("./src/utils/constants.js"),o=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class i extends o.Callable{constructor(c){super(),this.config=c}static async from_pretrained(c,u={}){const d=await(0,s.getModelJSON)(c,n.FEATURE_EXTRACTOR_NAME,!0,u);return new this(d)}}function a(l,c){if(!(l instanceof Float32Array||l instanceof Float64Array))throw new Error(`${c} expects input to be a Float32Array or a Float64Array, but got ${l?.constructor?.name??typeof l} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}}),"./src/base/image_processors_utils.js":((e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>g,center_to_corners_format:()=>d,post_process_instance_segmentation:()=>T,post_process_object_detection:()=>f,post_process_panoptic_segmentation:()=>_,post_process_semantic_segmentation:()=>p});var n=r("./src/utils/generic.js"),o=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/utils/image.js");var i=r("./src/utils/core.js"),a=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function c(M,x,w=0,$=null){const O=M/x;let L=(0,s.bankers_round)(O)*x;return $!==null&&L>$&&(L=Math.floor(O)*x),L<w&&(L=Math.ceil(O)*x),L}function u([M,x],w){return[Math.max(Math.floor(M/w),1)*w,Math.max(Math.floor(x/w),1)*w]}function d([M,x,w,$]){return[M-w/2,x-$/2,M+w/2,x+$/2]}function f(M,x=.5,w=null,$=!1){const O=M.logits,L=M.pred_boxes,[G,j,D]=O.dims;if(w!==null&&w.length!==G)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let re=[];for(let Z=0;Z<G;++Z){let te=w!==null?w[Z]:null,ie={boxes:[],classes:[],scores:[]},ne=O[Z],ve=L[Z];for(let Me=0;Me<j;++Me){let W=ne[Me],R=[],J;if($){J=W.sigmoid().data;for(let U=0;U<J.length;++U)J[U]>x&&R.push(U)}else{let U=(0,s.max)(W.data)[1];if(U===D-1||(J=(0,s.softmax)(W.data),J[U]<x))continue;R.push(U)}for(const U of R){let be=ve[Me].data;be=d(be),te!==null&&(be=be.map((Le,de)=>Le*te[(de+1)%2])),ie.boxes.push(be),ie.classes.push(U),ie.scores.push(J[U])}}re.push(ie)}return re}function p(M,x=null){const w=M.logits,$=w.dims[0];if(x!==null&&x.length!==$)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const O=[];for(let L=0;L<$;++L){const G=x!==null?x[L]:null;let j=w[L];G!==null&&(j=(0,o.interpolate)(j,G,"bilinear",!1));const[D,re]=G??j.dims.slice(-2),Z=new o.Tensor("int32",new Int32Array(D*re),[D,re]),te=j[0].data,ie=Z.data;for(let Me=1;Me<j.dims[0];++Me){const W=j[Me].data;for(let R=0;R<W.length;++R)W[R]>te[R]&&(te[R]=W[R],ie[R]=Me)}const ne=new Array(j.dims[0]);for(let Me=0;Me<ie.length;++Me){const W=ie[Me];ne[W]=W}const ve=ne.filter(Me=>Me!==void 0);O.push({segmentation:Z,labels:ve})}return O}function m(M,x,w,$){const O=[],L=[],G=[];for(let j=0;j<M.dims[0];++j){const D=M[j],re=x[j],Z=(0,s.max)(D.data)[1];if(Z===$)continue;const ie=(0,s.softmax)(D.data)[Z];ie>w&&(O.push(re),L.push(ie),G.push(Z))}return[O,L,G]}function b(M,x,w,$=.5,O=.8){const L=[];let G=0,j=0;const D=x[w].data;for(let Z=0;Z<M.length;++Z)M[Z]===w&&(L.push(Z),++G),D[Z]>=$&&++j;let re=G>0&&j>0;return re&&(re=G/j>O),[re,L]}function E(M,x,w,$,O,L=null,G=null){const[j,D]=G??M[0].dims,re=new o.Tensor("int32",new Int32Array(j*D),[j,D]),Z=[];if(G!==null)for(let Me=0;Me<M.length;++Me)M[Me]=(0,o.interpolate)(M[Me],G,"bilinear",!1);const te=new Int32Array(M[0].data.length),ie=new Float32Array(M[0].data.length);for(let Me=0;Me<M.length;++Me){let W=x[Me];const R=M[Me].data;for(let J=0;J<R.length;++J)R[J]*=W,R[J]>ie[J]&&(te[J]=Me,ie[J]=R[J])}let ne=0;const ve=re.data;for(let Me=0;Me<w.length;++Me){const W=w[Me],[R,J]=b(te,M,Me,$,O);if(R){++ne;for(const U of J)ve[U]=ne;Z.push({id:ne,label_id:W,score:x[Me]})}}return[re,Z]}function h(M,x,w=28,$=3136,O=784*1280){if(M<w||x<w)throw new Error(`height:${M} or width:${x} must be larger than factor:${w}`);if(Math.max(M,x)/Math.min(M,x)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(M,x)/Math.min(M,x)}`);let L=Math.round(M/w)*w,G=Math.round(x/w)*w;if(L*G>O){const j=Math.sqrt(M*x/O);L=Math.floor(M/j/w)*w,G=Math.floor(x/j/w)*w}else if(L*G<$){const j=Math.sqrt($/(M*x));L=Math.ceil(M*j/w)*w,G=Math.ceil(x*j/w)*w}return[L,G]}function _(M,x=.5,w=.5,$=.8,O=null,L=null){O===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),O=new Set);const G=M.class_queries_logits??M.logits,D=(M.masks_queries_logits??M.pred_masks).sigmoid();let[re,Z,te]=G.dims;if(te-=1,L!==null&&L.length!==re)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let ie=[];for(let ne=0;ne<re;++ne){let ve=L!==null?L[ne]:null,Me=G[ne],W=D[ne],[R,J,U]=m(Me,W,x,te);if(U.length===0){let[de,Te]=ve??W.dims.slice(-2),Pe=new o.Tensor("int32",new Int32Array(de*Te).fill(-1),[de,Te]);ie.push({segmentation:Pe,segments_info:[]});continue}let[be,Le]=E(R,J,U,w,$,O,ve);ie.push({segmentation:be,segments_info:Le})}return ie}function T(M,x=.5,w=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class g extends n.Callable{constructor(x){super(),this.image_mean=x.image_mean??x.mean,this.image_std=x.image_std??x.std,this.resample=x.resample??2,this.do_rescale=x.do_rescale??!0,this.rescale_factor=x.rescale_factor??1/255,this.do_normalize=x.do_normalize,this.do_thumbnail=x.do_thumbnail,this.size=x.size??x.image_size,this.do_resize=x.do_resize??this.size!==void 0,this.size_divisibility=x.size_divisibility??x.size_divisor,this.do_center_crop=x.do_center_crop,this.crop_size=x.crop_size,this.do_convert_rgb=x.do_convert_rgb??!0,this.do_crop_margin=x.do_crop_margin,this.pad_size=x.pad_size,this.do_pad=x.do_pad,this.min_pixels=x.min_pixels,this.max_pixels=x.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=x.do_flip_channel_order??!1,this.config=x}async thumbnail(x,w,$=2){const O=x.height,L=x.width,G=w.height,j=w.width;let D=Math.min(O,G),re=Math.min(L,j);return D===O&&re===L?x:(O>L?re=Math.floor(L*D/O):L>O&&(D=Math.floor(O*re/L)),await x.resize(re,D,{resample:$}))}async crop_margin(x,w=200){const $=x.clone().grayscale(),O=(0,s.min)($.data)[0],G=(0,s.max)($.data)[0]-O;if(G===0)return x;const j=w/255;let D=$.width,re=$.height,Z=0,te=0;const ie=$.data;for(let ne=0;ne<$.height;++ne){const ve=ne*$.width;for(let Me=0;Me<$.width;++Me)(ie[ve+Me]-O)/G<j&&(D=Math.min(D,Me),re=Math.min(re,ne),Z=Math.max(Z,Me),te=Math.max(te,ne))}return x=await x.crop([D,re,Z,te]),x}pad_image(x,w,$,{mode:O="constant",center:L=!1,constant_values:G=0}={}){const[j,D,re]=w;let Z,te;if(typeof $=="number"?(Z=$,te=$):$==="square"?Z=te=Math.max(j,D):(Z=$.width,te=$.height),Z!==D||te!==j){const ie=new Float32Array(Z*te*re);if(Array.isArray(G))for(let Me=0;Me<ie.length;++Me)ie[Me]=G[Me%re];else G!==0&&ie.fill(G);const[ne,ve]=L?[Math.floor((Z-D)/2),Math.floor((te-j)/2)]:[0,0];for(let Me=0;Me<j;++Me){const W=(Me+ve)*Z,R=Me*D;for(let J=0;J<D;++J){const U=(W+J+ne)*re,be=(R+J)*re;for(let Le=0;Le<re;++Le)ie[U+Le]=x[be+Le]}}if(O==="symmetric"){if(L)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const Me=j-1,W=D-1;for(let R=0;R<te;++R){const J=R*Z,U=(0,i.calculateReflectOffset)(R,Me)*D;for(let be=0;be<Z;++be){if(R<j&&be<D)continue;const Le=(J+be)*re,de=(U+(0,i.calculateReflectOffset)(be,W))*re;for(let Te=0;Te<re;++Te)ie[Le+Te]=x[de+Te]}}}x=ie,w=[te,Z,re]}return[x,w]}rescale(x){for(let w=0;w<x.length;++w)x[w]=this.rescale_factor*x[w]}get_resize_output_image_size(x,w){const[$,O]=x.size;let L,G;if(this.do_thumbnail){const{height:j,width:D}=w;L=Math.min(j,D)}else Number.isInteger(w)?(L=w,G=this.config.max_size??L):w!==void 0&&(L=w.shortest_edge,G=w.longest_edge);if(L!==void 0||G!==void 0){const j=L===void 0?1:Math.max(L/$,L/O),D=$*j,re=O*j,Z=G===void 0?1:Math.min(G/D,G/re);let te=Math.floor(Number((D*Z).toFixed(2))),ie=Math.floor(Number((re*Z).toFixed(2)));return this.size_divisibility!==void 0&&([te,ie]=u([te,ie],this.size_divisibility)),[te,ie]}else if(w!==void 0&&w.width!==void 0&&w.height!==void 0){let j=w.width,D=w.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let re=D/O,Z=j/$;Math.abs(1-Z)<Math.abs(1-re)?re=Z:Z=re,D=c(re*O,this.config.ensure_multiple_of),j=c(Z*$,this.config.ensure_multiple_of)}return[j,D]}else{if(this.size_divisibility!==void 0)return u([$,O],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const j=this.config.patch_size*this.config.merge_size;return h(O,$,j,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(w)}`)}}async resize(x){const[w,$]=this.get_resize_output_image_size(x,this.size);return await x.resize(w,$,{resample:this.resample})}async preprocess(x,{do_normalize:w=null,do_pad:$=null,do_convert_rgb:O=null,do_convert_grayscale:L=null,do_flip_channel_order:G=null}={}){this.do_crop_margin&&(x=await this.crop_margin(x));const[j,D]=x.size;if(O??this.do_convert_rgb?x=x.rgb():L&&(x=x.grayscale()),this.do_resize&&(x=await this.resize(x)),this.do_thumbnail&&(x=await this.thumbnail(x,this.size,this.resample)),this.do_center_crop){let ne,ve;Number.isInteger(this.crop_size)?(ne=this.crop_size,ve=this.crop_size):(ne=this.crop_size.width,ve=this.crop_size.height),x=await x.center_crop(ne,ve)}const re=[x.height,x.width];let Z=Float32Array.from(x.data),te=[x.height,x.width,x.channels];if(this.do_rescale&&this.rescale(Z),w??this.do_normalize){let ne=this.image_mean;Array.isArray(this.image_mean)||(ne=new Array(x.channels).fill(ne));let ve=this.image_std;if(Array.isArray(this.image_std)||(ve=new Array(x.channels).fill(ne)),ne.length!==x.channels||ve.length!==x.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${ne.length}) and \`image_std\` (${ve.length}) must match the number of channels in the image (${x.channels}).`);for(let Me=0;Me<Z.length;Me+=x.channels)for(let W=0;W<x.channels;++W)Z[Me+W]=(Z[Me+W]-ne[W])/ve[W]}if($??this.do_pad){if(this.pad_size)[Z,te]=this.pad_image(Z,[x.height,x.width,x.channels],this.pad_size);else if(this.size_divisibility){const[ne,ve]=u([te[1],te[0]],this.size_divisibility);[Z,te]=this.pad_image(Z,te,{width:ne,height:ve})}}if(G??this.do_flip_channel_order){if(te[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let ne=0;ne<Z.length;ne+=3){const ve=Z[ne];Z[ne]=Z[ne+2],Z[ne+2]=ve}}const ie=new o.Tensor("float32",Z,te).permute(2,0,1);return{original_size:[D,j],reshaped_input_size:re,pixel_values:ie}}async _call(x,...w){Array.isArray(x)||(x=[x]);const $=await Promise.all(x.map(L=>this.preprocess(L)));return{pixel_values:(0,o.stack)($.map(L=>L.pixel_values),0),original_sizes:$.map(L=>L.original_size),reshaped_input_sizes:$.map(L=>L.reshaped_input_size)}}static async from_pretrained(x,w={}){const $=await(0,a.getModelJSON)(x,l.IMAGE_PROCESSOR_NAME,!0,w);return new this($)}}}),"./src/base/processing_utils.js":((e,t,r)=>{r.r(t),r.d(t,{Processor:()=>i});var n=r("./src/utils/constants.js"),o=r("./src/utils/generic.js"),s=r("./src/utils/hub.js");class i extends o.Callable{static classes=["image_processor_class","tokenizer_class","feature_extractor_class"];static uses_processor_config=!1;static uses_chat_template_file=!1;constructor(l,c,u){super(),this.config=l,this.components=c,this.chat_template=u}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(l,c={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(l,{tokenize:!1,chat_template:this.chat_template??void 0,...c})}batch_decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...l)}decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...l)}async _call(l,...c){for(const u of[this.image_processor,this.feature_extractor,this.tokenizer])if(u)return u(l,...c);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(l,c={}){const[u,d,f]=await Promise.all([this.uses_processor_config?(0,s.getModelJSON)(l,n.PROCESSOR_NAME,!0,c):{},Promise.all(this.classes.filter(p=>p in this).map(async p=>{const m=await this[p].from_pretrained(l,c);return[p.replace(/_class$/,""),m]})).then(Object.fromEntries),this.uses_chat_template_file?(0,s.getModelText)(l,n.CHAT_TEMPLATE_NAME,!0,c):null]);return new this(u,d,f)}}}),"./src/configs.js":((e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>u,PretrainedConfig:()=>c,getCacheShapes:()=>a});var n=r("./src/utils/core.js"),o=r("./src/utils/hub.js");async function s(d,f){return await(0,o.getModelJSON)(d,"config.json",!0,f)}function i(d){const f={};let p={};switch(d.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":p=i(d.text_config);break;case"moondream1":p=i(d.phi_config);break;case"musicgen":p=i(d.decoder);break;case"multi_modality":p=i(d.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":f.num_heads="n_head",f.num_layers="n_layer",f.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":f.num_heads="num_attention_heads",f.num_layers="num_hidden_layers",f.hidden_size="hidden_size";break;case"llama":case"arcee":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":f.num_heads="num_key_value_heads",f.num_layers="num_hidden_layers",f.hidden_size="hidden_size",f.num_attention_heads="num_attention_heads",f.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":f.num_heads="num_key_value_heads",f.num_layers="num_hidden_layers",f.dim_kv="head_dim";break;case"openelm":f.num_heads="num_kv_heads",f.num_layers="num_transformer_layers",f.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":f.num_heads="num_heads",f.num_layers="num_layers",f.hidden_size="hidden_size";break;case"bloom":f.num_heads="n_head",f.num_layers="n_layer",f.hidden_size="hidden_size";break;case"mpt":f.num_heads="n_heads",f.num_layers="n_layers",f.hidden_size="d_model";break;case"exaone":f.num_heads="num_key_value_heads",f.num_layers="num_layers",f.dim_kv="head_dim",f.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":f.num_decoder_layers="num_decoder_layers",f.num_decoder_heads="num_heads",f.decoder_dim_kv="d_kv",f.num_encoder_layers="num_layers",f.num_encoder_heads="num_heads",f.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":f.num_decoder_layers="decoder_layers",f.num_decoder_heads="decoder_attention_heads",f.decoder_hidden_size="d_model",f.num_encoder_layers="encoder_layers",f.num_encoder_heads="encoder_attention_heads",f.encoder_hidden_size="d_model";break;case"speecht5":f.num_decoder_layers="decoder_layers",f.num_decoder_heads="decoder_attention_heads",f.decoder_hidden_size="hidden_size",f.num_encoder_layers="encoder_layers",f.num_encoder_heads="encoder_attention_heads",f.encoder_hidden_size="hidden_size";break;case"trocr":f.num_encoder_layers=f.num_decoder_layers="decoder_layers",f.num_encoder_heads=f.num_decoder_heads="decoder_attention_heads",f.encoder_hidden_size=f.decoder_hidden_size="d_model";break;case"musicgen_decoder":f.num_encoder_layers=f.num_decoder_layers="num_hidden_layers",f.num_encoder_heads=f.num_decoder_heads="num_attention_heads",f.encoder_hidden_size=f.decoder_hidden_size="hidden_size";break;case"moonshine":f.num_decoder_layers="decoder_num_hidden_layers",f.num_decoder_heads="decoder_num_key_value_heads",f.num_encoder_layers="encoder_num_hidden_layers",f.num_encoder_heads="encoder_num_key_value_heads",f.encoder_hidden_size=f.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const b=i(d.decoder),E="num_decoder_layers"in b,h=(0,n.pick)(d,["model_type","is_encoder_decoder"]);return E?(h.num_decoder_layers=b.num_decoder_layers,h.num_decoder_heads=b.num_decoder_heads,h.decoder_hidden_size=b.decoder_hidden_size,h.num_encoder_layers=b.num_encoder_layers,h.num_encoder_heads=b.num_encoder_heads,h.encoder_hidden_size=b.encoder_hidden_size):(h.num_layers=b.num_layers,h.num_heads=b.num_heads,h.hidden_size=b.hidden_size),h}const m={...p,...(0,n.pick)(d,["model_type","multi_query","is_encoder_decoder"])};for(const b in f)m[b]=d[f[b]];return m}function a(d,f){if(d.model_type==="lfm2"){const p=f?.prefix??"past_key_values",m=p==="present"?"present":"past",b={},{layer_types:E,num_attention_heads:h,num_key_value_heads:_,hidden_size:T,conv_L_cache:g}=d,M=T/h,x=f?.batch_size??1;for(let w=0;w<E.length;++w)if(E[w]==="full_attention")for(const $ of["key","value"])b[`${p}.${w}.${$}`]=[x,_,0,M];else if(E[w]==="conv")b[`${m}_conv.${w}`]=[x,T,g];else throw new Error(`Unsupported layer type: ${E[w]}`);return b}return l(d,f)}function l(d,{prefix:f="past_key_values",batch_size:p=1}={}){const m={},b=d.normalized_config;if(b.is_encoder_decoder&&"num_encoder_heads"in b&&"num_decoder_heads"in b){const E=b.encoder_dim_kv??b.encoder_hidden_size/b.num_encoder_heads,h=b.decoder_dim_kv??b.decoder_hidden_size/b.num_decoder_heads,_=[p,b.num_encoder_heads,0,E],T=[p,b.num_decoder_heads,0,h];for(let g=0;g<b.num_decoder_layers;++g)m[`${f}.${g}.encoder.key`]=_,m[`${f}.${g}.encoder.value`]=_,m[`${f}.${g}.decoder.key`]=T,m[`${f}.${g}.decoder.value`]=T}else{const E=b.num_heads,h=b.num_layers,_=b.dim_kv??b.hidden_size/(b.num_attention_heads??E);if(b.model_type==="falcon"){const T=[p*E,0,_];for(let g=0;g<h;++g)m[`${f}.${g}.key`]=T,m[`${f}.${g}.value`]=T}else if(b.multi_query){const T=[p*E,0,2*_];for(let g=0;g<h;++g)m[`${f}.${g}.key_value`]=T}else if(b.model_type==="bloom"){const T=[p*E,_,0],g=[p*E,0,_];for(let M=0;M<h;++M)m[`${f}.${M}.key`]=T,m[`${f}.${M}.value`]=g}else if(b.model_type==="openelm")for(let T=0;T<h;++T){const g=[p,E[T],0,_];m[`${f}.${T}.key`]=g,m[`${f}.${T}.value`]=g}else{const T=[p,E,0,_];for(let g=0;g<h;++g)m[`${f}.${g}.key`]=T,m[`${f}.${g}.value`]=T}}return m}class c{model_type=null;is_encoder_decoder=!1;max_position_embeddings;"transformers.js_config";constructor(f){Object.assign(this,f),this.normalized_config=i(this)}static async from_pretrained(f,{progress_callback:p=null,config:m=null,cache_dir:b=null,local_files_only:E=!1,revision:h="main"}={}){m&&!(m instanceof c)&&(m=new c(m));const _=m??await s(f,{progress_callback:p,config:m,cache_dir:b,local_files_only:E,revision:h});return new this(_)}}class u{static async from_pretrained(...f){return c.from_pretrained(...f)}}}),"./src/env.js":((e,t,r)=>{r.r(t),r.d(t,{apis:()=>h,env:()=>w});var n=r("?db59"),o=r("?383f"),s=r("?fa4b");const i="3.7.2",a=typeof window<"u"&&typeof window.document<"u",l=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes(self.constructor?.name),c=typeof self<"u"&&"caches"in self,u=typeof navigator<"u"&&"gpu"in navigator,d=typeof navigator<"u"&&"ml"in navigator,f=typeof process<"u",p=f&&process?.release?.name==="node",m=!$(n),b=!$(o),E=typeof globalThis.Deno<"u",h=Object.freeze({IS_BROWSER_ENV:a,IS_WEBWORKER_ENV:l,IS_WEB_CACHE_AVAILABLE:c,IS_WEBGPU_AVAILABLE:u,IS_WEBNN_AVAILABLE:d,IS_PROCESS_AVAILABLE:f,IS_NODE_ENV:p,IS_FS_AVAILABLE:m,IS_PATH_AVAILABLE:b}),_=m&&b;let T="./";if(_){const O=Object(import.meta).url;O?T=o.dirname(o.dirname(s.fileURLToPath(O))):typeof __dirname<"u"&&(T=o.dirname(__dirname))}const g=_?o.join(T,"/.cache/"):null,M="/models/",x=_?o.join(T,M):M,w={version:i,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(a||l),localModelPath:x,useFS:m,useBrowserCache:c&&!E,useFSCache:m,cacheDir:g,useCustomCache:!1,customCache:null};function $(O){return Object.keys(O).length===0}}),"./src/generation/configuration_utils.js":((e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>o});var n=r("./src/utils/core.js");class o{max_length=20;max_new_tokens=null;min_length=0;min_new_tokens=null;early_stopping=!1;max_time=null;do_sample=!1;num_beams=1;num_beam_groups=1;penalty_alpha=null;use_cache=!0;temperature=1;top_k=50;top_p=1;typical_p=1;epsilon_cutoff=0;eta_cutoff=0;diversity_penalty=0;repetition_penalty=1;encoder_repetition_penalty=1;length_penalty=1;no_repeat_ngram_size=0;bad_words_ids=null;force_words_ids=null;renormalize_logits=!1;constraints=null;forced_bos_token_id=null;forced_eos_token_id=null;remove_invalid_values=!1;exponential_decay_length_penalty=null;suppress_tokens=null;streamer=null;begin_suppress_tokens=null;forced_decoder_ids=null;guidance_scale=null;num_return_sequences=1;output_attentions=!1;output_hidden_states=!1;output_scores=!1;return_dict_in_generate=!1;pad_token_id=null;bos_token_id=null;eos_token_id=null;encoder_no_repeat_ngram_size=0;decoder_start_token_id=null;generation_kwargs={};constructor(i){Object.assign(this,(0,n.pick)(i,Object.getOwnPropertyNames(this)))}}}),"./src/generation/logits_process.js":((e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>h,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>c,LogitsProcessor:()=>s,LogitsProcessorList:()=>a,LogitsWarper:()=>i,MinLengthLogitsProcessor:()=>m,MinNewTokensLengthLogitsProcessor:()=>b,NoBadWordsLogitsProcessor:()=>E,NoRepeatNGramLogitsProcessor:()=>f,RepetitionPenaltyLogitsProcessor:()=>p,SuppressTokensAtBeginLogitsProcessor:()=>u,TemperatureLogitsWarper:()=>_,TopKLogitsWarper:()=>g,TopPLogitsWarper:()=>T,WhisperTimeStampLogitsProcessor:()=>d});var n=r("./src/utils/generic.js");r("./src/utils/tensor.js");var o=r("./src/utils/maths.js");class s extends n.Callable{_call(x,w){throw Error("`_call` should be implemented in a subclass")}}class i extends n.Callable{_call(x,w){throw Error("`_call` should be implemented in a subclass")}}class a extends n.Callable{constructor(){super(),this.processors=[]}push(x){this.processors.push(x)}extend(x){this.processors.push(...x)}_call(x,w){let $=w;for(const O of this.processors)$=O(x,$);return $}[Symbol.iterator](){return this.processors.values()}}class l extends s{constructor(x){super(),this.bos_token_id=x}_call(x,w){for(let $=0;$<x.length;++$)if(x[$].length===1){const O=w[$].data;O.fill(-1/0),O[this.bos_token_id]=0}return w}}class c extends s{constructor(x,w){super(),this.max_length=x,this.eos_token_id=Array.isArray(w)?w:[w]}_call(x,w){for(let $=0;$<x.length;++$)if(x[$].length===this.max_length-1){const O=w[$].data;O.fill(-1/0);for(const L of this.eos_token_id)O[L]=0}return w}}class u extends s{constructor(x,w){super(),this.begin_suppress_tokens=x,this.begin_index=w}_call(x,w){for(let $=0;$<x.length;++$)if(x[$].length===this.begin_index){const O=w[$].data;for(const L of this.begin_suppress_tokens)O[L]=-1/0}return w}}class d extends s{constructor(x,w){super(),this.eos_token_id=Array.isArray(x.eos_token_id)?x.eos_token_id[0]:x.eos_token_id,this.no_timestamps_token_id=x.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=w.length,w.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=x.max_initial_timestamp_index}_call(x,w){for(let $=0;$<x.length;++$){const O=w[$].data;if(O[this.no_timestamps_token_id]=-1/0,x[$].length===this.begin_index-1){O.fill(-1/0),O[this.timestamp_begin]=0;continue}const L=x[$].slice(this.begin_index),G=L.length>=1&&L[L.length-1]>=this.timestamp_begin,j=L.length<2||L[L.length-2]>=this.timestamp_begin;if(G&&(j?O.subarray(this.timestamp_begin).fill(-1/0):O.subarray(0,this.eos_token_id).fill(-1/0)),x[$].length===this.begin_index&&this.max_initial_timestamp_index!==null){const te=this.timestamp_begin+this.max_initial_timestamp_index;O.subarray(te+1).fill(-1/0)}const D=(0,o.log_softmax)(O),re=Math.log(D.subarray(this.timestamp_begin).map(Math.exp).reduce((te,ie)=>te+ie)),Z=(0,o.max)(D.subarray(0,this.timestamp_begin))[0];re>Z&&O.subarray(0,this.timestamp_begin).fill(-1/0)}return w}}class f extends s{constructor(x){super(),this.no_repeat_ngram_size=x}getNgrams(x){const w=x.length,$=[];for(let L=0;L<w+1-this.no_repeat_ngram_size;++L){const G=[];for(let j=0;j<this.no_repeat_ngram_size;++j)G.push(x[L+j]);$.push(G.map(Number))}const O=new Map;for(const L of $){const G=L.slice(0,L.length-1),j=JSON.stringify(G),D=O.get(j)??[];D.push(L[L.length-1]),O.set(j,D)}return O}getGeneratedNgrams(x,w){const $=w.slice(w.length+1-this.no_repeat_ngram_size,w.length);return x.get(JSON.stringify($.map(Number)))??[]}calcBannedNgramTokens(x){const w=[];if(x.length+1<this.no_repeat_ngram_size)return w;{const $=this.getNgrams(x);return this.getGeneratedNgrams($,x)}}_call(x,w){for(let $=0;$<x.length;++$){const O=w[$].data,L=this.calcBannedNgramTokens(x[$]);for(const G of L)O[G]=-1/0}return w}}class p extends s{constructor(x){super(),this.penalty=x}_call(x,w){for(let $=0;$<x.length;++$){const O=w[$].data;for(const L of new Set(x[$])){const G=Number(L);O[G]<0?O[G]*=this.penalty:O[G]/=this.penalty}}return w}}class m extends s{constructor(x,w){super(),this.min_length=x,this.eos_token_id=Array.isArray(w)?w:[w]}_call(x,w){for(let $=0;$<x.length;++$)if(x[$].length<this.min_length){const O=w[$].data;for(const L of this.eos_token_id)O[L]=-1/0}return w}}class b extends s{constructor(x,w,$){super(),this.prompt_length_to_skip=x,this.min_new_tokens=w,this.eos_token_id=Array.isArray($)?$:[$]}_call(x,w){for(let $=0;$<x.length;++$)if(x[$].length-this.prompt_length_to_skip<this.min_new_tokens){const L=w[$].data;for(const G of this.eos_token_id)L[G]=-1/0}return w}}class E extends s{constructor(x,w){super(),this.bad_words_ids=x,this.eos_token_id=Array.isArray(w)?w:[w]}_call(x,w){for(let $=0;$<x.length;++$){const O=w[$].data,L=x[$];for(const G of this.bad_words_ids){if(L.length<G.length-1)continue;let j=!0;for(let D=1;D<=G.length-1;++D)if(G.at(-D-1)!=L.at(-D)){j=!1;break}j&&(O[G.at(-1)]=-1/0)}}return w}}class h extends s{constructor(x){if(super(),x<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${x}.`);this.guidance_scale=x}_call(x,w){if(w.dims[0]!==2*x.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${w.dims[0]} for the logits and ${x.length} for the input ids.`);const $=x.length,O=w.slice([0,$],null),L=w.slice([$,w.dims[0]],null);for(let G=0;G<L.data.length;++G)L.data[G]+=(O.data[G]-L.data[G])*this.guidance_scale;return L}}class _ extends i{constructor(x){super(),this.temperature=x}_call(x,w){const $=w.data;for(let O=0;O<$.length;++O)$[O]/=this.temperature;return w}}class T extends i{constructor(x,{filter_value:w=-1/0,min_tokens_to_keep:$=1}={}){if(super(),x<0||x>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${x}`);if(!Number.isInteger($)||$<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${$}`);this.top_p=x,this.filter_value=w,this.min_tokens_to_keep=$}}class g extends i{constructor(x,{filter_value:w=-1/0,min_tokens_to_keep:$=1}={}){if(super(),!Number.isInteger(x)||x<0)throw new Error(`\`top_k\` must be a positive integer, but is ${x}`);this.top_k=Math.max(x,$),this.filter_value=w}}}),"./src/generation/logits_sampler.js":((e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>i});var n=r("./src/utils/generic.js"),o=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class i extends n.Callable{constructor(d){super(),this.generation_config=d}async _call(d){return this.sample(d)}async sample(d){throw Error("sample should be implemented in subclasses.")}getLogits(d,f){let p=d.dims.at(-1),m=d.data;if(f===-1)m=m.slice(-p);else{let b=f*p;m=m.slice(b,b+p)}return m}randomSelect(d){let f=0;for(let m=0;m<d.length;++m)f+=d[m];let p=Math.random()*f;for(let m=0;m<d.length;++m)if(p-=d[m],p<=0)return m;return 0}static getSampler(d){if(d.do_sample)return new l(d);if(d.num_beams>1)return new c(d);if(d.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${d.num_return_sequences}.`);return new a(d)}}class a extends i{async sample(d){const f=(0,s.max)(d.data)[1];return[[BigInt(f),0]]}}class l extends i{async sample(d){let f=d.dims.at(-1);this.generation_config.top_k>0&&(f=Math.min(this.generation_config.top_k,f));const[p,m]=await(0,o.topk)(d,f),b=(0,s.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},()=>{const E=this.randomSelect(b);return[m.data[E],Math.log(b[E])]})}}class c extends i{async sample(d){let f=d.dims.at(-1);this.generation_config.top_k>0&&(f=Math.min(this.generation_config.top_k,f));const[p,m]=await(0,o.topk)(d,f),b=(0,s.softmax)(p.data);return Array.from({length:this.generation_config.num_beams},(E,h)=>[m.data[h],Math.log(b[h])])}}}),"./src/generation/stopping_criteria.js":((e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>a,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>i,StoppingCriteria:()=>o,StoppingCriteriaList:()=>s});var n=r("./src/utils/generic.js");class o extends n.Callable{_call(u,d){throw Error("StoppingCriteria needs to be subclassed")}}class s extends n.Callable{constructor(){super(),this.criteria=[]}push(u){this.criteria.push(u)}extend(u){u instanceof s?u=u.criteria:u instanceof o&&(u=[u]),this.criteria.push(...u)}_call(u,d){const f=new Array(u.length).fill(!1);for(const p of this.criteria){const m=p(u,d);for(let b=0;b<f.length;++b)f[b]||=m[b]}return f}[Symbol.iterator](){return this.criteria.values()}}class i extends o{constructor(u,d=null){super(),this.max_length=u,this.max_position_embeddings=d}_call(u){return u.map(d=>d.length>=this.max_length)}}class a extends o{constructor(u){super(),Array.isArray(u)||(u=[u]),this.eos_token_id=u}_call(u,d){return u.map(f=>{const p=f.at(-1);return this.eos_token_id.some(m=>p==m)})}}class l extends o{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(u,d){return new Array(u.length).fill(this.interrupted)}}}),"./src/generation/streamers.js":((e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>i,TextStreamer:()=>l,WhisperTextStreamer:()=>c});var n=r("./src/utils/core.js"),o=r("./src/tokenizers.js"),s=r("./src/env.js");class i{put(d){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const a=s.apis.IS_PROCESS_AVAILABLE?u=>process.stdout.write(u):u=>console.log(u);class l extends i{constructor(d,{skip_prompt:f=!1,callback_function:p=null,token_callback_function:m=null,skip_special_tokens:b=!0,decode_kwargs:E={},...h}={}){super(),this.tokenizer=d,this.skip_prompt=f,this.callback_function=p??a,this.token_callback_function=m,this.decode_kwargs={skip_special_tokens:b,...E,...h},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(d){if(d.length>1)throw Error("TextStreamer only supports batch size of 1");const f=this.next_tokens_are_prompt;if(f&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const p=d[0];this.token_callback_function?.(p),this.token_cache=(0,n.mergeArrays)(this.token_cache,p);const m=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let b;f||m.endsWith(`
`)?(b=m.slice(this.print_len),this.token_cache=[],this.print_len=0):m.length>0&&(0,o.is_chinese_char)(m.charCodeAt(m.length-1))?(b=m.slice(this.print_len),this.print_len+=b.length):(b=m.slice(this.print_len,m.lastIndexOf(" ")+1),this.print_len+=b.length),this.on_finalized_text(b,!1)}end(){let d;this.token_cache.length>0?(d=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):d="",this.next_tokens_are_prompt=!0,this.on_finalized_text(d,!0)}on_finalized_text(d,f){d.length>0&&this.callback_function?.(d),f&&this.callback_function===a&&s.apis.IS_PROCESS_AVAILABLE&&this.callback_function?.(`
`)}}class c extends l{constructor(d,{skip_prompt:f=!1,callback_function:p=null,token_callback_function:m=null,on_chunk_start:b=null,on_chunk_end:E=null,on_finalize:h=null,time_precision:_=.02,skip_special_tokens:T=!0,decode_kwargs:g={}}={}){super(d,{skip_prompt:f,skip_special_tokens:T,callback_function:p,token_callback_function:m,decode_kwargs:g}),this.timestamp_begin=d.timestamp_begin,this.on_chunk_start=b,this.on_chunk_end=E,this.on_finalize=h,this.time_precision=_,this.waiting_for_timestamp=!1}put(d){if(d.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const f=d[0];if(f.length===1){const p=Number(f[0])-this.timestamp_begin;if(p>=0){const m=p*this.time_precision;this.waiting_for_timestamp?this.on_chunk_end?.(m):this.on_chunk_start?.(m),this.waiting_for_timestamp=!this.waiting_for_timestamp,this.token_callback_function?.(f);return}}return super.put(d)}end(){super.end(),this.on_finalize?.()}}}),"./src/models.js":((e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>Qs,ASTModel:()=>al,ASTPreTrainedModel:()=>fa,AlbertForMaskedLM:()=>Bt,AlbertForQuestionAnswering:()=>Je,AlbertForSequenceClassification:()=>ot,AlbertModel:()=>nt,AlbertPreTrainedModel:()=>tt,ArceeForCausalLM:()=>dn,ArceeModel:()=>rr,ArceePreTrainedModel:()=>jt,AutoModel:()=>NA,AutoModelForAudioClassification:()=>s3,AutoModelForAudioFrameClassification:()=>a3,AutoModelForAudioTextToText:()=>g3,AutoModelForCTC:()=>o3,AutoModelForCausalLM:()=>KA,AutoModelForDepthEstimation:()=>u3,AutoModelForDocumentQuestionAnswering:()=>l3,AutoModelForImageClassification:()=>YA,AutoModelForImageFeatureExtraction:()=>m3,AutoModelForImageMatting:()=>c3,AutoModelForImageSegmentation:()=>JA,AutoModelForImageTextToText:()=>h3,AutoModelForImageToImage:()=>d3,AutoModelForMaskGeneration:()=>n3,AutoModelForMaskedLM:()=>qA,AutoModelForNormalEstimation:()=>f3,AutoModelForObjectDetection:()=>t3,AutoModelForPoseEstimation:()=>p3,AutoModelForQuestionAnswering:()=>XA,AutoModelForSemanticSegmentation:()=>ZA,AutoModelForSeq2SeqLM:()=>WA,AutoModelForSequenceClassification:()=>jA,AutoModelForSpeechSeq2Seq:()=>UA,AutoModelForTextToSpectrogram:()=>GA,AutoModelForTextToWaveform:()=>HA,AutoModelForTokenClassification:()=>VA,AutoModelForUniversalSegmentation:()=>e3,AutoModelForVision2Seq:()=>QA,AutoModelForXVector:()=>i3,AutoModelForZeroShotObjectDetection:()=>r3,BartForConditionalGeneration:()=>Yr,BartForSequenceClassification:()=>Sn,BartModel:()=>Ir,BartPretrainedModel:()=>oo,BaseModelOutput:()=>pe,BeitForImageClassification:()=>a0,BeitModel:()=>i0,BeitPreTrainedModel:()=>ip,BertForMaskedLM:()=>N,BertForQuestionAnswering:()=>le,BertForSequenceClassification:()=>z,BertForTokenClassification:()=>ee,BertModel:()=>oe,BertPreTrainedModel:()=>ue,BlenderbotForConditionalGeneration:()=>Hr,BlenderbotModel:()=>Jr,BlenderbotPreTrainedModel:()=>kr,BlenderbotSmallForConditionalGeneration:()=>ua,BlenderbotSmallModel:()=>Ks,BlenderbotSmallPreTrainedModel:()=>An,BloomForCausalLM:()=>$b,BloomModel:()=>Pb,BloomPreTrainedModel:()=>qf,CLIPModel:()=>gl,CLIPPreTrainedModel:()=>ss,CLIPSegForImageSegmentation:()=>wl,CLIPSegModel:()=>yl,CLIPSegPreTrainedModel:()=>Ii,CLIPTextModel:()=>Od,CLIPTextModelWithProjection:()=>_l,CLIPVisionModel:()=>Ld,CLIPVisionModelWithProjection:()=>Fd,CamembertForMaskedLM:()=>et,CamembertForQuestionAnswering:()=>tn,CamembertForSequenceClassification:()=>Dt,CamembertForTokenClassification:()=>Rt,CamembertModel:()=>pt,CamembertPreTrainedModel:()=>st,CausalLMOutput:()=>Li,CausalLMOutputWithPast:()=>b3,ChineseCLIPModel:()=>vl,ChineseCLIPPreTrainedModel:()=>Dd,ClapAudioModelWithProjection:()=>py,ClapModel:()=>uy,ClapPreTrainedModel:()=>Ud,ClapTextModelWithProjection:()=>fy,CodeGenForCausalLM:()=>Ve,CodeGenModel:()=>Fe,CodeGenPreTrainedModel:()=>we,CohereForCausalLM:()=>cb,CohereModel:()=>lb,CoherePreTrainedModel:()=>zf,ConvBertForMaskedLM:()=>mr,ConvBertForQuestionAnswering:()=>S,ConvBertForSequenceClassification:()=>Ot,ConvBertForTokenClassification:()=>ts,ConvBertModel:()=>es,ConvBertPreTrainedModel:()=>_t,ConvNextForImageClassification:()=>tv,ConvNextModel:()=>ev,ConvNextPreTrainedModel:()=>wp,ConvNextV2ForImageClassification:()=>nv,ConvNextV2Model:()=>rv,ConvNextV2PreTrainedModel:()=>Mp,DFineForObjectDetection:()=>y0,DFineModel:()=>v0,DFinePreTrainedModel:()=>fp,DINOv3ConvNextModel:()=>uv,DINOv3ConvNextPreTrainedModel:()=>dv,DINOv3ViTModel:()=>cv,DINOv3ViTPreTrainedModel:()=>lv,DPTForDepthEstimation:()=>D0,DPTModel:()=>F0,DPTPreTrainedModel:()=>bp,DacDecoderModel:()=>tw,DacDecoderOutput:()=>Jy,DacEncoderModel:()=>ew,DacEncoderOutput:()=>Yy,DacModel:()=>Zy,DacPreTrainedModel:()=>Yd,DebertaForMaskedLM:()=>Xn,DebertaForQuestionAnswering:()=>po,DebertaForSequenceClassification:()=>Tr,DebertaForTokenClassification:()=>rn,DebertaModel:()=>qr,DebertaPreTrainedModel:()=>tr,DebertaV2ForMaskedLM:()=>So,DebertaV2ForQuestionAnswering:()=>Io,DebertaV2ForSequenceClassification:()=>Pn,DebertaV2ForTokenClassification:()=>rs,DebertaV2Model:()=>$o,DebertaV2PreTrainedModel:()=>Xr,DecisionTransformerModel:()=>Ly,DecisionTransformerPreTrainedModel:()=>Oy,DeiTForImageClassification:()=>C0,DeiTModel:()=>T0,DeiTPreTrainedModel:()=>mp,DepthAnythingForDepthEstimation:()=>R0,DepthAnythingPreTrainedModel:()=>B0,DepthProForDepthEstimation:()=>W0,DepthProPreTrainedModel:()=>V0,DetrForObjectDetection:()=>c0,DetrForSegmentation:()=>ap,DetrModel:()=>l0,DetrObjectDetectionOutput:()=>lp,DetrPreTrainedModel:()=>Rd,DetrSegmentationOutput:()=>d0,Dinov2ForImageClassification:()=>sv,Dinov2Model:()=>ov,Dinov2PreTrainedModel:()=>xp,Dinov2WithRegistersForImageClassification:()=>av,Dinov2WithRegistersModel:()=>iv,Dinov2WithRegistersPreTrainedModel:()=>Tp,DistilBertForMaskedLM:()=>ns,DistilBertForQuestionAnswering:()=>mo,DistilBertForSequenceClassification:()=>Qr,DistilBertForTokenClassification:()=>an,DistilBertModel:()=>Qn,DistilBertPreTrainedModel:()=>Nr,DonutSwinModel:()=>Z0,DonutSwinPreTrainedModel:()=>J0,EfficientNetForImageClassification:()=>yy,EfficientNetModel:()=>vy,EfficientNetPreTrainedModel:()=>Fp,ElectraForMaskedLM:()=>ae,ElectraForQuestionAnswering:()=>Ne,ElectraForSequenceClassification:()=>_e,ElectraForTokenClassification:()=>Se,ElectraModel:()=>K,ElectraPreTrainedModel:()=>se,Ernie4_5_ForCausalLM:()=>iy,Ernie4_5_Model:()=>sy,Ernie4_5_PretrainedModel:()=>Sp,EsmForMaskedLM:()=>$n,EsmForSequenceClassification:()=>We,EsmForTokenClassification:()=>Xe,EsmModel:()=>Ms,EsmPreTrainedModel:()=>no,ExaoneForCausalLM:()=>Z_,ExaoneModel:()=>J_,ExaonePreTrainedModel:()=>Lf,FalconForCausalLM:()=>dy,FalconModel:()=>cy,FalconPreTrainedModel:()=>Ap,FastViTForImageClassification:()=>Xb,FastViTModel:()=>qb,FastViTPreTrainedModel:()=>tp,Florence2ForConditionalGeneration:()=>$d,Florence2PreTrainedModel:()=>Pd,GLPNForDepthEstimation:()=>Y0,GLPNModel:()=>Q0,GLPNPreTrainedModel:()=>yp,GPT2LMHeadModel:()=>Ml,GPT2Model:()=>ya,GPT2PreTrainedModel:()=>va,GPTBigCodeForCausalLM:()=>X,GPTBigCodeModel:()=>V,GPTBigCodePreTrainedModel:()=>F,GPTJForCausalLM:()=>P,GPTJModel:()=>v,GPTJPreTrainedModel:()=>Ta,GPTNeoForCausalLM:()=>Tl,GPTNeoModel:()=>Ma,GPTNeoPreTrainedModel:()=>Oi,GPTNeoXForCausalLM:()=>kl,GPTNeoXModel:()=>Cl,GPTNeoXPreTrainedModel:()=>xa,Gemma2ForCausalLM:()=>pb,Gemma2Model:()=>fb,Gemma2PreTrainedModel:()=>jf,Gemma3ForCausalLM:()=>hb,Gemma3Model:()=>mb,Gemma3PreTrainedModel:()=>Vf,Gemma3nForConditionalGeneration:()=>ma,Gemma3nPreTrainedModel:()=>Ys,GemmaForCausalLM:()=>ub,GemmaModel:()=>db,GemmaPreTrainedModel:()=>Nf,GlmForCausalLM:()=>Y_,GlmModel:()=>Q_,GlmPreTrainedModel:()=>Of,GraniteForCausalLM:()=>ab,GraniteModel:()=>ib,GranitePreTrainedModel:()=>Rf,GroundingDinoForObjectDetection:()=>pv,GroundingDinoPreTrainedModel:()=>fv,GroupViTModel:()=>Kb,GroupViTPreTrainedModel:()=>Hb,HeliumForCausalLM:()=>X_,HeliumModel:()=>q_,HeliumPreTrainedModel:()=>Af,HieraForImageClassification:()=>E0,HieraModel:()=>k0,HieraPreTrainedModel:()=>hp,HubertForCTC:()=>Wv,HubertForSequenceClassification:()=>Uv,HubertModel:()=>Vv,HubertPreTrainedModel:()=>EA,IJepaForImageClassification:()=>Bb,IJepaModel:()=>Db,IJepaPreTrainedModel:()=>Jf,Idefics3ForConditionalGeneration:()=>ha,Idefics3PreTrainedModel:()=>Ad,ImageMattingOutput:()=>Aw,JAISLMHeadModel:()=>Ai,JAISModel:()=>xl,JAISPreTrainedModel:()=>wa,JinaCLIPModel:()=>$i,JinaCLIPPreTrainedModel:()=>Pi,JinaCLIPTextModel:()=>so,JinaCLIPVisionModel:()=>Si,Lfm2ForCausalLM:()=>G_,Lfm2Model:()=>Bd,Lfm2PreTrainedModel:()=>is,LiteWhisperForConditionalGeneration:()=>Cd,LlamaForCausalLM:()=>kt,LlamaModel:()=>dt,LlamaPreTrainedModel:()=>rt,LlavaForConditionalGeneration:()=>pa,LlavaOnevisionForConditionalGeneration:()=>kd,LlavaPreTrainedModel:()=>hl,LlavaQwen2ForCausalLM:()=>Ci,LongT5ForConditionalGeneration:()=>hr,LongT5Model:()=>Br,LongT5PreTrainedModel:()=>br,M2M100ForConditionalGeneration:()=>xv,M2M100Model:()=>Mv,M2M100PreTrainedModel:()=>Ep,MBartForCausalLM:()=>cn,MBartForConditionalGeneration:()=>nn,MBartForSequenceClassification:()=>go,MBartModel:()=>Oo,MBartPreTrainedModel:()=>In,MPNetForMaskedLM:()=>Ti,MPNetForQuestionAnswering:()=>A,MPNetForSequenceClassification:()=>da,MPNetForTokenClassification:()=>Ce,MPNetModel:()=>xi,MPNetPreTrainedModel:()=>Ao,MT5ForConditionalGeneration:()=>wn,MT5Model:()=>ho,MT5PreTrainedModel:()=>Nn,MarianMTModel:()=>wv,MarianModel:()=>yv,MarianPreTrainedModel:()=>kp,MaskFormerForInstanceSegmentation:()=>X0,MaskFormerModel:()=>q0,MaskFormerPreTrainedModel:()=>vp,MaskedLMOutput:()=>mn,Metric3DForDepthEstimation:()=>G0,Metric3DPreTrainedModel:()=>U0,Metric3Dv2ForDepthEstimation:()=>K0,Metric3Dv2PreTrainedModel:()=>H0,MgpstrForSceneTextRecognition:()=>zy,MgpstrModelOutput:()=>By,MgpstrPreTrainedModel:()=>Ry,MimiDecoderModel:()=>Qy,MimiDecoderOutput:()=>Ky,MimiEncoderModel:()=>Xy,MimiEncoderOutput:()=>Hy,MimiModel:()=>qy,MimiPreTrainedModel:()=>Qd,MistralForCausalLM:()=>oy,MistralModel:()=>ny,MistralPreTrainedModel:()=>$p,MobileBertForMaskedLM:()=>xs,MobileBertForQuestionAnswering:()=>Ts,MobileBertForSequenceClassification:()=>os,MobileBertModel:()=>Cr,MobileBertPreTrainedModel:()=>it,MobileLLMForCausalLM:()=>tb,MobileLLMModel:()=>eb,MobileLLMPreTrainedModel:()=>Ff,MobileNetV1ForImageClassification:()=>My,MobileNetV1ForSemanticSegmentation:()=>xy,MobileNetV1Model:()=>wy,MobileNetV1PreTrainedModel:()=>Hd,MobileNetV2ForImageClassification:()=>Cy,MobileNetV2ForSemanticSegmentation:()=>ky,MobileNetV2Model:()=>Ty,MobileNetV2PreTrainedModel:()=>Kd,MobileNetV3ForImageClassification:()=>Py,MobileNetV3ForSemanticSegmentation:()=>$y,MobileNetV3Model:()=>Ey,MobileNetV3PreTrainedModel:()=>qd,MobileNetV4ForImageClassification:()=>Iy,MobileNetV4ForSemanticSegmentation:()=>Ay,MobileNetV4Model:()=>Sy,MobileNetV4PreTrainedModel:()=>Xd,MobileViTForImageClassification:()=>Zb,MobileViTModel:()=>Jb,MobileViTPreTrainedModel:()=>rp,MobileViTV2ForImageClassification:()=>t0,MobileViTV2Model:()=>e0,MobileViTV2PreTrainedModel:()=>np,ModelOutput:()=>q,ModernBertDecoderForCausalLM:()=>_r,ModernBertDecoderModel:()=>Gr,ModernBertDecoderPreTrainedModel:()=>gt,ModernBertForMaskedLM:()=>Ke,ModernBertForSequenceClassification:()=>vt,ModernBertForTokenClassification:()=>Tt,ModernBertModel:()=>Ge,ModernBertPreTrainedModel:()=>ze,Moondream1ForConditionalGeneration:()=>Ed,MoonshineForConditionalGeneration:()=>pl,MoonshineModel:()=>fl,MoonshinePreTrainedModel:()=>ul,MptForCausalLM:()=>Ib,MptModel:()=>Sb,MptPreTrainedModel:()=>Xf,MultiModalityCausalLM:()=>Dy,MultiModalityPreTrainedModel:()=>Fy,MusicgenForCausalLM:()=>IA,MusicgenForConditionalGeneration:()=>Bp,MusicgenModel:()=>SA,MusicgenPreTrainedModel:()=>Dp,NeoBertForMaskedLM:()=>ce,NeoBertForQuestionAnswering:()=>Re,NeoBertForSequenceClassification:()=>he,NeoBertForTokenClassification:()=>$e,NeoBertModel:()=>fe,NeoBertPreTrainedModel:()=>ke,NomicBertModel:()=>zn,NomicBertPreTrainedModel:()=>xr,OPTForCausalLM:()=>Ob,OPTModel:()=>Ab,OPTPreTrainedModel:()=>Qf,Olmo2ForCausalLM:()=>sb,Olmo2Model:()=>ob,Olmo2PreTrainedModel:()=>Bf,OlmoForCausalLM:()=>nb,OlmoModel:()=>rb,OlmoPreTrainedModel:()=>Df,OpenELMForCausalLM:()=>_b,OpenELMModel:()=>gb,OpenELMPreTrainedModel:()=>Wf,OwlViTForObjectDetection:()=>n0,OwlViTModel:()=>r0,OwlViTPreTrainedModel:()=>op,Owlv2ForObjectDetection:()=>s0,Owlv2Model:()=>o0,Owlv2PreTrainedModel:()=>sp,PaliGemmaForConditionalGeneration:()=>Id,PaliGemmaPreTrainedModel:()=>Sd,PatchTSMixerForPrediction:()=>Wy,PatchTSMixerModel:()=>Vy,PatchTSMixerPreTrainedModel:()=>zp,PatchTSTForPrediction:()=>jy,PatchTSTModel:()=>Ny,PatchTSTPreTrainedModel:()=>Rp,Phi3ForCausalLM:()=>Eb,Phi3Model:()=>kb,Phi3PreTrainedModel:()=>Kf,Phi3VForCausalLM:()=>_a,Phi3VPreTrainedModel:()=>ga,PhiForCausalLM:()=>Cb,PhiModel:()=>Tb,PhiPreTrainedModel:()=>Hf,PreTrainedModel:()=>I,PretrainedMixin:()=>nr,PvtForImageClassification:()=>jb,PvtModel:()=>Nb,PvtPreTrainedModel:()=>Zf,PyAnnoteForAudioFrameClassification:()=>$v,PyAnnoteModel:()=>Pv,PyAnnotePreTrainedModel:()=>Pp,QuestionAnsweringModelOutput:()=>xn,Qwen2ForCausalLM:()=>vb,Qwen2Model:()=>bb,Qwen2PreTrainedModel:()=>Uf,Qwen2VLForConditionalGeneration:()=>xb,Qwen2VLPreTrainedModel:()=>Mb,Qwen3ForCausalLM:()=>wb,Qwen3Model:()=>yb,Qwen3PreTrainedModel:()=>Gf,RFDetrForObjectDetection:()=>_0,RFDetrModel:()=>g0,RFDetrObjectDetectionOutput:()=>b0,RFDetrPreTrainedModel:()=>up,RTDetrForObjectDetection:()=>f0,RTDetrModel:()=>u0,RTDetrObjectDetectionOutput:()=>El,RTDetrPreTrainedModel:()=>cp,RTDetrV2ForObjectDetection:()=>m0,RTDetrV2Model:()=>p0,RTDetrV2ObjectDetectionOutput:()=>h0,RTDetrV2PreTrainedModel:()=>dp,ResNetForImageClassification:()=>$0,ResNetModel:()=>P0,ResNetPreTrainedModel:()=>gp,RoFormerForMaskedLM:()=>Gs,RoFormerForQuestionAnswering:()=>ws,RoFormerForSequenceClassification:()=>Hs,RoFormerForTokenClassification:()=>ys,RoFormerModel:()=>yn,RoFormerPreTrainedModel:()=>ir,RobertaForMaskedLM:()=>md,RobertaForQuestionAnswering:()=>_d,RobertaForSequenceClassification:()=>hd,RobertaForTokenClassification:()=>gd,RobertaModel:()=>pd,RobertaPreTrainedModel:()=>Cs,SamImageSegmentationOutput:()=>vv,SamModel:()=>bv,SamPreTrainedModel:()=>_v,SapiensForDepthEstimation:()=>N0,SapiensForNormalEstimation:()=>j0,SapiensForSemanticSegmentation:()=>z0,SapiensPreTrainedModel:()=>Nd,SegformerForImageClassification:()=>hy,SegformerForSemanticSegmentation:()=>gy,SegformerModel:()=>$A,SegformerPreTrainedModel:()=>Gd,Seq2SeqLMOutput:()=>_3,SequenceClassifierOutput:()=>Et,SiglipModel:()=>bl,SiglipPreTrainedModel:()=>ba,SiglipTextModel:()=>Ei,SiglipVisionModel:()=>ht,SmolLM3ForCausalLM:()=>K_,SmolLM3Model:()=>H_,SmolLM3PreTrainedModel:()=>If,SmolVLMForConditionalGeneration:()=>ki,SnacDecoderModel:()=>ow,SnacEncoderModel:()=>nw,SnacModel:()=>rw,SnacPreTrainedModel:()=>Jd,SpeechT5ForSpeechToText:()=>Jv,SpeechT5ForTextToSpeech:()=>Zv,SpeechT5HifiGan:()=>ey,SpeechT5Model:()=>PA,SpeechT5PreTrainedModel:()=>Wd,SqueezeBertForMaskedLM:()=>ge,SqueezeBertForQuestionAnswering:()=>Be,SqueezeBertForSequenceClassification:()=>Ie,SqueezeBertModel:()=>me,SqueezeBertPreTrainedModel:()=>Q,StableLmForCausalLM:()=>by,StableLmModel:()=>_y,StableLmPreTrainedModel:()=>Lp,Starcoder2ForCausalLM:()=>ly,Starcoder2Model:()=>ay,Starcoder2PreTrainedModel:()=>Ip,StyleTextToSpeech2Model:()=>Yv,StyleTextToSpeech2PreTrainedModel:()=>Qv,Swin2SRForImageSuperResolution:()=>L0,Swin2SRModel:()=>O0,Swin2SRPreTrainedModel:()=>_p,SwinForImageClassification:()=>I0,SwinForSemanticSegmentation:()=>A0,SwinModel:()=>S0,SwinPreTrainedModel:()=>zd,T5ForConditionalGeneration:()=>ln,T5Model:()=>Dr,T5PreTrainedModel:()=>Ct,TableTransformerForObjectDetection:()=>M0,TableTransformerModel:()=>w0,TableTransformerObjectDetectionOutput:()=>x0,TableTransformerPreTrainedModel:()=>pp,TokenClassifierOutput:()=>un,TrOCRForCausalLM:()=>ry,TrOCRPreTrainedModel:()=>ty,UltravoxModel:()=>Np,UltravoxPreTrainedModel:()=>Uy,UniSpeechForCTC:()=>Ov,UniSpeechForSequenceClassification:()=>Lv,UniSpeechModel:()=>Av,UniSpeechPreTrainedModel:()=>jd,UniSpeechSatForAudioFrameClassification:()=>Rv,UniSpeechSatForCTC:()=>Dv,UniSpeechSatForSequenceClassification:()=>Bv,UniSpeechSatModel:()=>Fv,UniSpeechSatPreTrainedModel:()=>Pl,ViTForImageClassification:()=>Fb,ViTMAEModel:()=>Wb,ViTMAEPreTrainedModel:()=>Vb,ViTMSNForImageClassification:()=>Gb,ViTMSNModel:()=>Ub,ViTMSNPreTrainedModel:()=>ep,ViTModel:()=>Lb,ViTPreTrainedModel:()=>Yf,VisionEncoderDecoderModel:()=>ml,VitMatteForImageMatting:()=>Yb,VitMattePreTrainedModel:()=>Qb,VitPoseForPoseEstimation:()=>zb,VitPosePreTrainedModel:()=>Rb,VitsModel:()=>Op,VitsModelOutput:()=>Ow,VitsPreTrainedModel:()=>my,VoxtralForConditionalGeneration:()=>Gy,Wav2Vec2BertForCTC:()=>Nv,Wav2Vec2BertForSequenceClassification:()=>jv,Wav2Vec2BertModel:()=>zv,Wav2Vec2BertPreTrainedModel:()=>Vd,Wav2Vec2ForAudioFrameClassification:()=>Ev,Wav2Vec2ForCTC:()=>Cv,Wav2Vec2ForSequenceClassification:()=>kv,Wav2Vec2Model:()=>Tv,Wav2Vec2PreTrainedModel:()=>Js,WavLMForAudioFrameClassification:()=>Xv,WavLMForCTC:()=>Hv,WavLMForSequenceClassification:()=>Kv,WavLMForXVector:()=>qv,WavLMModel:()=>Gv,WavLMPreTrainedModel:()=>Ca,WeSpeakerResNetModel:()=>Iv,WeSpeakerResNetPreTrainedModel:()=>Sv,WhisperForConditionalGeneration:()=>dl,WhisperModel:()=>cl,WhisperPreTrainedModel:()=>ll,XLMForQuestionAnswering:()=>Md,XLMForSequenceClassification:()=>yd,XLMForTokenClassification:()=>wd,XLMModel:()=>bd,XLMPreTrainedModel:()=>qs,XLMRobertaForMaskedLM:()=>sl,XLMRobertaForQuestionAnswering:()=>Td,XLMRobertaForSequenceClassification:()=>il,XLMRobertaForTokenClassification:()=>xd,XLMRobertaModel:()=>ol,XLMRobertaPreTrainedModel:()=>Xs,XLMWithLMHeadModel:()=>vd,XVectorOutput:()=>Iw,YolosForObjectDetection:()=>hv,YolosModel:()=>mv,YolosObjectDetectionOutput:()=>gv,YolosPreTrainedModel:()=>Cp});var n=r("./src/configs.js"),o=r("./src/backends/onnx.js"),s=r("./src/utils/dtypes.js"),i=r("./src/utils/generic.js"),a=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),c=r("./src/utils/constants.js"),u=r("./src/generation/logits_process.js"),d=r("./src/generation/configuration_utils.js"),f=r("./src/utils/tensor.js"),p=r("./src/utils/image.js"),m=r("./src/utils/maths.js"),b=r("./src/generation/stopping_criteria.js"),E=r("./src/generation/logits_sampler.js"),h=r("./src/env.js"),_=r("./src/models/whisper/generation_whisper.js"),T=r("./src/models/whisper/common_whisper.js");const g={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12},M=new Map,x=new Map,w=new Map;async function $(C,k,H){let ye=H.config?.["transformers.js_config"]??{},Ee=H.device??ye.device;Ee&&typeof Ee!="string"&&(Ee.hasOwnProperty(k)?Ee=Ee[k]:(console.warn(`device not specified for "${k}". Using the default device.`),Ee=null));const Ae=Ee??(h.apis.IS_NODE_ENV?"cpu":"wasm"),je=(0,o.deviceToExecutionProviders)(Ae),Ue=ye.device_config??{};Ue.hasOwnProperty(Ae)&&(ye={...ye,...Ue[Ae]});let Ye=H.dtype??ye.dtype;if(typeof Ye!="string"&&(Ye&&Ye.hasOwnProperty(k)?Ye=Ye[k]:(Ye=s.DEFAULT_DEVICE_DTYPE_MAPPING[Ae]??s.DATA_TYPES.fp32,console.warn(`dtype not specified for "${k}". Using the default dtype (${Ye}) for this device (${Ae}).`))),Ye===s.DATA_TYPES.auto){let zt=ye.dtype;typeof zt!="string"&&(zt=zt?.[k]),zt&&zt!==s.DATA_TYPES.auto&&s.DATA_TYPES.hasOwnProperty(zt)?Ye=zt:Ye=s.DEFAULT_DEVICE_DTYPE_MAPPING[Ae]??s.DATA_TYPES.fp32}const lt=Ye;if(s.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(lt)){if(lt===s.DATA_TYPES.fp16&&Ae==="webgpu"&&!await(0,s.isWebGpuFp16Supported)())throw new Error(`The device (${Ae}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${lt}. Should be one of: ${Object.keys(s.DATA_TYPES).join(", ")}`);const Pt=ye.kv_cache_dtype,It=Pt?typeof Pt=="string"?Pt:Pt[lt]??"float32":void 0;if(It&&!["float32","float16"].includes(It))throw new Error(`Invalid kv_cache_dtype: ${It}. Should be one of: float32, float16`);const Lt={dtype:lt,kv_cache_dtype:It,device:Ae},yt=s.DEFAULT_DTYPE_SUFFIX_MAPPING[lt],or=`${k}${yt}.onnx`,Mt=`${H.subfolder??""}/${or}`,bt={...H.session_options};bt.executionProviders??=je;const Ht=ye.free_dimension_overrides;Ht?bt.freeDimensionOverrides??=Ht:Ae.startsWith("webnn")&&!bt.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${Ae}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const vr=h.apis.IS_NODE_ENV&&h.env.useFSCache,jr=(0,l.getModelFile)(C,Mt,!0,H,vr),on=H.use_external_data_format??ye.use_external_data_format;let sn=[];if(on){let zt;typeof on=="object"?on.hasOwnProperty(or)?zt=on[or]:on.hasOwnProperty(k)?zt=on[k]:zt=!1:zt=on;const Vr=+zt;if(Vr>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${Vr}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let hn=0;hn<Vr;++hn){const Fi=`${or}_data${hn===0?"":"_"+hn}`,jn=`${H.subfolder??""}/${Fi}`;sn.push(new Promise(async(Lo,Ea)=>{const Pa=await(0,l.getModelFile)(C,jn,!0,H,vr);Lo(Pa instanceof Uint8Array?{path:Fi,data:Pa}:Fi)}))}}else bt.externalData!==void 0&&(sn=bt.externalData.map(async zt=>{if(typeof zt.data=="string"){const Vr=await(0,l.getModelFile)(C,zt.data,!0,H);return{...zt,data:Vr}}return zt}));if(sn.length>0){const zt=await Promise.all(sn);h.apis.IS_NODE_ENV||(bt.externalData=zt)}if(Ae==="webgpu"){const zt=(0,n.getCacheShapes)(H.config,{prefix:"present"});if(Object.keys(zt).length>0&&!(0,o.isONNXProxy)()){const Vr={};for(const hn in zt)Vr[hn]="gpu-buffer";bt.preferredOutputLocation=Vr}}return{buffer_or_path:await jr,session_options:bt,session_config:Lt}}async function O(C,k,H){return Object.fromEntries(await Promise.all(Object.keys(k).map(async ye=>{const{buffer_or_path:Ee,session_options:Ae,session_config:je}=await $(C,k[ye],H),Ue=await(0,o.createInferenceSession)(Ee,Ae,je);return[ye,Ue]})))}async function L(C,k,H){return Object.fromEntries(await Promise.all(Object.keys(k).map(async ye=>{const Ee=await(0,l.getModelJSON)(C,k[ye],!1,H);return[ye,Ee]})))}function G(C,k){const H=Object.create(null),ye=[];for(const je of C.inputNames){const Ue=k[je];if(!(Ue instanceof f.Tensor)){ye.push(je);continue}H[je]=(0,o.isONNXProxy)()?Ue.clone():Ue}if(ye.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${ye.join(", ")}.`);const Ee=Object.keys(k).length,Ae=C.inputNames.length;if(Ee>Ae){let je=Object.keys(k).filter(Ue=>!C.inputNames.includes(Ue));console.warn(`WARNING: Too many inputs were provided (${Ee} > ${Ae}). The following inputs will be ignored: "${je.join(", ")}".`)}return H}let j=Promise.resolve();async function D(C,k){const H=G(C,k);try{const ye=Object.fromEntries(Object.entries(H).map(([je,Ue])=>[je,Ue.ort_tensor])),Ee=()=>C.run(ye),Ae=await(h.apis.IS_BROWSER_ENV||h.apis.IS_WEBWORKER_ENV?j=j.then(Ee):Ee());return re(Ae)}catch(ye){const Ee=Object.fromEntries(Object.entries(H).map(([Ae,je])=>{const Ue={type:je.type,dims:je.dims,location:je.location};return Ue.location!=="gpu-buffer"&&(Ue.data=je.data),[Ae,Ue]}));throw console.error(`An error occurred during model execution: "${ye}".`),console.error("Inputs given to model:",Ee),ye}}function re(C){for(let k in C)(0,o.isONNXTensor)(C[k])?C[k]=new f.Tensor(C[k]):typeof C[k]=="object"&&re(C[k]);return C}function Z(C){if(C instanceof f.Tensor)return C;if(C.length===0)throw Error("items must be non-empty");if(Array.isArray(C[0])){if(C.some(k=>k.length!==C[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new f.Tensor("int64",BigInt64Array.from(C.flat().map(k=>BigInt(k))),[C.length,C[0].length])}else return new f.Tensor("int64",BigInt64Array.from(C.map(k=>BigInt(k))),[1,C.length])}function te(C){return new f.Tensor("bool",[C],[1])}async function ie(C,k){let{encoder_outputs:H,input_ids:ye,decoder_input_ids:Ee,...Ae}=k;if(!H){const Ue=(0,a.pick)(k,C.sessions.model.inputNames);H=(await ne(C,Ue)).last_hidden_state}return Ae.input_ids=Ee,Ae.encoder_hidden_states=H,C.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(Ae.encoder_attention_mask=k.attention_mask),await Me(C,Ae,!0)}async function ne(C,k){const H=C.sessions.model,ye=(0,a.pick)(k,H.inputNames);if(H.inputNames.includes("inputs_embeds")&&!ye.inputs_embeds){if(!k.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");ye.inputs_embeds=await C.encode_text({input_ids:k.input_ids})}if(H.inputNames.includes("token_type_ids")&&!ye.token_type_ids){if(!ye.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");ye.token_type_ids=(0,f.zeros_like)(ye.input_ids)}if(H.inputNames.includes("pixel_mask")&&!ye.pixel_mask){if(!ye.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const Ee=ye.pixel_values.dims;ye.pixel_mask=(0,f.ones)([Ee[0],Ee[2],Ee[3]])}return await D(H,ye)}async function ve(C,k){const H=await C.encode(k);return await C.decode(H)}async function Me(C,k,H=!1){const ye=C.sessions[H?"decoder_model_merged":"model"],{past_key_values:Ee,...Ae}=k;if(ye.inputNames.includes("use_cache_branch")&&(Ae.use_cache_branch=te(!!Ee)),ye.inputNames.includes("position_ids")&&Ae.attention_mask&&!Ae.position_ids){const Ue=["paligemma","gemma3_text","gemma3"].includes(C.config.model_type)?1:0;Ae.position_ids=Te(Ae,Ee,Ue)}C.addPastKeyValues(Ae,Ee);const je=(0,a.pick)(Ae,ye.inputNames);return await D(ye,je)}function W({modality_token_id:C,inputs_embeds:k,modality_features:H,input_ids:ye,attention_mask:Ee}){const Ae=ye.tolist().map(lt=>lt.reduce((Pt,It,Lt)=>(It==C&&Pt.push(Lt),Pt),[])),je=Ae.reduce((lt,Pt)=>lt+Pt.length,0),Ue=H.dims[0];if(je!==Ue)throw new Error(`Number of tokens and features do not match: tokens: ${je}, features ${Ue}`);let Ye=0;for(let lt=0;lt<Ae.length;++lt){const Pt=Ae[lt],It=k[lt];for(let Lt=0;Lt<Pt.length;++Lt)It[Pt[Lt]].data.set(H[Ye++].data)}return{inputs_embeds:k,attention_mask:Ee}}function R({image_token_id:C,inputs_embeds:k,image_features:H,input_ids:ye,attention_mask:Ee}){return W({modality_token_id:C,inputs_embeds:k,modality_features:H,input_ids:ye,attention_mask:Ee})}function J({audio_token_id:C,inputs_embeds:k,audio_features:H,input_ids:ye,attention_mask:Ee}){return W({modality_token_id:C,inputs_embeds:k,modality_features:H,input_ids:ye,attention_mask:Ee})}async function U(C,{encode_function:k,merge_function:H,modality_input_name:ye,modality_output_name:Ee,input_ids:Ae=null,attention_mask:je=null,position_ids:Ue=null,inputs_embeds:Ye=null,past_key_values:lt=null,generation_config:Pt=null,logits_processor:It=null,...Lt}){const yt=Lt[ye];if(!Ye){if(Ye=await C.encode_text({input_ids:Ae,...Lt}),yt&&Ae.dims[1]!==1){const Mt=await k({[ye]:yt,...Lt});({inputs_embeds:Ye,attention_mask:je}=H({[Ee]:Mt,inputs_embeds:Ye,input_ids:Ae,attention_mask:je}))}else if(lt&&yt&&Ae.dims[1]===1){const Mt=Ae.dims[1],bt=Object.values(lt)[0].dims.at(-2);je=(0,f.cat)([(0,f.ones)([Ae.dims[0],bt]),je.slice(null,[je.dims[1]-Mt,je.dims[1]])],1)}}if(!Ue&&C.config.model_type==="qwen2_vl"){const{image_grid_thw:Mt,video_grid_thw:bt}=Lt;[Ue]=C.get_rope_index(Ae,Mt,bt,je)}return await Me(C,{inputs_embeds:Ye,past_key_values:lt,attention_mask:je,position_ids:Ue,generation_config:Pt,logits_processor:It},!0)}async function be(C,k){return await U(C,{...k,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:C.encode_audio.bind(C),merge_function:C._merge_input_ids_with_audio_features.bind(C)})}async function Le(C,k){return await U(C,{...k,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:C.encode_image.bind(C),merge_function:C._merge_input_ids_with_image_features.bind(C)})}function de(C,k=0){const[H,ye]=C.dims,Ee=C.data,Ae=new BigInt64Array(Ee.length);for(let je=0;je<H;++je){const Ue=je*ye;let Ye=BigInt(k);for(let lt=0;lt<ye;++lt){const Pt=Ue+lt;Ee[Pt]===0n?Ae[Pt]=BigInt(1):(Ae[Pt]=Ye,Ye+=Ee[Pt])}}return{data:Ae,dims:C.dims}}function Te(C,k=null,H=0){const{input_ids:ye,inputs_embeds:Ee,attention_mask:Ae}=C,{data:je,dims:Ue}=de(Ae,H);let Ye=new f.Tensor("int64",je,Ue);if(k){const lt=-(ye??Ee).dims.at(1);Ye=Ye.slice(null,[lt,null])}return Ye}function Pe(C,k,H,ye){const Ee=H.past_key_values?Object.values(H.past_key_values)[0].dims.at(-2):0;if(!H.attention_mask){let Ae;for(const je of["input_ids","inputs_embeds","position_ids"])if(H[je]){Ae=H[je].dims;break}if(!Ae)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");H.attention_mask=(0,f.ones)([Ae[0],Ee+Ae[1]])}if(H.past_key_values){const{input_ids:Ae,attention_mask:je}=H;je&&je.dims[1]>Ae.dims[1]||Ee<Ae.dims[1]&&(H.input_ids=Ae.slice(null,[Ee,null]))}return H}function xe(C,k,H,ye){return H.past_key_values&&(k=k.map(Ee=>[Ee.at(-1)])),{...H,decoder_input_ids:Z(k)}}function Y(C,...k){return C.config.is_encoder_decoder?xe(C,...k):Pe(C,...k)}function B(C,k,H,ye){const Ee=!!H.past_key_values;return ye.guidance_scale!==null&&ye.guidance_scale>1&&(Ee?H.input_ids=(0,f.cat)([H.input_ids,H.input_ids],0):(H.input_ids=(0,f.cat)([H.input_ids,(0,f.full_like)(H.input_ids,BigInt(ye.pad_token_id))],0),H.attention_mask=(0,f.cat)([H.attention_mask,(0,f.full_like)(H.attention_mask,0n)],0))),(Ee||!H.pixel_values)&&(H.pixel_values=(0,f.full)([0,0,3,384,384],1)),Ee&&(H.images_seq_mask=new f.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),H.images_emb_mask=new f.Tensor("bool",new Array(0).fill(!1),[1,1,0])),H}class I extends i.Callable{main_input_name="input_ids";forward_params=["input_ids","attention_mask"];constructor(k,H,ye){super(),this.config=k,this.sessions=H,this.configs=ye;const Ee=w.get(this.constructor),Ae=M.get(Ee);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,Ae){case g.DecoderOnly:this.can_generate=!0,this._forward=Me,this._prepare_inputs_for_generation=Pe;break;case g.Seq2Seq:case g.Vision2Seq:case g.Musicgen:this.can_generate=!0,this._forward=ie,this._prepare_inputs_for_generation=xe;break;case g.EncoderDecoder:this._forward=ie;break;case g.ImageTextToText:this.can_generate=!0,this._forward=Le,this._prepare_inputs_for_generation=Y;break;case g.AudioTextToText:this.can_generate=!0,this._forward=be,this._prepare_inputs_for_generation=Y;break;case g.Phi3V:case g.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=Y;break;case g.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=B;break;case g.AutoEncoder:this._forward=ve;break;default:this._forward=ne;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){const k=[];for(const H of Object.values(this.sessions))H?.handler?.dispose&&k.push(H.handler.dispose());return await Promise.all(k)}static async from_pretrained(k,{progress_callback:H=null,config:ye=null,cache_dir:Ee=null,local_files_only:Ae=!1,revision:je="main",model_file_name:Ue=null,subfolder:Ye="onnx",device:lt=null,dtype:Pt=null,use_external_data_format:It=null,session_options:Lt={}}={}){let yt={progress_callback:H,config:ye,cache_dir:Ee,local_files_only:Ae,revision:je,model_file_name:Ue,subfolder:Ye,device:lt,dtype:Pt,use_external_data_format:It,session_options:Lt};const or=w.get(this),Mt=M.get(or);ye=yt.config=await n.AutoConfig.from_pretrained(k,yt);let bt;if(Mt===g.DecoderOnly)bt=await Promise.all([O(k,{model:yt.model_file_name??"model"},yt),L(k,{generation_config:"generation_config.json"},yt)]);else if(Mt===g.Seq2Seq||Mt===g.Vision2Seq)bt=await Promise.all([O(k,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},yt),L(k,{generation_config:"generation_config.json"},yt)]);else if(Mt===g.MaskGeneration)bt=await Promise.all([O(k,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},yt)]);else if(Mt===g.EncoderDecoder)bt=await Promise.all([O(k,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},yt)]);else if(Mt===g.ImageTextToText){const Ht={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};ye.is_encoder_decoder&&(Ht.model="encoder_model"),bt=await Promise.all([O(k,Ht,yt),L(k,{generation_config:"generation_config.json"},yt)])}else if(Mt===g.AudioTextToText){const Ht={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};bt=await Promise.all([O(k,Ht,yt),L(k,{generation_config:"generation_config.json"},yt)])}else if(Mt===g.ImageAudioTextToText){const Ht={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};bt=await Promise.all([O(k,Ht,yt),L(k,{generation_config:"generation_config.json"},yt)])}else if(Mt===g.Musicgen)bt=await Promise.all([O(k,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},yt),L(k,{generation_config:"generation_config.json"},yt)]);else if(Mt===g.MultiModality)bt=await Promise.all([O(k,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},yt),L(k,{generation_config:"generation_config.json"},yt)]);else if(Mt===g.Phi3V)bt=await Promise.all([O(k,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},yt),L(k,{generation_config:"generation_config.json"},yt)]);else if(Mt===g.AutoEncoder)bt=await Promise.all([O(k,{encoder_model:"encoder_model",decoder_model:"decoder_model"},yt)]);else{if(Mt!==g.EncoderOnly){const Ht=or??ye?.model_type;Ht!=="custom"&&console.warn(`Model type for '${Ht}' not found, assuming encoder-only architecture. Please report this at ${c.GITHUB_ISSUE_URL}.`)}bt=await Promise.all([O(k,{model:yt.model_file_name??"model"},yt)])}return new this(ye,...bt)}async _call(k){return await this.forward(k)}async forward(k){return await this._forward(this,k)}get generation_config(){return this.configs?.generation_config??null}_get_logits_warper(k){const H=new u.LogitsProcessorList;return k.temperature!==null&&k.temperature!==1&&H.push(new u.TemperatureLogitsWarper(k.temperature)),k.top_k!==null&&k.top_k!==0&&H.push(new u.TopKLogitsWarper(k.top_k)),k.top_p!==null&&k.top_p<1&&H.push(new u.TopPLogitsWarper(k.top_p)),H}_get_logits_processor(k,H,ye=null){const Ee=new u.LogitsProcessorList;if(k.repetition_penalty!==null&&k.repetition_penalty!==1&&Ee.push(new u.RepetitionPenaltyLogitsProcessor(k.repetition_penalty)),k.no_repeat_ngram_size!==null&&k.no_repeat_ngram_size>0&&Ee.push(new u.NoRepeatNGramLogitsProcessor(k.no_repeat_ngram_size)),k.bad_words_ids!==null&&Ee.push(new u.NoBadWordsLogitsProcessor(k.bad_words_ids,k.eos_token_id)),k.min_length!==null&&k.eos_token_id!==null&&k.min_length>0&&Ee.push(new u.MinLengthLogitsProcessor(k.min_length,k.eos_token_id)),k.min_new_tokens!==null&&k.eos_token_id!==null&&k.min_new_tokens>0&&Ee.push(new u.MinNewTokensLengthLogitsProcessor(H,k.min_new_tokens,k.eos_token_id)),k.forced_bos_token_id!==null&&Ee.push(new u.ForcedBOSTokenLogitsProcessor(k.forced_bos_token_id)),k.forced_eos_token_id!==null&&Ee.push(new u.ForcedEOSTokenLogitsProcessor(k.max_length,k.forced_eos_token_id)),k.begin_suppress_tokens!==null){const Ae=H>1||k.forced_bos_token_id===null?H:H+1;Ee.push(new u.SuppressTokensAtBeginLogitsProcessor(k.begin_suppress_tokens,Ae))}return k.guidance_scale!==null&&k.guidance_scale>1&&Ee.push(new u.ClassifierFreeGuidanceLogitsProcessor(k.guidance_scale)),ye!==null&&Ee.extend(ye),Ee}_prepare_generation_config(k,H,ye=d.GenerationConfig){const Ee={...this.config};for(const je of["decoder","generator","text_config"])je in Ee&&Object.assign(Ee,Ee[je]);const Ae=new ye(Ee);return Object.assign(Ae,this.generation_config??{}),k&&Object.assign(Ae,k),H&&Object.assign(Ae,(0,a.pick)(H,Object.getOwnPropertyNames(Ae))),Ae}_get_stopping_criteria(k,H=null){const ye=new b.StoppingCriteriaList;return k.max_length!==null&&ye.push(new b.MaxLengthCriteria(k.max_length,this.config.max_position_embeddings??null)),k.eos_token_id!==null&&ye.push(new b.EosTokenCriteria(k.eos_token_id)),H&&ye.extend(H),ye}_validate_model_class(){if(!this.can_generate){const k=[Wp,Up,Vp,jp],H=w.get(this.constructor),ye=new Set,Ee=this.config.model_type;for(const je of k){const Ue=je.get(Ee);Ue&&ye.add(Ue[0])}let Ae=`The current model class (${H}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw ye.size>0&&(Ae+=` Please use the following class instead: ${[...ye].join(", ")}`),Error(Ae)}}prepare_inputs_for_generation(...k){return this._prepare_inputs_for_generation(this,...k)}_update_model_kwargs_for_generation({generated_input_ids:k,outputs:H,model_inputs:ye,is_encoder_decoder:Ee}){return ye.past_key_values=this.getPastKeyValues(H,ye.past_key_values),ye.input_ids=new f.Tensor("int64",k.flat(),[k.length,1]),Ee||(ye.attention_mask=(0,f.cat)([ye.attention_mask,(0,f.ones)([ye.attention_mask.dims[0],1])],1)),ye.position_ids=null,ye}_prepare_model_inputs({inputs:k,bos_token_id:H,model_kwargs:ye}){const Ee=(0,a.pick)(ye,this.forward_params),Ae=this.main_input_name;if(Ae in Ee){if(k)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else Ee[Ae]=k;return{inputs_tensor:Ee[Ae],model_inputs:Ee,model_input_name:Ae}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:k,model_inputs:H,model_input_name:ye,generation_config:Ee}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!H.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:je,pixel_values:Ue,attention_mask:Ye,...lt}=H,Pt=await this._prepare_inputs_embeds(H);H={...lt,...(0,a.pick)(Pt,["inputs_embeds","attention_mask"])}}let{last_hidden_state:Ae}=await ne(this,H);if(Ee.guidance_scale!==null&&Ee.guidance_scale>1)Ae=(0,f.cat)([Ae,(0,f.full_like)(Ae,0)],0),"attention_mask"in H&&(H.attention_mask=(0,f.cat)([H.attention_mask,(0,f.zeros_like)(H.attention_mask)],0));else if(H.decoder_input_ids){const je=Z(H.decoder_input_ids).dims[0];if(je!==Ae.dims[0]){if(Ae.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${Ae.dims[0]}) than the decoder inputs (${je}).`);Ae=(0,f.cat)(Array.from({length:je},()=>Ae),0)}}return H.encoder_outputs=Ae,H}_prepare_decoder_input_ids_for_generation({batch_size:k,model_input_name:H,model_kwargs:ye,decoder_start_token_id:Ee,bos_token_id:Ae,generation_config:je}){let{decoder_input_ids:Ue,...Ye}=ye;if(!(Ue instanceof f.Tensor)){if(Ue)Array.isArray(Ue[0])||(Ue=Array.from({length:k},()=>Ue));else if(Ee??=Ae,this.config.model_type==="musicgen")Ue=Array.from({length:k*this.config.decoder.num_codebooks},()=>[Ee]);else if(Array.isArray(Ee)){if(Ee.length!==k)throw new Error(`\`decoder_start_token_id\` expcted to have length ${k} but got ${Ee.length}`);Ue=Ee}else Ue=Array.from({length:k},()=>[Ee]);Ue=Z(Ue)}return ye.decoder_attention_mask=(0,f.ones_like)(Ue),{input_ids:Ue,model_inputs:Ye}}async generate({inputs:k=null,generation_config:H=null,logits_processor:ye=null,stopping_criteria:Ee=null,streamer:Ae=null,...je}){this._validate_model_class(),H=this._prepare_generation_config(H,je);let{inputs_tensor:Ue,model_inputs:Ye,model_input_name:lt}=this._prepare_model_inputs({inputs:k,model_kwargs:je});const Pt=this.config.is_encoder_decoder;Pt&&("encoder_outputs"in Ye||(Ye=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:Ue,model_inputs:Ye,model_input_name:lt,generation_config:H})));let It;Pt?{input_ids:It,model_inputs:Ye}=this._prepare_decoder_input_ids_for_generation({batch_size:Ye[lt].dims.at(0),model_input_name:lt,model_kwargs:Ye,decoder_start_token_id:H.decoder_start_token_id,bos_token_id:H.bos_token_id,generation_config:H}):It=Ye[lt];let Lt=It.dims.at(-1);H.max_new_tokens!==null&&(H.max_length=Lt+H.max_new_tokens);const yt=this._get_logits_processor(H,Lt,ye),or=this._get_stopping_criteria(H,Ee),Mt=Ye[lt].dims.at(0),bt=E.LogitsSampler.getSampler(H),Ht=new Array(Mt).fill(0),vr=It.tolist();Ae&&Ae.put(vr);let jr,on={};for(;;){if(Ye=this.prepare_inputs_for_generation(vr,Ye,H),jr=await this.forward(Ye),H.output_attentions&&H.return_dict_in_generate){const jn=this.getAttentions(jr);for(const Lo in jn)Lo in on||(on[Lo]=[]),on[Lo].push(jn[Lo])}const zt=jr.logits.slice(null,-1,null),Vr=yt(vr,zt),hn=[];for(let jn=0;jn<Vr.dims.at(0);++jn){const Lo=Vr[jn],Ea=await bt(Lo);for(const[Pa,Zd]of Ea){const $l=BigInt(Pa);Ht[jn]+=Zd,vr[jn].push($l),hn.push([$l]);break}}if(Ae&&Ae.put(hn),or(vr).every(jn=>jn))break;Ye=this._update_model_kwargs_for_generation({generated_input_ids:hn,outputs:jr,model_inputs:Ye,is_encoder_decoder:Pt})}Ae&&Ae.end();const sn=this.getPastKeyValues(jr,Ye.past_key_values,!0),Zr=new f.Tensor("int64",vr.flat(),[vr.length,vr[0].length]);if(H.return_dict_in_generate)return{sequences:Zr,past_key_values:sn,...on};for(const zt of Object.values(jr))zt.location==="gpu-buffer"&&zt.dispose();return Zr}getPastKeyValues(k,H,ye=!1){const Ee=Object.create(null);for(const Ae in k)if(Ae.startsWith("present")){const je=Ae.replace("present_conv","past_conv").replace("present","past_key_values"),Ue=Ae.includes("encoder");if(Ue&&H?Ee[je]=H[je]:Ee[je]=k[Ae],H&&(!Ue||ye)){const Ye=H[je];Ye.location==="gpu-buffer"&&Ye.dispose()}}return Ee}getAttentions(k){const H={};for(const ye of["cross_attentions","encoder_attentions","decoder_attentions"])for(const Ee in k)Ee.startsWith(ye)&&(ye in H||(H[ye]=[]),H[ye].push(k[Ee]));return H}addPastKeyValues(k,H){if(H)Object.assign(k,H);else{const ye=this.sessions.decoder_model_merged??this.sessions.model,Ee=(k[this.main_input_name]??k.attention_mask)?.dims?.[0]??1,Ae=ye?.config?.kv_cache_dtype??"float32",je=Ae==="float16"?f.DataTypeMap.float16:f.DataTypeMap.float32,Ue=(0,n.getCacheShapes)(this.config,{batch_size:Ee});for(const Ye in Ue){const lt=Ue[Ye].reduce((Pt,It)=>Pt*It,1);k[Ye]=new f.Tensor(Ae,new je(lt),Ue[Ye])}}}async encode_image({pixel_values:k}){return(await D(this.sessions.vision_encoder,{pixel_values:k})).image_features}async encode_text({input_ids:k}){return(await D(this.sessions.embed_tokens,{input_ids:k})).inputs_embeds}async encode_audio({audio_values:k}){return(await D(this.sessions.audio_encoder,{audio_values:k})).audio_features}}class q{}class pe extends q{constructor({last_hidden_state:k,hidden_states:H=null,attentions:ye=null}){super(),this.last_hidden_state=k,this.hidden_states=H,this.attentions=ye}}class ue extends I{}class oe extends ue{}class N extends ue{async _call(k){return new mn(await super._call(k))}}class z extends ue{async _call(k){return new Et(await super._call(k))}}class ee extends ue{async _call(k){return new un(await super._call(k))}}class le extends ue{async _call(k){return new xn(await super._call(k))}}class ke extends I{}class fe extends ke{}class ce extends ke{async _call(k){return new mn(await super._call(k))}}class he extends ke{async _call(k){return new Et(await super._call(k))}}class $e extends ke{async _call(k){return new un(await super._call(k))}}class Re extends ke{async _call(k){return new xn(await super._call(k))}}class ze extends I{}class Ge extends ze{}class Ke extends ze{async _call(k){return new mn(await super._call(k))}}class vt extends ze{async _call(k){return new Et(await super._call(k))}}class Tt extends ze{async _call(k){return new un(await super._call(k))}}class gt extends I{}class Gr extends gt{}class _r extends gt{}class xr extends I{}class zn extends xr{}class ir extends I{}class yn extends ir{}class Gs extends ir{async _call(k){return new mn(await super._call(k))}}class Hs extends ir{async _call(k){return new Et(await super._call(k))}}class ys extends ir{async _call(k){return new un(await super._call(k))}}class ws extends ir{async _call(k){return new xn(await super._call(k))}}class _t extends I{}class es extends _t{}class mr extends _t{async _call(k){return new mn(await super._call(k))}}class Ot extends _t{async _call(k){return new Et(await super._call(k))}}class ts extends _t{async _call(k){return new un(await super._call(k))}}class S extends _t{async _call(k){return new xn(await super._call(k))}}class se extends I{}class K extends se{}class ae extends se{async _call(k){return new mn(await super._call(k))}}class _e extends se{async _call(k){return new Et(await super._call(k))}}class Se extends se{async _call(k){return new un(await super._call(k))}}class Ne extends se{async _call(k){return new xn(await super._call(k))}}class st extends I{}class pt extends st{}class et extends st{async _call(k){return new mn(await super._call(k))}}class Dt extends st{async _call(k){return new Et(await super._call(k))}}class Rt extends st{async _call(k){return new un(await super._call(k))}}class tn extends st{async _call(k){return new xn(await super._call(k))}}class tr extends I{}class qr extends tr{}class Xn extends tr{async _call(k){return new mn(await super._call(k))}}class Tr extends tr{async _call(k){return new Et(await super._call(k))}}class rn extends tr{async _call(k){return new un(await super._call(k))}}class po extends tr{async _call(k){return new xn(await super._call(k))}}class Xr extends I{}class $o extends Xr{}class So extends Xr{async _call(k){return new mn(await super._call(k))}}class Pn extends Xr{async _call(k){return new Et(await super._call(k))}}class rs extends Xr{async _call(k){return new un(await super._call(k))}}class Io extends Xr{async _call(k){return new xn(await super._call(k))}}class Nr extends I{}class Qn extends Nr{}class Qr extends Nr{async _call(k){return new Et(await super._call(k))}}class an extends Nr{async _call(k){return new un(await super._call(k))}}class mo extends Nr{async _call(k){return new xn(await super._call(k))}}class ns extends Nr{async _call(k){return new mn(await super._call(k))}}class no extends I{}class Ms extends no{}class $n extends no{async _call(k){return new mn(await super._call(k))}}class We extends no{async _call(k){return new Et(await super._call(k))}}class Xe extends no{async _call(k){return new un(await super._call(k))}}class it extends I{}class Cr extends it{}class xs extends it{async _call(k){return new mn(await super._call(k))}}class os extends it{async _call(k){return new Et(await super._call(k))}}class Ts extends it{async _call(k){return new xn(await super._call(k))}}class Ao extends I{}class xi extends Ao{}class Ti extends Ao{async _call(k){return new mn(await super._call(k))}}class da extends Ao{async _call(k){return new Et(await super._call(k))}}class Ce extends Ao{async _call(k){return new un(await super._call(k))}}class A extends Ao{async _call(k){return new xn(await super._call(k))}}class Q extends I{}class me extends Q{}class ge extends Q{async _call(k){return new mn(await super._call(k))}}class Ie extends Q{async _call(k){return new Et(await super._call(k))}}class Be extends Q{async _call(k){return new xn(await super._call(k))}}class tt extends I{}class nt extends tt{}class ot extends tt{async _call(k){return new Et(await super._call(k))}}class Je extends tt{async _call(k){return new xn(await super._call(k))}}class Bt extends tt{async _call(k){return new mn(await super._call(k))}}class Ct extends I{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"]}class Dr extends Ct{}class ln extends Ct{}class br extends I{}class Br extends br{}class hr extends br{}class Nn extends I{}class ho extends Nn{}class wn extends Nn{}class oo extends I{}class Ir extends oo{}class Yr extends oo{}class Sn extends oo{async _call(k){return new Et(await super._call(k))}}class In extends I{}class Oo extends In{}class nn extends In{}class go extends In{async _call(k){return new Et(await super._call(k))}}class cn extends In{}class kr extends I{}class Jr extends kr{}class Hr extends kr{}class An extends I{}class Ks extends An{}class ua extends An{}class Cs extends I{}class pd extends Cs{}class md extends Cs{async _call(k){return new mn(await super._call(k))}}class hd extends Cs{async _call(k){return new Et(await super._call(k))}}class gd extends Cs{async _call(k){return new un(await super._call(k))}}class _d extends Cs{async _call(k){return new xn(await super._call(k))}}class qs extends I{}class bd extends qs{}class vd extends qs{async _call(k){return new mn(await super._call(k))}}class yd extends qs{async _call(k){return new Et(await super._call(k))}}class wd extends qs{async _call(k){return new un(await super._call(k))}}class Md extends qs{async _call(k){return new xn(await super._call(k))}}class Xs extends I{}class ol extends Xs{}class sl extends Xs{async _call(k){return new mn(await super._call(k))}}class il extends Xs{async _call(k){return new Et(await super._call(k))}}class xd extends Xs{async _call(k){return new un(await super._call(k))}}class Td extends Xs{async _call(k){return new xn(await super._call(k))}}class fa extends I{}class al extends fa{}class Qs extends fa{}class ll extends I{requires_attention_mask=!1;main_input_name="input_features";forward_params=["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"]}class cl extends ll{}class dl extends ll{_prepare_generation_config(k,H){return super._prepare_generation_config(k,H,_.WhisperGenerationConfig)}_retrieve_init_tokens(k){const H=[k.decoder_start_token_id];let ye=k.language;const Ee=k.task;if(k.is_multilingual){ye||(console.warn("No language specified - defaulting to English (en)."),ye="en");const je=`<|${(0,T.whisper_language_to_code)(ye)}|>`;H.push(k.lang_to_id[je]),H.push(k.task_to_id[Ee??"transcribe"])}else if(ye||Ee)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!k.return_timestamps&&k.no_timestamps_token_id&&H.at(-1)!==k.no_timestamps_token_id?H.push(k.no_timestamps_token_id):k.return_timestamps&&H.at(-1)===k.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),H.pop()),H.filter(Ae=>Ae!=null)}async generate({inputs:k=null,generation_config:H=null,logits_processor:ye=null,stopping_criteria:Ee=null,...Ae}){H=this._prepare_generation_config(H,Ae);const je=Ae.decoder_input_ids??this._retrieve_init_tokens(H);if(H.return_timestamps&&(ye??=new u.LogitsProcessorList,ye.push(new u.WhisperTimeStampLogitsProcessor(H,je))),H.begin_suppress_tokens&&(ye??=new u.LogitsProcessorList,ye.push(new u.SuppressTokensAtBeginLogitsProcessor(H.begin_suppress_tokens,je.length))),H.return_token_timestamps){if(!H.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");H.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),H.output_attentions=!0,H.return_dict_in_generate=!0}const Ue=await super.generate({inputs:k,generation_config:H,logits_processor:ye,decoder_input_ids:je,...Ae});return H.return_token_timestamps&&(Ue.token_timestamps=this._extract_token_timestamps(Ue,H.alignment_heads,H.num_frames)),Ue}_extract_token_timestamps(k,H,ye=null,Ee=.02){if(!k.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");ye==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let Ae=this.config.median_filter_width;Ae===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),Ae=7);const je=k.cross_attentions,Ue=Array.from({length:this.config.decoder_layers},(Mt,bt)=>(0,f.cat)(je.map(Ht=>Ht[bt]),2)),Ye=(0,f.stack)(H.map(([Mt,bt])=>{if(Mt>=Ue.length)throw new Error(`Layer index ${Mt} is out of bounds for cross attentions (length ${Ue.length}).`);return ye?Ue[Mt].slice(null,bt,null,[0,ye]):Ue[Mt].slice(null,bt)})).transpose(1,0,2,3),[lt,Pt]=(0,f.std_mean)(Ye,-2,0,!0),It=Ye.clone();for(let Mt=0;Mt<It.dims[0];++Mt){const bt=It[Mt];for(let Ht=0;Ht<bt.dims[0];++Ht){const vr=bt[Ht],jr=lt[Mt][Ht][0].data,on=Pt[Mt][Ht][0].data;for(let sn=0;sn<vr.dims[0];++sn){let Zr=vr[sn].data;for(let zt=0;zt<Zr.length;++zt)Zr[zt]=(Zr[zt]-on[zt])/jr[zt];Zr.set((0,m.medianFilter)(Zr,Ae))}}}const Lt=[(0,f.mean)(It,1)],yt=k.sequences.dims,or=new f.Tensor("float32",new Float32Array(yt[0]*yt[1]),yt);for(let Mt=0;Mt<yt[0];++Mt){const bt=Lt[Mt].neg().squeeze_(0),[Ht,vr]=(0,m.dynamic_time_warping)(bt.tolist()),jr=Array.from({length:Ht.length-1},(Zr,zt)=>Ht[zt+1]-Ht[zt]),on=(0,a.mergeArrays)([1],jr).map(Zr=>!!Zr),sn=[];for(let Zr=0;Zr<on.length;++Zr)on[Zr]&&sn.push(vr[Zr]*Ee);or[Mt].data.set(sn,1)}return or}}class Cd extends dl{}class ul extends I{requires_attention_mask=!1;main_input_name="input_values";forward_params=["input_values","decoder_input_ids","past_key_values"]}class fl extends ul{}class pl extends ul{}class ml extends I{main_input_name="pixel_values";forward_params=["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"]}class hl extends I{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class pa extends hl{_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),ye=k.image_features.view(-1,H);return R({image_token_id:this.config.image_token_index,...k,image_features:ye})}}class kd extends pa{}class Ed extends pa{}class Pd extends I{forward_params=["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"];main_input_name="inputs_embeds"}class $d extends Pd{_merge_input_ids_with_image_features({inputs_embeds:k,image_features:H,input_ids:ye,attention_mask:Ee}){return{inputs_embeds:(0,f.cat)([H,k],1),attention_mask:(0,f.cat)([(0,f.ones)(H.dims.slice(0,2)),Ee],1)}}async _prepare_inputs_embeds({input_ids:k,pixel_values:H,inputs_embeds:ye,attention_mask:Ee}){if(!k&&!H)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let Ae,je;return k&&(Ae=await this.encode_text({input_ids:k})),H&&(je=await this.encode_image({pixel_values:H})),Ae&&je?{inputs_embeds:ye,attention_mask:Ee}=this._merge_input_ids_with_image_features({inputs_embeds:Ae,image_features:je,input_ids:k,attention_mask:Ee}):ye=Ae||je,{inputs_embeds:ye,attention_mask:Ee}}async forward({input_ids:k,pixel_values:H,attention_mask:ye,decoder_input_ids:Ee,decoder_attention_mask:Ae,encoder_outputs:je,past_key_values:Ue,inputs_embeds:Ye,decoder_inputs_embeds:lt}){if(Ye||({inputs_embeds:Ye,attention_mask:ye}=await this._prepare_inputs_embeds({input_ids:k,pixel_values:H,inputs_embeds:Ye,attention_mask:ye})),!je){let{last_hidden_state:Lt}=await ne(this,{inputs_embeds:Ye,attention_mask:ye});je=Lt}if(!lt){if(!Ee)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");lt=await this.encode_text({input_ids:Ee})}return await Me(this,{inputs_embeds:lt,attention_mask:Ae,encoder_attention_mask:ye,encoder_hidden_states:je,past_key_values:Ue},!0)}}class Sd extends I{forward_params=["input_ids","attention_mask","pixel_values","position_ids","past_key_values"]}class Id extends Sd{_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),ye=k.image_features.view(-1,H);return R({image_token_id:this.config.image_token_index,...k,image_features:ye})}}class Ci extends hl{_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),ye=k.image_features.view(-1,H);return R({image_token_id:this.config.image_token_index,...k,image_features:ye})}}class Ys extends I{forward_params=["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"]}class ma extends Ys{async forward({input_ids:k=null,attention_mask:H=null,pixel_values:ye=null,input_features:Ee=null,input_features_mask:Ae=null,position_ids:je=null,inputs_embeds:Ue=null,per_layer_inputs:Ye=null,past_key_values:lt=null,generation_config:Pt=null,logits_processor:It=null,...Lt}){if((!Ue||!Ye)&&({inputs_embeds:Ue,per_layer_inputs:Ye}=await D(this.sessions.embed_tokens,{input_ids:k}),k.dims[1]!==1)){if(ye){const{image_features:or}=await D(this.sessions.vision_encoder,{pixel_values:ye});({inputs_embeds:Ue,attention_mask:H}=this._merge_input_ids_with_image_features({image_features:or,inputs_embeds:Ue,input_ids:k,attention_mask:H}))}if(Ee){const{audio_features:or}=await D(this.sessions.audio_encoder,{input_features:Ee,input_features_mask:Ae});({inputs_embeds:Ue,attention_mask:H}=this._merge_input_ids_with_audio_features({audio_features:or,inputs_embeds:Ue,input_ids:k,attention_mask:H}))}}return await Me(this,{inputs_embeds:Ue,per_layer_inputs:Ye,past_key_values:lt,attention_mask:H,position_ids:je,generation_config:Pt,logits_processor:It},!0)}_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),ye=k.image_features.view(-1,H);return R({image_token_id:this.config.image_token_id,...k,image_features:ye})}_merge_input_ids_with_audio_features(k){const H=k.audio_features.dims.at(-1),ye=k.audio_features.view(-1,H);return J({audio_token_id:this.config.audio_token_id,...k,audio_features:ye})}}class Ad extends I{forward_params=["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"]}class ha extends Ad{async encode_image({pixel_values:k,pixel_attention_mask:H}){return(await D(this.sessions.vision_encoder,{pixel_values:k,pixel_attention_mask:H})).image_features}_merge_input_ids_with_image_features(k){const H=k.image_features.dims.at(-1),ye=k.image_features.view(-1,H);return R({image_token_id:this.config.image_token_id,...k,image_features:ye})}}class ki extends ha{}class ga extends I{forward_params=["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"]}class _a extends ga{async forward({input_ids:k=null,attention_mask:H=null,pixel_values:ye=null,image_sizes:Ee=null,position_ids:Ae=null,inputs_embeds:je=null,past_key_values:Ue=null,generation_config:Ye=null,logits_processor:lt=null,...Pt}){if(!je){let Lt;if(ye&&k.dims[1]!==1){if(!Ee)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:Lt}=await D(this.sessions.vision_encoder,{pixel_values:ye,image_sizes:Ee}))}else{const yt=this.config.normalized_config.hidden_size;Lt=new f.Tensor("float32",[],[0,yt])}({inputs_embeds:je}=await D(this.sessions.prepare_inputs_embeds,{input_ids:k,image_features:Lt}))}return await Me(this,{inputs_embeds:je,past_key_values:Ue,attention_mask:H,position_ids:Ae,generation_config:Ye,logits_processor:lt},!1)}}class ss extends I{}class gl extends ss{}class Od extends ss{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class _l extends ss{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class Ld extends ss{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Fd extends ss{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class ba extends I{}class bl extends ba{}class Ei extends ba{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class ht extends ss{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Dd extends I{}class vl extends Dd{}class Pi extends I{}class $i extends Pi{async forward(k){const H=!k.input_ids,ye=!k.pixel_values;if(H&&ye)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(H&&(k.input_ids=(0,f.ones)([k.pixel_values.dims[0],1])),ye){const{image_size:lt}=this.config.vision_config;k.pixel_values=(0,f.full)([0,3,lt,lt],0)}const{text_embeddings:Ee,image_embeddings:Ae,l2norm_text_embeddings:je,l2norm_image_embeddings:Ue}=await super.forward(k),Ye={};return H||(Ye.text_embeddings=Ee,Ye.l2norm_text_embeddings=je),ye||(Ye.image_embeddings=Ae,Ye.l2norm_image_embeddings=Ue),Ye}}class so extends Pi{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class Si extends Pi{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"vision_model"})}}class Ii extends I{}class yl extends Ii{}class wl extends Ii{}class va extends I{}class ya extends va{}class Ml extends va{}class wa extends I{}class xl extends wa{}class Ai extends wa{}class Oi extends I{}class Ma extends Oi{}class Tl extends Oi{}class xa extends I{}class Cl extends xa{}class kl extends xa{}class Ta extends I{}class v extends Ta{}class P extends Ta{}class F extends I{}class V extends F{}class X extends F{}class we extends I{}class Fe extends we{}class Ve extends we{}class rt extends I{}class dt extends rt{}class kt extends rt{}class jt extends I{}class rr extends jt{}class dn extends jt{}class is extends I{}class Bd extends is{}class G_ extends is{}class If extends I{}class H_ extends If{}class K_ extends If{}class Af extends I{}class q_ extends Af{}class X_ extends Af{}class Of extends I{}class Q_ extends Of{}class Y_ extends Of{}class Lf extends I{}class J_ extends Lf{}class Z_ extends Lf{}class Ff extends I{}class eb extends Ff{}class tb extends Ff{}class Df extends I{}class rb extends Df{}class nb extends Df{}class Bf extends I{}class ob extends Bf{}class sb extends Bf{}class Rf extends I{}class ib extends Rf{}class ab extends Rf{}class zf extends I{}class lb extends zf{}class cb extends zf{}class Nf extends I{}class db extends Nf{}class ub extends Nf{}class jf extends I{}class fb extends jf{}class pb extends jf{}class Vf extends I{}class mb extends Vf{}class hb extends Vf{}class Wf extends I{}class gb extends Wf{}class _b extends Wf{}class Uf extends I{}class bb extends Uf{}class vb extends Uf{}class Gf extends I{}class yb extends Gf{}class wb extends Gf{}class Mb extends I{forward_params=["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"]}class xb extends Mb{get_rope_index(k,H,ye,Ee){const{vision_config:Ae,image_token_id:je,video_token_id:Ue,vision_start_token_id:Ye}=this.config,lt=Ae.spatial_merge_size??2,Pt=[];if(H||ye){let It=k.tolist();Ee||(Ee=(0,f.ones_like)(k));const Lt=Ee.tolist(),yt=Array.from({length:3},vr=>Array.from({length:k.dims[0]},jr=>Array.from({length:k.dims[1]},on=>1))),or=H?H.tolist():[],Mt=ye?ye.tolist():[];let bt=0,Ht=0;for(let vr=0;vr<It.length;++vr){const jr=It[vr].filter((Ar,fn)=>Lt[vr][fn]==1),sn=jr.reduce((Ar,fn,Zs)=>(fn==Ye&&Ar.push(Zs),Ar),[]).map(Ar=>jr[Ar+1]),Zr=sn.filter(Ar=>Ar==je).length,zt=sn.filter(Ar=>Ar==Ue).length;let Vr=[],hn=0,Fi=Zr,jn=zt;for(let Ar=0;Ar<sn.length;++Ar){const fn=jr.findIndex((Bi,Fo)=>Fo>hn&&Bi==je),Zs=jr.findIndex((Bi,Fo)=>Fo>hn&&Bi==Ue),Di=Fi>0&&fn!==-1?fn:jr.length+1,$a=jn>0&&Zs!==-1?Zs:jr.length+1;let eu,Gp,Hp,Kp;Di<$a?([Gp,Hp,Kp]=or[bt],++bt,--Fi,eu=Di):([Gp,Hp,Kp]=Mt[Ht],++Ht,--jn,eu=$a);const[y3,qp,tu]=[Number(Gp),Math.floor(Number(Hp)/lt),Math.floor(Number(Kp)/lt)],Xp=eu-hn,Lw=Vr.length>0?(0,m.max)(Vr.at(-1))[0]+1:0;Vr.push(Array.from({length:3*Xp},(Bi,Fo)=>Lw+Fo%Xp));const Qp=Xp+Lw,ru=y3*qp*tu,w3=Array.from({length:ru},(Bi,Fo)=>Qp+Math.floor(Fo/(qp*tu))),M3=Array.from({length:ru},(Bi,Fo)=>Qp+Math.floor(Fo/tu)%qp),x3=Array.from({length:ru},(Bi,Fo)=>Qp+Fo%tu);Vr.push([w3,M3,x3].flat()),hn=eu+ru}if(hn<jr.length){const Ar=Vr.length>0?(0,m.max)(Vr.at(-1))[0]+1:0,fn=jr.length-hn;Vr.push(Array.from({length:3*fn},(Zs,Di)=>Ar+Di%fn))}const Lo=Vr.reduce((Ar,fn)=>Ar+fn.length,0),Ea=new Array(Lo);let Pa=0;for(let Ar=0;Ar<3;++Ar)for(let fn=0;fn<Vr.length;++fn){const Zs=Vr[fn],Di=Zs.length/3;for(let $a=Ar*Di;$a<(Ar+1)*Di;++$a)Ea[Pa++]=Zs[$a]}let Zd=0;const $l=Lt[vr];for(let Ar=0;Ar<$l.length;++Ar)if($l[Ar]==1){for(let fn=0;fn<3;++fn)yt[fn][vr][Ar]=Ea[fn*Lo/3+Zd];++Zd}const v3=(0,m.max)(Ea)[0];Pt.push(v3+1-It[vr].length)}return[new f.Tensor("int64",yt.flat(1/0),[3,k.dims[0],k.dims[1]]),new f.Tensor("int64",Pt,[Pt.length,1])]}else if(Ee){const{data:It,dims:Lt}=de(Ee),yt=BigInt64Array.from({length:3*It.length},(Mt,bt)=>It[bt%It.length]),or=Array.from({length:Lt[0]},(Mt,bt)=>(0,m.max)(It.subarray(Lt[1]*bt,Lt[1]*(bt+1)))[0]+1n+BigInt(Lt[1]));return[new f.Tensor("int64",yt,[3,...Lt]),new f.Tensor("int64",or,[or.length,1])]}else{const[It,Lt]=k.dims,yt=BigInt64Array.from({length:3*It*Lt},(or,Mt)=>BigInt(Math.floor(Mt%Lt/It)));return[new f.Tensor("int64",yt,[3,...k.dims]),(0,f.zeros)([It,1])]}}async encode_image({pixel_values:k,image_grid_thw:H}){return(await D(this.sessions.vision_encoder,{pixel_values:k,grid_thw:H})).image_features}_merge_input_ids_with_image_features(k){return R({image_token_id:this.config.image_token_id,...k})}prepare_inputs_for_generation(k,H,ye){if(H.attention_mask&&!H.position_ids)if(!H.past_key_values)[H.position_ids,H.rope_deltas]=this.get_rope_index(H.input_ids,H.image_grid_thw,H.video_grid_thw,H.attention_mask);else{H.pixel_values=null;const Ee=BigInt(Object.values(H.past_key_values)[0].dims.at(-2)),Ae=H.rope_deltas.map(je=>Ee+je);H.position_ids=(0,f.stack)([Ae,Ae,Ae],0)}return H}}class Hf extends I{}class Tb extends Hf{}class Cb extends Hf{}class Kf extends I{}class kb extends Kf{}class Eb extends Kf{}class qf extends I{}class Pb extends qf{}class $b extends qf{}class Xf extends I{}class Sb extends Xf{}class Ib extends Xf{}class Qf extends I{}class Ab extends Qf{}class Ob extends Qf{}class Yf extends I{}class Lb extends Yf{}class Fb extends Yf{async _call(k){return new Et(await super._call(k))}}class Jf extends I{}class Db extends Jf{}class Bb extends Jf{async _call(k){return new Et(await super._call(k))}}class Rb extends I{}class zb extends Rb{}class Zf extends I{}class Nb extends Zf{}class jb extends Zf{async _call(k){return new Et(await super._call(k))}}class Vb extends I{}class Wb extends Vb{}class ep extends I{}class Ub extends ep{}class Gb extends ep{async _call(k){return new Et(await super._call(k))}}class Hb extends I{}class Kb extends Hb{}class tp extends I{}class qb extends tp{}class Xb extends tp{async _call(k){return new Et(await super._call(k))}}class Qb extends I{}class Yb extends Qb{async _call(k){return new Aw(await super._call(k))}}class rp extends I{}class Jb extends rp{}class Zb extends rp{async _call(k){return new Et(await super._call(k))}}class np extends I{}class e0 extends np{}class t0 extends np{async _call(k){return new Et(await super._call(k))}}class op extends I{}class r0 extends op{}class n0 extends op{}class sp extends I{}class o0 extends sp{}class s0 extends sp{}class ip extends I{}class i0 extends ip{}class a0 extends ip{async _call(k){return new Et(await super._call(k))}}class Rd extends I{}class l0 extends Rd{}class c0 extends Rd{async _call(k){return new lp(await super._call(k))}}class ap extends Rd{async _call(k){return new d0(await super._call(k))}}class lp extends q{constructor({logits:k,pred_boxes:H}){super(),this.logits=k,this.pred_boxes=H}}class d0 extends q{constructor({logits:k,pred_boxes:H,pred_masks:ye}){super(),this.logits=k,this.pred_boxes=H,this.pred_masks=ye}}class cp extends I{}class u0 extends cp{}class f0 extends cp{async _call(k){return new El(await super._call(k))}}class El extends q{constructor({logits:k,pred_boxes:H}){super(),this.logits=k,this.pred_boxes=H}}class dp extends I{}class p0 extends dp{}class m0 extends dp{async _call(k){return new h0(await super._call(k))}}class h0 extends El{}class up extends I{}class g0 extends up{}class _0 extends up{async _call(k){return new b0(await super._call(k))}}class b0 extends El{}class fp extends I{}class v0 extends fp{}class y0 extends fp{async _call(k){return new El(await super._call(k))}}class pp extends I{}class w0 extends pp{}class M0 extends pp{async _call(k){return new x0(await super._call(k))}}class x0 extends lp{}class mp extends I{}class T0 extends mp{}class C0 extends mp{async _call(k){return new Et(await super._call(k))}}class hp extends I{}class k0 extends hp{}class E0 extends hp{async _call(k){return new Et(await super._call(k))}}class gp extends I{}class P0 extends gp{}class $0 extends gp{async _call(k){return new Et(await super._call(k))}}class zd extends I{}class S0 extends zd{}class I0 extends zd{async _call(k){return new Et(await super._call(k))}}class A0 extends zd{}class _p extends I{}class O0 extends _p{}class L0 extends _p{}class bp extends I{}class F0 extends bp{}class D0 extends bp{}class B0 extends I{}class R0 extends B0{}class Nd extends I{}class z0 extends Nd{}class N0 extends Nd{}class j0 extends Nd{}class V0 extends I{}class W0 extends V0{}class U0 extends I{}class G0 extends U0{}class H0 extends I{}class K0 extends H0{}class vp extends I{}class q0 extends vp{}class X0 extends vp{}class yp extends I{}class Q0 extends yp{}class Y0 extends yp{}class J0 extends I{}class Z0 extends J0{}class wp extends I{}class ev extends wp{}class tv extends wp{async _call(k){return new Et(await super._call(k))}}class Mp extends I{}class rv extends Mp{}class nv extends Mp{async _call(k){return new Et(await super._call(k))}}class xp extends I{}class ov extends xp{}class sv extends xp{async _call(k){return new Et(await super._call(k))}}class Tp extends I{}class iv extends Tp{}class av extends Tp{async _call(k){return new Et(await super._call(k))}}class lv extends I{}class cv extends lv{}class dv extends I{}class uv extends dv{}class fv extends I{}class pv extends fv{}class Cp extends I{}class mv extends Cp{}class hv extends Cp{async _call(k){return new gv(await super._call(k))}}class gv extends q{constructor({logits:k,pred_boxes:H}){super(),this.logits=k,this.pred_boxes=H}}class _v extends I{}class bv extends _v{async get_image_embeddings({pixel_values:k}){return await ne(this,{pixel_values:k})}async forward(k){if((!k.image_embeddings||!k.image_positional_embeddings)&&(k={...k,...await this.get_image_embeddings(k)}),!k.input_labels&&k.input_points){const ye=k.input_points.dims.slice(0,-1),Ee=ye.reduce((Ae,je)=>Ae*je,1);k.input_labels=new f.Tensor("int64",new BigInt64Array(Ee).fill(1n),ye)}const H={image_embeddings:k.image_embeddings,image_positional_embeddings:k.image_positional_embeddings};return k.input_points&&(H.input_points=k.input_points),k.input_labels&&(H.input_labels=k.input_labels),k.input_boxes&&(H.input_boxes=k.input_boxes),await D(this.sessions.prompt_encoder_mask_decoder,H)}async _call(k){return new vv(await super._call(k))}}class vv extends q{constructor({iou_scores:k,pred_masks:H}){super(),this.iou_scores=k,this.pred_masks=H}}class kp extends I{}class yv extends kp{}class wv extends kp{}class Ep extends I{}class Mv extends Ep{}class xv extends Ep{}class Js extends I{}class Tv extends Js{}class Cv extends Js{async _call(k){return new Li(await super._call(k))}}class kv extends Js{async _call(k){return new Et(await super._call(k))}}class Ev extends Js{async _call(k){return new un(await super._call(k))}}class Pp extends I{}class Pv extends Pp{}class $v extends Pp{async _call(k){return new un(await super._call(k))}}class Sv extends I{}class Iv extends Sv{}class jd extends I{}class Av extends jd{}class Ov extends jd{async _call(k){return new Li(await super._call(k))}}class Lv extends jd{async _call(k){return new Et(await super._call(k))}}class Pl extends I{}class Fv extends Pl{}class Dv extends Pl{async _call(k){return new Li(await super._call(k))}}class Bv extends Pl{async _call(k){return new Et(await super._call(k))}}class Rv extends Pl{async _call(k){return new un(await super._call(k))}}class Vd extends I{}class zv extends Vd{}class Nv extends Vd{async _call(k){return new Li(await super._call(k))}}class jv extends Vd{async _call(k){return new Et(await super._call(k))}}class EA extends I{}class Vv extends Js{}class Wv extends Js{async _call(k){return new Li(await super._call(k))}}class Uv extends Js{async _call(k){return new Et(await super._call(k))}}class Ca extends I{}class Gv extends Ca{}class Hv extends Ca{async _call(k){return new Li(await super._call(k))}}class Kv extends Ca{async _call(k){return new Et(await super._call(k))}}class qv extends Ca{async _call(k){return new Iw(await super._call(k))}}class Xv extends Ca{async _call(k){return new un(await super._call(k))}}class Qv extends I{}class Yv extends Qv{}class Wd extends I{}class PA extends Wd{}class Jv extends Wd{}class Zv extends Wd{async generate_speech(k,H,{threshold:ye=.5,minlenratio:Ee=0,maxlenratio:Ae=20,vocoder:je=null}={}){const Ue={input_ids:k},{encoder_outputs:Ye,encoder_attention_mask:lt}=await ne(this,Ue),Pt=Ye.dims[1]/this.config.reduction_factor,It=Math.floor(Pt*Ae),Lt=Math.floor(Pt*Ee),yt=this.config.num_mel_bins;let or=[],Mt=null,bt=null,Ht=0;for(;;){++Ht;const on=te(!!bt);let sn;bt?sn=bt.output_sequence_out:sn=new f.Tensor("float32",new Float32Array(yt),[1,1,yt]);let Zr={use_cache_branch:on,output_sequence:sn,encoder_attention_mask:lt,speaker_embeddings:H,encoder_hidden_states:Ye};this.addPastKeyValues(Zr,Mt),bt=await D(this.sessions.decoder_model_merged,Zr),Mt=this.getPastKeyValues(bt,Mt);const{prob:zt,spectrum:Vr}=bt;if(or.push(Vr),Ht>=Lt&&(Array.from(zt.data).filter(hn=>hn>=ye).length>0||Ht>=It))break}const vr=(0,f.cat)(or),{waveform:jr}=await D(je.sessions.model,{spectrogram:vr});return{spectrogram:vr,waveform:jr}}}class ey extends I{main_input_name="spectrogram"}class ty extends I{}class ry extends ty{}class $p extends I{}class ny extends $p{}class oy extends $p{}class Sp extends I{}class sy extends Sp{}class iy extends Sp{}class Ip extends I{}class ay extends Ip{}class ly extends Ip{}class Ap extends I{}class cy extends Ap{}class dy extends Ap{}class Ud extends I{}class uy extends Ud{}class fy extends Ud{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"text_model"})}}class py extends Ud{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"audio_model"})}}class my extends I{}class Op extends my{async _call(k){return new Ow(await super._call(k))}}class Gd extends I{}class $A extends Gd{}class hy extends Gd{}class gy extends Gd{}class Lp extends I{}class _y extends Lp{}class by extends Lp{}class Fp extends I{}class vy extends Fp{}class yy extends Fp{async _call(k){return new Et(await super._call(k))}}class Dp extends I{}class SA extends Dp{}class IA extends Dp{}class Bp extends I{forward_params=["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"];_apply_and_filter_by_delay_pattern_mask(k){const[H,ye]=k.dims,Ee=this.config.decoder.num_codebooks,Ae=ye-Ee;let je=0;for(let lt=0;lt<k.size;++lt){if(k.data[lt]===this.config.decoder.pad_token_id)continue;const Pt=lt%ye,It=Math.floor(lt/ye)%Ee,Lt=Pt-It;Lt>0&&Lt<=Ae&&(k.data[je++]=k.data[lt])}const Ue=Math.floor(H/Ee),Ye=je/(Ue*Ee);return new f.Tensor(k.type,k.data.slice(0,je),[Ue,Ee,Ye])}prepare_inputs_for_generation(k,H,ye){let Ee=structuredClone(k);for(let je=0;je<Ee.length;++je)for(let Ue=0;Ue<Ee[je].length;++Ue)je%this.config.decoder.num_codebooks>=Ue&&(Ee[je][Ue]=BigInt(this.config.decoder.pad_token_id));return ye.guidance_scale!==null&&ye.guidance_scale>1&&(Ee=Ee.concat(Ee)),super.prepare_inputs_for_generation(Ee,H,ye)}async generate(k){const H=await super.generate(k),ye=this._apply_and_filter_by_delay_pattern_mask(H).unsqueeze_(0),{audio_values:Ee}=await D(this.sessions.encodec_decode,{audio_codes:ye});return Ee}}class Hd extends I{}class wy extends Hd{}class My extends Hd{async _call(k){return new Et(await super._call(k))}}class xy extends Hd{}class Kd extends I{}class Ty extends Kd{}class Cy extends Kd{async _call(k){return new Et(await super._call(k))}}class ky extends Kd{}class qd extends I{}class Ey extends qd{}class Py extends qd{async _call(k){return new Et(await super._call(k))}}class $y extends qd{}class Xd extends I{}class Sy extends Xd{}class Iy extends Xd{async _call(k){return new Et(await super._call(k))}}class Ay extends Xd{}class Oy extends I{}class Ly extends Oy{}class Fy extends I{}class Dy extends Fy{forward_params=["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"];constructor(...k){super(...k),this._generation_mode="text"}async forward(k){const H=this._generation_mode??"text";let ye;if(H==="text"||!k.past_key_values){const Ye=this.sessions.prepare_inputs_embeds,lt=(0,a.pick)(k,Ye.inputNames);ye=await D(Ye,lt)}else{const Ye=this.sessions.gen_img_embeds,lt=(0,a.pick)({image_ids:k.input_ids},Ye.inputNames);ye=await D(Ye,lt)}const Ee={...k,...ye},Ae=await Me(this,Ee),je=this.sessions[H==="text"?"lm_head":"gen_head"];if(!je)throw new Error(`Unable to find "${je}" generation head`);const Ue=await D(je,(0,a.pick)(Ae,je.inputNames));return{...ye,...Ae,...Ue}}async generate(k){return this._generation_mode="text",super.generate(k)}async generate_images(k){this._generation_mode="image";const H=(k.inputs??k[this.main_input_name]).dims[1],Ee=(await super.generate(k)).slice(null,[H,null]),Ae=this.sessions.image_decode,{decoded_image:je}=await D(Ae,{generated_tokens:Ee}),Ue=je.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),Ye=[];for(const lt of Ue){const Pt=p.RawImage.fromTensor(lt);Ye.push(Pt)}return Ye}}class By extends q{constructor({char_logits:k,bpe_logits:H,wp_logits:ye}){super(),this.char_logits=k,this.bpe_logits=H,this.wp_logits=ye}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class Ry extends I{}class zy extends Ry{async _call(k){return new By(await super._call(k))}}class Rp extends I{}class Ny extends Rp{}class jy extends Rp{}class zp extends I{}class Vy extends zp{}class Wy extends zp{}class Uy extends I{forward_params=["input_ids","attention_mask","position_ids","audio_values","past_key_values"]}class Np extends Uy{_merge_input_ids_with_audio_features(k){const H=k.audio_features.dims.at(-1),ye=k.audio_features.view(-1,H);return J({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...k,audio_features:ye})}}class Gy extends Np{}class Qd extends I{main_input_name="input_values";forward_params=["input_values"]}class Hy extends q{constructor({audio_codes:k}){super(),this.audio_codes=k}}class Ky extends q{constructor({audio_values:k}){super(),this.audio_values=k}}class qy extends Qd{async encode(k){return new Hy(await D(this.sessions.encoder_model,k))}async decode(k){return new Ky(await D(this.sessions.decoder_model,k))}}class Xy extends Qd{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"encoder_model"})}}class Qy extends Qd{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"decoder_model"})}}class Yd extends I{main_input_name="input_values";forward_params=["input_values"]}class Yy extends q{constructor({audio_codes:k}){super(),this.audio_codes=k}}class Jy extends q{constructor({audio_values:k}){super(),this.audio_values=k}}class Zy extends Yd{async encode(k){return new Yy(await D(this.sessions.encoder_model,k))}async decode(k){return new Jy(await D(this.sessions.decoder_model,k))}}class ew extends Yd{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"encoder_model"})}}class tw extends Yd{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"decoder_model"})}}class Jd extends I{main_input_name="input_values";forward_params=["input_values"]}class rw extends Jd{async encode(k){return await D(this.sessions.encoder_model,k)}async decode(k){return await D(this.sessions.decoder_model,k)}}class nw extends Jd{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"encoder_model"})}}class ow extends Jd{static async from_pretrained(k,H={}){return super.from_pretrained(k,{...H,model_file_name:H.model_file_name??"decoder_model"})}}class nr{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(k,{progress_callback:H=null,config:ye=null,cache_dir:Ee=null,local_files_only:Ae=!1,revision:je="main",model_file_name:Ue=null,subfolder:Ye="onnx",device:lt=null,dtype:Pt=null,use_external_data_format:It=null,session_options:Lt={}}={}){const yt={progress_callback:H,config:ye,cache_dir:Ee,local_files_only:Ae,revision:je,model_file_name:Ue,subfolder:Ye,device:lt,dtype:Pt,use_external_data_format:It,session_options:Lt};if(yt.config=await n.AutoConfig.from_pretrained(k,yt),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const or=yt.config.model_type;for(const Mt of this.MODEL_CLASS_MAPPINGS){let bt=Mt.get(or);if(!bt){for(const Ht of Mt.values())if(Ht[0]===or){bt=Ht;break}if(!bt)continue}return await bt[1].from_pretrained(k,yt)}if(this.BASE_IF_FAIL)return Sw.has(or)||console.warn(`Unknown model class "${or}", attempting to construct from base class.`),await I.from_pretrained(k,yt);throw Error(`Unsupported model type: ${or}`)}}const AA=new Map([["bert",["BertModel",oe]],["neobert",["NeoBertModel",fe]],["modernbert",["ModernBertModel",Ge]],["nomic_bert",["NomicBertModel",zn]],["roformer",["RoFormerModel",yn]],["electra",["ElectraModel",K]],["esm",["EsmModel",Ms]],["convbert",["ConvBertModel",es]],["camembert",["CamembertModel",pt]],["deberta",["DebertaModel",qr]],["deberta-v2",["DebertaV2Model",$o]],["mpnet",["MPNetModel",xi]],["albert",["AlbertModel",nt]],["distilbert",["DistilBertModel",Qn]],["roberta",["RobertaModel",pd]],["xlm",["XLMModel",bd]],["xlm-roberta",["XLMRobertaModel",ol]],["clap",["ClapModel",uy]],["clip",["CLIPModel",gl]],["clipseg",["CLIPSegModel",yl]],["chinese_clip",["ChineseCLIPModel",vl]],["siglip",["SiglipModel",bl]],["jina_clip",["JinaCLIPModel",$i]],["mobilebert",["MobileBertModel",Cr]],["squeezebert",["SqueezeBertModel",me]],["wav2vec2",["Wav2Vec2Model",Tv]],["wav2vec2-bert",["Wav2Vec2BertModel",zv]],["unispeech",["UniSpeechModel",Av]],["unispeech-sat",["UniSpeechSatModel",Fv]],["hubert",["HubertModel",Vv]],["wavlm",["WavLMModel",Gv]],["audio-spectrogram-transformer",["ASTModel",al]],["vits",["VitsModel",Op]],["pyannote",["PyAnnoteModel",Pv]],["wespeaker-resnet",["WeSpeakerResNetModel",Iv]],["detr",["DetrModel",l0]],["rt_detr",["RTDetrModel",u0]],["rt_detr_v2",["RTDetrV2Model",p0]],["rf_detr",["RFDetrModel",g0]],["d_fine",["DFineModel",v0]],["table-transformer",["TableTransformerModel",w0]],["vit",["ViTModel",Lb]],["ijepa",["IJepaModel",Db]],["pvt",["PvtModel",Nb]],["vit_msn",["ViTMSNModel",Ub]],["vit_mae",["ViTMAEModel",Wb]],["groupvit",["GroupViTModel",Kb]],["fastvit",["FastViTModel",qb]],["mobilevit",["MobileViTModel",Jb]],["mobilevitv2",["MobileViTV2Model",e0]],["owlvit",["OwlViTModel",r0]],["owlv2",["Owlv2Model",o0]],["beit",["BeitModel",i0]],["deit",["DeiTModel",T0]],["hiera",["HieraModel",k0]],["convnext",["ConvNextModel",ev]],["convnextv2",["ConvNextV2Model",rv]],["dinov2",["Dinov2Model",ov]],["dinov2_with_registers",["Dinov2WithRegistersModel",iv]],["dinov3_vit",["DINOv3ViTModel",cv]],["dinov3_convnext",["DINOv3ConvNextModel",uv]],["resnet",["ResNetModel",P0]],["swin",["SwinModel",S0]],["swin2sr",["Swin2SRModel",O0]],["donut-swin",["DonutSwinModel",Z0]],["yolos",["YolosModel",mv]],["dpt",["DPTModel",F0]],["glpn",["GLPNModel",Q0]],["hifigan",["SpeechT5HifiGan",ey]],["efficientnet",["EfficientNetModel",vy]],["decision_transformer",["DecisionTransformerModel",Ly]],["patchtst",["PatchTSTForPrediction",Ny]],["patchtsmixer",["PatchTSMixerForPrediction",Vy]],["mobilenet_v1",["MobileNetV1Model",wy]],["mobilenet_v2",["MobileNetV2Model",Ty]],["mobilenet_v3",["MobileNetV3Model",Ey]],["mobilenet_v4",["MobileNetV4Model",Sy]],["maskformer",["MaskFormerModel",q0]],["mgp-str",["MgpstrForSceneTextRecognition",zy]],["style_text_to_speech_2",["StyleTextToSpeech2Model",Yv]]]),OA=new Map([["t5",["T5Model",Dr]],["longt5",["LongT5Model",Br]],["mt5",["MT5Model",ho]],["bart",["BartModel",Ir]],["mbart",["MBartModel",Oo]],["marian",["MarianModel",yv]],["whisper",["WhisperModel",cl]],["m2m_100",["M2M100Model",Mv]],["blenderbot",["BlenderbotModel",Jr]],["blenderbot-small",["BlenderbotSmallModel",Ks]]]),LA=new Map([["mimi",["MimiModel",qy]],["dac",["DacModel",Zy]],["snac",["SnacModel",rw]]]),FA=new Map([["bloom",["BloomModel",Pb]],["jais",["JAISModel",xl]],["gpt2",["GPT2Model",ya]],["gptj",["GPTJModel",v]],["gpt_bigcode",["GPTBigCodeModel",V]],["gpt_neo",["GPTNeoModel",Ma]],["gpt_neox",["GPTNeoXModel",Cl]],["codegen",["CodeGenModel",Fe]],["llama",["LlamaModel",dt]],["arcee",["ArceeModel",rr]],["lfm2",["Lfm2Model",Bd]],["smollm3",["SmolLM3Model",H_]],["exaone",["ExaoneModel",J_]],["olmo",["OlmoModel",rb]],["olmo2",["Olmo2Model",ob]],["mobilellm",["MobileLLMModel",eb]],["granite",["GraniteModel",ib]],["cohere",["CohereModel",lb]],["gemma",["GemmaModel",db]],["gemma2",["Gemma2Model",fb]],["gemma3_text",["Gemma3Model",mb]],["helium",["HeliumModel",q_]],["glm",["GlmModel",Q_]],["openelm",["OpenELMModel",gb]],["qwen2",["Qwen2Model",bb]],["qwen3",["Qwen3Model",yb]],["phi",["PhiModel",Tb]],["phi3",["Phi3Model",kb]],["mpt",["MptModel",Sb]],["opt",["OPTModel",Ab]],["mistral",["MistralModel",ny]],["ernie4_5",["Ernie4_5_Model",sy]],["starcoder2",["Starcoder2Model",ay]],["falcon",["FalconModel",cy]],["stablelm",["StableLmModel",_y]],["modernbert-decoder",["ModernBertDecoderModel",Gr]]]),jp=new Map([["speecht5",["SpeechT5ForSpeechToText",Jv]],["whisper",["WhisperForConditionalGeneration",dl]],["lite-whisper",["LiteWhisperForConditionalGeneration",Cd]],["moonshine",["MoonshineForConditionalGeneration",pl]]]),sw=new Map([["speecht5",["SpeechT5ForTextToSpeech",Zv]]]),iw=new Map([["vits",["VitsModel",Op]],["musicgen",["MusicgenForConditionalGeneration",Bp]]]),aw=new Map([["bert",["BertForSequenceClassification",z]],["neobert",["NeoBertForSequenceClassification",he]],["modernbert",["ModernBertForSequenceClassification",vt]],["roformer",["RoFormerForSequenceClassification",Hs]],["electra",["ElectraForSequenceClassification",_e]],["esm",["EsmForSequenceClassification",We]],["convbert",["ConvBertForSequenceClassification",Ot]],["camembert",["CamembertForSequenceClassification",Dt]],["deberta",["DebertaForSequenceClassification",Tr]],["deberta-v2",["DebertaV2ForSequenceClassification",Pn]],["mpnet",["MPNetForSequenceClassification",da]],["albert",["AlbertForSequenceClassification",ot]],["distilbert",["DistilBertForSequenceClassification",Qr]],["roberta",["RobertaForSequenceClassification",hd]],["xlm",["XLMForSequenceClassification",yd]],["xlm-roberta",["XLMRobertaForSequenceClassification",il]],["bart",["BartForSequenceClassification",Sn]],["mbart",["MBartForSequenceClassification",go]],["mobilebert",["MobileBertForSequenceClassification",os]],["squeezebert",["SqueezeBertForSequenceClassification",Ie]]]),lw=new Map([["bert",["BertForTokenClassification",ee]],["neobert",["NeoBertForTokenClassification",$e]],["modernbert",["ModernBertForTokenClassification",Tt]],["roformer",["RoFormerForTokenClassification",ys]],["electra",["ElectraForTokenClassification",Se]],["esm",["EsmForTokenClassification",Xe]],["convbert",["ConvBertForTokenClassification",ts]],["camembert",["CamembertForTokenClassification",Rt]],["deberta",["DebertaForTokenClassification",rn]],["deberta-v2",["DebertaV2ForTokenClassification",rs]],["mpnet",["MPNetForTokenClassification",Ce]],["distilbert",["DistilBertForTokenClassification",an]],["roberta",["RobertaForTokenClassification",gd]],["xlm",["XLMForTokenClassification",wd]],["xlm-roberta",["XLMRobertaForTokenClassification",xd]]]),Vp=new Map([["t5",["T5ForConditionalGeneration",ln]],["longt5",["LongT5ForConditionalGeneration",hr]],["mt5",["MT5ForConditionalGeneration",wn]],["bart",["BartForConditionalGeneration",Yr]],["mbart",["MBartForConditionalGeneration",nn]],["marian",["MarianMTModel",wv]],["m2m_100",["M2M100ForConditionalGeneration",xv]],["blenderbot",["BlenderbotForConditionalGeneration",Hr]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",ua]]]),Wp=new Map([["bloom",["BloomForCausalLM",$b]],["gpt2",["GPT2LMHeadModel",Ml]],["jais",["JAISLMHeadModel",Ai]],["gptj",["GPTJForCausalLM",P]],["gpt_bigcode",["GPTBigCodeForCausalLM",X]],["gpt_neo",["GPTNeoForCausalLM",Tl]],["gpt_neox",["GPTNeoXForCausalLM",kl]],["codegen",["CodeGenForCausalLM",Ve]],["llama",["LlamaForCausalLM",kt]],["arcee",["ArceeForCausalLM",dn]],["lfm2",["Lfm2ForCausalLM",G_]],["smollm3",["SmolLM3ForCausalLM",K_]],["exaone",["ExaoneForCausalLM",Z_]],["olmo",["OlmoForCausalLM",nb]],["olmo2",["Olmo2ForCausalLM",sb]],["mobilellm",["MobileLLMForCausalLM",tb]],["granite",["GraniteForCausalLM",ab]],["cohere",["CohereForCausalLM",cb]],["gemma",["GemmaForCausalLM",ub]],["gemma2",["Gemma2ForCausalLM",pb]],["gemma3_text",["Gemma3ForCausalLM",hb]],["helium",["HeliumForCausalLM",X_]],["glm",["GlmForCausalLM",Y_]],["openelm",["OpenELMForCausalLM",_b]],["qwen2",["Qwen2ForCausalLM",vb]],["qwen3",["Qwen3ForCausalLM",wb]],["phi",["PhiForCausalLM",Cb]],["phi3",["Phi3ForCausalLM",Eb]],["mpt",["MptForCausalLM",Ib]],["opt",["OPTForCausalLM",Ob]],["mbart",["MBartForCausalLM",cn]],["mistral",["MistralForCausalLM",oy]],["ernie4_5",["Ernie4_5_ForCausalLM",iy]],["starcoder2",["Starcoder2ForCausalLM",ly]],["falcon",["FalconForCausalLM",dy]],["trocr",["TrOCRForCausalLM",ry]],["stablelm",["StableLmForCausalLM",by]],["modernbert-decoder",["ModernBertDecoderForCausalLM",_r]],["phi3_v",["Phi3VForCausalLM",_a]]]),DA=new Map([["multi_modality",["MultiModalityCausalLM",Dy]]]),cw=new Map([["bert",["BertForMaskedLM",N]],["neobert",["NeoBertForMaskedLM",ce]],["modernbert",["ModernBertForMaskedLM",Ke]],["roformer",["RoFormerForMaskedLM",Gs]],["electra",["ElectraForMaskedLM",ae]],["esm",["EsmForMaskedLM",$n]],["convbert",["ConvBertForMaskedLM",mr]],["camembert",["CamembertForMaskedLM",et]],["deberta",["DebertaForMaskedLM",Xn]],["deberta-v2",["DebertaV2ForMaskedLM",So]],["mpnet",["MPNetForMaskedLM",Ti]],["albert",["AlbertForMaskedLM",Bt]],["distilbert",["DistilBertForMaskedLM",ns]],["roberta",["RobertaForMaskedLM",md]],["xlm",["XLMWithLMHeadModel",vd]],["xlm-roberta",["XLMRobertaForMaskedLM",sl]],["mobilebert",["MobileBertForMaskedLM",xs]],["squeezebert",["SqueezeBertForMaskedLM",ge]]]),dw=new Map([["bert",["BertForQuestionAnswering",le]],["neobert",["NeoBertForQuestionAnswering",Re]],["roformer",["RoFormerForQuestionAnswering",ws]],["electra",["ElectraForQuestionAnswering",Ne]],["convbert",["ConvBertForQuestionAnswering",S]],["camembert",["CamembertForQuestionAnswering",tn]],["deberta",["DebertaForQuestionAnswering",po]],["deberta-v2",["DebertaV2ForQuestionAnswering",Io]],["mpnet",["MPNetForQuestionAnswering",A]],["albert",["AlbertForQuestionAnswering",Je]],["distilbert",["DistilBertForQuestionAnswering",mo]],["roberta",["RobertaForQuestionAnswering",_d]],["xlm",["XLMForQuestionAnswering",Md]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Td]],["mobilebert",["MobileBertForQuestionAnswering",Ts]],["squeezebert",["SqueezeBertForQuestionAnswering",Be]]]),Up=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",ml]],["idefics3",["Idefics3ForConditionalGeneration",ha]],["smolvlm",["SmolVLMForConditionalGeneration",ki]]]),uw=new Map([["llava",["LlavaForConditionalGeneration",pa]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",kd]],["moondream1",["Moondream1ForConditionalGeneration",Ed]],["florence2",["Florence2ForConditionalGeneration",$d]],["qwen2-vl",["Qwen2VLForConditionalGeneration",xb]],["idefics3",["Idefics3ForConditionalGeneration",ha]],["smolvlm",["SmolVLMForConditionalGeneration",ki]],["paligemma",["PaliGemmaForConditionalGeneration",Id]],["llava_qwen2",["LlavaQwen2ForCausalLM",Ci]],["gemma3n",["Gemma3nForConditionalGeneration",ma]]]),fw=new Map([["ultravox",["UltravoxModel",Np]],["voxtral",["VoxtralForConditionalGeneration",Gy]]]),BA=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",ml]]]),pw=new Map([["vit",["ViTForImageClassification",Fb]],["ijepa",["IJepaForImageClassification",Bb]],["pvt",["PvtForImageClassification",jb]],["vit_msn",["ViTMSNForImageClassification",Gb]],["fastvit",["FastViTForImageClassification",Xb]],["mobilevit",["MobileViTForImageClassification",Zb]],["mobilevitv2",["MobileViTV2ForImageClassification",t0]],["beit",["BeitForImageClassification",a0]],["deit",["DeiTForImageClassification",C0]],["hiera",["HieraForImageClassification",E0]],["convnext",["ConvNextForImageClassification",tv]],["convnextv2",["ConvNextV2ForImageClassification",nv]],["dinov2",["Dinov2ForImageClassification",sv]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",av]],["resnet",["ResNetForImageClassification",$0]],["swin",["SwinForImageClassification",I0]],["segformer",["SegformerForImageClassification",hy]],["efficientnet",["EfficientNetForImageClassification",yy]],["mobilenet_v1",["MobileNetV1ForImageClassification",My]],["mobilenet_v2",["MobileNetV2ForImageClassification",Cy]],["mobilenet_v3",["MobileNetV3ForImageClassification",Py]],["mobilenet_v4",["MobileNetV4ForImageClassification",Iy]]]),mw=new Map([["detr",["DetrForObjectDetection",c0]],["rt_detr",["RTDetrForObjectDetection",f0]],["rt_detr_v2",["RTDetrV2ForObjectDetection",m0]],["rf_detr",["RFDetrForObjectDetection",_0]],["d_fine",["DFineForObjectDetection",y0]],["table-transformer",["TableTransformerForObjectDetection",M0]],["yolos",["YolosForObjectDetection",hv]]]),hw=new Map([["owlvit",["OwlViTForObjectDetection",n0]],["owlv2",["Owlv2ForObjectDetection",s0]],["grounding-dino",["GroundingDinoForObjectDetection",pv]]]),ka=new Map([["detr",["DetrForSegmentation",ap]],["clipseg",["CLIPSegForImageSegmentation",wl]]]),gw=new Map([["segformer",["SegformerForSemanticSegmentation",gy]],["sapiens",["SapiensForSemanticSegmentation",z0]],["swin",["SwinForSemanticSegmentation",A0]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",xy]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",ky]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",$y]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",Ay]]]),_w=new Map([["detr",["DetrForSegmentation",ap]],["maskformer",["MaskFormerForInstanceSegmentation",X0]]]),bw=new Map([["sam",["SamModel",bv]]]),vw=new Map([["wav2vec2",["Wav2Vec2ForCTC",Cv]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Nv]],["unispeech",["UniSpeechForCTC",Ov]],["unispeech-sat",["UniSpeechSatForCTC",Dv]],["wavlm",["WavLMForCTC",Hv]],["hubert",["HubertForCTC",Wv]]]),yw=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",kv]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",jv]],["unispeech",["UniSpeechForSequenceClassification",Lv]],["unispeech-sat",["UniSpeechSatForSequenceClassification",Bv]],["wavlm",["WavLMForSequenceClassification",Kv]],["hubert",["HubertForSequenceClassification",Uv]],["audio-spectrogram-transformer",["ASTForAudioClassification",Qs]]]),ww=new Map([["wavlm",["WavLMForXVector",qv]]]),Mw=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",Rv]],["wavlm",["WavLMForAudioFrameClassification",Xv]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Ev]],["pyannote",["PyAnnoteForAudioFrameClassification",$v]]]),xw=new Map([["vitmatte",["VitMatteForImageMatting",Yb]]]),RA=new Map([["patchtst",["PatchTSTForPrediction",jy]],["patchtsmixer",["PatchTSMixerForPrediction",Wy]]]),Tw=new Map([["swin2sr",["Swin2SRForImageSuperResolution",L0]]]),Cw=new Map([["dpt",["DPTForDepthEstimation",D0]],["depth_anything",["DepthAnythingForDepthEstimation",R0]],["glpn",["GLPNForDepthEstimation",Y0]],["sapiens",["SapiensForDepthEstimation",N0]],["depth_pro",["DepthProForDepthEstimation",W0]],["metric3d",["Metric3DForDepthEstimation",G0]],["metric3dv2",["Metric3Dv2ForDepthEstimation",K0]]]),kw=new Map([["sapiens",["SapiensForNormalEstimation",j0]]]),Ew=new Map([["vitpose",["VitPoseForPoseEstimation",zb]]]),Pw=new Map([["clip",["CLIPVisionModelWithProjection",Fd]],["siglip",["SiglipVisionModel",ht]],["jina_clip",["JinaCLIPVisionModel",Si]]]),$w=[[AA,g.EncoderOnly],[OA,g.EncoderDecoder],[FA,g.DecoderOnly],[LA,g.AutoEncoder],[aw,g.EncoderOnly],[lw,g.EncoderOnly],[Vp,g.Seq2Seq],[jp,g.Seq2Seq],[Wp,g.DecoderOnly],[DA,g.MultiModality],[cw,g.EncoderOnly],[dw,g.EncoderOnly],[Up,g.Vision2Seq],[uw,g.ImageTextToText],[fw,g.AudioTextToText],[pw,g.EncoderOnly],[ka,g.EncoderOnly],[_w,g.EncoderOnly],[gw,g.EncoderOnly],[xw,g.EncoderOnly],[RA,g.EncoderOnly],[Tw,g.EncoderOnly],[Cw,g.EncoderOnly],[kw,g.EncoderOnly],[Ew,g.EncoderOnly],[mw,g.EncoderOnly],[hw,g.EncoderOnly],[bw,g.MaskGeneration],[vw,g.EncoderOnly],[yw,g.EncoderOnly],[sw,g.Seq2Seq],[iw,g.EncoderOnly],[ww,g.EncoderOnly],[Mw,g.EncoderOnly],[Pw,g.EncoderOnly]];for(const[C,k]of $w)for(const[H,ye]of C.values())M.set(H,k),w.set(ye,H),x.set(H,ye);const zA=[["MusicgenForConditionalGeneration",Bp,g.Musicgen],["Phi3VForCausalLM",_a,g.Phi3V],["CLIPTextModelWithProjection",_l,g.EncoderOnly],["SiglipTextModel",Ei,g.EncoderOnly],["JinaCLIPTextModel",so,g.EncoderOnly],["ClapTextModelWithProjection",fy,g.EncoderOnly],["ClapAudioModelWithProjection",py,g.EncoderOnly],["DacEncoderModel",ew,g.EncoderOnly],["DacDecoderModel",tw,g.EncoderOnly],["MimiEncoderModel",Xy,g.EncoderOnly],["MimiDecoderModel",Qy,g.EncoderOnly],["SnacEncoderModel",nw,g.EncoderOnly],["SnacDecoderModel",ow,g.EncoderOnly],["Gemma3nForConditionalGeneration",ma,g.ImageAudioTextToText]];for(const[C,k,H]of zA)M.set(C,H),w.set(k,C),x.set(C,k);const Sw=new Map([["modnet",ka],["birefnet",ka],["isnet",ka],["ben",ka]]);for(const[C,k]of Sw.entries())k.set(C,["PreTrainedModel",I]),M.set(C,g.EncoderOnly),w.set(I,C),x.set(C,I);class NA extends nr{static MODEL_CLASS_MAPPINGS=$w.map(k=>k[0]);static BASE_IF_FAIL=!0}class jA extends nr{static MODEL_CLASS_MAPPINGS=[aw]}class VA extends nr{static MODEL_CLASS_MAPPINGS=[lw]}class WA extends nr{static MODEL_CLASS_MAPPINGS=[Vp]}class UA extends nr{static MODEL_CLASS_MAPPINGS=[jp]}class GA extends nr{static MODEL_CLASS_MAPPINGS=[sw]}class HA extends nr{static MODEL_CLASS_MAPPINGS=[iw]}class KA extends nr{static MODEL_CLASS_MAPPINGS=[Wp]}class qA extends nr{static MODEL_CLASS_MAPPINGS=[cw]}class XA extends nr{static MODEL_CLASS_MAPPINGS=[dw]}class QA extends nr{static MODEL_CLASS_MAPPINGS=[Up]}class YA extends nr{static MODEL_CLASS_MAPPINGS=[pw]}class JA extends nr{static MODEL_CLASS_MAPPINGS=[ka]}class ZA extends nr{static MODEL_CLASS_MAPPINGS=[gw]}class e3 extends nr{static MODEL_CLASS_MAPPINGS=[_w]}class t3 extends nr{static MODEL_CLASS_MAPPINGS=[mw]}class r3 extends nr{static MODEL_CLASS_MAPPINGS=[hw]}class n3 extends nr{static MODEL_CLASS_MAPPINGS=[bw]}class o3 extends nr{static MODEL_CLASS_MAPPINGS=[vw]}class s3 extends nr{static MODEL_CLASS_MAPPINGS=[yw]}class i3 extends nr{static MODEL_CLASS_MAPPINGS=[ww]}class a3 extends nr{static MODEL_CLASS_MAPPINGS=[Mw]}class l3 extends nr{static MODEL_CLASS_MAPPINGS=[BA]}class c3 extends nr{static MODEL_CLASS_MAPPINGS=[xw]}class d3 extends nr{static MODEL_CLASS_MAPPINGS=[Tw]}class u3 extends nr{static MODEL_CLASS_MAPPINGS=[Cw]}class f3 extends nr{static MODEL_CLASS_MAPPINGS=[kw]}class p3 extends nr{static MODEL_CLASS_MAPPINGS=[Ew]}class m3 extends nr{static MODEL_CLASS_MAPPINGS=[Pw]}class h3 extends nr{static MODEL_CLASS_MAPPINGS=[uw]}class g3 extends nr{static MODEL_CLASS_MAPPINGS=[fw]}class _3 extends q{constructor({logits:k,past_key_values:H,encoder_outputs:ye,decoder_attentions:Ee=null,cross_attentions:Ae=null}){super(),this.logits=k,this.past_key_values=H,this.encoder_outputs=ye,this.decoder_attentions=Ee,this.cross_attentions=Ae}}class Et extends q{constructor({logits:k,...H}){super(),this.logits=k;const ye=Object.values(H);ye.length>0&&(this.attentions=ye)}}class Iw extends q{constructor({logits:k,embeddings:H}){super(),this.logits=k,this.embeddings=H}}class un extends q{constructor({logits:k}){super(),this.logits=k}}class mn extends q{constructor({logits:k}){super(),this.logits=k}}class xn extends q{constructor({start_logits:k,end_logits:H}){super(),this.start_logits=k,this.end_logits=H}}class Li extends q{constructor({logits:k}){super(),this.logits=k}}class b3 extends q{constructor({logits:k,past_key_values:H}){super(),this.logits=k,this.past_key_values=H}}class Aw extends q{constructor({alphas:k}){super(),this.alphas=k}}class Ow extends q{constructor({waveform:k,spectrogram:H}){super(),this.waveform=k,this.spectrogram=H}}}),"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":((e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var o=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(a){super(a);const l=this.config.sampling_rate,c=(0,o.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=c,this.window=(0,o.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(a,l){return(0,o.spectrogram)(a,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:l,transpose:!0})}async _call(a){(0,n.validate_audio_inputs)(a,"ASTFeatureExtractor");const l=await this._extract_fbank_features(a,this.config.max_length);if(this.config.do_normalize){const c=this.std*2,u=l.data;for(let d=0;d<u.length;++d)u[d]=(u[d]-this.mean)/c}return{input_values:l.unsqueeze_(0)}}}}),"./src/models/auto/feature_extraction_auto.js":((e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>i});var n=r("./src/utils/constants.js"),o=r("./src/utils/hub.js");r("./src/base/feature_extraction_utils.js");var s=r("./src/models/feature_extractors.js");class i{static async from_pretrained(l,c={}){const u=await(0,o.getModelJSON)(l,n.FEATURE_EXTRACTOR_NAME,!0,c),d=u.feature_extractor_type,f=s[d];if(!f)throw new Error(`Unknown feature_extractor_type: '${d}'. Please report this at ${n.GITHUB_ISSUE_URL}.`);return new f(u)}}}),"./src/models/auto/image_processing_auto.js":((e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>a});var n=r("./src/utils/constants.js"),o=r("./src/utils/hub.js"),s=r("./src/base/image_processors_utils.js"),i=r("./src/models/image_processors.js");class a{static async from_pretrained(c,u={}){const d=await(0,o.getModelJSON)(c,n.IMAGE_PROCESSOR_NAME,!0,u),f=d.image_processor_type??d.feature_extractor_type;let p=i[f?.replace(/Fast$/,"")];return p||(f!==void 0&&console.warn(`Image processor type '${f}' not found, assuming base ImageProcessor. Please report this at ${n.GITHUB_ISSUE_URL}.`),p=s.ImageProcessor),new p(d)}}}),"./src/models/auto/processing_auto.js":((e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>c});var n=r("./src/utils/constants.js"),o=r("./src/utils/hub.js"),s=r("./src/base/processing_utils.js"),i=r("./src/models/processors.js"),a=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class c{static async from_pretrained(d,f={}){const p=await(0,o.getModelJSON)(d,n.IMAGE_PROCESSOR_NAME,!0,f),{image_processor_type:m,feature_extractor_type:b,processor_class:E}=p;if(E&&i[E])return i[E].from_pretrained(d,f);if(!m&&!b)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const h={};if(m){const T=a[m.replace(/Fast$/,"")];if(!T)throw new Error(`Unknown image_processor_type: '${m}'.`);h.image_processor=new T(p)}if(b){const T=a[b];if(T)h.image_processor=new T(p);else{const g=l[b];if(!g)throw new Error(`Unknown feature_extractor_type: '${b}'.`);h.feature_extractor=new g(p)}}const _={};return new s.Processor(_,h,null)}}}),"./src/models/beit/image_processing_beit.js":((e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/bit/image_processing_bit.js":((e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/chinese_clip/image_processing_chinese_clip.js":((e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/clap/feature_extraction_clap.js":((e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var o=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(a){super(a),this.mel_filters=(0,o.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,o.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,o.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(a,l,c,u){let d;const f=a.length-l;if(f>0)if(c==="rand_trunc"){const p=Math.floor(Math.random()*(f+1));a=a.subarray(p,p+l),d=await this._extract_fbank_features(a,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${c}" not implemented`);else{if(f<0){let p=new Float64Array(l);if(p.set(a),u==="repeat")for(let m=a.length;m<l;m+=a.length)p.set(a.subarray(0,Math.min(a.length,l-m)),m);else if(u==="repeatpad")for(let m=a.length;m<-f;m+=a.length)p.set(a,m);a=p}if(c==="fusion")throw new Error(`Truncation strategy "${c}" not implemented`);d=await this._extract_fbank_features(a,this.mel_filters_slaney,this.config.nb_max_samples)}return d.unsqueeze_(0)}async _extract_fbank_features(a,l,c=null){return(0,o.spectrogram)(a,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:l,log_mel:"dB",max_num_frames:c,do_pad:!1,transpose:!0})}async _call(a,{max_length:l=null}={}){return(0,n.validate_audio_inputs)(a,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(a,l??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}}),"./src/models/clip/image_processing_clip.js":((e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>s,CLIPImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/convnext/image_processing_convnext.js":((e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>s,ConvNextImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{constructor(a){super(a),this.crop_pct=this.config.crop_pct??224/256}async resize(a){const l=this.size?.shortest_edge;if(l===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(l<384){const c=Math.floor(l/this.crop_pct),[u,d]=this.get_resize_output_image_size(a,{shortest_edge:c});a=await a.resize(u,d,{resample:this.resample}),a=await a.center_crop(l,l)}else a=await a.resize(l,l,{resample:this.resample});return a}}class s extends o{}}),"./src/models/dac/feature_extraction_dac.js":((e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>o});var n=r("./src/models/encodec/feature_extraction_encodec.js");class o extends n.EncodecFeatureExtractor{}}),"./src/models/deit/image_processing_deit.js":((e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>s,DeiTImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/detr/image_processing_detr.js":((e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>i,DetrImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(l){const c=await super._call(l),u=[c.pixel_values.dims[0],64,64],d=(0,o.full)(u,1n);return{...c,pixel_mask:d}}post_process_object_detection(...l){return(0,n.post_process_object_detection)(...l)}post_process_panoptic_segmentation(...l){return(0,n.post_process_panoptic_segmentation)(...l)}post_process_instance_segmentation(...l){return(0,n.post_process_instance_segmentation)(...l)}}class i extends s{}}),"./src/models/dinov3_vit/image_processing_dinov3_vit.js":((e,t,r)=>{r.r(t),r.d(t,{DINOv3ViTImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/donut/image_processing_donut.js":((e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>s,DonutImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{pad_image(a,l,c,u={}){const[d,f,p]=l;let m=this.image_mean;Array.isArray(this.image_mean)||(m=new Array(p).fill(m));let b=this.image_std;Array.isArray(b)||(b=new Array(p).fill(m));const E=m.map((h,_)=>-h/b[_]);return super.pad_image(a,l,c,{center:!0,constant_values:E,...u})}}class s extends o{}}),"./src/models/dpt/image_processing_dpt.js":((e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>s,DPTImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/efficientnet/image_processing_efficientnet.js":((e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{constructor(i){super(i),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(a=>a*a))}}}),"./src/models/encodec/feature_extraction_encodec.js":((e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),o=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(a){(0,n.validate_audio_inputs)(a,"EncodecFeatureExtractor"),a instanceof Float64Array&&(a=new Float32Array(a));const l=this.config.feature_size;if(a.length%l!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${l}).`);const c=[1,l,a.length/l];return{input_values:new o.Tensor("float32",a,c)}}}}),"./src/models/feature_extractors.js":((e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>n.ASTFeatureExtractor,ClapFeatureExtractor:()=>s.ClapFeatureExtractor,DacFeatureExtractor:()=>i.DacFeatureExtractor,EncodecFeatureExtractor:()=>o.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>a.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>E.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,PyAnnoteFeatureExtractor:()=>c.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>u.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>d.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>f.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>p.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>m.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>b.WhisperFeatureExtractor});var n=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),o=r("./src/models/encodec/feature_extraction_encodec.js"),s=r("./src/models/clap/feature_extraction_clap.js"),i=r("./src/models/dac/feature_extraction_dac.js"),a=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),c=r("./src/models/pyannote/feature_extraction_pyannote.js"),u=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),d=r("./src/models/snac/feature_extraction_snac.js"),f=r("./src/models/speecht5/feature_extraction_speecht5.js"),p=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),m=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),b=r("./src/models/whisper/feature_extraction_whisper.js"),E=r("./src/base/image_processors_utils.js")}),"./src/models/florence2/processing_florence2.js":((e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>i});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class i extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;constructor(l,c,u){super(l,c,u);const{tasks_answer_post_processing_type:d,task_prompts_without_inputs:f,task_prompts_with_input:p}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(d??{})),this.task_prompts_without_inputs=new Map(Object.entries(f??{})),this.task_prompts_with_input=new Map(Object.entries(p??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(l){typeof l=="string"&&(l=[l]);const c=[];for(const u of l)if(this.task_prompts_without_inputs.has(u))c.push(this.task_prompts_without_inputs.get(u));else{for(const[d,f]of this.task_prompts_with_input)if(u.includes(d)){c.push(f.replaceAll("{input}",u).replaceAll(d,""));break}c.length!==l.length&&c.push(u)}return c}post_process_generation(l,c,u){const d=this.tasks_answer_post_processing_type.get(c)??"pure_text";l=l.replaceAll("<s>","").replaceAll("</s>","");let f;switch(d){case"pure_text":f=l;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const p=d==="ocr"?"quad_boxes":"bboxes",m=l.matchAll(this.regexes[p]),b=[],E=[];for(const[h,_,...T]of m)b.push(_?_.trim():b.at(-1)??""),E.push(T.map((g,M)=>(Number(g)+.5)/this.size_per_bin*u[M%2]));f={labels:b,[p]:E};break;default:throw new Error(`Task "${c}" (of type "${d}") not yet implemented.`)}return{[c]:f}}async _call(l,c=null,u={}){if(!l&&!c)throw new Error("Either text or images must be provided");const d=await this.image_processor(l,u),f=c?this.tokenizer(this.construct_prompts(c),u):{};return{...d,...f}}}}),"./src/models/gemma3n/feature_extraction_gemma3n.js":((e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js"),o=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class i extends n.FeatureExtractor{constructor(l){super(l);const{fft_length:c,feature_size:u,min_frequency:d,max_frequency:f,sampling_rate:p,frame_length:m}=this.config,b=(0,s.mel_filter_bank)(Math.floor(1+c/2),u,d,f,p,null,"htk",!1);this.mel_filters=b,this.window=(0,s.window_function)(m,"hann")}async _extract_fbank_features(l,c){return(0,s.spectrogram)(l,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(l,{max_length:c=48e4,truncation:u=!0,padding:d=!0,pad_to_multiple_of:f=128}={}){if((0,n.validate_audio_inputs)(l,"Gemma3nAudioFeatureExtractor"),u&&l.length>c&&(l=l.slice(0,c)),d&&l.length%f!==0){const b=f-l.length%f,E=new Float64Array(l.length+b);E.set(l),this.config.padding_value!==0&&E.fill(this.config.padding_value,l.length),l=E}const p=await this._extract_fbank_features(l,this.config.max_length),m=(0,o.full)([1,p.dims[0]],!0);return{input_features:p.unsqueeze_(0),input_features_mask:m}}}}),"./src/models/gemma3n/processing_gemma3n.js":((e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>a});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/models/auto/feature_extraction_auto.js"),i=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class a extends n.Processor{static image_processor_class=o.AutoImageProcessor;static feature_extractor_class=s.AutoFeatureExtractor;static tokenizer_class=i.AutoTokenizer;static uses_processor_config=!0;static uses_chat_template_file=!0;constructor(c,u,d){super(c,u,d),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:f,boa_token:p,audio_token:m,eoa_token:b,image_token_id:E,boi_token:h,image_token:_,eoi_token:T}=this.tokenizer.config;this.audio_token_id=f,this.boa_token=p,this.audio_token=m;const g=m.repeat(this.audio_seq_length);this.full_audio_sequence=`

${p}${g}${b}

`,this.image_token_id=E,this.boi_token=h,this.image_token=_;const M=_.repeat(this.image_seq_length);this.full_image_sequence=`

${h}${M}${T}

`}async _call(c,u=null,d=null,f={}){typeof c=="string"&&(c=[c]);let p;d&&(p=await this.feature_extractor(d,f),c=c.map(E=>E.replaceAll(this.audio_token,this.full_audio_sequence)));let m;return u&&(m=await this.image_processor(u,f),c=c.map(E=>E.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(c,f),...m,...p}}}}),"./src/models/glpn/image_processing_glpn.js":((e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/grounding_dino/image_processing_grounding_dino.js":((e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(a){const l=await super._call(a),c=l.pixel_values.dims,u=(0,o.ones)([c[0],c[2],c[3]]);return{...l,pixel_mask:u}}}}),"./src/models/grounding_dino/processing_grounding_dino.js":((e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),i=r("./src/base/image_processors_utils.js");function a(c,u){const f=c.dims.at(-1)-1,p=c.tolist();p.fill(!1,0,1),p.fill(!1,f);const m=u.tolist();return p.map((b,E)=>b?E:null).filter(b=>b!==null).map(b=>m[b])}class l extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;async _call(u,d,f={}){const p=u?await this.image_processor(u,f):{};return{...d?this.tokenizer(d,f):{},...p}}post_process_grounded_object_detection(u,d,{box_threshold:f=.25,text_threshold:p=.25,target_sizes:m=null}={}){const{logits:b,pred_boxes:E}=u,h=b.dims[0];if(m!==null&&m.length!==h)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const _=b.dims.at(1),T=b.sigmoid(),g=T.max(-1).tolist(),M=E.tolist().map(w=>w.map($=>(0,i.center_to_corners_format)($))),x=[];for(let w=0;w<h;++w){const $=m!==null?m[w]:null;$!==null&&(M[w]=M[w].map(D=>D.map((re,Z)=>re*$[(Z+1)%2])));const O=g[w],L=[],G=[],j=[];for(let D=0;D<_;++D){const re=O[D];if(re<=f)continue;const Z=M[w][D],te=T[w][D];L.push(re),j.push(Z);const ie=a(te.gt(p),d[w]);G.push(ie)}x.push({scores:L,boxes:j,labels:this.batch_decode(G)})}return x}}}),"./src/models/idefics3/image_processing_idefics3.js":((e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/tensor.js");class s extends n.ImageProcessor{constructor(a){super(a),this.do_image_splitting=a.do_image_splitting??!0,this.max_image_size=a.max_image_size}get_resize_for_vision_encoder(a,l){let[c,u]=a.dims.slice(-2);const d=u/c;return u>=c?(u=Math.ceil(u/l)*l,c=Math.floor(u/d),c=Math.ceil(c/l)*l):(c=Math.ceil(c/l)*l,u=Math.floor(c*d),u=Math.ceil(u/l)*l),{height:c,width:u}}async _call(a,{do_image_splitting:l=null,return_row_col_info:c=!1}={}){let u;if(!Array.isArray(a))u=[[a]];else{if(a.length===0||!a[0])throw new Error("No images provided.");Array.isArray(a[0])?u=a:u=[a]}let d=[],f=[],p=[];const m=[],b=[];for(const w of u){let $=await Promise.all(w.map(G=>this.preprocess(G)));m.push(...$.map(G=>G.original_size)),b.push(...$.map(G=>G.reshaped_input_size)),$.forEach(G=>G.pixel_values.unsqueeze_(0));const{longest_edge:O}=this.max_image_size;let L;if(l??this.do_image_splitting){let G=new Array($.length),j=new Array($.length);L=await Promise.all($.map(async(D,re)=>{const Z=this.get_resize_for_vision_encoder(D.pixel_values,O),te=await(0,o.interpolate_4d)(D.pixel_values,{size:[Z.height,Z.width]}),{frames:ie,num_splits_h:ne,num_splits_w:ve}=await this.split_image(te,this.max_image_size);return G[re]=ne,j[re]=ve,(0,o.cat)(ie,0)})),f.push(G),p.push(j)}else{const G=[O,O];L=await Promise.all($.map(j=>(0,o.interpolate_4d)(j.pixel_values,{size:G}))),f.push(new Array($.length).fill(0)),p.push(new Array($.length).fill(0))}d.push((0,o.cat)(L,0))}const E=d.length,[h,_,T,g]=d[0].dims;let M,x;if(E===1)M=d[0].unsqueeze_(0),x=(0,o.full)([E,h,T,g],!0);else{const w=Math.max(...d.map(L=>L.dims.at(0)));x=(0,o.full)([E,w,T,g],!0);const $=x.data,O=w*T*g;for(let L=0;L<E;++L){const G=d[L].dims[0];if(G<w){d[L]=(0,o.cat)([d[L],(0,o.full)([w-G,_,T,g],0)],0);const j=L*O+G*T*g,D=(L+1)*O;$.fill(!1,j,D)}}M=(0,o.stack)(d,0)}return{pixel_values:M,pixel_attention_mask:x,original_sizes:m,reshaped_input_sizes:b,...c?{rows:f,cols:p}:{}}}async split_image(a,{longest_edge:l}){const c=l,u=l,d=[],[f,p]=a.dims.slice(-2);let m=0,b=0;if(f>c||p>u){m=Math.ceil(f/c),b=Math.ceil(p/u);const E=Math.ceil(f/m),h=Math.ceil(p/b);for(let g=0;g<m;++g)for(let M=0;M<b;++M){let x,w,$,O;g===m-1?(w=f-E,O=f):(w=g*E,O=(g+1)*E),M===b-1?(x=p-h,$=p):(x=M*h,$=(M+1)*h);const L=[w,x],G=[O,$],j=await(0,o.slice)(a,L,G,[2,3]);d.push(j)}const _=c,T=u;(f!==_||p!==T)&&(a=await(0,o.interpolate_4d)(a,{size:[_,T]}))}return d.push(a),{frames:d,num_splits_h:m,num_splits_w:b}}}}),"./src/models/idefics3/processing_idefics3.js":((e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>u});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");var i=r("./src/utils/core.js");function a(d,f,p,m,b,E){let h="";for(let _=0;_<f;++_){for(let T=0;T<p;++T)h+=m+`<row_${_+1}_col_${T+1}>`+b.repeat(d);h+=`
`}return h+=`
${m}${E}`+b.repeat(d)+`${m}`,h}function l(d,f,p,m){return`${f}${m}`+p.repeat(d)+`${f}`}function c(d,f,p,m,b,E){return d===0&&f===0?l(p,m,b,E):a(p,d,f,m,b,E)}class u extends n.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;fake_image_token="<fake_token_around_image>";image_token="<image>";global_img_token="<global-img>";async _call(f,p=null,m={}){m.return_row_col_info??=!0;let b;p&&(b=await this.image_processor(p,m)),Array.isArray(f)||(f=[f]);const E=b.rows??[new Array(f.length).fill(0)],h=b.cols??[new Array(f.length).fill(0)],_=this.config.image_seq_len,T=[],g=[];for(let x=0;x<f.length;++x){const w=f[x],$=E[x],O=h[x];T.push((0,i.count)(w,this.image_token));const L=$.map((D,re)=>c(D,O[re],_,this.fake_image_token,this.image_token,this.global_img_token)),G=w.split(this.image_token);if(G.length===0)throw new Error("The image token should be present in the text.");let j=G[0];for(let D=0;D<L.length;++D)j+=L[D]+G[D+1];g.push(j)}return{...this.tokenizer(g),...b}}}}),"./src/models/image_processors.js":((e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n.BeitFeatureExtractor,BitImageProcessor:()=>o.BitImageProcessor,CLIPFeatureExtractor:()=>i.CLIPFeatureExtractor,CLIPImageProcessor:()=>i.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>s.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>a.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>a.ConvNextImageProcessor,DINOv3ViTImageProcessor:()=>u.DINOv3ViTImageProcessor,DPTFeatureExtractor:()=>f.DPTFeatureExtractor,DPTImageProcessor:()=>f.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>c.DetrFeatureExtractor,DetrImageProcessor:()=>c.DetrImageProcessor,DonutFeatureExtractor:()=>d.DonutFeatureExtractor,DonutImageProcessor:()=>d.DonutImageProcessor,EfficientNetImageProcessor:()=>p.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>m.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>b.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>E.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>_.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>T.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>g.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>M.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>M.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>x.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>x.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>w.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>w.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>$.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>$.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>O.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>O.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>L.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>L.MobileViTImageProcessor,NougatImageProcessor:()=>G.NougatImageProcessor,OwlViTFeatureExtractor:()=>D.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>D.OwlViTImageProcessor,Owlv2ImageProcessor:()=>j.Owlv2ImageProcessor,Phi3VImageProcessor:()=>re.Phi3VImageProcessor,PvtImageProcessor:()=>Z.PvtImageProcessor,Qwen2VLImageProcessor:()=>te.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>ie.RTDetrImageProcessor,SamImageProcessor:()=>ne.SamImageProcessor,SegformerFeatureExtractor:()=>ve.SegformerFeatureExtractor,SegformerImageProcessor:()=>ve.SegformerImageProcessor,SiglipImageProcessor:()=>Me.SiglipImageProcessor,SmolVLMImageProcessor:()=>W.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>R.Swin2SRImageProcessor,VLMImageProcessor:()=>h.VLMImageProcessor,ViTFeatureExtractor:()=>J.ViTFeatureExtractor,ViTImageProcessor:()=>J.ViTImageProcessor,VitMatteImageProcessor:()=>U.VitMatteImageProcessor,VitPoseImageProcessor:()=>be.VitPoseImageProcessor,YolosFeatureExtractor:()=>Le.YolosFeatureExtractor,YolosImageProcessor:()=>Le.YolosImageProcessor});var n=r("./src/models/beit/image_processing_beit.js"),o=r("./src/models/bit/image_processing_bit.js"),s=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),i=r("./src/models/clip/image_processing_clip.js"),a=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),c=r("./src/models/detr/image_processing_detr.js"),u=r("./src/models/dinov3_vit/image_processing_dinov3_vit.js"),d=r("./src/models/donut/image_processing_donut.js"),f=r("./src/models/dpt/image_processing_dpt.js"),p=r("./src/models/efficientnet/image_processing_efficientnet.js"),m=r("./src/models/glpn/image_processing_glpn.js"),b=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),E=r("./src/models/idefics3/image_processing_idefics3.js"),h=r("./src/models/janus/image_processing_janus.js"),_=r("./src/models/jina_clip/image_processing_jina_clip.js"),T=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),g=r("./src/models/mask2former/image_processing_mask2former.js"),M=r("./src/models/maskformer/image_processing_maskformer.js"),x=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),w=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),$=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),O=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),L=r("./src/models/mobilevit/image_processing_mobilevit.js"),G=r("./src/models/nougat/image_processing_nougat.js"),j=r("./src/models/owlv2/image_processing_owlv2.js"),D=r("./src/models/owlvit/image_processing_owlvit.js"),re=r("./src/models/phi3_v/image_processing_phi3_v.js"),Z=r("./src/models/pvt/image_processing_pvt.js"),te=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),ie=r("./src/models/rt_detr/image_processing_rt_detr.js"),ne=r("./src/models/sam/image_processing_sam.js"),ve=r("./src/models/segformer/image_processing_segformer.js"),Me=r("./src/models/siglip/image_processing_siglip.js"),W=r("./src/models/smolvlm/image_processing_smolvlm.js"),R=r("./src/models/swin2sr/image_processing_swin2sr.js"),J=r("./src/models/vit/image_processing_vit.js"),U=r("./src/models/vitmatte/image_processing_vitmatte.js"),be=r("./src/models/vitpose/image_processing_vitpose.js"),Le=r("./src/models/yolos/image_processing_yolos.js")}),"./src/models/janus/image_processing_janus.js":((e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{constructor(i){super({do_pad:!0,pad_size:{width:i.image_size,height:i.image_size},...i}),this.constant_values=this.config.background_color.map(a=>a*this.rescale_factor)}pad_image(i,a,l,c){return super.pad_image(i,a,l,{constant_values:this.constant_values,center:!0,...c})}}}),"./src/models/janus/processing_janus.js":((e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>c});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),i=r("./src/utils/core.js"),a=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class c extends n.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;static uses_processor_config=!0;constructor(d,f,p){super(d,f,p),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(d,{images:f=null,chat_template:p="default"}={}){f?Array.isArray(f)||(f=[f]):f=await Promise.all(d.filter(L=>L.images).flatMap(L=>L.images).map(L=>l.RawImage.read(L)));const m=this.tokenizer,b=m.apply_chat_template(d,{tokenize:!1,add_generation_prompt:!0,chat_template:p}),E=L=>m.encode(L,{add_special_tokens:!1}),h=b.split(this.image_tag),_=h.length-1;if(f.length!==_)throw new Error(`Number of images provided (${f.length}) does not match number of "${this.image_tag}" image tags (${_})`);const[T,g,M]=m.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let x=E(h[0]),w=new Array(x.length).fill(!1);for(let L=1;L<h.length;++L){const G=new Array(this.num_image_tokens).fill(T),j=E(h[L]);x=(0,i.mergeArrays)(x,[g],G,[M],j);const D=new Array(this.num_image_tokens).fill(!0);w=(0,i.mergeArrays)(w,[!1],D,[!1],new Array(j.length).fill(!1))}const $=[1,x.length],O={input_ids:new a.Tensor("int64",x,$),attention_mask:new a.Tensor("int64",new Array(x.length).fill(1),$),images_seq_mask:new a.Tensor("bool",w,$),images_emb_mask:new a.Tensor("bool",new Array(_*this.num_image_tokens).fill(!0),[1,_,this.num_image_tokens])};if(f&&f.length>0){const L=await this.image_processor(f);return L.pixel_values.unsqueeze_(0),{...O,...L}}return O}}}),"./src/models/jina_clip/image_processing_jina_clip.js":((e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{constructor(i){const{resize_mode:a,fill_color:l,interpolation:c,size:u,...d}=i,f=a==="squash"?{width:u,height:u}:a==="shortest"?{shortest_edge:u}:{longest_edge:u},p=c==="bicubic"?3:2;super({...d,size:f,resample:p,do_center_crop:!0,crop_size:u,do_normalize:!0})}}}),"./src/models/jina_clip/processing_jina_clip.js":((e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>i});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class i extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;async _call(l=null,c=null,u={}){if(!l&&!c)throw new Error("Either text or images must be provided");const d=l?this.tokenizer(l,u):{},f=c?await this.image_processor(c,u):{};return{...d,...f}}}}),"./src/models/llava/processing_llava.js":((e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>i});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class i extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;static uses_processor_config=!0;async _call(l,c=null,u={}){const d=await this.image_processor(l,u);if(c){const[p,m]=d.pixel_values.dims.slice(-2),{image_token:b,patch_size:E,num_additional_image_tokens:h}=this.config,_=Math.floor(p/E)*Math.floor(m/E)+h;c=structuredClone(c),Array.isArray(c)||(c=[c]);for(let T=0;T<c.length;++T)c[T]=c[T].replace(b,b.repeat(_))}const f=c?this.tokenizer(c,u):{};return{...d,...f}}}}),"./src/models/llava_onevision/image_processing_llava_onevision.js":((e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/mask2former/image_processing_mask2former.js":((e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>o});var n=r("./src/models/maskformer/image_processing_maskformer.js");class o extends n.MaskFormerImageProcessor{}}),"./src/models/maskformer/image_processing_maskformer.js":((e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>s,MaskFormerImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{post_process_panoptic_segmentation(...a){return(0,n.post_process_panoptic_segmentation)(...a)}post_process_instance_segmentation(...a){return(0,n.post_process_instance_segmentation)(...a)}}class s extends o{}}),"./src/models/mgp_str/processing_mgp_str.js":((e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js"),i=r("./src/utils/maths.js");const a={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(u,d){if(!a.hasOwnProperty(d))throw new Error(`Format ${d} is not supported.`);const[f,p]=a[d],m=this[f].bind(this),[b,E]=u.dims,h=[],_=[],T=u.tolist();for(let M=0;M<b;++M){const x=T[M],w=[],$=[];for(let L=1;L<E;++L){const[G,j]=(0,i.max)((0,i.softmax)(x[L]));if($.push(G),j==p)break;w.push(j)}const O=$.length>0?$.reduce((L,G)=>L*G,1):0;_.push(w),h.push(O)}return[m(_),h]}char_decode(u){return this.char_tokenizer.batch_decode(u).map(d=>d.replaceAll(" ",""))}bpe_decode(u){return this.bpe_tokenizer.batch_decode(u)}wp_decode(u){return this.wp_tokenizer.batch_decode(u).map(d=>d.replaceAll(" ",""))}batch_decode([u,d,f]){const[p,m]=this._decode_helper(u,"char"),[b,E]=this._decode_helper(d,"bpe"),[h,_]=this._decode_helper(f,"wp"),T=[],g=[];for(let M=0;M<p.length;++M){const[x,w]=(0,i.max)([m[M],E[M],_[M]]);T.push([p[M],b[M],h[M]][w]),g.push(x)}return{generated_text:T,scores:g,char_preds:p,bpe_preds:b,wp_preds:h}}static async from_pretrained(...u){const d=await super.from_pretrained(...u),f=await s.AutoTokenizer.from_pretrained("Xenova/gpt2"),p=await s.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return d.components={image_processor:d.image_processor,char_tokenizer:d.tokenizer,bpe_tokenizer:f,wp_tokenizer:p},d}async _call(u,d=null){const f=await this.image_processor(u);return d&&(f.labels=this.tokenizer(d).input_ids),f}}}),"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>s,MobileNetV1ImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>s,MobileNetV2ImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>s,MobileNetV3ImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":((e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>s,MobileNetV4ImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/mobilevit/image_processing_mobilevit.js":((e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>s,MobileViTImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/moonshine/feature_extraction_moonshine.js":((e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),o=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{async _call(a){(0,n.validate_audio_inputs)(a,"MoonshineFeatureExtractor"),a instanceof Float64Array&&(a=new Float32Array(a));const l=[1,a.length];return{input_values:new o.Tensor("float32",a,l)}}}}),"./src/models/moonshine/processing_moonshine.js":((e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>i});var n=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class i extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/nougat/image_processing_nougat.js":((e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>o});var n=r("./src/models/donut/image_processing_donut.js");class o extends n.DonutImageProcessor{}}),"./src/models/owlv2/image_processing_owlv2.js":((e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>o});var n=r("./src/models/owlvit/image_processing_owlvit.js");class o extends n.OwlViTImageProcessor{}}),"./src/models/owlvit/image_processing_owlvit.js":((e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>s,OwlViTImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}class s extends o{}}),"./src/models/owlvit/processing_owlvit.js":((e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>i});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");class i extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor}}),"./src/models/paligemma/processing_paligemma.js":((e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>l});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");const i="<image>";function a(c,u,d,f,p){return`${f.repeat(d*p)}${u}${c}
`}class l extends n.Processor{static tokenizer_class=s.AutoTokenizer;static image_processor_class=o.AutoImageProcessor;static uses_processor_config=!1;async _call(u,d=null,f={}){d||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),d=""),Array.isArray(u)||(u=[u]),Array.isArray(d)||(d=[d]);const p=this.tokenizer.bos_token,m=this.image_processor.config.image_seq_length;let b;d.some(_=>_.includes(i))?b=d.map(_=>{const T=_.replaceAll(i,i.repeat(m)),g=T.lastIndexOf(i),M=g===-1?0:g+i.length;return T.slice(0,M)+p+T.slice(M)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),b=d.map(_=>a(_,p,m,i,u.length)));const E=this.tokenizer(b,f);return{...await this.image_processor(u,f),...E}}}}),"./src/models/phi3_v/image_processing_phi3_v.js":((e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>u});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/tensor.js");const s=336,i=[2,3],{ceil:a,floor:l,sqrt:c}=Math;class u extends n.ImageProcessor{constructor(f){super({...f,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=f.num_crops}calc_num_image_tokens_from_image_size(f,p){const{num_img_tokens:m}=this.config;return l((l(p/s)*l(f/s)+1)*m+1+(l(p/s)+1)*c(m))}get_resize_output_image_size(f,p){const m=this._num_crops,[b,E]=f.size;let h=b/E,_=1;for(;_*Math.ceil(_/h)<=m;)_+=1;_-=1;const T=Math.floor(_*336),g=Math.floor(T/h);return[T,g]}pad_image(f,p,m,b={}){const[E,h]=p,_=s*a(E/s),T=s*a(h/s),g=[1,1,1].map((M,x)=>(M-this.image_mean[x])/this.image_std[x]);return super.pad_image(f,p,{width:T,height:_},{center:!0,constant_values:g,...b})}async _call(f,{num_crops:p=null}={}){if(this._num_crops=p??=this.config.num_crops,p<4||c(p)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(f)||(f=[f]);const m=f.length,b=await Promise.all(f.map(w=>this.preprocess(w))),E=b.map(w=>w.original_size),h=b.map(w=>w.reshaped_input_size),_=[];for(const{pixel_values:w}of b){w.unsqueeze_(0);const[$,O]=w.dims.slice(-2),L=await(0,o.interpolate_4d)(w,{size:[s,s],mode:"bicubic"});if(p>0){const G=[],j=c(p),D=l(O/j),re=l($/j);for(let te=0;te<j;++te)for(let ie=0;ie<j;++ie){let ne,ve,Me,W;te===j-1?(ve=$-re,W=$):(ve=te*re,W=(te+1)*re),ie===j-1?(ne=O-D,Me=O):(ne=ie*D,Me=(ie+1)*D);const R=[ve,ne],J=[W,Me],U=await(0,o.slice)(w,R,J,i);G.push(U)}const Z=await(0,o.interpolate_4d)((0,o.cat)(G,0),{size:[s,s],mode:"bicubic"});_.push((0,o.cat)([L,Z],0))}else _.push(L)}const T=(0,o.stack)(_,0),g=h.map(w=>w.map($=>s*a($/s))),M=new o.Tensor("int64",g.flat(),[m,2]),x=g.map(([w,$])=>this.calc_num_image_tokens_from_image_size($,w));return{pixel_values:T,original_sizes:E,reshaped_input_sizes:h,image_sizes:M,num_img_tokens:x}}}}),"./src/models/phi3_v/processing_phi3_v.js":((e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");const i="<|image|>",a=/<\|image_\d+\|>/g;class l extends n.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(u,d=null,{padding:f=!0,truncation:p=!0,num_crops:m=null}={}){Array.isArray(u)||(u=[u]);let b,E;if(d){E=await this.image_processor(d,{num_crops:m});const{num_img_tokens:h}=E,_=u.map((g,M)=>g.split(a).join(i.repeat(h[M])));b=this.tokenizer(_,{padding:f,truncation:p});const T=this.tokenizer.model.convert_tokens_to_ids([i])[0];b.input_ids.map_(g=>g==T?-g:g)}else b=this.tokenizer(u);return{...b,...E}}}}),"./src/models/processors.js":((e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>n.Florence2Processor,Gemma3nProcessor:()=>o.Gemma3nProcessor,GroundingDinoProcessor:()=>s.GroundingDinoProcessor,Idefics3Processor:()=>i.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>c.LlavaProcessor,MgpstrProcessor:()=>u.MgpstrProcessor,MoonshineProcessor:()=>d.MoonshineProcessor,OwlViTProcessor:()=>f.OwlViTProcessor,PaliGemmaProcessor:()=>m.PaliGemmaProcessor,Phi3VProcessor:()=>p.Phi3VProcessor,PyAnnoteProcessor:()=>b.PyAnnoteProcessor,Qwen2VLProcessor:()=>E.Qwen2VLProcessor,SamProcessor:()=>h.SamProcessor,SmolVLMProcessor:()=>_.SmolVLMProcessor,SpeechT5Processor:()=>T.SpeechT5Processor,UltravoxProcessor:()=>g.UltravoxProcessor,VLChatProcessor:()=>a.VLChatProcessor,VoxtralProcessor:()=>M.VoxtralProcessor,Wav2Vec2Processor:()=>x.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>w.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>$.WhisperProcessor});var n=r("./src/models/florence2/processing_florence2.js"),o=r("./src/models/gemma3n/processing_gemma3n.js"),s=r("./src/models/grounding_dino/processing_grounding_dino.js"),i=r("./src/models/idefics3/processing_idefics3.js"),a=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),c=r("./src/models/llava/processing_llava.js"),u=r("./src/models/mgp_str/processing_mgp_str.js"),d=r("./src/models/moonshine/processing_moonshine.js"),f=r("./src/models/owlvit/processing_owlvit.js"),p=r("./src/models/phi3_v/processing_phi3_v.js"),m=r("./src/models/paligemma/processing_paligemma.js"),b=r("./src/models/pyannote/processing_pyannote.js"),E=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),h=r("./src/models/sam/processing_sam.js"),_=r("./src/models/smolvlm/processing_smolvlm.js"),T=r("./src/models/speecht5/processing_speecht5.js"),g=r("./src/models/ultravox/processing_ultravox.js"),M=r("./src/models/voxtral/processing_voxtral.js"),x=r("./src/models/wav2vec2/processing_wav2vec2.js"),w=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),$=r("./src/models/whisper/processing_whisper.js")}),"./src/models/pvt/image_processing_pvt.js":((e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/pyannote/feature_extraction_pyannote.js":((e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js"),o=r("./src/utils/tensor.js"),s=r("./src/utils/maths.js");class i extends n.FeatureExtractor{async _call(l){(0,n.validate_audio_inputs)(l,"PyAnnoteFeatureExtractor"),l instanceof Float64Array&&(l=new Float32Array(l));const c=[1,1,l.length];return{input_values:new o.Tensor("float32",l,c)}}samples_to_frames(l){return(l-this.config.offset)/this.config.step}post_process_speaker_diarization(l,c){const u=c/this.samples_to_frames(c)/this.config.sampling_rate,d=[];for(const f of l.tolist()){const p=[];let m=-1;for(let b=0;b<f.length;++b){const E=(0,s.softmax)(f[b]),[h,_]=(0,s.max)(E),[T,g]=[b,b+1];_!==m?(m=_,p.push({id:_,start:T,end:g,score:h})):(p.at(-1).end=g,p.at(-1).score+=h)}d.push(p.map(({id:b,start:E,end:h,score:_})=>({id:b,start:E*u,end:h*u,confidence:_/(h-E)})))}return d}}}),"./src/models/pyannote/processing_pyannote.js":((e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>s});var n=r("./src/base/processing_utils.js"),o=r("./src/models/pyannote/feature_extraction_pyannote.js");class s extends n.Processor{static feature_extractor_class=o.PyAnnoteFeatureExtractor;async _call(a){return await this.feature_extractor(a)}post_process_speaker_diarization(...a){return this.feature_extractor.post_process_speaker_diarization(...a)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}}),"./src/models/qwen2_vl/image_processing_qwen2_vl.js":((e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(a,...l){const{pixel_values:c,original_sizes:u,reshaped_input_sizes:d}=await super._call(a,...l);let f=c;const{temporal_patch_size:p,merge_size:m,patch_size:b}=this.config;f.dims[0]===1&&(f=(0,o.cat)(Array.from({length:p},()=>f),0));const E=f.dims[0]/p,h=f.dims[1],_=Math.floor(f.dims[2]/b),T=Math.floor(f.dims[3]/b),g=f.view(E,p,h,Math.floor(_/m),m,b,Math.floor(T/m),m,b).permute(0,3,6,4,7,2,1,5,8).view(E*_*T,h*p*b*b),M=new o.Tensor("int64",[E,_,T],[1,3]);return{pixel_values:g,image_grid_thw:M,original_sizes:u,reshaped_input_sizes:d}}}}),"./src/models/qwen2_vl/processing_qwen2_vl.js":((e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>i});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js"),s=r("./src/tokenizers.js");r("./src/utils/image.js");class i extends n.Processor{static image_processor_class=o.AutoImageProcessor;static tokenizer_class=s.AutoTokenizer;async _call(l,c=null,...u){Array.isArray(l)||(l=[l]);let d,f;if(c&&(d=await this.image_processor(c),f=d.image_grid_thw),f){let m=this.image_processor.config.merge_size**2,b=0;const E=f.tolist();l=l.map(h=>{for(;h.includes("<|image_pad|>");){const _=Number(E[b++].reduce((T,g)=>T*g,1n));h=h.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(_/m)))}return h.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(l),...d}}}}),"./src/models/rt_detr/image_processing_rt_detr.js":((e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{post_process_object_detection(...i){return(0,n.post_process_object_detection)(...i)}}}),"./src/models/sam/image_processing_sam.js":((e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>i});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/core.js"),s=r("./src/utils/tensor.js");class i extends n.ImageProcessor{reshape_input_points(l,c,u,d=!1){l=structuredClone(l);let f=(0,o.calculateDimensions)(l);if(f.length===3)d||(f=[1,...f]),l=[l];else if(f.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let p=0;p<l.length;++p){let m=c[p],b=u[p],E=[b[0]/m[0],b[1]/m[1]];for(let h=0;h<l[p].length;++h)for(let _=0;_<l[p][h].length;++_)for(let T=0;T<l[p][h][_].length;++T)l[p][h][_][T]*=E[T%2]}return new s.Tensor("float32",Float32Array.from(l.flat(1/0)),f)}add_input_labels(l,c){let u=(0,o.calculateDimensions)(l);if(u.length===2)u=[1,...u],l=[l];else if(u.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(u.some((d,f)=>d!==c.dims[f]))throw Error(`The first ${u.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new s.Tensor("int64",l.flat(1/0).map(BigInt),u)}async _call(l,{input_points:c=null,input_labels:u=null,input_boxes:d=null}={}){const f=await super._call(l);if(c&&(f.input_points=this.reshape_input_points(c,f.original_sizes,f.reshaped_input_sizes)),u){if(!f.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");f.input_labels=this.add_input_labels(u,f.input_points)}return d&&(f.input_boxes=this.reshape_input_points(d,f.original_sizes,f.reshaped_input_sizes,!0)),f}async post_process_masks(l,c,u,{mask_threshold:d=0,binarize:f=!0,pad_size:p=null}={}){const m=[];p=p??this.pad_size;const b=[p.height,p.width];for(let E=0;E<c.length;++E){const h=c[E],_=u[E];let T=await(0,s.interpolate_4d)(l[E],{mode:"bilinear",size:b});if(T=T.slice(null,null,[0,_[0]],[0,_[1]]),T=await(0,s.interpolate_4d)(T,{mode:"bilinear",size:h}),f){const g=T.data,M=new Uint8Array(g.length);for(let x=0;x<g.length;++x)g[x]>d&&(M[x]=1);T=new s.Tensor("bool",M,T.dims)}m.push(T)}return m}generate_crop_boxes(l,c,{crop_n_layers:u=0,overlap_ratio:d=512/1500,points_per_crop:f=32,crop_n_points_downscale_factor:p=1}={}){}}}),"./src/models/sam/processing_sam.js":((e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>s});var n=r("./src/base/processing_utils.js"),o=r("./src/models/auto/image_processing_auto.js");class s extends n.Processor{static image_processor_class=o.AutoImageProcessor;async _call(...a){return await this.image_processor(...a)}post_process_masks(...a){return this.image_processor.post_process_masks(...a)}reshape_input_points(...a){return this.image_processor.reshape_input_points(...a)}}}),"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":((e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js"),o=r("./src/utils/tensor.js"),s=r("./src/utils/audio.js");class i extends n.FeatureExtractor{constructor(l){super(l);const c=this.config.sampling_rate,u=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(c/2),c,null,"kaldi",!0);this.mel_filters=u,this.window=(0,s.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(l,c){return l=l.map(u=>u*32768),(0,s.spectrogram)(l,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:c,transpose:!0})}async _call(l,{padding:c=!0,pad_to_multiple_of:u=2,do_normalize_per_mel_bins:d=!0,return_attention_mask:f=!0}={}){(0,n.validate_audio_inputs)(l,"SeamlessM4TFeatureExtractor");let p=await this._extract_fbank_features(l,this.config.max_length);if(d){const[M,x]=p.dims,w=p.data;for(let $=0;$<x;++$){let O=0;for(let D=0;D<M;++D)O+=w[D*x+$];const L=O/M;let G=0;for(let D=0;D<M;++D)G+=(w[D*x+$]-L)**2;G/=M-1;const j=Math.sqrt(G+1e-7);for(let D=0;D<M;++D){const re=D*x+$;w[re]=(w[re]-L)/j}}}let m;if(c){const[M,x]=p.dims,w=p.data,$=M%u;if($>0){const O=new Float32Array(x*(M+$));O.set(w),O.fill(this.config.padding_value,w.length);const L=M+$;p=new o.Tensor(p.type,O,[L,x]),f&&(m=new o.Tensor("int64",new BigInt64Array(L),[1,L]),m.data.fill(1n,0,M))}}const[b,E]=p.dims,h=this.config.stride;if(b%h!==0)throw new Error(`The number of frames (${b}) must be a multiple of the stride (${h}).`);const T=p.view(1,Math.floor(b/h),E*h),g={input_features:T};if(f){const M=T.dims[1],x=new BigInt64Array(M);if(m){const w=m.data;for(let $=1,O=0;$<b;$+=h,++O)x[O]=w[$]}else x.fill(1n);g.attention_mask=new o.Tensor("int64",x,[1,M])}return g}}}),"./src/models/segformer/image_processing_segformer.js":((e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>s,SegformerImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{post_process_semantic_segmentation(...a){return(0,n.post_process_semantic_segmentation)(...a)}}class s extends o{}}),"./src/models/siglip/image_processing_siglip.js":((e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}}),"./src/models/smolvlm/image_processing_smolvlm.js":((e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>n.Idefics3ImageProcessor});var n=r("./src/models/idefics3/image_processing_idefics3.js")}),"./src/models/smolvlm/processing_smolvlm.js":((e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>n.Idefics3Processor});var n=r("./src/models/idefics3/processing_idefics3.js")}),"./src/models/snac/feature_extraction_snac.js":((e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>o});var n=r("./src/models/dac/feature_extraction_dac.js");class o extends n.DacFeatureExtractor{}}),"./src/models/speecht5/feature_extraction_speecht5.js":((e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js");class o extends n.FeatureExtractor{}}),"./src/models/speecht5/processing_speecht5.js":((e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>i});var n=r("./src/base/processing_utils.js"),o=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js");class i extends n.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=s.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/swin2sr/image_processing_swin2sr.js":((e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{pad_image(i,a,l,c={}){const[u,d,f]=a;return super.pad_image(i,a,{width:d+(l-d%l)%l,height:u+(l-u%l)%l},{mode:"symmetric",center:!1,constant_values:-1,...c})}}}),"./src/models/ultravox/processing_ultravox.js":((e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>i});var n=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class i extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;static uses_processor_config=!0;async _call(l,c=null,u={}){if(Array.isArray(l))throw new Error("Batched inputs are not supported yet.");let d={};if(c){const p=c.length,{input_features:m}=await this.feature_extractor(c,{...u,max_length:p}),b=Math.round(p/this.config.encoder_ds_factor+1e-4),E=1+Math.ceil(b/this.config.stack_factor);d.audio_token_len=[E],d.audio_values=m;const h=this.config.audio_placeholder;if(!l.includes(h))throw new Error(`The input text does not contain the image token ${h}.`);l=l.replaceAll(h,h.repeat(E))}return{...this.tokenizer(l,{add_special_tokens:!1,...u}),...d}}}}),"./src/models/vit/image_processing_vit.js":((e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>s,ViTImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{}class s extends o{}}),"./src/models/vitmatte/image_processing_vitmatte.js":((e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js"),o=r("./src/utils/tensor.js");class s extends n.ImageProcessor{async _call(a,l){Array.isArray(a)||(a=[a]),Array.isArray(l)||(l=[l]);const c=await Promise.all(a.map(f=>this.preprocess(f))),u=await Promise.all(l.map(f=>this.preprocess(f,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,o.stack)(c.map((f,p)=>(0,o.cat)([f.pixel_values,u[p].pixel_values],0)),0),original_sizes:c.map(f=>f.original_size),reshaped_input_sizes:c.map(f=>f.reshaped_input_size)}}}}),"./src/models/vitpose/image_processing_vitpose.js":((e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{post_process_pose_estimation(i,a,{threshold:l=null}={}){const c=i.tolist(),[u,d,f,p]=i.dims,m=[];for(let b=0;b<u;++b){const E=c[b],h=a[b],_=[];for(let T=0;T<h.length;++T){const g=h[T],M=[],x=[],w=[],$=g.at(-2)/p,O=g.at(-1)/f;for(let L=0;L<E.length;++L){let[G,j]=[0,0],D=0,re=-1/0;const Z=E[L];for(let ie=0;ie<Z.length;++ie){const ne=Z[ie];for(let ve=0;ve<ne.length;++ve){const Me=ne[ve];D+=Me,re=Math.max(re,Me),G+=(ve+.5)*Me,j+=ie*Me}}if(l!=null&&re<l)continue;const te=[$*G/D,O*j/D];M.push(te),w.push(L),x.push(re)}_.push({bbox:g,scores:x,labels:w,keypoints:M})}m.push(_)}return m}}}),"./src/models/voxtral/processing_voxtral.js":((e,t,r)=>{r.r(t),r.d(t,{VoxtralProcessor:()=>d});var n=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js"),i=r("./src/utils/tensor.js");const a="[AUDIO]",l="[BEGIN_AUDIO]",c=375;function u(f,p){const m=[];for(let b=0;b<f.length;b+=p)m.push(f.subarray(b,Math.min(b+p,f.length)));return m}class d extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;static uses_processor_config=!1;async _call(p,m=null,b={}){if(Array.isArray(p))throw new Error("Batched inputs are not supported yet.");const E={};if(m){if(!p.includes(a))throw new Error(`The input text does not contain the audio token ${a}.`);Array.isArray(m)||(m=[m]);const _=p.split(a),T=_.length-1;if(T!==m.length)throw new Error(`The number of audio inputs (${m.length}) does not match the number of audio tokens in the text (${T}).`);const g=this.feature_extractor.config.n_samples,M=m.map(L=>u(L,g)),x=M.map(L=>L.length),w=M.flat(),$=(await Promise.all(w.map(L=>this.feature_extractor(L,b)))).map(L=>L.input_features);E.audio_values=$.length>1?(0,i.cat)($,0):$[0];let O=_[0];for(let L=0;L<x.length;++L){O+=l;for(let G=0;G<x[L];++G)O+=a.repeat(c);O+=_[L+1]}p=O}return{...this.tokenizer(p,{add_special_tokens:!1,...b}),...E}}}}),"./src/models/wav2vec2/feature_extraction_wav2vec2.js":((e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js"),o=r("./src/utils/tensor.js");class s extends n.FeatureExtractor{_zero_mean_unit_var_norm(a){const c=a.reduce((d,f)=>d+f,0)/a.length,u=a.reduce((d,f)=>d+(f-c)**2,0)/a.length;return a.map(d=>(d-c)/Math.sqrt(u+1e-7))}async _call(a){(0,n.validate_audio_inputs)(a,"Wav2Vec2FeatureExtractor"),a instanceof Float64Array&&(a=new Float32Array(a));let l=a;this.config.do_normalize&&(l=this._zero_mean_unit_var_norm(l));const c=[1,l.length];return{input_values:new o.Tensor("float32",l,c),attention_mask:new o.Tensor("int64",new BigInt64Array(l.length).fill(1n),c)}}}}),"./src/models/wav2vec2/processing_wav2vec2.js":((e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>i});var n=r("./src/tokenizers.js"),o=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class i extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":((e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>i});var n=r("./src/tokenizers.js"),o=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/base/processing_utils.js");class i extends s.Processor{static tokenizer_class=n.AutoTokenizer;static feature_extractor_class=o.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/wespeaker/feature_extraction_wespeaker.js":((e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var o=r("./src/utils/audio.js");class s extends n.FeatureExtractor{constructor(a){super(a);const l=this.config.sampling_rate,c=(0,o.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=c,this.window=(0,o.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(a){return a=a.map(l=>l*32768),(0,o.spectrogram)(a,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(a){(0,n.validate_audio_inputs)(a,"WeSpeakerFeatureExtractor");const l=(await this._extract_fbank_features(a)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const c=l.mean(1).data,u=l.data,[d,f,p]=l.dims;for(let m=0;m<d;++m){const b=m*f*p,E=m*p;for(let h=0;h<f;++h){const _=b+h*p;for(let T=0;T<p;++T)u[_+T]-=c[E+T]}}}return{input_features:l}}}}),"./src/models/whisper/common_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>o,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>s,whisper_language_to_code:()=>i});const n=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],o=new Map(n),s=new Map([...n.map(([a,l])=>[l,a]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function i(a){a=a.toLowerCase();let l=s.get(a);if(l===void 0){const c=a.match(/^<\|([a-z]{2})\|>$/);if(c&&(a=c[1]),o.has(a))l=a;else{const d=a.length===2?o.keys():o.values();throw new Error(`Language "${a}" is not supported. Must be one of: ${JSON.stringify(Array.from(d))}`)}}return l}}),"./src/models/whisper/feature_extraction_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var o=r("./src/utils/audio.js"),s=r("./src/utils/maths.js");class i extends n.FeatureExtractor{constructor(l){super(l),this.config.mel_filters??=(0,o.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=(0,o.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(l){const c=await(0,o.spectrogram)(l,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(l.length/this.config.hop_length),this.config.nb_max_frames)}),u=c.data,d=(0,s.max)(u)[0];for(let f=0;f<u.length;++f)u[f]=(Math.max(u[f],d-8)+4)/4;return c}async _call(l,{max_length:c=null}={}){(0,n.validate_audio_inputs)(l,"WhisperFeatureExtractor");let u;const d=c??this.config.n_samples;return l.length>d?(l.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),u=l.slice(0,d)):(u=new Float32Array(d),u.set(l)),{input_features:(await this._extract_fbank_features(u)).unsqueeze_(0)}}}}),"./src/models/whisper/generation_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>o});var n=r("./src/generation/configuration_utils.js");class o extends n.GenerationConfig{return_timestamps=null;return_token_timestamps=null;num_frames=null;alignment_heads=null;task=null;language=null;no_timestamps_token_id=null;prompt_ids=null;is_multilingual=null;lang_to_id=null;task_to_id=null;max_initial_timestamp_index=1}}),"./src/models/whisper/processing_whisper.js":((e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>i});var n=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/tokenizers.js"),s=r("./src/base/processing_utils.js");class i extends s.Processor{static tokenizer_class=o.AutoTokenizer;static feature_extractor_class=n.AutoFeatureExtractor;async _call(l){return await this.feature_extractor(l)}}}),"./src/models/yolos/image_processing_yolos.js":((e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>s,YolosImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js");class o extends n.ImageProcessor{post_process_object_detection(...a){return(0,n.post_process_object_detection)(...a)}}class s extends o{}}),"./src/ops/registry.js":((e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>l});var n=r("./src/backends/onnx.js"),o=r("./src/utils/tensor.js"),s=r("./src/env.js");const i=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV,a=async(c,u,d)=>{const f=await(0,n.createInferenceSession)(new Uint8Array(c),u);let p=Promise.resolve();return(async m=>{const b=(0,n.isONNXProxy)(),E=Object.fromEntries(Object.entries(m).map(([_,T])=>[_,(b?T.clone():T).ort_tensor])),h=await(p=i?p.then(()=>f.run(E)):f.run(E));return Array.isArray(d)?d.map(_=>new o.Tensor(h[_])):new o.Tensor(h[d])})};class l{static session_options={};static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=a([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=a([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=a([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=a([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=a([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=a([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=a([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=a([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}}),"./src/pipelines.js":((e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>j,AutomaticSpeechRecognitionPipeline:()=>re,BackgroundRemovalPipeline:()=>ne,DepthEstimationPipeline:()=>be,DocumentQuestionAnsweringPipeline:()=>R,FeatureExtractionPipeline:()=>L,FillMaskPipeline:()=>T,ImageClassificationPipeline:()=>te,ImageFeatureExtractionPipeline:()=>G,ImageSegmentationPipeline:()=>ie,ImageToImagePipeline:()=>U,ImageToTextPipeline:()=>Z,ObjectDetectionPipeline:()=>Me,Pipeline:()=>b,QuestionAnsweringPipeline:()=>_,SummarizationPipeline:()=>M,Text2TextGenerationPipeline:()=>g,TextClassificationPipeline:()=>E,TextGenerationPipeline:()=>$,TextToAudioPipeline:()=>J,TokenClassificationPipeline:()=>h,TranslationPipeline:()=>x,ZeroShotAudioClassificationPipeline:()=>D,ZeroShotClassificationPipeline:()=>O,ZeroShotImageClassificationPipeline:()=>ve,ZeroShotObjectDetectionPipeline:()=>W,pipeline:()=>Te});var n=r("./src/tokenizers.js"),o=r("./src/models.js"),s=r("./src/models/auto/processing_auto.js");r("./src/base/processing_utils.js");var i=r("./src/utils/generic.js"),a=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),c=r("./src/utils/audio.js"),u=r("./src/utils/tensor.js"),d=r("./src/utils/image.js");async function f(xe){return Array.isArray(xe)||(xe=[xe]),await Promise.all(xe.map(Y=>d.RawImage.read(Y)))}async function p(xe,Y){return Array.isArray(xe)||(xe=[xe]),await Promise.all(xe.map(B=>typeof B=="string"||B instanceof URL?(0,c.read_audio)(B,Y):B instanceof Float64Array?new Float32Array(B):B))}function m(xe,Y){Y&&(xe=xe.map(ue=>ue|0));const[B,I,q,pe]=xe;return{xmin:B,ymin:I,xmax:q,ymax:pe}}class b extends i.Callable{constructor({task:Y,model:B,tokenizer:I=null,processor:q=null}){super(),this.task=Y,this.model=B,this.tokenizer=I,this.processor=q}async dispose(){await this.model.dispose()}}class E extends b{constructor(Y){super(Y)}async _call(Y,{top_k:B=1}={}){const I=this.tokenizer(Y,{padding:!0,truncation:!0}),q=await this.model(I),pe=this.model.config.problem_type==="multi_label_classification"?N=>N.sigmoid():N=>new u.Tensor("float32",(0,l.softmax)(N.data),N.dims),ue=this.model.config.id2label,oe=[];for(const N of q.logits){const z=pe(N),ee=await(0,u.topk)(z,B),le=ee[0].tolist(),fe=ee[1].tolist().map((ce,he)=>({label:ue?ue[ce]:`LABEL_${ce}`,score:le[he]}));B===1?oe.push(...fe):oe.push(fe)}return Array.isArray(Y)||B===1?oe:oe[0]}}class h extends b{constructor(Y){super(Y)}async _call(Y,{ignore_labels:B=["O"]}={}){const I=Array.isArray(Y),q=this.tokenizer(I?Y:[Y],{padding:!0,truncation:!0}),ue=(await this.model(q)).logits,oe=this.model.config.id2label,N=[];for(let z=0;z<ue.dims[0];++z){const ee=q.input_ids[z],le=ue[z],ke=[];for(let fe=0;fe<le.dims[0];++fe){const ce=le[fe],he=(0,l.max)(ce.data)[1],$e=oe?oe[he]:`LABEL_${he}`;if(B.includes($e))continue;const Re=this.tokenizer.decode([ee[fe].item()],{skip_special_tokens:!0});if(Re==="")continue;const ze=(0,l.softmax)(ce.data);ke.push({entity:$e,score:ze[he],index:fe,word:Re})}N.push(ke)}return I?N:N[0]}}class _ extends b{constructor(Y){super(Y)}async _call(Y,B,{top_k:I=1}={}){const q=this.tokenizer(Y,{text_pair:B,padding:!0,truncation:!0}),{start_logits:pe,end_logits:ue}=await this.model(q),oe=q.input_ids.tolist(),N=q.attention_mask.tolist(),z=this.tokenizer.all_special_ids,ee=[];for(let le=0;le<pe.dims[0];++le){const ke=oe[le],fe=ke.findIndex(Ge=>Ge==this.tokenizer.sep_token_id);N[le].map((Ge,Ke)=>Ge==1&&(Ke===0||Ke>fe&&z.findIndex(vt=>vt==ke[Ke])===-1));const ce=pe[le].tolist(),he=ue[le].tolist();for(let Ge=1;Ge<ce.length;++Ge)(N[le]==0||Ge<=fe||z.findIndex(Ke=>Ke==ke[Ge])!==-1)&&(ce[Ge]=-1/0,he[Ge]=-1/0);const $e=(0,l.softmax)(ce).map((Ge,Ke)=>[Ge,Ke]),Re=(0,l.softmax)(he).map((Ge,Ke)=>[Ge,Ke]);$e[0][0]=0,Re[0][0]=0;const ze=(0,a.product)($e,Re).filter(Ge=>Ge[0][1]<=Ge[1][1]).map(Ge=>[Ge[0][1],Ge[1][1],Ge[0][0]*Ge[1][0]]).sort((Ge,Ke)=>Ke[2]-Ge[2]);for(let Ge=0;Ge<Math.min(ze.length,I);++Ge){const[Ke,vt,Tt]=ze[Ge],gt=ke.slice(Ke,vt+1),Gr=this.tokenizer.decode(gt,{skip_special_tokens:!0});ee.push({answer:Gr,score:Tt})}}return I===1?ee[0]:ee}}class T extends b{constructor(Y){super(Y)}async _call(Y,{top_k:B=5}={}){const I=this.tokenizer(Y,{padding:!0,truncation:!0}),{logits:q}=await this.model(I),pe=[],ue=I.input_ids.tolist();for(let oe=0;oe<ue.length;++oe){const N=ue[oe],z=N.findIndex(ce=>ce==this.tokenizer.mask_token_id);if(z===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const ee=q[oe][z],le=await(0,u.topk)(new u.Tensor("float32",(0,l.softmax)(ee.data),ee.dims),B),ke=le[0].tolist(),fe=le[1].tolist();pe.push(fe.map((ce,he)=>{const $e=N.slice();return $e[z]=ce,{score:ke[he],token:Number(ce),token_str:this.tokenizer.decode([ce]),sequence:this.tokenizer.decode($e,{skip_special_tokens:!0})}}))}return Array.isArray(Y)?pe:pe[0]}}class g extends b{_key="generated_text";constructor(Y){super(Y)}async _call(Y,B={}){Array.isArray(Y)||(Y=[Y]),this.model.config.prefix&&(Y=Y.map(N=>this.model.config.prefix+N));const I=this.model.config.task_specific_params;I&&I[this.task]&&I[this.task].prefix&&(Y=Y.map(N=>I[this.task].prefix+N));const q=this.tokenizer,pe={padding:!0,truncation:!0};let ue;this instanceof x&&"_build_translation_inputs"in q?ue=q._build_translation_inputs(Y,pe,B):ue=q(Y,pe);const oe=await this.model.generate({...ue,...B});return q.batch_decode(oe,{skip_special_tokens:!0}).map(N=>({[this._key]:N}))}}class M extends g{_key="summary_text";constructor(Y){super(Y)}}class x extends g{_key="translation_text";constructor(Y){super(Y)}}function w(xe){return Array.isArray(xe)&&xe.every(Y=>"role"in Y&&"content"in Y)}class $ extends b{constructor(Y){super(Y)}async _call(Y,B={}){let I=!1,q=!1,pe=B.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,ue;if(typeof Y=="string")ue=Y=[Y];else if(Array.isArray(Y)&&Y.every(fe=>typeof fe=="string"))I=!0,ue=Y;else{if(w(Y))Y=[Y];else if(Array.isArray(Y)&&Y.every(w))I=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");q=!0,ue=Y.map(fe=>this.tokenizer.apply_chat_template(fe,{tokenize:!1,add_generation_prompt:!0})),pe=!1}const oe=q?!1:B.return_full_text??!0;this.tokenizer.padding_side="left";const N=this.tokenizer(ue,{add_special_tokens:pe,padding:!0,truncation:!0}),z=await this.model.generate({...N,...B}),ee=this.tokenizer.batch_decode(z,{skip_special_tokens:!0});let le;!oe&&N.input_ids.dims.at(-1)>0&&(le=this.tokenizer.batch_decode(N.input_ids,{skip_special_tokens:!0}).map(fe=>fe.length));const ke=Array.from({length:Y.length},fe=>[]);for(let fe=0;fe<ee.length;++fe){const ce=Math.floor(fe/z.dims[0]*Y.length);le&&(ee[fe]=ee[fe].slice(le[ce])),ke[ce].push({generated_text:q?[...Y[ce],{role:"assistant",content:ee[fe]}]:ee[fe]})}return!I&&ke.length===1?ke[0]:ke}}class O extends b{constructor(Y){super(Y),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([B,I])=>[B.toLowerCase(),I])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(Y,B,{hypothesis_template:I="This example is {}.",multi_label:q=!1}={}){const pe=Array.isArray(Y);pe||(Y=[Y]),Array.isArray(B)||(B=[B]);const ue=B.map(z=>I.replace("{}",z)),oe=q||B.length===1,N=[];for(const z of Y){const ee=[];for(const fe of ue){const ce=this.tokenizer(z,{text_pair:fe,padding:!0,truncation:!0}),he=await this.model(ce);oe?ee.push([he.logits.data[this.contradiction_id],he.logits.data[this.entailment_id]]):ee.push(he.logits.data[this.entailment_id])}const ke=(oe?ee.map(fe=>(0,l.softmax)(fe)[1]):(0,l.softmax)(ee)).map((fe,ce)=>[fe,ce]).sort((fe,ce)=>ce[0]-fe[0]);N.push({sequence:z,labels:ke.map(fe=>B[fe[1]]),scores:ke.map(fe=>fe[0])})}return pe?N:N[0]}}class L extends b{constructor(Y){super(Y)}async _call(Y,{pooling:B="none",normalize:I=!1,quantize:q=!1,precision:pe="binary"}={}){const ue=this.tokenizer(Y,{padding:!0,truncation:!0}),oe=await this.model(ue);let N=oe.last_hidden_state??oe.logits??oe.token_embeddings;switch(B){case"none":break;case"mean":N=(0,u.mean_pooling)(N,ue.attention_mask);break;case"first_token":case"cls":N=N.slice(null,0);break;case"last_token":case"eos":N=N.slice(null,-1);break;default:throw Error(`Pooling method '${B}' not supported.`)}return I&&(N=N.normalize(2,-1)),q&&(N=(0,u.quantize_embeddings)(N,pe)),N}}class G extends b{constructor(Y){super(Y)}async _call(Y,{pool:B=null}={}){const I=await f(Y),{pixel_values:q}=await this.processor(I),pe=await this.model({pixel_values:q});let ue;if(B){if(!("pooler_output"in pe))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");ue=pe.pooler_output}else ue=pe.last_hidden_state??pe.logits??pe.image_embeds;return ue}}class j extends b{constructor(Y){super(Y)}async _call(Y,{top_k:B=5}={}){const I=this.processor.feature_extractor.config.sampling_rate,q=await p(Y,I),pe=this.model.config.id2label,ue=[];for(const oe of q){const N=await this.processor(oe),ee=(await this.model(N)).logits[0],le=await(0,u.topk)(new u.Tensor("float32",(0,l.softmax)(ee.data),ee.dims),B),ke=le[0].tolist(),ce=le[1].tolist().map((he,$e)=>({label:pe?pe[he]:`LABEL_${he}`,score:ke[$e]}));ue.push(ce)}return Array.isArray(Y)?ue:ue[0]}}class D extends b{constructor(Y){super(Y)}async _call(Y,B,{hypothesis_template:I="This is a sound of {}."}={}){const q=!Array.isArray(Y);q&&(Y=[Y]);const pe=B.map(ee=>I.replace("{}",ee)),ue=this.tokenizer(pe,{padding:!0,truncation:!0}),oe=this.processor.feature_extractor.config.sampling_rate,N=await p(Y,oe),z=[];for(const ee of N){const le=await this.processor(ee),ke=await this.model({...ue,...le}),fe=(0,l.softmax)(ke.logits_per_audio.data);z.push([...fe].map((ce,he)=>({score:ce,label:B[he]})))}return q?z[0]:z}}class re extends b{constructor(Y){super(Y)}async _call(Y,B={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(Y,B);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(Y,B);case"moonshine":return this._call_moonshine(Y,B);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(Y,B){B.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),B.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const I=!Array.isArray(Y);I&&(Y=[Y]);const q=this.processor.feature_extractor.config.sampling_rate,pe=await p(Y,q),ue=[];for(const oe of pe){const N=await this.processor(oe),ee=(await this.model(N)).logits[0],le=[];for(const fe of ee)le.push((0,l.max)(fe.data)[1]);const ke=this.tokenizer.decode(le);ue.push({text:ke})}return I?ue[0]:ue}async _call_whisper(Y,B){const I=B.return_timestamps??!1,q=B.chunk_length_s??0,pe=B.force_full_sequences??!1;let ue=B.stride_length_s??null;const oe={...B};I==="word"&&(oe.return_token_timestamps=!0,oe.return_timestamps=!1);const N=!Array.isArray(Y);N&&(Y=[Y]);const z=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,ee=this.processor.feature_extractor.config.hop_length,le=this.processor.feature_extractor.config.sampling_rate,ke=await p(Y,le),fe=[];for(const ce of ke){let he=[];if(q>0){if(ue===null)ue=q/6;else if(q<=ue)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const ze=le*q,Ge=le*ue,Ke=ze-2*Ge;let vt=0;for(;;){const Tt=vt+ze,gt=ce.subarray(vt,Tt),Gr=await this.processor(gt),_r=vt===0,xr=Tt>=ce.length;if(he.push({stride:[gt.length,_r?0:Ge,xr?0:Ge],input_features:Gr.input_features,is_last:xr}),xr)break;vt+=Ke}}else he=[{stride:[ce.length,0,0],input_features:(await this.processor(ce)).input_features,is_last:!0}];for(const ze of he){oe.num_frames=Math.floor(ze.stride[0]/ee);const Ge=await this.model.generate({inputs:ze.input_features,...oe});I==="word"?(ze.tokens=Ge.sequences.tolist()[0],ze.token_timestamps=Ge.token_timestamps.tolist()[0].map(Ke=>(0,l.round)(Ke,2))):ze.tokens=Ge[0].tolist(),ze.stride=ze.stride.map(Ke=>Ke/le)}const[$e,Re]=this.tokenizer._decode_asr(he,{time_precision:z,return_timestamps:I,force_full_sequences:pe});fe.push({text:$e,...Re})}return N?fe[0]:fe}async _call_moonshine(Y,B){const I=!Array.isArray(Y);I&&(Y=[Y]);const q=this.processor.feature_extractor.config.sampling_rate,pe=await p(Y,q),ue=[];for(const oe of pe){const N=await this.processor(oe),z=Math.floor(oe.length/q)*6,ee=await this.model.generate({max_new_tokens:z,...B,...N}),le=this.processor.batch_decode(ee,{skip_special_tokens:!0})[0];ue.push({text:le})}return I?ue[0]:ue}}class Z extends b{constructor(Y){super(Y)}async _call(Y,B={}){const I=Array.isArray(Y),q=await f(Y),{pixel_values:pe}=await this.processor(q),ue=[];for(const oe of pe){oe.dims=[1,...oe.dims];const N=await this.model.generate({inputs:oe,...B}),z=this.tokenizer.batch_decode(N,{skip_special_tokens:!0}).map(ee=>({generated_text:ee.trim()}));ue.push(z)}return I?ue:ue[0]}}class te extends b{constructor(Y){super(Y)}async _call(Y,{top_k:B=5}={}){const I=await f(Y),{pixel_values:q}=await this.processor(I),pe=await this.model({pixel_values:q}),ue=this.model.config.id2label,oe=[];for(const N of pe.logits){const z=await(0,u.topk)(new u.Tensor("float32",(0,l.softmax)(N.data),N.dims),B),ee=z[0].tolist(),ke=z[1].tolist().map((fe,ce)=>({label:ue?ue[fe]:`LABEL_${fe}`,score:ee[ce]}));oe.push(ke)}return Array.isArray(Y)?oe:oe[0]}}class ie extends b{constructor(Y){super(Y),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(Y,{threshold:B=.5,mask_threshold:I=.5,overlap_mask_area_threshold:q=.8,label_ids_to_fuse:pe=null,target_sizes:ue=null,subtask:oe=null}={}){if(Array.isArray(Y)&&Y.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const z=await f(Y),ee=z.map(ze=>[ze.height,ze.width]),le=await this.processor(z),{inputNames:ke,outputNames:fe}=this.model.sessions.model;if(!ke.includes("pixel_values")){if(ke.length!==1)throw Error(`Expected a single input name, but got ${ke.length} inputs: ${ke}.`);const ze=ke[0];if(ze in le)throw Error(`Input name ${ze} already exists in the inputs.`);le[ze]=le.pixel_values}const ce=await this.model(le);let he=null;if(oe!==null)he=this.subtasks_mapping[oe];else if(this.processor.image_processor){for(const[ze,Ge]of Object.entries(this.subtasks_mapping))if(Ge in this.processor.image_processor){he=this.processor.image_processor[Ge].bind(this.processor.image_processor),oe=ze;break}}const $e=this.model.config.id2label,Re=[];if(oe)if(oe==="panoptic"||oe==="instance"){const ze=he(ce,B,I,q,pe,ue??ee)[0],Ge=ze.segmentation;for(const Ke of ze.segments_info){const vt=new Uint8ClampedArray(Ge.data.length);for(let gt=0;gt<Ge.data.length;++gt)Ge.data[gt]===Ke.id&&(vt[gt]=255);const Tt=new d.RawImage(vt,Ge.dims[1],Ge.dims[0],1);Re.push({score:Ke.score,label:$e[Ke.label_id],mask:Tt})}}else if(oe==="semantic"){const{segmentation:ze,labels:Ge}=he(ce,ue??ee)[0];for(const Ke of Ge){const vt=new Uint8ClampedArray(ze.data.length);for(let gt=0;gt<ze.data.length;++gt)ze.data[gt]===Ke&&(vt[gt]=255);const Tt=new d.RawImage(vt,ze.dims[1],ze.dims[0],1);Re.push({score:null,label:$e[Ke],mask:Tt})}}else throw Error(`Subtask ${oe} not supported.`);else{const Ge=ce[fe[0]];for(let Ke=0;Ke<ee.length;++Ke){const vt=ee[Ke],Tt=Ge[Ke];Tt.data.some(Gr=>Gr<-1e-5||Gr>1+1e-5)&&Tt.sigmoid_();const gt=await d.RawImage.fromTensor(Tt.mul_(255).to("uint8")).resize(vt[1],vt[0]);Re.push({label:null,score:null,mask:gt})}}return Re}}class ne extends ie{constructor(Y){super(Y)}async _call(Y,B={}){if(Array.isArray(Y)&&Y.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const q=await f(Y),pe=await super._call(Y,B);return q.map((oe,N)=>{const z=oe.clone();return z.putAlpha(pe[N].mask),z})}}class ve extends b{constructor(Y){super(Y)}async _call(Y,B,{hypothesis_template:I="This is a photo of {}"}={}){const q=Array.isArray(Y),pe=await f(Y),ue=B.map(ke=>I.replace("{}",ke)),oe=this.tokenizer(ue,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:N}=await this.processor(pe),z=await this.model({...oe,pixel_values:N}),ee=this.model.config.model_type==="siglip"?ke=>ke.sigmoid().data:ke=>(0,l.softmax)(ke.data),le=[];for(const ke of z.logits_per_image){const ce=[...ee(ke)].map((he,$e)=>({score:he,label:B[$e]}));ce.sort((he,$e)=>$e.score-he.score),le.push(ce)}return q?le:le[0]}}class Me extends b{constructor(Y){super(Y)}async _call(Y,{threshold:B=.9,percentage:I=!1}={}){const q=Array.isArray(Y);if(q&&Y.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const pe=await f(Y),ue=I?null:pe.map(fe=>[fe.height,fe.width]),{pixel_values:oe,pixel_mask:N}=await this.processor(pe),z=await this.model({pixel_values:oe,pixel_mask:N}),ee=this.processor.image_processor.post_process_object_detection(z,B,ue),le=this.model.config.id2label,ke=ee.map(fe=>fe.boxes.map((ce,he)=>({score:fe.scores[he],label:le[fe.classes[he]],box:m(ce,!I)})));return q?ke:ke[0]}}class W extends b{constructor(Y){super(Y)}async _call(Y,B,{threshold:I=.1,top_k:q=null,percentage:pe=!1}={}){const ue=Array.isArray(Y),oe=await f(Y),N=this.tokenizer(B,{padding:!0,truncation:!0}),z=await this.processor(oe),ee=[];for(let le=0;le<oe.length;++le){const ke=oe[le],fe=pe?null:[[ke.height,ke.width]],ce=z.pixel_values[le].unsqueeze_(0),he=await this.model({...N,pixel_values:ce});let $e;if("post_process_grounded_object_detection"in this.processor){const Re=this.processor.post_process_grounded_object_detection(he,N.input_ids,{box_threshold:I,text_threshold:I,target_sizes:fe})[0];$e=Re.boxes.map((ze,Ge)=>({score:Re.scores[Ge],label:Re.labels[Ge],box:m(ze,!pe)}))}else{const Re=this.processor.image_processor.post_process_object_detection(he,I,fe,!0)[0];$e=Re.boxes.map((ze,Ge)=>({score:Re.scores[Ge],label:B[Re.classes[Ge]],box:m(ze,!pe)}))}$e.sort((Re,ze)=>ze.score-Re.score),q!==null&&($e=$e.slice(0,q)),ee.push($e)}return ue?ee:ee[0]}}class R extends b{constructor(Y){super(Y)}async _call(Y,B,I={}){const q=(await f(Y))[0],{pixel_values:pe}=await this.processor(q),ue=`<s_docvqa><s_question>${B}</s_question><s_answer>`,oe=this.tokenizer(ue,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,N=await this.model.generate({inputs:pe,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:oe,...I}),ee=this.tokenizer.batch_decode(N)[0].match(/<s_answer>(.*?)<\/s_answer>/);let le=null;return ee&&ee.length>=2&&(le=ee[1].trim()),[{answer:le}]}}class J extends b{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(Y){super(Y),this.vocoder=Y.vocoder??null}async _call(Y,{speaker_embeddings:B=null}={}){return this.processor?this._call_text_to_spectrogram(Y,{speaker_embeddings:B}):this._call_text_to_waveform(Y)}async _call_text_to_waveform(Y){const B=this.tokenizer(Y,{padding:!0,truncation:!0}),{waveform:I}=await this.model(B),q=this.model.config.sampling_rate;return new c.RawAudio(I.data,q)}async _call_text_to_spectrogram(Y,{speaker_embeddings:B}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await o.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"})),(typeof B=="string"||B instanceof URL)&&(B=new Float32Array(await(await fetch(B)).arrayBuffer())),B instanceof Float32Array)B=new u.Tensor("float32",B,[1,B.length]);else if(!(B instanceof u.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:I}=this.tokenizer(Y,{padding:!0,truncation:!0}),{waveform:q}=await this.model.generate_speech(I,B,{vocoder:this.vocoder}),pe=this.processor.feature_extractor.config.sampling_rate;return new c.RawAudio(q.data,pe)}}class U extends b{constructor(Y){super(Y)}async _call(Y){const B=await f(Y),I=await this.processor(B),q=await this.model(I),pe=[];for(const ue of q.reconstruction){const oe=ue.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");pe.push(d.RawImage.fromTensor(oe))}return pe.length>1?pe:pe[0]}}class be extends b{constructor(Y){super(Y)}async _call(Y){const B=await f(Y),I=await this.processor(B),{predicted_depth:q}=await this.model(I),pe=[];for(let ue=0;ue<B.length;++ue){const oe=q[ue],[N,z]=oe.dims.slice(-2),[ee,le]=B[ue].size,ke=(await(0,u.interpolate_4d)(oe.view(1,1,N,z),{size:[le,ee],mode:"bilinear"})).view(le,ee),fe=ke.min().item(),ce=ke.max().item(),he=ke.sub(fe).div_(ce-fe).mul_(255).to("uint8").unsqueeze(0),$e=d.RawImage.fromTensor(he);pe.push({predicted_depth:ke,depth:$e})}return pe.length>1?pe:pe[0]}}const Le=Object.freeze({"text-classification":{tokenizer:n.AutoTokenizer,pipeline:E,model:o.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:n.AutoTokenizer,pipeline:h,model:o.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:n.AutoTokenizer,pipeline:_,model:o.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:n.AutoTokenizer,pipeline:T,model:o.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:n.AutoTokenizer,pipeline:M,model:o.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:n.AutoTokenizer,pipeline:x,model:o.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:n.AutoTokenizer,pipeline:g,model:o.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:n.AutoTokenizer,pipeline:$,model:o.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:n.AutoTokenizer,pipeline:O,model:o.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:j,model:o.AutoModelForAudioClassification,processor:s.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:n.AutoTokenizer,pipeline:D,model:o.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:n.AutoTokenizer,pipeline:re,model:[o.AutoModelForSpeechSeq2Seq,o.AutoModelForCTC],processor:s.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:n.AutoTokenizer,pipeline:J,model:[o.AutoModelForTextToWaveform,o.AutoModelForTextToSpectrogram],processor:[s.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:n.AutoTokenizer,pipeline:Z,model:o.AutoModelForVision2Seq,processor:s.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:te,model:o.AutoModelForImageClassification,processor:s.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ie,model:[o.AutoModelForImageSegmentation,o.AutoModelForSemanticSegmentation,o.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:ne,model:[o.AutoModelForImageSegmentation,o.AutoModelForSemanticSegmentation,o.AutoModelForUniversalSegmentation],processor:s.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:n.AutoTokenizer,pipeline:ve,model:o.AutoModel,processor:s.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:Me,model:o.AutoModelForObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:n.AutoTokenizer,pipeline:W,model:o.AutoModelForZeroShotObjectDetection,processor:s.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:n.AutoTokenizer,pipeline:R,model:o.AutoModelForDocumentQuestionAnswering,processor:s.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:U,model:o.AutoModelForImageToImage,processor:s.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:be,model:o.AutoModelForDepthEstimation,processor:s.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:n.AutoTokenizer,pipeline:L,model:o.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:s.AutoProcessor,pipeline:G,model:[o.AutoModelForImageFeatureExtraction,o.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),de=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function Te(xe,Y=null,{progress_callback:B=null,config:I=null,cache_dir:q=null,local_files_only:pe=!1,revision:ue="main",device:oe=null,dtype:N=null,subfolder:z="onnx",use_external_data_format:ee=null,model_file_name:le=null,session_options:ke={}}={}){xe=de[xe]??xe;const fe=Le[xe.split("_",1)[0]];if(!fe)throw Error(`Unsupported pipeline: ${xe}. Must be one of [${Object.keys(Le)}]`);Y||(Y=fe.default.model,console.log(`No model specified. Using default model: "${Y}".`));const ce={progress_callback:B,config:I,cache_dir:q,local_files_only:pe,revision:ue,device:oe,dtype:N,subfolder:z,use_external_data_format:ee,model_file_name:le,session_options:ke},he=new Map([["tokenizer",fe.tokenizer],["model",fe.model],["processor",fe.processor]]),$e=await Pe(he,Y,ce);$e.task=xe,(0,a.dispatchCallback)(B,{status:"ready",task:xe,model:Y});const Re=fe.pipeline;return new Re($e)}async function Pe(xe,Y,B){const I=Object.create(null),q=[];for(const[pe,ue]of xe.entries()){if(!ue)continue;let oe;Array.isArray(ue)?oe=new Promise(async(N,z)=>{let ee;for(const le of ue){if(le===null){N(null);return}try{N(await le.from_pretrained(Y,B));return}catch(ke){if(ke.message?.includes("Unsupported model type"))ee=ke;else if(ke.message?.includes("Could not locate file"))ee=ke;else{z(ke);return}}}z(ee)}):oe=ue.from_pretrained(Y,B),I[pe]=oe,q.push(oe)}await Promise.all(q);for(const[pe,ue]of Object.entries(I))I[pe]=await ue;return I}}),"./src/tokenizers.js":((e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>mr,AutoTokenizer:()=>da,BartTokenizer:()=>Rt,BertTokenizer:()=>es,BlenderbotSmallTokenizer:()=>Cr,BlenderbotTokenizer:()=>it,BloomTokenizer:()=>Xn,CLIPTokenizer:()=>Ms,CamembertTokenizer:()=>Ne,CodeGenTokenizer:()=>no,CodeLlamaTokenizer:()=>po,CohereTokenizer:()=>Ao,ConvBertTokenizer:()=>ae,DebertaTokenizer:()=>S,DebertaV2Tokenizer:()=>se,DistilBertTokenizer:()=>Se,ElectraTokenizer:()=>pt,Ernie4_5_Tokenizer:()=>Ti,EsmTokenizer:()=>rs,FalconTokenizer:()=>So,GPT2Tokenizer:()=>Dt,GPTNeoXTokenizer:()=>Pn,GemmaTokenizer:()=>Nr,Grok1Tokenizer:()=>Qn,HerbertTokenizer:()=>K,LlamaTokenizer:()=>rn,M2M100Tokenizer:()=>mo,MBart50Tokenizer:()=>tr,MBartTokenizer:()=>tn,MPNetTokenizer:()=>$o,MarianTokenizer:()=>We,MgpstrTokenizer:()=>xi,MobileBertTokenizer:()=>Ot,NllbTokenizer:()=>an,NougatTokenizer:()=>os,PreTrainedTokenizer:()=>_t,Qwen2Tokenizer:()=>Io,RoFormerTokenizer:()=>_e,RobertaTokenizer:()=>qr,SiglipTokenizer:()=>$n,SpeechT5Tokenizer:()=>xs,SqueezeBertTokenizer:()=>ts,T5Tokenizer:()=>et,TokenizerModel:()=>G,VitsTokenizer:()=>Ts,Wav2Vec2CTCTokenizer:()=>Xe,WhisperTokenizer:()=>ns,XLMRobertaTokenizer:()=>Xr,XLMTokenizer:()=>st,is_chinese_char:()=>T});var n=r("./src/utils/generic.js"),o=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),i=r("./src/utils/maths.js"),a=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),c=r("./node_modules/@huggingface/jinja/dist/index.js"),u=r("./src/models/whisper/common_whisper.js");async function d(Ce,A){const Q=await Promise.all([(0,s.getModelJSON)(Ce,"tokenizer.json",!0,A),(0,s.getModelJSON)(Ce,"tokenizer_config.json",!0,A)]);return A.legacy!==null&&(Q[1].legacy=A.legacy),Q}function f(Ce,A){const Q=[];let me=0;for(const ge of Ce.matchAll(A)){const Ie=ge[0];me<ge.index&&Q.push(Ce.slice(me,ge.index)),Ie.length>0&&Q.push(Ie),me=ge.index+Ie.length}return me<Ce.length&&Q.push(Ce.slice(me)),Q}function p(Ce,A=!0){if(Ce.Regex!==void 0){let Q=Ce.Regex.replace(/\\([#&~])/g,"$1");for(const[me,ge]of O)Q=Q.replaceAll(me,ge);return new RegExp(Q,"gu")}else if(Ce.String!==void 0){const Q=(0,o.escapeRegExp)(Ce.String);return new RegExp(A?Q:`(${Q})`,"gu")}else return console.warn("Unknown pattern type:",Ce),null}function m(Ce){return new Map(Object.entries(Ce))}function b(Ce){const A=Ce.dims;switch(A.length){case 1:return Ce.tolist();case 2:if(A[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return Ce.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${A.length}.`)}}function E(Ce){return Ce.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function h(Ce){return Ce.replace(new RegExp("\\p{M}","gu"),"")}function _(Ce){return h(Ce.toLowerCase())}function T(Ce){return Ce>=19968&&Ce<=40959||Ce>=13312&&Ce<=19903||Ce>=131072&&Ce<=173791||Ce>=173824&&Ce<=177983||Ce>=177984&&Ce<=178207||Ce>=178208&&Ce<=183983||Ce>=63744&&Ce<=64255||Ce>=194560&&Ce<=195103}function g(Ce,A,Q){const me=[];let ge=0;for(;ge<Ce.length;){if(me.push(Ce[ge]),(A.get(Ce[ge])??Q)!==Q){++ge;continue}for(;++ge<Ce.length&&(A.get(Ce[ge])??Q)===Q;)A.get(me.at(-1))!==Q&&(me[me.length-1]+=Ce[ge])}return me}function M(Ce){return Ce.match(/\S+/g)||[]}const x="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",w=new RegExp(`^[${x}]+$`,"gu"),$=".,!?",O=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],[` ?[^(\\s|[${$}])]+`,` ?[^\\s${$}]+`]]);class L{constructor(A){this.content=A.content,this.id=A.id,this.single_word=A.single_word??!1,this.lstrip=A.lstrip??!1,this.rstrip=A.rstrip??!1,this.special=A.special??!1,this.normalized=A.normalized??null}}class G extends n.Callable{constructor(A){super(),this.config=A,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(A,...Q){switch(A.type){case"WordPiece":return new j(A);case"Unigram":return new D(A,...Q);case"BPE":return new te(A);default:if(A.vocab)return Array.isArray(A.vocab)?new D(A,...Q):Object.hasOwn(A,"continuing_subword_prefix")&&Object.hasOwn(A,"unk_token")?Object.hasOwn(A,"merges")?new te(A):new j(A):new ie(A,...Q);throw new Error(`Unknown TokenizerModel type: ${A.type}`)}}_call(A){return A=this.encode(A),this.fuse_unk&&(A=g(A,this.tokens_to_ids,this.unk_token_id)),A}encode(A){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(A){return A.map(Q=>this.tokens_to_ids.get(Q)??this.unk_token_id)}convert_ids_to_tokens(A){return A.map(Q=>this.vocab[Q]??this.unk_token)}}class j extends G{constructor(A){super(A),this.tokens_to_ids=m(A.vocab),this.unk_token_id=this.tokens_to_ids.get(A.unk_token),this.unk_token=A.unk_token,this.max_input_chars_per_word=A.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[Q,me]of this.tokens_to_ids)this.vocab[me]=Q}encode(A){const Q=[];for(const me of A){const ge=[...me];if(ge.length>this.max_input_chars_per_word){Q.push(this.unk_token);continue}let Ie=!1,Be=0;const tt=[];for(;Be<ge.length;){let nt=ge.length,ot=null;for(;Be<nt;){let Je=ge.slice(Be,nt).join("");if(Be>0&&(Je=this.config.continuing_subword_prefix+Je),this.tokens_to_ids.has(Je)){ot=Je;break}--nt}if(ot===null){Ie=!0;break}tt.push(ot),Be=nt}Ie?Q.push(this.unk_token):Q.push(...tt)}return Q}}class D extends G{constructor(A,Q){super(A);const me=A.vocab.length;this.vocab=new Array(me),this.scores=new Array(me);for(let ge=0;ge<me;++ge)[this.vocab[ge],this.scores[ge]]=A.vocab[ge];this.unk_token_id=A.unk_id,this.unk_token=this.vocab[A.unk_id],this.tokens_to_ids=new Map(this.vocab.map((ge,Ie)=>[ge,Ie])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=Q.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,i.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(A){const Q=A.chars,me=1;let ge=0;for(;ge<Q.length;){let Ie=!1;const Be=Q.slice(ge).join(""),tt=this.trie.commonPrefixSearch(Be);for(const nt of tt){const ot=this.tokens_to_ids.get(nt),Je=this.scores[ot],Bt=(0,o.len)(nt);A.insert(ge,Bt,Je,ot),!Ie&&Bt===me&&(Ie=!0)}Ie||A.insert(ge,me,this.unk_score,this.unk_token_id),ge+=me}}tokenize(A){const Q=new l.TokenLattice(A,this.bos_token_id,this.eos_token_id);return this.populateNodes(Q),Q.tokens()}encode(A){const Q=[];for(const me of A){const ge=this.tokenize(me);Q.push(...ge)}return Q}}const re=(()=>{const Ce=[...Array.from({length:94},(ge,Ie)=>Ie+33),...Array.from({length:12},(ge,Ie)=>Ie+161),...Array.from({length:82},(ge,Ie)=>Ie+174)],A=Ce.slice();let Q=0;for(let ge=0;ge<256;++ge)Ce.includes(ge)||(Ce.push(ge),A.push(256+Q),Q+=1);const me=A.map(ge=>String.fromCharCode(ge));return Object.fromEntries(Ce.map((ge,Ie)=>[ge,me[Ie]]))})(),Z=(0,o.reverseDictionary)(re);class te extends G{constructor(A){super(A),this.tokens_to_ids=m(A.vocab),this.unk_token_id=this.tokens_to_ids.get(A.unk_token),this.unk_token=A.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[me,ge]of this.tokens_to_ids)this.vocab[ge]=me;const Q=Array.isArray(A.merges[0]);this.merges=Q?A.merges:A.merges.map(me=>me.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((me,ge)=>[JSON.stringify(me),ge])),this.end_of_word_suffix=A.end_of_word_suffix,this.continuing_subword_suffix=A.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(A){if(A.length===0)return[];const Q=this.cache.get(A);if(Q!==void 0)return Q;const me=Array.from(A);this.end_of_word_suffix&&(me[me.length-1]+=this.end_of_word_suffix);let ge=[];if(me.length>1){const Ie=new l.PriorityQueue((nt,ot)=>nt.score<ot.score);let Be={token:me[0],bias:0,prev:null,next:null},tt=Be;for(let nt=1;nt<me.length;++nt){const ot={bias:nt/me.length,token:me[nt],prev:tt,next:null};tt.next=ot,this._add_node(Ie,tt),tt=ot}for(;!Ie.isEmpty();){const nt=Ie.pop();if(nt.deleted||!nt.next||nt.next.deleted)continue;if(nt.deleted=!0,nt.next.deleted=!0,nt.prev){const Je={...nt.prev};nt.prev.deleted=!0,nt.prev=Je,Je.prev?Je.prev.next=Je:Be=Je}const ot={token:nt.token+nt.next.token,bias:nt.bias,prev:nt.prev,next:nt.next.next};ot.prev?(ot.prev.next=ot,this._add_node(Ie,ot.prev)):Be=ot,ot.next&&(ot.next.prev=ot,this._add_node(Ie,ot))}for(let nt=Be;nt!==null;nt=nt.next)ge.push(nt.token)}else ge=me;if(this.continuing_subword_suffix)for(let Ie=0;Ie<ge.length-1;++Ie)ge[Ie]+=this.continuing_subword_suffix;return A.length<this.max_length_to_cache&&this.cache.put(A,ge),ge}_add_node(A,Q){const me=this.bpe_ranks.get(JSON.stringify([Q.token,Q.next.token]));me!==void 0&&(Q.score=me+Q.bias,A.push(Q))}encode(A){const Q=[];for(const me of A){if(this.ignore_merges&&this.tokens_to_ids.has(me)){Q.push(me);continue}const ge=this.bpe(me);for(const Ie of ge)if(this.tokens_to_ids.has(Ie))Q.push(Ie);else if(this.byte_fallback){const Be=Array.from(this.text_encoder.encode(Ie)).map(tt=>`<0x${tt.toString(16).toUpperCase().padStart(2,"0")}>`);Be.every(tt=>this.tokens_to_ids.has(tt))?Q.push(...Be):Q.push(this.unk_token)}else Q.push(this.unk_token)}return Q}}class ie extends G{constructor(A,Q){super(A),this.tokens_to_ids=m(Q.target_lang?A.vocab[Q.target_lang]:A.vocab),this.bos_token=Q.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=Q.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=Q.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=Q.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[me,ge]of this.tokens_to_ids)this.vocab[ge]=me}encode(A){return A}}class ne extends n.Callable{constructor(A){super(),this.config=A}static fromConfig(A){if(A===null)return null;switch(A.type){case"BertNormalizer":return new xe(A);case"Precompiled":return new xr(A);case"Sequence":return new Pe(A);case"Replace":return new ve(A);case"NFC":return new W(A);case"NFD":return new R(A);case"NFKC":return new J(A);case"NFKD":return new U(A);case"Strip":return new be(A);case"StripAccents":return new Le(A);case"Lowercase":return new de(A);case"Prepend":return new Te(A);default:throw new Error(`Unknown Normalizer type: ${A.type}`)}}normalize(A){throw Error("normalize should be implemented in subclass.")}_call(A){return this.normalize(A)}}class ve extends ne{normalize(A){const Q=p(this.config.pattern);return Q===null?A:A.replaceAll(Q,this.config.content)}}class Me extends ne{form=void 0;normalize(A){return A=A.normalize(this.form),A}}class W extends Me{form="NFC"}class R extends Me{form="NFD"}class J extends Me{form="NFKC"}class U extends Me{form="NFKD"}class be extends ne{normalize(A){return this.config.strip_left&&this.config.strip_right?A=A.trim():(this.config.strip_left&&(A=A.trimStart()),this.config.strip_right&&(A=A.trimEnd())),A}}class Le extends ne{normalize(A){return A=h(A),A}}class de extends ne{normalize(A){return A=A.toLowerCase(),A}}class Te extends ne{normalize(A){return A=this.config.prepend+A,A}}class Pe extends ne{constructor(A){super(A),this.normalizers=A.normalizers.map(Q=>ne.fromConfig(Q))}normalize(A){return this.normalizers.reduce((Q,me)=>me.normalize(Q),A)}}class xe extends ne{_tokenize_chinese_chars(A){const Q=[];for(let me=0;me<A.length;++me){const ge=A[me],Ie=ge.charCodeAt(0);T(Ie)?(Q.push(" "),Q.push(ge),Q.push(" ")):Q.push(ge)}return Q.join("")}stripAccents(A){return A.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(A){switch(A){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(A)}}_clean_text(A){const Q=[];for(const me of A){const ge=me.charCodeAt(0);ge===0||ge===65533||this._is_control(me)||(/^\s$/.test(me)?Q.push(" "):Q.push(me))}return Q.join("")}normalize(A){return this.config.clean_text&&(A=this._clean_text(A)),this.config.handle_chinese_chars&&(A=this._tokenize_chinese_chars(A)),this.config.lowercase?(A=A.toLowerCase(),this.config.strip_accents!==!1&&(A=this.stripAccents(A))):this.config.strip_accents&&(A=this.stripAccents(A)),A}}class Y extends n.Callable{static fromConfig(A){if(A===null)return null;switch(A.type){case"BertPreTokenizer":return new B(A);case"Sequence":return new zn(A);case"Whitespace":return new ir(A);case"WhitespaceSplit":return new yn(A);case"Metaspace":return new Gr(A);case"ByteLevel":return new I(A);case"Split":return new q(A);case"Punctuation":return new pe(A);case"Digits":return new ue(A);case"Replace":return new Gs(A);default:throw new Error(`Unknown PreTokenizer type: ${A.type}`)}}pre_tokenize_text(A,Q){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(A,Q){return(Array.isArray(A)?A.map(me=>this.pre_tokenize_text(me,Q)):this.pre_tokenize_text(A,Q)).flat()}_call(A,Q){return this.pre_tokenize(A,Q)}}class B extends Y{constructor(A){super(),this.pattern=new RegExp(`[^\\s${x}]+|[${x}]`,"gu")}pre_tokenize_text(A,Q){return A.trim().match(this.pattern)||[]}}class I extends Y{constructor(A){super(),this.config=A,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=re,this.text_encoder=new TextEncoder}pre_tokenize_text(A,Q){return this.add_prefix_space&&!A.startsWith(" ")&&(A=" "+A),(this.use_regex?A.match(this.pattern)||[]:[A]).map(ge=>Array.from(this.text_encoder.encode(ge),Ie=>this.byte_encoder[Ie]).join(""))}}class q extends Y{constructor(A){super(),this.config=A,this.pattern=p(this.config.pattern,this.config.invert)}pre_tokenize_text(A,Q){return this.pattern===null?[]:this.config.invert?A.match(this.pattern)||[]:this.config.behavior?.toLowerCase()==="removed"?A.split(this.pattern).filter(me=>me):f(A,this.pattern)}}class pe extends Y{constructor(A){super(),this.config=A,this.pattern=new RegExp(`[^${x}]+|[${x}]+`,"gu")}pre_tokenize_text(A,Q){return A.match(this.pattern)||[]}}class ue extends Y{constructor(A){super(),this.config=A;const Q=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(Q,"gu")}pre_tokenize_text(A,Q){return A.match(this.pattern)||[]}}class oe extends n.Callable{constructor(A){super(),this.config=A}static fromConfig(A){if(A===null)return null;switch(A.type){case"TemplateProcessing":return new ee(A);case"ByteLevel":return new le(A);case"RobertaProcessing":return new z(A);case"BertProcessing":return new N(A);case"Sequence":return new ke(A);default:throw new Error(`Unknown PostProcessor type: ${A.type}`)}}post_process(A,...Q){throw Error("post_process should be implemented in subclass.")}_call(A,...Q){return this.post_process(A,...Q)}}class N extends oe{constructor(A){super(A),this.cls=A.cls[0],this.sep=A.sep[0]}post_process(A,Q=null,{add_special_tokens:me=!0}={}){me&&(A=(0,o.mergeArrays)([this.cls],A,[this.sep]));let ge=new Array(A.length).fill(0);if(Q!==null){const Ie=me&&this instanceof z?[this.sep]:[],Be=me?[this.sep]:[];A=(0,o.mergeArrays)(A,Ie,Q,Be),ge=(0,o.mergeArrays)(ge,new Array(Q.length+Ie.length+Be.length).fill(1))}return{tokens:A,token_type_ids:ge}}}class z extends N{}class ee extends oe{constructor(A){super(A),this.single=A.single,this.pair=A.pair}post_process(A,Q=null,{add_special_tokens:me=!0}={}){const ge=Q===null?this.single:this.pair;let Ie=[],Be=[];for(const tt of ge)"SpecialToken"in tt?me&&(Ie.push(tt.SpecialToken.id),Be.push(tt.SpecialToken.type_id)):"Sequence"in tt&&(tt.Sequence.id==="A"?(Ie=(0,o.mergeArrays)(Ie,A),Be=(0,o.mergeArrays)(Be,new Array(A.length).fill(tt.Sequence.type_id))):tt.Sequence.id==="B"&&(Ie=(0,o.mergeArrays)(Ie,Q),Be=(0,o.mergeArrays)(Be,new Array(Q.length).fill(tt.Sequence.type_id))));return{tokens:Ie,token_type_ids:Be}}}class le extends oe{post_process(A,Q=null){return Q&&(A=(0,o.mergeArrays)(A,Q)),{tokens:A}}}class ke extends oe{constructor(A){super(A),this.processors=A.processors.map(Q=>oe.fromConfig(Q))}post_process(A,Q=null,me={}){let ge;for(const Ie of this.processors)if(Ie instanceof le)A=Ie.post_process(A).tokens,Q&&(Q=Ie.post_process(Q).tokens);else{const Be=Ie.post_process(A,Q,me);A=Be.tokens,ge=Be.token_type_ids}return{tokens:A,token_type_ids:ge}}}class fe extends n.Callable{constructor(A){super(),this.config=A,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=A.trim_offsets}static fromConfig(A){if(A===null)return null;switch(A.type){case"WordPiece":return new ze(A);case"Metaspace":return new _r(A);case"ByteLevel":return new Ge(A);case"Replace":return new ce(A);case"ByteFallback":return new he(A);case"Fuse":return new $e(A);case"Strip":return new Re(A);case"Sequence":return new vt(A);case"CTC":return new Ke(A);case"BPEDecoder":return new Tt(A);default:throw new Error(`Unknown Decoder type: ${A.type}`)}}_call(A){return this.decode(A)}decode(A){return this.decode_chain(A).join("")}decode_chain(A){throw Error("`decode_chain` should be implemented in subclass.")}}class ce extends fe{decode_chain(A){const Q=p(this.config.pattern);return Q===null?A:A.map(me=>me.replaceAll(Q,this.config.content))}}class he extends fe{constructor(A){super(A),this.text_decoder=new TextDecoder}decode_chain(A){const Q=[];let me=[];for(const ge of A){let Ie=null;if(ge.length===6&&ge.startsWith("<0x")&&ge.endsWith(">")){const Be=parseInt(ge.slice(3,5),16);isNaN(Be)||(Ie=Be)}if(Ie!==null)me.push(Ie);else{if(me.length>0){const Be=this.text_decoder.decode(Uint8Array.from(me));Q.push(Be),me=[]}Q.push(ge)}}if(me.length>0){const ge=this.text_decoder.decode(Uint8Array.from(me));Q.push(ge),me=[]}return Q}}class $e extends fe{decode_chain(A){return[A.join("")]}}class Re extends fe{constructor(A){super(A),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(A){return A.map(Q=>{let me=0;for(let Ie=0;Ie<this.start&&Q[Ie]===this.content;++Ie){me=Ie+1;continue}let ge=Q.length;for(let Ie=0;Ie<this.stop;++Ie){const Be=Q.length-Ie-1;if(Q[Be]===this.content){ge=Be;continue}else break}return Q.slice(me,ge)})}}class ze extends fe{constructor(A){super(A),this.cleanup=A.cleanup}decode_chain(A){return A.map((Q,me)=>(me!==0&&(Q.startsWith(this.config.prefix)?Q=Q.replace(this.config.prefix,""):Q=" "+Q),this.cleanup&&(Q=E(Q)),Q))}}class Ge extends fe{constructor(A){super(A),this.byte_decoder=Z,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(A){const Q=A.join(""),me=new Uint8Array([...Q].map(Ie=>this.byte_decoder[Ie]));return this.text_decoder.decode(me)}decode_chain(A){const Q=[];let me=[];for(const ge of A)this.added_tokens.find(Ie=>Ie.content===ge)!==void 0?(me.length>0&&(Q.push(this.convert_tokens_to_string(me)),me=[]),Q.push(ge)):me.push(ge);return me.length>0&&Q.push(this.convert_tokens_to_string(me)),Q}}class Ke extends fe{constructor(A){super(A),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(A){if(A.length===0)return"";const Q=[A[0]];for(let Ie=1;Ie<A.length;++Ie)A[Ie]!==Q.at(-1)&&Q.push(A[Ie]);let ge=Q.filter(Ie=>Ie!==this.pad_token).join("");return this.cleanup&&(ge=E(ge).replaceAll(this.word_delimiter_token," ").trim()),ge}decode_chain(A){return[this.convert_tokens_to_string(A)]}}class vt extends fe{constructor(A){super(A),this.decoders=A.decoders.map(Q=>fe.fromConfig(Q))}decode_chain(A){return this.decoders.reduce((Q,me)=>me.decode_chain(Q),A)}}class Tt extends fe{constructor(A){super(A),this.suffix=this.config.suffix}decode_chain(A){return A.map((Q,me)=>Q.replaceAll(this.suffix,me===A.length-1?"":" "))}}class gt extends fe{decode_chain(A){let Q="";for(let me=1;me<A.length;me+=2)Q+=A[me];return[Q]}}class Gr extends Y{constructor(A){super(),this.addPrefixSpace=A.add_prefix_space,this.replacement=A.replacement,this.strRep=A.str_rep||this.replacement,this.prepend_scheme=A.prepend_scheme??"always"}pre_tokenize_text(A,{section_index:Q=void 0}={}){let me=A.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!me.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&Q===0)&&(me=this.strRep+me),[me]}}class _r extends fe{constructor(A){super(A),this.addPrefixSpace=A.add_prefix_space,this.replacement=A.replacement}decode_chain(A){const Q=[];for(let me=0;me<A.length;++me){let ge=A[me].replaceAll(this.replacement," ");this.addPrefixSpace&&me==0&&ge.startsWith(" ")&&(ge=ge.substring(1)),Q.push(ge)}return Q}}class xr extends ne{constructor(A){super(A),this.charsmap=A.precompiled_charsmap}normalize(A){return A=A.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),A=A.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),A.includes("")?A=A.split("").map(me=>me.normalize("NFKC")).join(""):A=A.normalize("NFKC"),A}}class zn extends Y{constructor(A){super(),this.tokenizers=A.pretokenizers.map(Q=>Y.fromConfig(Q))}pre_tokenize_text(A,Q){return this.tokenizers.reduce((me,ge)=>ge.pre_tokenize(me,Q),[A])}}class ir extends Y{constructor(A){super()}pre_tokenize_text(A,Q){return A.match(/\w+|[^\w\s]+/g)||[]}}class yn extends Y{constructor(A){super()}pre_tokenize_text(A,Q){return M(A)}}class Gs extends Y{constructor(A){super(),this.config=A,this.pattern=p(this.config.pattern),this.content=this.config.content}pre_tokenize_text(A,Q){return this.pattern===null?[A]:[A.replaceAll(this.pattern,this.config.content)]}}const Hs=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function ys(Ce,A,Q,me){for(const ge of Object.keys(Ce)){const Ie=A-Ce[ge].length,Be=Q(ge),tt=new Array(Ie).fill(Be);Ce[ge]=me==="right"?(0,o.mergeArrays)(Ce[ge],tt):(0,o.mergeArrays)(tt,Ce[ge])}}function ws(Ce,A){for(const Q of Object.keys(Ce))Ce[Q].length=A}class _t extends n.Callable{return_token_type_ids=!1;padding_side="right";constructor(A,Q){super(),this.config=Q,this.normalizer=ne.fromConfig(A.normalizer),this.pre_tokenizer=Y.fromConfig(A.pre_tokenizer),this.model=G.fromConfig(A.model,Q),this.post_processor=oe.fromConfig(A.post_processor),this.decoder=fe.fromConfig(A.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const me of A.added_tokens){const ge=new L(me);this.added_tokens.push(ge),this.model.tokens_to_ids.set(ge.content,ge.id),this.model.vocab[ge.id]=ge.content,ge.special&&(this.special_tokens.push(ge.content),this.all_special_ids.push(ge.id))}if(this.additional_special_tokens=Q.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(me=>me.content)),this.added_tokens_map=new Map(this.added_tokens.map(me=>[me.content,me])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=Q.model_max_length,this.remove_space=Q.remove_space,this.clean_up_tokenization_spaces=Q.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=Q.do_lowercase_and_remove_accent??!1,Q.padding_side&&(this.padding_side=Q.padding_side),this.add_bos_token=Q.add_bos_token,this.add_eos_token=Q.add_eos_token,this.legacy=!1,this.chat_template=Q.chat_template??null,Array.isArray(this.chat_template)){const me=Object.create(null);for(const{name:ge,template:Ie}of this.chat_template){if(typeof ge!="string"||typeof Ie!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');me[ge]=Ie}this.chat_template=me}this._compiled_template_cache=new Map}getToken(...A){for(const Q of A){const me=this.config[Q];if(me)if(typeof me=="object"){if(me.__type==="AddedToken")return me.content;throw Error(`Unknown token: ${me}`)}else return me}return null}static async from_pretrained(A,{progress_callback:Q=null,config:me=null,cache_dir:ge=null,local_files_only:Ie=!1,revision:Be="main",legacy:tt=null}={}){const nt=await d(A,{progress_callback:Q,config:me,cache_dir:ge,local_files_only:Ie,revision:Be,legacy:tt});return new this(...nt)}_call(A,{text_pair:Q=null,add_special_tokens:me=!0,padding:ge=!1,truncation:Ie=null,max_length:Be=null,return_tensor:tt=!0,return_token_type_ids:nt=null}={}){const ot=Array.isArray(A);let Je;if(ot){if(A.length===0)throw Error("text array must be non-empty");if(Q!==null){if(Array.isArray(Q)){if(A.length!==Q.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");Je=A.map((Ct,Dr)=>this._encode_plus(Ct,{text_pair:Q[Dr],add_special_tokens:me,return_token_type_ids:nt}))}else Je=A.map(Ct=>this._encode_plus(Ct,{add_special_tokens:me,return_token_type_ids:nt}))}else{if(A==null)throw Error("text may not be null or undefined");if(Array.isArray(Q))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");Je=[this._encode_plus(A,{text_pair:Q,add_special_tokens:me,return_token_type_ids:nt})]}if(Be===null?Be=this.model_max_length:Ie===null&&(ge===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),Be=this.model_max_length):ge===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),Ie=!0)),ge===!0&&(Be=Math.min((0,i.max)(Je.map(Ct=>Ct.input_ids.length))[0],Be??1/0)),Be=Math.min(Be,this.model_max_length??1/0),ge||Ie)for(let Ct=0;Ct<Je.length;++Ct)Je[Ct].input_ids.length!==Be&&(Je[Ct].input_ids.length>Be?Ie&&ws(Je[Ct],Be):ge&&ys(Je[Ct],Be,Dr=>Dr==="input_ids"?this.pad_token_id:0,this.padding_side));const Bt={};if(tt){if(!(ge&&Ie)&&Je.some(Dr=>{for(const ln of Object.keys(Dr))if(Dr[ln].length!==Je[0][ln]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const Ct=[Je.length,Je[0].input_ids.length];for(const Dr of Object.keys(Je[0]))Bt[Dr]=new a.Tensor("int64",BigInt64Array.from(Je.flatMap(ln=>ln[Dr]).map(BigInt)),Ct)}else{for(const Ct of Object.keys(Je[0]))Bt[Ct]=Je.map(Dr=>Dr[Ct]);if(!ot)for(const Ct of Object.keys(Bt))Bt[Ct]=Bt[Ct][0]}return Bt}_encode_text(A){if(A===null)return null;const Q=this.added_tokens_splitter.split(A);for(let ge=0;ge<Q.length;++ge){const Ie=this.added_tokens_map.get(Q[ge]);Ie&&(Ie.lstrip&&ge>0&&(Q[ge-1]=Q[ge-1].trimEnd()),Ie.rstrip&&ge<Q.length-1&&(Q[ge+1]=Q[ge+1].trimStart()))}return Q.flatMap((ge,Ie)=>{if(ge.length===0)return[];if(this.added_tokens_map.has(ge))return[ge];if(this.remove_space===!0&&(ge=ge.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(ge=_(ge)),this.normalizer!==null&&(ge=this.normalizer(ge)),ge.length===0)return[];const Be=this.pre_tokenizer!==null?this.pre_tokenizer(ge,{section_index:Ie}):[ge];return this.model(Be)})}_encode_plus(A,{text_pair:Q=null,add_special_tokens:me=!0,return_token_type_ids:ge=null}={}){const{tokens:Ie,token_type_ids:Be}=this._tokenize_helper(A,{pair:Q,add_special_tokens:me}),tt=this.model.convert_tokens_to_ids(Ie),nt={input_ids:tt,attention_mask:new Array(tt.length).fill(1)};return(ge??this.return_token_type_ids)&&Be&&(nt.token_type_ids=Be),nt}_tokenize_helper(A,{pair:Q=null,add_special_tokens:me=!1}={}){const ge=this._encode_text(A),Ie=this._encode_text(Q);return this.post_processor?this.post_processor(ge,Ie,{add_special_tokens:me}):{tokens:(0,o.mergeArrays)(ge??[],Ie??[])}}tokenize(A,{pair:Q=null,add_special_tokens:me=!1}={}){return this._tokenize_helper(A,{pair:Q,add_special_tokens:me}).tokens}encode(A,{text_pair:Q=null,add_special_tokens:me=!0,return_token_type_ids:ge=null}={}){return this._encode_plus(A,{text_pair:Q,add_special_tokens:me,return_token_type_ids:ge}).input_ids}batch_decode(A,Q={}){return A instanceof a.Tensor&&(A=A.tolist()),A.map(me=>this.decode(me,Q))}decode(A,Q={}){if(A instanceof a.Tensor&&(A=b(A)),!Array.isArray(A)||A.length===0||!(0,o.isIntegralNumber)(A[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(A,Q)}decode_single(A,{skip_special_tokens:Q=!1,clean_up_tokenization_spaces:me=null}){let ge=this.model.convert_ids_to_tokens(A);Q&&(ge=ge.filter(Be=>!this.special_tokens.includes(Be)));let Ie=this.decoder?this.decoder(ge):ge.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(Ie=Ie.replaceAll(this.decoder.end_of_word_suffix," "),Q&&(Ie=Ie.trim())),(me??this.clean_up_tokenization_spaces)&&(Ie=E(Ie)),Ie}get_chat_template({chat_template:A=null,tools:Q=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const me=this.chat_template;if(A!==null&&Object.hasOwn(me,A))A=me[A];else if(A===null)if(Q!==null&&"tool_use"in me)A=me.tool_use;else if("default"in me)A=me.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(me).sort()}.`)}else if(A===null)if(this.chat_template)A=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return A}apply_chat_template(A,{tools:Q=null,documents:me=null,chat_template:ge=null,add_generation_prompt:Ie=!1,tokenize:Be=!0,padding:tt=!1,truncation:nt=!1,max_length:ot=null,return_tensor:Je=!0,return_dict:Bt=!1,tokenizer_kwargs:Ct={},...Dr}={}){if(ge=this.get_chat_template({chat_template:ge,tools:Q}),typeof ge!="string")throw Error(`chat_template must be a string, but got ${typeof ge}`);let ln=this._compiled_template_cache.get(ge);ln===void 0&&(ln=new c.Template(ge),this._compiled_template_cache.set(ge,ln));const br=Object.create(null);for(const hr of Hs){const Nn=this.getToken(hr);Nn&&(br[hr]=Nn)}const Br=ln.render({messages:A,add_generation_prompt:Ie,tools:Q,documents:me,...br,...Dr});if(Be){const hr=this._call(Br,{add_special_tokens:!1,padding:tt,truncation:nt,max_length:ot,return_tensor:Je,...Ct});return Bt?hr:hr.input_ids}return Br}}class es extends _t{return_token_type_ids=!0}class mr extends _t{return_token_type_ids=!0}class Ot extends _t{return_token_type_ids=!0}class ts extends _t{return_token_type_ids=!0}class S extends _t{return_token_type_ids=!0}class se extends _t{return_token_type_ids=!0}class K extends _t{return_token_type_ids=!0}class ae extends _t{return_token_type_ids=!0}class _e extends _t{return_token_type_ids=!0}class Se extends _t{}class Ne extends _t{}class st extends _t{return_token_type_ids=!0;constructor(A,Q){super(A,Q),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class pt extends _t{return_token_type_ids=!0}class et extends _t{}class Dt extends _t{}class Rt extends _t{}class tn extends _t{constructor(A,Q){super(A,Q),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(me=>this.languageRegex.test(me)),this.lang_to_token=me=>me}_build_translation_inputs(A,Q,me){return Qr(this,A,Q,me)}}class tr extends tn{}class qr extends _t{}class Xn extends _t{}const Tr="";class rn extends _t{padding_side="left";constructor(A,Q){super(A,Q),this.legacy=Q.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new Gr({replacement:Tr,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(A){if(A===null)return null;if(this.legacy||A.length===0)return super._encode_text(A);let Q=super._encode_text(Tr+A.replaceAll(Tr," "));return Q.length>1&&Q[0]===Tr&&this.special_tokens.includes(Q[1])&&(Q=Q.slice(1)),Q}}class po extends _t{}class Xr extends _t{}class $o extends _t{}class So extends _t{}class Pn extends _t{}class rs extends _t{}class Io extends _t{}class Nr extends _t{}class Qn extends _t{}function Qr(Ce,A,Q,me){if(!("language_codes"in Ce)||!Array.isArray(Ce.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in Ce)||!(Ce.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in Ce)||typeof Ce.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const ge=me.src_lang,Ie=me.tgt_lang;if(!Ce.language_codes.includes(Ie))throw new Error(`Target language code "${Ie}" is not valid. Must be one of: {${Ce.language_codes.join(", ")}}`);if(ge!==void 0){if(!Ce.language_codes.includes(ge))throw new Error(`Source language code "${ge}" is not valid. Must be one of: {${Ce.language_codes.join(", ")}}`);for(const Be of Ce.post_processor.config.single)if("SpecialToken"in Be&&Ce.languageRegex.test(Be.SpecialToken.id)){Be.SpecialToken.id=Ce.lang_to_token(ge);break}}return me.forced_bos_token_id=Ce.model.convert_tokens_to_ids([Ce.lang_to_token(Ie)])[0],Ce._call(A,Q)}class an extends _t{constructor(A,Q){super(A,Q),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(me=>this.languageRegex.test(me)),this.lang_to_token=me=>me}_build_translation_inputs(A,Q,me){return Qr(this,A,Q,me)}}class mo extends _t{constructor(A,Q){super(A,Q),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(me=>this.languageRegex.test(me)).map(me=>me.slice(2,-2)),this.lang_to_token=me=>`__${me}__`}_build_translation_inputs(A,Q,me){return Qr(this,A,Q,me)}}class ns extends _t{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(A,{return_timestamps:Q=!1,return_language:me=!1,time_precision:ge=null,force_full_sequences:Ie=!0}={}){if(ge===null)throw Error("Must specify time_precision");let Be=null;const tt=Q==="word";function nt(){return{language:Be,timestamp:[null,null],text:""}}const ot=[];let Je=nt(),Bt=0;const Ct=this.timestamp_begin,ln=Ct+1500;let br=[],Br=[],hr=!1,Nn=null;const ho=new Set(this.all_special_ids);for(const Ir of A){const Yr=Ir.tokens,Sn=tt?Ir.token_timestamps:null;let In=null,Oo=Ct;if("stride"in Ir){const[cn,kr,Jr]=Ir.stride;if(Bt-=kr,Nn=cn-Jr,kr&&(Oo=kr/ge+Ct),Jr)for(let Hr=Yr.length-1;Hr>=0;--Hr){const An=Number(Yr[Hr]);if(An>=Ct){if(In!==null&&(An-Ct)*ge<Nn)break;In=An}}}let nn=[],go=[];for(let cn=0;cn<Yr.length;++cn){const kr=Number(Yr[cn]);if(ho.has(kr)){const Jr=this.decode([kr]),Hr=u.WHISPER_LANGUAGE_MAPPING.get(Jr.slice(2,-2));if(Hr!==void 0){if(Be!==null&&Hr!==Be&&!Q){br.push(nn);const An=this.findLongestCommonSequence(br)[0],Ks=this.decode(An);Je.text=Ks,ot.push(Je),br=[],nn=[],Je=nt()}Be=Je.language=Hr}}else if(kr>=Ct&&kr<=ln){const Jr=(kr-Ct)*ge+Bt,Hr=(0,i.round)(Jr,2);if(In!==null&&kr>=In)hr=!0;else if(hr||br.length>0&&kr<Oo)hr=!1;else if(Je.timestamp[0]===null)Je.timestamp[0]=Hr;else if(Hr!==Je.timestamp[0]){Je.timestamp[1]=Hr,br.push(nn),tt&&Br.push(go);const[An,Ks]=this.findLongestCommonSequence(br,Br),ua=this.decode(An);Je.text=ua,tt&&(Je.words=this.collateWordTimestamps(An,Ks,Be)),ot.push(Je),br=[],nn=[],Br=[],go=[],Je=nt()}}else if(nn.push(kr),tt){let Jr=(0,i.round)(Sn[cn]+Bt,2),Hr;if(cn+1<Sn.length){Hr=(0,i.round)(Sn[cn+1]+Bt,2);const An=this.decode([kr]);w.test(An)&&(Hr=(0,i.round)(Math.min(Jr+ge,Hr),2))}else Hr=null;go.push([Jr,Hr])}}if("stride"in Ir){const[cn,kr,Jr]=Ir.stride;Bt+=cn-Jr}nn.length>0?(br.push(nn),tt&&Br.push(go)):br.every(cn=>cn.length===0)&&(Je=nt(),br=[],nn=[],Br=[],go=[])}if(br.length>0){if(Ie&&Q)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Ir,Yr]=this.findLongestCommonSequence(br,Br),Sn=this.decode(Ir);Je.text=Sn,tt&&(Je.words=this.collateWordTimestamps(Ir,Yr,Be)),ot.push(Je)}let wn=Object.create(null);const oo=ot.map(Ir=>Ir.text).join("");if(Q||me){for(let Ir=0;Ir<ot.length;++Ir){const Yr=ot[Ir];Q||delete Yr.timestamp,me||delete Yr.language}if(tt){const Ir=[];for(const Yr of ot)for(const Sn of Yr.words)Ir.push(Sn);wn={chunks:Ir}}else wn={chunks:ot}}return[oo,wn]}findLongestCommonSequence(A,Q=null){let me=A[0],ge=me.length,Ie=[];const Be=Array.isArray(Q)&&Q.length>0;let tt=Be?[]:null,nt=Be?Q[0]:null;for(let ot=1;ot<A.length;++ot){const Je=A[ot];let Bt=0,Ct=[ge,ge,0,0];const Dr=Je.length;for(let wn=1;wn<ge+Dr;++wn){const oo=Math.max(0,ge-wn),Ir=Math.min(ge,ge+Dr-wn),Yr=me.slice(oo,Ir),Sn=Math.max(0,wn-ge),In=Math.min(Dr,wn),Oo=Je.slice(Sn,In);if(Yr.length!==Oo.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let nn;Be?nn=Yr.filter((kr,Jr)=>kr===Oo[Jr]&&nt[oo+Jr]<=Q[ot][Sn+Jr]).length:nn=Yr.filter((kr,Jr)=>kr===Oo[Jr]).length;const go=wn/1e4,cn=nn/wn+go;nn>1&&cn>Bt&&(Bt=cn,Ct=[oo,Ir,Sn,In])}const[ln,br,Br,hr]=Ct,Nn=Math.floor((br+ln)/2),ho=Math.floor((hr+Br)/2);Ie.push(...me.slice(0,Nn)),me=Je.slice(ho),ge=me.length,Be&&(tt.push(...nt.slice(0,Nn)),nt=Q[ot].slice(ho))}return Ie.push(...me),Be?(tt.push(...nt),[Ie,tt]):[Ie,[]]}collateWordTimestamps(A,Q,me){const[ge,Ie,Be]=this.combineTokensIntoWords(A,me),tt=[];for(let nt=0;nt<ge.length;++nt){const ot=Be[nt];tt.push({text:ge[nt],timestamp:[Q[ot.at(0)][0],Q[ot.at(-1)][1]]})}return tt}combineTokensIntoWords(A,Q,me=`"'([{-`,ge=`"'.,!?:)]}`){Q=Q??"english";let Ie,Be,tt;return["chinese","japanese","thai","lao","myanmar"].includes(Q)?[Ie,Be,tt]=this.splitTokensOnUnicode(A):[Ie,Be,tt]=this.splitTokensOnSpaces(A),this.mergePunctuations(Ie,Be,tt,me,ge)}decode(A,Q){let me;return Q?.decode_with_timestamps?(A instanceof a.Tensor&&(A=b(A)),me=this.decodeWithTimestamps(A,Q)):me=super.decode(A,Q),me}decodeWithTimestamps(A,Q){const me=Q?.time_precision??.02,ge=Array.from(this.all_special_ids).at(-1)+1;let Ie=[[]];for(let Be of A)if(Be=Number(Be),Be>=ge){const tt=((Be-ge)*me).toFixed(2);Ie.push(`<|${tt}|>`),Ie.push([])}else Ie[Ie.length-1].push(Be);return Ie=Ie.map(Be=>typeof Be=="string"?Be:super.decode(Be,Q)),Ie.join("")}splitTokensOnUnicode(A){const Q=this.decode(A,{decode_with_timestamps:!0}),me="",ge=[],Ie=[],Be=[];let tt=[],nt=[],ot=0;for(let Je=0;Je<A.length;++Je){const Bt=A[Je];tt.push(Bt),nt.push(Je);const Ct=this.decode(tt,{decode_with_timestamps:!0});(!Ct.includes(me)||Q[ot+Ct.indexOf(me)]===me)&&(ge.push(Ct),Ie.push(tt),Be.push(nt),tt=[],nt=[],ot+=Ct.length)}return[ge,Ie,Be]}splitTokensOnSpaces(A){const[Q,me,ge]=this.splitTokensOnUnicode(A),Ie=[],Be=[],tt=[],nt=new RegExp(`^[${x}]$`,"gu");for(let ot=0;ot<Q.length;++ot){const Je=Q[ot],Bt=me[ot],Ct=ge[ot],Dr=Bt[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),ln=Je.startsWith(" "),br=Je.trim(),Br=nt.test(br);if(Dr||ln||Br||Ie.length===0)Ie.push(Je),Be.push(Bt),tt.push(Ct);else{const hr=Ie.length-1;Ie[hr]+=Je,Be[hr].push(...Bt),tt[hr].push(...Ct)}}return[Ie,Be,tt]}mergePunctuations(A,Q,me,ge,Ie){const Be=structuredClone(A),tt=structuredClone(Q),nt=structuredClone(me);let ot=Be.length-2,Je=Be.length-1;for(;ot>=0;)Be[ot].startsWith(" ")&&ge.includes(Be[ot].trim())?(Be[Je]=Be[ot]+Be[Je],tt[Je]=(0,o.mergeArrays)(tt[ot],tt[Je]),nt[Je]=(0,o.mergeArrays)(nt[ot],nt[Je]),Be[ot]="",tt[ot]=[],nt[ot]=[]):Je=ot,--ot;for(ot=0,Je=1;Je<Be.length;)!Be[ot].endsWith(" ")&&Ie.includes(Be[Je])?(Be[ot]+=Be[Je],tt[ot]=(0,o.mergeArrays)(tt[ot],tt[Je]),nt[ot]=(0,o.mergeArrays)(nt[ot],nt[Je]),Be[Je]="",tt[Je]=[],nt[Je]=[]):ot=Je,++Je;return[Be.filter(Bt=>Bt),tt.filter(Bt=>Bt.length>0),nt.filter(Bt=>Bt.length>0)]}}class no extends _t{}class Ms extends _t{}class $n extends _t{}class We extends _t{constructor(A,Q){super(A,Q),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(me=>this.languageRegex.test(me)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(A){if(A===null)return null;const[Q,...me]=A.trim().split(this.languageRegex);if(me.length===0)return super._encode_text(Q);if(me.length===2){const[ge,Ie]=me;return this.supported_language_codes.includes(ge)||console.warn(`Unsupported language code "${ge}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,o.mergeArrays)([ge],super._encode_text(Ie))}}}class Xe extends _t{}class it extends _t{}class Cr extends _t{}class xs extends _t{}class os extends _t{}class Ts extends _t{constructor(A,Q){super(A,Q),this.decoder=new gt({})}}class Ao extends _t{}class xi extends _t{}class Ti extends _t{}class da{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:et,DistilBertTokenizer:Se,CamembertTokenizer:Ne,DebertaTokenizer:S,DebertaV2Tokenizer:se,BertTokenizer:es,HerbertTokenizer:K,ConvBertTokenizer:ae,RoFormerTokenizer:_e,XLMTokenizer:st,ElectraTokenizer:pt,MobileBertTokenizer:Ot,SqueezeBertTokenizer:ts,AlbertTokenizer:mr,GPT2Tokenizer:Dt,BartTokenizer:Rt,MBartTokenizer:tn,MBart50Tokenizer:tr,RobertaTokenizer:qr,WhisperTokenizer:ns,CodeGenTokenizer:no,CLIPTokenizer:Ms,SiglipTokenizer:$n,MarianTokenizer:We,BloomTokenizer:Xn,NllbTokenizer:an,M2M100Tokenizer:mo,LlamaTokenizer:rn,CodeLlamaTokenizer:po,XLMRobertaTokenizer:Xr,MPNetTokenizer:$o,FalconTokenizer:So,GPTNeoXTokenizer:Pn,EsmTokenizer:rs,Wav2Vec2CTCTokenizer:Xe,BlenderbotTokenizer:it,BlenderbotSmallTokenizer:Cr,SpeechT5Tokenizer:xs,NougatTokenizer:os,VitsTokenizer:Ts,Qwen2Tokenizer:Io,GemmaTokenizer:Nr,Grok1Tokenizer:Qn,CohereTokenizer:Ao,MgpstrTokenizer:xi,Ernie4_5_Tokenizer:Ti,PreTrainedTokenizer:_t};static async from_pretrained(A,{progress_callback:Q=null,config:me=null,cache_dir:ge=null,local_files_only:Ie=!1,revision:Be="main",legacy:tt=null}={}){const[nt,ot]=await d(A,{progress_callback:Q,config:me,cache_dir:ge,local_files_only:Ie,revision:Be,legacy:tt}),Je=ot.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let Bt=this.TOKENIZER_CLASS_MAPPING[Je];return Bt||(console.warn(`Unknown tokenizer class "${Je}", attempting to construct from base class.`),Bt=_t),new Bt(nt,ot)}}}),"./src/utils/audio.js":((e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>j,hamming:()=>f,hanning:()=>d,mel_filter_bank:()=>T,read_audio:()=>c,spectrogram:()=>$,window_function:()=>O});var n=r("./src/utils/hub.js"),o=r("./src/utils/maths.js"),s=r("./src/utils/core.js"),i=r("./src/env.js"),a=r("./src/utils/tensor.js"),l=r("?7992");async function c(D,re){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const Z=await(await(0,n.getFile)(D)).arrayBuffer(),te=new AudioContext({sampleRate:re});typeof re>"u"&&console.warn(`No sampling rate provided, using default of ${te.sampleRate}Hz.`);const ie=await te.decodeAudioData(Z);let ne;if(ie.numberOfChannels===2){const ve=Math.sqrt(2),Me=ie.getChannelData(0),W=ie.getChannelData(1);ne=new Float32Array(Me.length);for(let R=0;R<ie.length;++R)ne[R]=ve*(Me[R]+W[R])/2}else ne=ie.getChannelData(0);return ne}function u(D,re){if(D<1)return new Float64Array;if(D===1)return new Float64Array([1]);const Z=1-re,te=2*Math.PI/(D-1),ie=new Float64Array(D);for(let ne=0;ne<D;++ne)ie[ne]=re-Z*Math.cos(ne*te);return ie}function d(D){return u(D,.5)}function f(D){return u(D,.54)}const p={htk:D=>2595*Math.log10(1+D/700),kaldi:D=>1127*Math.log(1+D/700),slaney:(D,re=1e3,Z=15,te=27/Math.log(6.4))=>D>=re?Z+Math.log(D/re)*te:3*D/200};function m(D,re="htk"){const Z=p[re];if(!Z)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof D=="number"?Z(D):D.map(te=>Z(te))}const b={htk:D=>700*(10**(D/2595)-1),kaldi:D=>700*(Math.exp(D/1127)-1),slaney:(D,re=1e3,Z=15,te=Math.log(6.4)/27)=>D>=Z?re*Math.exp(te*(D-Z)):200*D/3};function E(D,re="htk"){const Z=b[re];if(!Z)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof D=="number"?Z(D):D.map(te=>Z(te))}function h(D,re){const Z=Float64Array.from({length:re.length-1},(ve,Me)=>re[Me+1]-re[Me]),te=Array.from({length:D.length},()=>new Array(re.length));for(let ve=0;ve<D.length;++ve){const Me=te[ve];for(let W=0;W<re.length;++W)Me[W]=re[W]-D[ve]}const ie=re.length-2,ne=Array.from({length:ie},()=>new Array(D.length));for(let ve=0;ve<D.length;++ve){const Me=te[ve];for(let W=0;W<ie;++W){const R=-Me[W]/Z[W],J=Me[W+2]/Z[W+1];ne[W][ve]=Math.max(0,Math.min(R,J))}}return ne}function _(D,re,Z){const te=(re-D)/(Z-1);return Float64Array.from({length:Z},(ie,ne)=>D+te*ne)}function T(D,re,Z,te,ie,ne=null,ve="htk",Me=!1){if(ne!==null&&ne!=="slaney")throw new Error('norm must be one of null or "slaney"');if(D<2)throw new Error(`Require num_frequency_bins: ${D} >= 2`);if(Z>te)throw new Error(`Require min_frequency: ${Z} <= max_frequency: ${te}`);const W=m(Z,ve),R=m(te,ve),J=_(W,R,re+2);let U=E(J,ve),be;if(Me){const de=ie/((D-1)*2);be=m(Float64Array.from({length:D},(Te,Pe)=>Pe*de),ve),U=J}else be=_(0,Math.floor(ie/2),D);const Le=h(be,U);if(ne!==null&&ne==="slaney")for(let de=0;de<re;++de){const Te=Le[de],Pe=2/(U[de+2]-U[de]);for(let xe=0;xe<D;++xe)Te[xe]*=Pe}return Le}function g(D,re,Z){const te=new D.constructor(D.length+re+Z),ie=D.length-1;for(let ne=0;ne<D.length;++ne)te[re+ne]=D[ne];for(let ne=1;ne<=re;++ne)te[re-ne]=D[(0,s.calculateReflectOffset)(ne,ie)];for(let ne=1;ne<=Z;++ne)te[ie+re+ne]=D[(0,s.calculateReflectOffset)(ie-ne,ie)];return te}function M(D,re,Z,te,ie){if(Z<=0)throw new Error("reference must be greater than zero");if(te<=0)throw new Error("min_value must be greater than zero");Z=Math.max(te,Z);const ne=Math.log10(Z);for(let ve=0;ve<D.length;++ve)D[ve]=re*Math.log10(Math.max(te,D[ve])-ne);if(ie!==null){if(ie<=0)throw new Error("db_range must be greater than zero");const ve=(0,o.max)(D)[0]-ie;for(let Me=0;Me<D.length;++Me)D[Me]=Math.max(D[Me],ve)}return D}function x(D,re=1,Z=1e-5,te=null){return M(D,20,re,Z,te)}function w(D,re=1,Z=1e-10,te=null){return M(D,10,re,Z,te)}async function $(D,re,Z,te,{fft_length:ie=null,power:ne=1,center:ve=!0,pad_mode:Me="reflect",onesided:W=!0,preemphasis:R=null,preemphasis_htk_flavor:J=!0,mel_filters:U=null,mel_floor:be=1e-10,log_mel:Le=null,reference:de=1,min_value:Te=1e-10,db_range:Pe=null,remove_dc_offset:xe=null,min_num_frames:Y=null,max_num_frames:B=null,do_pad:I=!0,transpose:q=!1}={}){const pe=re.length;if(ie===null&&(ie=Z),Z>ie)throw Error(`frame_length (${Z}) may not be larger than fft_length (${ie})`);if(pe!==Z)throw new Error(`Length of the window (${pe}) must equal frame_length (${Z})`);if(te<=0)throw new Error("hop_length must be greater than zero");if(ne===null&&U!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!J)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(ve){if(Me!=="reflect")throw new Error(`pad_mode="${Me}" not implemented yet.`);const Re=Math.floor((ie-1)/2)+1;D=g(D,Re,Re)}let ue=Math.floor(1+Math.floor((D.length-Z)/te));Y!==null&&ue<Y&&(ue=Y);const oe=W?Math.floor(ie/2)+1:ie;let N=ue,z=ue;B!==null&&(B>ue?I&&(z=B):z=N=B);const ee=new o.FFT(ie),le=new Float64Array(ie),ke=new Float64Array(ee.outputBufferSize),fe=new Float32Array(oe*z);for(let Re=0;Re<N;++Re){const ze=Re*te,Ge=Math.min(D.length-ze,Z);Ge!==Z&&le.fill(0,0,Z);for(let Ke=0;Ke<Ge;++Ke)le[Ke]=D[ze+Ke];if(xe){let Ke=0;for(let Tt=0;Tt<Ge;++Tt)Ke+=le[Tt];const vt=Ke/Ge;for(let Tt=0;Tt<Ge;++Tt)le[Tt]-=vt}if(R!==null){for(let Ke=Ge-1;Ke>=1;--Ke)le[Ke]-=R*le[Ke-1];le[0]*=1-R}for(let Ke=0;Ke<re.length;++Ke)le[Ke]*=re[Ke];ee.realTransform(ke,le);for(let Ke=0;Ke<oe;++Ke){const vt=Ke<<1;fe[Ke*z+Re]=ke[vt]**2+ke[vt+1]**2}}if(ne!==null&&ne!==2){const Re=ne/2;for(let ze=0;ze<fe.length;++ze)fe[ze]**=Re}const ce=U.length;let he=await(0,a.matmul)(new a.Tensor("float32",U.flat(),[ce,oe]),new a.Tensor("float32",fe,[oe,z]));q&&(he=he.transpose(1,0));const $e=he.data;for(let Re=0;Re<$e.length;++Re)$e[Re]=Math.max(be,$e[Re]);if(ne!==null&&Le!==null){const Re=Math.min($e.length,N*ce);switch(Le){case"log":for(let ze=0;ze<Re;++ze)$e[ze]=Math.log($e[ze]);break;case"log10":for(let ze=0;ze<Re;++ze)$e[ze]=Math.log10($e[ze]);break;case"dB":if(ne===1)x($e,de,Te,Pe);else if(ne===2)w($e,de,Te,Pe);else throw new Error(`Cannot use log_mel option '${Le}' with power ${ne}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${Le}'`)}}return he}function O(D,re,{periodic:Z=!0,frame_length:te=null,center:ie=!0}={}){const ne=Z?D+1:D;let ve;switch(re){case"boxcar":ve=new Float64Array(ne).fill(1);break;case"hann":case"hann_window":ve=d(ne);break;case"hamming":ve=f(ne);break;case"povey":ve=d(ne).map(Me=>Math.pow(Me,.85));break;default:throw new Error(`Unknown window type ${re}.`)}if(Z&&(ve=ve.subarray(0,D)),te===null)return ve;if(D>te)throw new Error(`Length of the window (${D}) may not be larger than frame_length (${te})`);return ve}function L(D,re){let Z=44;const te=new ArrayBuffer(Z+D.length*4),ie=new DataView(te);G(ie,0,"RIFF"),ie.setUint32(4,36+D.length*4,!0),G(ie,8,"WAVE"),G(ie,12,"fmt "),ie.setUint32(16,16,!0),ie.setUint16(20,3,!0),ie.setUint16(22,1,!0),ie.setUint32(24,re,!0),ie.setUint32(28,re*4,!0),ie.setUint16(32,4,!0),ie.setUint16(34,32,!0),G(ie,36,"data"),ie.setUint32(40,D.length*4,!0);for(let ne=0;ne<D.length;++ne,Z+=4)ie.setFloat32(Z,D[ne],!0);return te}function G(D,re,Z){for(let te=0;te<Z.length;++te)D.setUint8(re+te,Z.charCodeAt(te))}class j{constructor(re,Z){this.audio=re,this.sampling_rate=Z}toWav(){return L(this.audio,this.sampling_rate)}toBlob(){const re=this.toWav();return new Blob([re],{type:"audio/wav"})}async save(re){let Z;if(i.apis.IS_BROWSER_ENV){if(i.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");Z=s.saveBlob}else if(i.apis.IS_FS_AVAILABLE)Z=async(te,ie)=>{let ne=await ie.arrayBuffer();l.writeFileSync(te,Buffer.from(ne))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await Z(re,this.toBlob())}}}),"./src/utils/constants.js":((e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>o,FEATURE_EXTRACTOR_NAME:()=>s,GENERATION_CONFIG_NAME:()=>c,GITHUB_ISSUE_URL:()=>n,IMAGE_PROCESSOR_NAME:()=>i,PROCESSOR_NAME:()=>a});const n="https://github.com/huggingface/transformers.js/issues/new/choose",o="config.json",s="preprocessor_config.json",i=s,a="processor_config.json",l="chat_template.jinja",c="generation_config.json"}),"./src/utils/core.js":((e,t,r)=>{r.r(t),r.d(t,{calculateDimensions:()=>c,calculateReflectOffset:()=>p,count:()=>h,dispatchCallback:()=>n,escapeRegExp:()=>s,isIntegralNumber:()=>a,isNullishDimension:()=>l,isTypedArray:()=>i,len:()=>E,mergeArrays:()=>d,pick:()=>b,pop:()=>u,product:()=>f,reverseDictionary:()=>o,saveBlob:()=>m});function n(_,T){_&&_(T)}function o(_){return Object.fromEntries(Object.entries(_).map(([T,g])=>[g,T]))}function s(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(_){return _?.prototype?.__proto__?.constructor?.name==="TypedArray"}function a(_){return Number.isInteger(_)||typeof _=="bigint"}function l(_){return _==null||_===-1}function c(_){const T=[];let g=_;for(;Array.isArray(g);)T.push(g.length),g=g[0];return T}function u(_,T,g=void 0){const M=_[T];if(M!==void 0)return delete _[T],M;if(g===void 0)throw Error(`Key ${T} does not exist in object.`);return g}function d(..._){return Array.prototype.concat.apply([],_)}function f(..._){return _.reduce((T,g)=>T.flatMap(M=>g.map(x=>[M,x])))}function p(_,T){return Math.abs((_+T)%(2*T)-T)}function m(_,T){const g=URL.createObjectURL(T),M=document.createElement("a");M.href=g,M.download=_,M.click(),M.remove(),URL.revokeObjectURL(g)}function b(_,T){return Object.assign({},...T.map(g=>{if(_[g]!==void 0)return{[g]:_[g]}}))}function E(_){let T=0;for(const g of _)++T;return T}function h(_,T){let g=0;for(const M of _)M===T&&++g;return g}}),"./src/utils/data-structures.js":((e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>o,DictionarySplitter:()=>l,LRUCache:()=>c,PriorityQueue:()=>n,TokenLattice:()=>i});class n{constructor(d=(p,m)=>p>m,f=1/0){this._heap=[],this._comparator=d,this._maxSize=f}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...d){return this.extend(d)}extend(d){for(const f of d)if(this.size<this._maxSize)this._heap.push(f),this._siftUp();else{const p=this._smallest();this._comparator(f,this._heap[p])&&(this._heap[p]=f,this._siftUpFrom(p))}return this.size}pop(){const d=this.peek(),f=this.size-1;return f>0&&this._swap(0,f),this._heap.pop(),this._siftDown(),d}replace(d){const f=this.peek();return this._heap[0]=d,this._siftDown(),f}_parent(d){return(d+1>>>1)-1}_left(d){return(d<<1)+1}_right(d){return d+1<<1}_greater(d,f){return this._comparator(this._heap[d],this._heap[f])}_swap(d,f){const p=this._heap[d];this._heap[d]=this._heap[f],this._heap[f]=p}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(d){for(;d>0&&this._greater(d,this._parent(d));)this._swap(d,this._parent(d)),d=this._parent(d)}_siftDown(){let d=0;for(;this._left(d)<this.size&&this._greater(this._left(d),d)||this._right(d)<this.size&&this._greater(this._right(d),d);){const f=this._right(d)<this.size&&this._greater(this._right(d),this._left(d))?this._right(d):this._left(d);this._swap(d,f),d=f}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class o{constructor(){this.root=s.default()}extend(d){for(const f of d)this.push(f)}push(d){let f=this.root;for(const p of d){let m=f.children.get(p);m===void 0&&(m=s.default(),f.children.set(p,m)),f=m}f.isLeaf=!0}*commonPrefixSearch(d){let f=this.root;if(f===void 0)return;let p="";for(const m of d){if(p+=m,f=f.children.get(m),f===void 0)return;f.isLeaf&&(yield p)}}}class s{constructor(d,f){this.isLeaf=d,this.children=f}static default(){return new s(!1,new Map)}}class i{constructor(d,f,p){this.chars=Array.from(d),this.len=this.chars.length,this.bosTokenId=f,this.eosTokenId=p,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const m=new a(this.bosTokenId,0,0,0,0),b=new a(this.eosTokenId,1,this.len,0,0);this.nodes.push(m.clone()),this.nodes.push(b.clone()),this.beginNodes[this.len].push(b),this.endNodes[0].push(m)}insert(d,f,p,m){const b=this.nodes.length,E=new a(m,b,d,f,p);this.beginNodes[d].push(E),this.endNodes[d+f].push(E),this.nodes.push(E)}viterbi(){const d=this.len;let f=0;for(;f<=d;){if(this.beginNodes[f].length==0)return[];for(let h of this.beginNodes[f]){h.prev=null;let _=0,T=null;for(let g of this.endNodes[f]){const M=g.backtraceScore+h.score;(T===null||M>_)&&(T=g.clone(),_=M)}if(T!==null)h.prev=T,h.backtraceScore=_;else return[]}++f}const p=[],b=this.beginNodes[d][0].prev;if(b===null)return[];let E=b.clone();for(;E.prev!==null;)p.push(E.clone()),E=E.clone().prev.clone();return p.reverse(),p}piece(d){return this.chars.slice(d.pos,d.pos+d.length).join("")}tokens(){return this.viterbi().map(f=>this.piece(f))}tokenIds(){return this.viterbi().map(f=>f.tokenId)}}class a{constructor(d,f,p,m,b){this.tokenId=d,this.nodeId=f,this.pos=p,this.length=m,this.score=b,this.prev=null,this.backtraceScore=0}clone(){const d=new a(this.tokenId,this.nodeId,this.pos,this.length,this.score);return d.prev=this.prev,d.backtraceScore=this.backtraceScore,d}}class l{constructor(d){this.trie=this._buildTrie(d)}_buildTrie(d){const f=Object.create(null);for(const p of d){let m=f;for(let b=0;b<p.length;++b)m=m[p[b]]??=Object.create(null);m.end=p}return f}split(d){const f=[],p=d.length;let m=0,b=0;for(;b<p;){let E=this.trie,h=null,_=b;for(;_<p&&(E=E[d[_]]);)E.end&&(h=E.end),++_;h?(b>m&&f.push(d.slice(m,b)),f.push(h),b+=h.length,m=b):++b}return m<p&&f.push(d.slice(m)),f}}class c{constructor(d){this.capacity=d,this.cache=new Map}get(d){if(!this.cache.has(d))return;const f=this.cache.get(d);return this.cache.delete(d),this.cache.set(d,f),f}put(d,f){this.cache.has(d)&&this.cache.delete(d),this.cache.set(d,f),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}}),"./src/utils/devices.js":((e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>n});const n=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})}),"./src/utils/dtypes.js":((e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>i,DEFAULT_DEVICE_DTYPE_MAPPING:()=>a,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>s});var n=r("./src/env.js"),o=r("./src/utils/devices.js");const s=(function(){let c;return async function(){if(c===void 0)if(!n.apis.IS_WEBGPU_AVAILABLE)c=!1;else try{c=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{c=!1}return c}})(),i=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),a=Object.freeze({[o.DEVICE_TYPES.wasm]:i.q8}),l=Object.freeze({[i.fp32]:"",[i.fp16]:"_fp16",[i.int8]:"_int8",[i.uint8]:"_uint8",[i.q8]:"_quantized",[i.q4]:"_q4",[i.q4f16]:"_q4f16",[i.bnb4]:"_bnb4"})}),"./src/utils/generic.js":((e,t,r)=>{r.r(t),r.d(t,{Callable:()=>n});const n=class{constructor(){let o=function(...s){return o._call(...s)};return Object.setPrototypeOf(o,new.target.prototype)}_call(...o){throw Error("Must implement _call method in subclass")}}}),"./src/utils/hub.js":((e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>a,getFile:()=>p,getModelFile:()=>_,getModelJSON:()=>g,getModelText:()=>T});var n=r("?7992"),o=r("?5af5"),s=r("./src/env.js"),i=r("./src/utils/core.js");const a=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class c{constructor($){if(this.filePath=$,this.headers=new Headers,this.exists=n.existsSync($),this.exists){this.status=200,this.statusText="OK";let O=n.statSync($);this.headers.set("content-length",O.size.toString()),this.updateContentType();const L=n.createReadStream($);this.body=new ReadableStream({start(G){L.on("data",j=>G.enqueue(j)),L.on("end",()=>G.close()),L.on("error",j=>G.error(j))},cancel(){L.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const $=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[$]??"application/octet-stream")}clone(){let $=new c(this.filePath);return $.exists=this.exists,$.status=this.status,$.statusText=this.statusText,$.headers=new Headers(this.headers),$}async arrayBuffer(){return(await n.promises.readFile(this.filePath)).buffer}async blob(){const $=await n.promises.readFile(this.filePath);return new Blob([$],{type:this.headers.get("content-type")})}async text(){return await n.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function u(w,$=null,O=null){let L;try{L=new URL(w)}catch{return!1}return!($&&!$.includes(L.protocol)||O&&!O.includes(L.hostname))}const d=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function f(w){return!(!d.test(w)||w.includes("..")||w.includes("--")||w.endsWith(".git")||w.endsWith(".ipynb"))}async function p(w){if(s.env.useFS&&!u(w,["http:","https:","blob:"]))return new c(w instanceof URL?w.protocol==="file:"?w.pathname:w.toString():w);if(typeof process<"u"&&process?.release?.name==="node"){const $=!!Mh?.TESTING_REMOTELY,O=s.env.version,L=new Headers;if(L.set("User-Agent",`transformers.js/${O}; is_ci/${$};`),u(w,["http:","https:"],["huggingface.co","hf.co"])){const j=Mh?.HF_TOKEN??Mh?.HF_ACCESS_TOKEN;j&&L.set("Authorization",`Bearer ${j}`)}return fetch(w,{headers:L})}else return fetch(w)}const m={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function b(w,$,O){if(!O)return null;const L=m[w]??`Error (${w}) occurred while trying to load file`;throw Error(`${L}: "${$}".`)}class E{constructor($){this.path=$}async match($){let O=o.join(this.path,$),L=new c(O);if(L.exists)return L}async put($,O,L=void 0){let G=o.join(this.path,$);try{const j=O.headers.get("Content-Length"),D=parseInt(j??"0");let re=0;await n.promises.mkdir(o.dirname(G),{recursive:!0});const Z=n.createWriteStream(G),te=O.body.getReader();for(;;){const{done:ie,value:ne}=await te.read();if(ie)break;await new Promise((Me,W)=>{Z.write(ne,R=>{if(R){W(R);return}Me()})}),re+=ne.length;const ve=D?re/D*100:0;L?.({progress:ve,loaded:re,total:D})}Z.close()}catch(j){try{await n.promises.unlink(G)}catch{}throw j}}}async function h(w,...$){for(let O of $)try{let L=await w.match(O);if(L)return L}catch{continue}}async function _(w,$,O=!0,L={},G=!1){if(!s.env.allowLocalModels){if(L.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!s.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,i.dispatchCallback)(L.progress_callback,{status:"initiate",name:w,file:$});let j;if(!j&&s.env.useCustomCache){if(!s.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!s.env.customCache.match||!s.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");j=s.env.customCache}if(!j&&s.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{j=await caches.open("transformers-cache")}catch(be){console.warn("An error occurred while opening the browser cache:",be)}}if(!j&&s.env.useFSCache){if(!s.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");j=new E(L.cache_dir??s.env.cacheDir)}const D=L.revision??"main",re=x(w,$),Z=f(w),te=Z?x(s.env.localModelPath,re):re,ie=x(s.env.remoteHost,s.env.remotePathTemplate.replaceAll("{model}",w).replaceAll("{revision}",encodeURIComponent(D)),$);let ne;const ve=j instanceof E?D==="main"?re:x(w,D,$):ie;let Me=!1,W;j&&(W=await h(j,te,ve));const R=W!==void 0;if(W===void 0){if(s.env.allowLocalModels)if(u(re,["http:","https:"])){if(L.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${re}.`);if(!s.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${re}.`)}else try{W=await p(te),ne=te}catch(Le){console.warn(`Unable to load from local path "${te}": "${Le}"`)}if(W===void 0||W.status===404){if(L.local_files_only||!s.env.allowRemoteModels){if(O)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${te}".`);return null}if(!Z)throw Error(`Local file missing at "${te}" and download aborted due to invalid model ID "${w}".`);if(W=await p(ie),W.status!==200)return b(W.status,ie,O);ne=ve}Me=j&&typeof Response<"u"&&W instanceof Response&&W.status===200}(0,i.dispatchCallback)(L.progress_callback,{status:"download",name:w,file:$});let J;if(!(s.apis.IS_NODE_ENV&&G)){let be;L.progress_callback?R&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(be=new Uint8Array(await W.arrayBuffer()),(0,i.dispatchCallback)(L.progress_callback,{status:"progress",name:w,file:$,progress:100,loaded:be.length,total:be.length})):be=await M(W,Le=>{(0,i.dispatchCallback)(L.progress_callback,{status:"progress",name:w,file:$,...Le})}):be=new Uint8Array(await W.arrayBuffer()),J=be}if(Me&&ne&&await j.match(ne)===void 0&&(J?await j.put(ne,new Response(J,{headers:W.headers})).catch(be=>{console.warn(`Unable to add response to browser cache: ${be}.`)}):await j.put(ne,W,L.progress_callback)),(0,i.dispatchCallback)(L.progress_callback,{status:"done",name:w,file:$}),J){if(!s.apis.IS_NODE_ENV&&G)throw new Error("Cannot return path in a browser environment.");return J}if(W instanceof c)return W.filePath;const U=await j?.match(ne);if(U instanceof c)return U.filePath;if(U instanceof Response)return new Uint8Array(await U.arrayBuffer());if(typeof U=="string")return U;throw new Error("Unable to get model file path or buffer.")}async function T(w,$,O=!0,L={}){const G=await _(w,$,O,L,!1);return G===null?null:new TextDecoder("utf-8").decode(G)}async function g(w,$,O=!0,L={}){const G=await T(w,$,O,L);return G===null?{}:JSON.parse(G)}async function M(w,$){const O=w.headers.get("Content-Length");O===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let L=parseInt(O??"0"),G=new Uint8Array(L),j=0;const D=w.body.getReader();async function re(){const{done:Z,value:te}=await D.read();if(Z)return;const ie=j+te.length;if(ie>L){L=ie;const ve=new Uint8Array(L);ve.set(G),G=ve}G.set(te,j),j=ie;const ne=j/L*100;return $({progress:ne,loaded:j,total:L}),re()}return await re(),G}function x(...w){return w=w.map(($,O)=>(O&&($=$.replace(new RegExp("^/"),"")),O!==w.length-1&&($=$.replace(new RegExp("/$"),"")),$)),w.join("/")}}),"./src/utils/image.js":((e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>m,load_image:()=>b});var n=r("./src/utils/core.js"),o=r("./src/utils/hub.js"),s=r("./src/env.js"),i=r("./src/utils/tensor.js"),a=r("?2b25");let l,c,u;const d=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;if(d)l=(E,h)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(E,h)},u=self.createImageBitmap,c=self.ImageData;else if(a)u=async E=>{const _=(await E.metadata()).channels,{data:T,info:g}=await E.rotate().raw().toBuffer({resolveWithObject:!0}),M=new m(new Uint8ClampedArray(T),g.width,g.height,g.channels);return _!==void 0&&_!==g.channels&&M.convert(_),M};else throw new Error("Unable to load image processing library.");const f={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},p=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class m{constructor(h,_,T,g){this.data=h,this.width=_,this.height=T,this.channels=g}get size(){return[this.width,this.height]}static async read(h){if(h instanceof m)return h;if(typeof h=="string"||h instanceof URL)return await this.fromURL(h);if(h instanceof Blob)return await this.fromBlob(h);if(typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&h instanceof OffscreenCanvas)return this.fromCanvas(h);throw new Error(`Unsupported input type: ${typeof h}`)}static fromCanvas(h){if(!d)throw new Error("fromCanvas() is only supported in browser environments.");const T=h.getContext("2d").getImageData(0,0,h.width,h.height).data;return new m(T,h.width,h.height,4)}static async fromURL(h){const _=await(0,o.getFile)(h);if(_.status!==200)throw new Error(`Unable to read image from "${h}" (${_.status} ${_.statusText})`);const T=await _.blob();return this.fromBlob(T)}static async fromBlob(h){if(d){const _=await u(h),T=l(_.width,_.height).getContext("2d");return T.drawImage(_,0,0),new this(T.getImageData(0,0,_.width,_.height).data,_.width,_.height,4)}else{const _=a(await h.arrayBuffer());return await u(_)}}static fromTensor(h,_="CHW"){if(h.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${h.dims.length} dimensions.`);if(_==="CHW")h=h.transpose(1,2,0);else if(_!=="HWC")throw new Error(`Unsupported channel format: ${_}`);if(!(h.data instanceof Uint8ClampedArray||h.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${h.type}`);switch(h.dims[2]){case 1:case 2:case 3:case 4:return new m(h.data,h.dims[1],h.dims[0],h.dims[2]);default:throw new Error(`Unsupported number of channels: ${h.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const h=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let _=0,T=0;_<this.data.length;_+=this.channels){const g=this.data[_],M=this.data[_+1],x=this.data[_+2];h[T++]=Math.round(.2989*g+.587*M+.114*x)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(h,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const h=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let _=0,T=0;_<this.data.length;++_)h[T++]=this.data[_],h[T++]=this.data[_],h[T++]=this.data[_];break;case 4:for(let _=0,T=0;_<this.data.length;_+=4)h[T++]=this.data[_],h[T++]=this.data[_+1],h[T++]=this.data[_+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(h,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const h=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let _=0,T=0;_<this.data.length;++_)h[T++]=this.data[_],h[T++]=this.data[_],h[T++]=this.data[_],h[T++]=255;break;case 3:for(let _=0,T=0;_<this.data.length;_+=3)h[T++]=this.data[_],h[T++]=this.data[_+1],h[T++]=this.data[_+2],h[T++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(h,this.width,this.height,4)}putAlpha(h){if(h.width!==this.width||h.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${h.width}x${h.height}`);if(h.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${h.channels}`);const _=this.data,T=h.data,g=this.width*this.height;if(this.channels===3){const M=new Uint8ClampedArray(g*4);for(let x=0,w=0,$=0;x<g;++x)M[$++]=_[w++],M[$++]=_[w++],M[$++]=_[w++],M[$++]=T[x];return this._update(M,this.width,this.height,4)}else if(this.channels===4){for(let M=0;M<g;++M)_[4*M+3]=T[M];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(h,_,{resample:T=2}={}){if(this.width===h&&this.height===_)return this;let g=f[T]??T;const M=(0,n.isNullishDimension)(h),x=(0,n.isNullishDimension)(_);if(M&&x)return this;if(M?h=_/this.height*this.width:x&&(_=h/this.width*this.height),d){const w=this.channels,$=this.toCanvas(),O=l(h,_).getContext("2d");return O.drawImage($,0,0,h,_),new m(O.getImageData(0,0,h,_).data,h,_,4).convert(w)}else{let w=this.toSharp();switch(g){case"box":case"hamming":(g==="box"||g==="hamming")&&(console.warn(`Resampling method ${g} is not yet supported. Using bilinear instead.`),g="bilinear");case"nearest":case"bilinear":case"bicubic":w=w.affine([h/this.width,0,0,_/this.height],{interpolator:g});break;case"lanczos":w=w.resize({width:h,height:_,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${g} is not supported.`)}return await u(w)}}async pad([h,_,T,g]){if(h=Math.max(h,0),_=Math.max(_,0),T=Math.max(T,0),g=Math.max(g,0),h===0&&_===0&&T===0&&g===0)return this;if(d){const M=this.channels,x=this.toCanvas(),w=this.width+h+_,$=this.height+T+g,O=l(w,$).getContext("2d");return O.drawImage(x,0,0,this.width,this.height,h,T,this.width,this.height),new m(O.getImageData(0,0,w,$).data,w,$,4).convert(M)}else{const M=this.toSharp().extend({left:h,right:_,top:T,bottom:g});return await u(M)}}async crop([h,_,T,g]){if(h=Math.max(h,0),_=Math.max(_,0),T=Math.min(T,this.width-1),g=Math.min(g,this.height-1),h===0&&_===0&&T===this.width-1&&g===this.height-1)return this;const M=T-h+1,x=g-_+1;if(d){const w=this.channels,$=this.toCanvas(),O=l(M,x).getContext("2d");return O.drawImage($,h,_,M,x,0,0,M,x),new m(O.getImageData(0,0,M,x).data,M,x,4).convert(w)}else{const w=this.toSharp().extract({left:h,top:_,width:M,height:x});return await u(w)}}async center_crop(h,_){if(this.width===h&&this.height===_)return this;const T=(this.width-h)/2,g=(this.height-_)/2;if(d){const M=this.channels,x=this.toCanvas(),w=l(h,_).getContext("2d");let $=0,O=0,L=0,G=0;return T>=0?$=T:L=-T,g>=0?O=g:G=-g,w.drawImage(x,$,O,h,_,L,G,h,_),new m(w.getImageData(0,0,h,_).data,h,_,4).convert(M)}else{let M=this.toSharp();if(T>=0&&g>=0)M=M.extract({left:Math.floor(T),top:Math.floor(g),width:h,height:_});else if(T<=0&&g<=0){const x=Math.floor(-g),w=Math.floor(-T);M=M.extend({top:x,left:w,right:h-this.width-w,bottom:_-this.height-x})}else{let x=[0,0],w=0;g<0?(x[0]=Math.floor(-g),x[1]=_-this.height-x[0]):w=Math.floor(g);let $=[0,0],O=0;T<0?($[0]=Math.floor(-T),$[1]=h-this.width-$[0]):O=Math.floor(T),M=M.extend({top:x[0],bottom:x[1],left:$[0],right:$[1]}).extract({left:O,top:w,width:h,height:_})}return await u(M)}}async toBlob(h="image/png",_=1){if(!d)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:h,quality:_})}toTensor(h="CHW"){let _=new i.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(h!=="HWC")if(h==="CHW")_=_.permute(2,0,1);else throw new Error(`Unsupported channel format: ${h}`);return _}toCanvas(){if(!d)throw new Error("toCanvas() is only supported in browser environments.");const h=this.clone().rgba(),_=l(h.width,h.height),T=new c(h.data,h.width,h.height);return _.getContext("2d").putImageData(T,0,0),_}split(){const{data:h,width:_,height:T,channels:g}=this,M=h.constructor,x=h.length/g,w=Array.from({length:g},()=>new M(x));for(let $=0;$<x;++$){const O=g*$;for(let L=0;L<g;++L)w[L][$]=h[O+L]}return w.map($=>new m($,_,T,1))}_update(h,_,T,g=null){return this.data=h,this.width=_,this.height=T,g!==null&&(this.channels=g),this}clone(){return new m(this.data.slice(),this.width,this.height,this.channels)}convert(h){if(this.channels===h)return this;switch(h){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(h){if(d){if(s.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const _=h.split(".").pop().toLowerCase(),T=p.get(_)??"image/png",g=await this.toBlob(T);(0,n.saveBlob)(h,g)}else{if(s.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(h);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(d)throw new Error("toSharp() is only supported in server-side environments.");return a(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const b=m.read.bind(m)}),"./src/utils/maths.js":((e,t,r)=>{r.r(t),r.d(t,{FFT:()=>b,bankers_round:()=>_,cos_sim:()=>l,dot:()=>a,dynamic_time_warping:()=>T,interpolate_data:()=>n,log_softmax:()=>i,magnitude:()=>c,max:()=>d,medianFilter:()=>E,min:()=>u,permute_data:()=>o,round:()=>h,softmax:()=>s});function n(g,[M,x,w],[$,O],L="bilinear",G=!1){const j=O/w,D=$/x,re=new g.constructor($*O*M),Z=x*w,te=$*O;for(let ie=0;ie<$;++ie)for(let ne=0;ne<O;++ne){const ve=ie*O+ne,Me=(ne+.5)/j-.5,W=(ie+.5)/D-.5;let R=Math.floor(Me),J=Math.floor(W);const U=Math.min(R+1,w-1),be=Math.min(J+1,x-1);R=Math.max(R,0),J=Math.max(J,0);const Le=Me-R,de=W-J,Te=(1-Le)*(1-de),Pe=Le*(1-de),xe=(1-Le)*de,Y=Le*de,B=J*w,I=be*w,q=B+R,pe=B+U,ue=I+R,oe=I+U;for(let N=0;N<M;++N){const z=N*Z;re[N*te+ve]=Te*g[z+q]+Pe*g[z+pe]+xe*g[z+ue]+Y*g[z+oe]}}return re}function o(g,M,x){const w=new Array(x.length),$=new Array(x.length);for(let G=x.length-1,j=1;G>=0;--G)$[G]=j,w[G]=M[x[G]],j*=w[G];const O=x.map((G,j)=>$[x.indexOf(j)]),L=new g.constructor(g.length);for(let G=0;G<g.length;++G){let j=0;for(let D=M.length-1,re=G;D>=0;--D)j+=re%M[D]*O[D],re=Math.floor(re/M[D]);L[j]=g[G]}return[L,w]}function s(g){const M=d(g)[0],x=g.map(O=>Math.exp(O-M)),w=x.reduce((O,L)=>O+L,0);return x.map(O=>O/w)}function i(g){const M=d(g)[0];let x=0;for(let O=0;O<g.length;++O)x+=Math.exp(g[O]-M);const w=Math.log(x);return g.map(O=>O-M-w)}function a(g,M){let x=0;for(let w=0;w<g.length;++w)x+=g[w]*M[w];return x}function l(g,M){const x=a(g,M),w=c(g),$=c(M);return x/(w*$)}function c(g){return Math.sqrt(g.reduce((M,x)=>M+x*x,0))}function u(g){if(g.length===0)throw Error("Array must not be empty");let M=g[0],x=0;for(let w=1;w<g.length;++w)g[w]<M&&(M=g[w],x=w);return[M,x]}function d(g){if(g.length===0)throw Error("Array must not be empty");let M=g[0],x=0;for(let w=1;w<g.length;++w)g[w]>M&&(M=g[w],x=w);return[M,x]}function f(g){return g>0&&(g&g-1)===0}class p{constructor(M){if(this.size=M|0,this.size<=1||!f(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=M<<1,this.table=new Float64Array(this.size*2);for(let w=0;w<this.table.length;w+=2){const $=Math.PI*w/this.size;this.table[w]=Math.cos($),this.table[w+1]=-Math.sin($)}let x=0;for(let w=1;this.size>w;w<<=1)++x;this._width=x%2===0?x-1:x,this._bitrev=new Int32Array(1<<this._width);for(let w=0;w<this._bitrev.length;++w){this._bitrev[w]=0;for(let $=0;$<this._width;$+=2){const O=this._width-$-2;this._bitrev[w]|=(w>>>$&3)<<O}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(M,x){const w=x||new Array(M.length>>>1);for(let $=0;$<M.length;$+=2)w[$>>>1]=M[$];return w}toComplexArray(M,x){const w=x||this.createComplexArray();for(let $=0;$<w.length;$+=2)w[$]=M[$>>>1],w[$+1]=0;return w}transform(M,x){if(M===x)throw new Error("Input and output buffers must be different");this._transform4(M,x,1)}realTransform(M,x){if(M===x)throw new Error("Input and output buffers must be different");this._realTransform4(M,x,1)}inverseTransform(M,x){if(M===x)throw new Error("Input and output buffers must be different");this._transform4(M,x,-1);for(let w=0;w<M.length;++w)M[w]/=this.size}_transform4(M,x,w){const $=this._csize;let L=1<<this._width,G=$/L<<1,j,D;const re=this._bitrev;if(G===4)for(j=0,D=0;j<$;j+=G,++D){const te=re[D];this._singleTransform2(x,M,j,te,L)}else for(j=0,D=0;j<$;j+=G,++D){const te=re[D];this._singleTransform4(x,M,j,te,L,w)}const Z=this.table;for(L>>=2;L>=2;L>>=2){G=$/L<<1;const te=G>>>2;for(j=0;j<$;j+=G){const ie=j+te-1;for(let ne=j,ve=0;ne<ie;ne+=2,ve+=L){const Me=ne,W=Me+te,R=W+te,J=R+te,U=M[Me],be=M[Me+1],Le=M[W],de=M[W+1],Te=M[R],Pe=M[R+1],xe=M[J],Y=M[J+1],B=Z[ve],I=w*Z[ve+1],q=Le*B-de*I,pe=Le*I+de*B,ue=Z[2*ve],oe=w*Z[2*ve+1],N=Te*ue-Pe*oe,z=Te*oe+Pe*ue,ee=Z[3*ve],le=w*Z[3*ve+1],ke=xe*ee-Y*le,fe=xe*le+Y*ee,ce=U+N,he=be+z,$e=U-N,Re=be-z,ze=q+ke,Ge=pe+fe,Ke=w*(q-ke),vt=w*(pe-fe);M[Me]=ce+ze,M[Me+1]=he+Ge,M[W]=$e+vt,M[W+1]=Re-Ke,M[R]=ce-ze,M[R+1]=he-Ge,M[J]=$e-vt,M[J+1]=Re+Ke}}}}_singleTransform2(M,x,w,$,O){const L=M[$],G=M[$+1],j=M[$+O],D=M[$+O+1];x[w]=L+j,x[w+1]=G+D,x[w+2]=L-j,x[w+3]=G-D}_singleTransform4(M,x,w,$,O,L){const G=O*2,j=O*3,D=M[$],re=M[$+1],Z=M[$+O],te=M[$+O+1],ie=M[$+G],ne=M[$+G+1],ve=M[$+j],Me=M[$+j+1],W=D+ie,R=re+ne,J=D-ie,U=re-ne,be=Z+ve,Le=te+Me,de=L*(Z-ve),Te=L*(te-Me);x[w]=W+be,x[w+1]=R+Le,x[w+2]=J+Te,x[w+3]=U-de,x[w+4]=W-be,x[w+5]=R-Le,x[w+6]=J-Te,x[w+7]=U+de}_realTransform4(M,x,w){const $=this._csize;let L=1<<this._width,G=$/L<<1,j,D;const re=this._bitrev;if(G===4)for(j=0,D=0;j<$;j+=G,++D){const ie=re[D];this._singleRealTransform2(x,M,j,ie>>>1,L>>>1)}else for(j=0,D=0;j<$;j+=G,++D){const ie=re[D];this._singleRealTransform4(x,M,j,ie>>>1,L>>>1,w)}const Z=this.table;for(L>>=2;L>=2;L>>=2){G=$/L<<1;const ie=G>>>1,ne=ie>>>1,ve=ne>>>1;for(j=0;j<$;j+=G)for(let Me=0,W=0;Me<=ve;Me+=2,W+=L){const R=j+Me,J=R+ne,U=J+ne,be=U+ne,Le=M[R],de=M[R+1],Te=M[J],Pe=M[J+1],xe=M[U],Y=M[U+1],B=M[be],I=M[be+1],q=Le,pe=de,ue=Z[W],oe=w*Z[W+1],N=Te*ue-Pe*oe,z=Te*oe+Pe*ue,ee=Z[2*W],le=w*Z[2*W+1],ke=xe*ee-Y*le,fe=xe*le+Y*ee,ce=Z[3*W],he=w*Z[3*W+1],$e=B*ce-I*he,Re=B*he+I*ce,ze=q+ke,Ge=pe+fe,Ke=q-ke,vt=pe-fe,Tt=N+$e,gt=z+Re,Gr=w*(N-$e),_r=w*(z-Re);if(M[R]=ze+Tt,M[R+1]=Ge+gt,M[J]=Ke+_r,M[J+1]=vt-Gr,Me===0){M[U]=ze-Tt,M[U+1]=Ge-gt;continue}if(Me===ve)continue;const xr=j+ne-Me,zn=j+ie-Me;M[xr]=Ke-w*_r,M[xr+1]=-vt-w*Gr,M[zn]=ze-w*Tt,M[zn+1]=-Ge+w*gt}}const te=$>>>1;for(let ie=2;ie<te;ie+=2)M[$-ie]=M[ie],M[$-ie+1]=-M[ie+1]}_singleRealTransform2(M,x,w,$,O){const L=M[$],G=M[$+O];x[w]=L+G,x[w+1]=0,x[w+2]=L-G,x[w+3]=0}_singleRealTransform4(M,x,w,$,O,L){const G=O*2,j=O*3,D=M[$],re=M[$+O],Z=M[$+G],te=M[$+j],ie=D+Z,ne=D-Z,ve=re+te,Me=L*(re-te);x[w]=ie+ve,x[w+1]=0,x[w+2]=ne,x[w+3]=-Me,x[w+4]=ie-ve,x[w+5]=0,x[w+6]=ne,x[w+7]=Me}}class m{constructor(M){const x=2*(M-1),w=2*(2*M-1),$=2**Math.ceil(Math.log2(w));this.bufferSize=$,this._a=x;const O=new Float64Array(w),L=new Float64Array($);this._chirpBuffer=new Float64Array($),this._buffer1=new Float64Array($),this._buffer2=new Float64Array($),this._outBuffer1=new Float64Array($),this._outBuffer2=new Float64Array($);const G=-2*Math.PI/M,j=Math.cos(G),D=Math.sin(G);for(let re=0;re<w>>1;++re){const Z=(re+1-M)**2/2,te=Math.sqrt(j**2+D**2)**Z,ie=Z*Math.atan2(D,j),ne=2*re;O[ne]=te*Math.cos(ie),O[ne+1]=te*Math.sin(ie),L[ne]=O[ne],L[ne+1]=-O[ne+1]}this._slicedChirpBuffer=O.subarray(x,w),this._f=new p($>>1),this._f.transform(this._chirpBuffer,L)}_transform(M,x,w){const $=this._buffer1,O=this._buffer2,L=this._outBuffer1,G=this._outBuffer2,j=this._chirpBuffer,D=this._slicedChirpBuffer,re=this._a;if(w)for(let Z=0;Z<D.length;Z+=2){const te=Z+1,ie=Z>>1,ne=x[ie];$[Z]=ne*D[Z],$[te]=ne*D[te]}else for(let Z=0;Z<D.length;Z+=2){const te=Z+1;$[Z]=x[Z]*D[Z]-x[te]*D[te],$[te]=x[Z]*D[te]+x[te]*D[Z]}this._f.transform(L,$);for(let Z=0;Z<j.length;Z+=2){const te=Z+1;O[Z]=L[Z]*j[Z]-L[te]*j[te],O[te]=L[Z]*j[te]+L[te]*j[Z]}this._f.inverseTransform(G,O);for(let Z=0;Z<G.length;Z+=2){const te=G[Z+re],ie=G[Z+re+1],ne=D[Z],ve=D[Z+1];M[Z]=te*ne-ie*ve,M[Z+1]=te*ve+ie*ne}}transform(M,x){this._transform(M,x,!1)}realTransform(M,x){this._transform(M,x,!0)}}class b{constructor(M){this.fft_length=M,this.isPowerOfTwo=f(M),this.isPowerOfTwo?(this.fft=new p(M),this.outputBufferSize=2*M):(this.fft=new m(M),this.outputBufferSize=this.fft.bufferSize)}realTransform(M,x){this.fft.realTransform(M,x)}transform(M,x){this.fft.transform(M,x)}}function E(g,M){if(M%2===0||M<=0)throw new Error("Window size must be a positive odd number");const x=new g.constructor(g.length),w=new g.constructor(M),$=Math.floor(M/2);for(let O=0;O<g.length;++O){let L=0;for(let G=-$;G<=$;++G){let j=O+G;j<0?j=Math.abs(j):j>=g.length&&(j=2*(g.length-1)-j),w[L++]=g[j]}w.sort(),x[O]=w[$]}return x}function h(g,M){const x=Math.pow(10,M);return Math.round(g*x)/x}function _(g){const M=Math.round(g);return Math.abs(g)%1===.5?M%2===0?M:M-1:M}function T(g){const M=g.length,x=g[0].length,w=[M+1,x+1],$=Array.from({length:w[0]},()=>Array(w[1]).fill(1/0));$[0][0]=0;const O=Array.from({length:w[0]},()=>Array(w[1]).fill(-1));for(let re=1;re<w[1];++re)for(let Z=1;Z<w[0];++Z){const te=$[Z-1][re-1],ie=$[Z-1][re],ne=$[Z][re-1];let ve,Me;te<ie&&te<ne?(ve=te,Me=0):ie<te&&ie<ne?(ve=ie,Me=1):(ve=ne,Me=2),$[Z][re]=g[Z-1][re-1]+ve,O[Z][re]=Me}for(let re=0;re<w[1];++re)O[0][re]=2;for(let re=0;re<w[0];++re)O[re][0]=1;let L=M,G=x,j=[],D=[];for(;L>0||G>0;)switch(j.push(L-1),D.push(G-1),O[L][G]){case 0:--L,--G;break;case 1:--L;break;case 2:--G;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${L}, ${G}]. Please file a bug report.`)}return j.reverse(),D.reverse(),[j,D]}}),"./src/utils/tensor.js":((e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>i,Tensor:()=>a,cat:()=>x,full:()=>D,full_like:()=>re,interpolate:()=>u,interpolate_4d:()=>d,layer_norm:()=>_,matmul:()=>f,mean:()=>L,mean_pooling:()=>h,ones:()=>Z,ones_like:()=>te,permute:()=>c,quantize_embeddings:()=>Me,rand:()=>ve,rfft:()=>p,slice:()=>E,stack:()=>w,std_mean:()=>O,topk:()=>m,zeros:()=>ie,zeros_like:()=>ne});var n=r("./src/utils/maths.js"),o=r("./src/backends/onnx.js"),s=r("./src/ops/registry.js");const i=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class a{get dims(){return this.ort_tensor.dims}set dims(R){this.ort_tensor.dims=R}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}ort_tensor;constructor(...R){return(0,o.isONNXTensor)(R[0])?this.ort_tensor=R[0]:this.ort_tensor=new o.Tensor(R[0],R[1],R[2]),new Proxy(this,{get:(J,U)=>{if(typeof U=="string"){let be=Number(U);if(Number.isInteger(be))return J._getitem(be)}return J[U]},set:(J,U,be)=>J[U]=be})}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[R,...J]=this.dims;if(J.length>0){const U=J.reduce((be,Le)=>be*Le);for(let be=0;be<R;++be)yield this._subarray(be,U,J)}else yield*this.data}_getitem(R){const[J,...U]=this.dims;if(R=M(R,J),U.length>0){const be=U.reduce((Le,de)=>Le*de);return this._subarray(R,be,U)}else return new a(this.type,[this.data[R]],U)}indexOf(R){const J=this.data;for(let U=0;U<J.length;++U)if(J[U]==R)return U;return-1}_subarray(R,J,U){const be=R*J,Le=(R+1)*J,de="subarray"in this.data?this.data.subarray(be,Le):this.data.slice(be,Le);return new a(this.type,de,U)}item(){const R=this.data;if(R.length!==1)throw new Error(`a Tensor with ${R.length} elements cannot be converted to Scalar`);return R[0]}tolist(){return l(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const R=this.data;for(let J=0;J<R.length;++J)R[J]=1/(1+Math.exp(-R[J]));return this}map(R){return this.clone().map_(R)}map_(R){const J=this.data;for(let U=0;U<J.length;++U)J[U]=R(J[U],U,J);return this}mul(R){return this.clone().mul_(R)}mul_(R){const J=this.data;for(let U=0;U<J.length;++U)J[U]*=R;return this}div(R){return this.clone().div_(R)}div_(R){const J=this.data;for(let U=0;U<J.length;++U)J[U]/=R;return this}add(R){return this.clone().add_(R)}add_(R){const J=this.data;for(let U=0;U<J.length;++U)J[U]+=R;return this}sub(R){return this.clone().sub_(R)}sub_(R){const J=this.data;for(let U=0;U<J.length;++U)J[U]-=R;return this}clone(){return new a(this.type,this.data.slice(),this.dims.slice())}slice(...R){const J=[],U=[];for(let Y=0;Y<this.dims.length;++Y){let B=R[Y];if(B==null)U.push([0,this.dims[Y]]),J.push(this.dims[Y]);else if(typeof B=="number")B=M(B,this.dims[Y],Y),U.push([B,B+1]);else if(Array.isArray(B)&&B.length===2){let[I,q]=B;if(I=I===null?0:M(I,this.dims[Y],Y,!1),q=q===null?this.dims[Y]:M(q,this.dims[Y],Y,!1),I>q)throw new Error(`Invalid slice: ${B}`);const pe=[Math.max(I,0),Math.min(q,this.dims[Y])];U.push(pe),J.push(pe[1]-pe[0])}else throw new Error(`Invalid slice: ${B}`)}const be=U.map(([Y,B])=>B-Y),Le=be.reduce((Y,B)=>Y*B),de=this.data,Te=new de.constructor(Le),Pe=this.stride();let xe=!0;for(let Y=1;Y<be.length;++Y)if(U[Y][0]!==0||U[Y][1]!==this.dims[Y]){xe=!1;break}if(xe){const Y=U[0][0]*Pe[0],B=U[0][1]*Pe[0];if(ArrayBuffer.isView(de))Te.set(de.subarray(Y,B));else if(Array.isArray(de)){const I=de.slice(Y,B);for(let q=0;q<I.length;++q)Te[q]=I[q]}else throw new Error("Unsupported data type for slicing")}else for(let Y=0;Y<Le;++Y){let B=0;for(let I=be.length-1,q=Y;I>=0;--I){const pe=be[I];B+=(q%pe+U[I][0])*Pe[I],q=Math.floor(q/pe)}Te[Y]=de[B]}return new a(this.type,Te,J)}permute(...R){return c(this,R)}transpose(...R){return this.permute(...R)}sum(R=null,J=!1){return this.norm(1,R,J)}norm(R="fro",J=null,U=!1){if(R==="fro")R=2;else if(typeof R=="string")throw Error(`Unsupported norm: ${R}`);const be=this.data,Le=(xe,Y)=>xe+Y**R;if(J===null){const xe=be.reduce(Le,0)**(1/R);return new a(this.type,[xe],[])}const[de,Te,Pe]=$(Le,this,J,U);if(R!==1)for(let xe=0;xe<Te.length;++xe)Te[xe]=Te[xe]**(1/R);return new a(de,Te,Pe)}normalize_(R=2,J=1){J=M(J,this.dims.length);const U=this.norm(R,J,!0),be=this.data,Le=U.data;for(let de=0;de<be.length;++de){let Te=0;for(let Pe=this.dims.length-1,xe=de,Y=1;Pe>=0;--Pe){const B=this.dims[Pe];if(Pe!==J){const I=xe%B;Te+=I*Y,Y*=this.dims[Pe]}xe=Math.floor(xe/B)}be[de]/=Le[Te]}return this}normalize(R=2,J=1){return this.clone().normalize_(R,J)}stride(){return G(this.dims)}squeeze(R=null){return new a(this.type,this.data,T(this.dims,R))}squeeze_(R=null){return this.dims=T(this.dims,R),this}unsqueeze(R=null){return new a(this.type,this.data,g(this.dims,R))}unsqueeze_(R=null){return this.dims=g(this.dims,R),this}flatten_(R=0,J=-1){J=(J+this.dims.length)%this.dims.length;let U=this.dims.slice(0,R),be=this.dims.slice(R,J+1),Le=this.dims.slice(J+1);return this.dims=[...U,be.reduce((de,Te)=>de*Te,1),...Le],this}flatten(R=0,J=-1){return this.clone().flatten_(R,J)}view(...R){let J=-1;for(let be=0;be<R.length;++be)if(R[be]===-1){if(J!==-1)throw new Error("Only one dimension can be inferred");J=be}const U=this.data;if(J!==-1){const be=R.reduce((Le,de,Te)=>Te!==J?Le*de:Le,1);R[J]=U.length/be}return new a(this.type,U,R)}neg_(){const R=this.data;for(let J=0;J<R.length;++J)R[J]=-R[J];return this}neg(){return this.clone().neg_()}gt(R){const J=new Uint8Array(this.data.length),U=this.data;for(let be=0;be<U.length;++be)J[be]=U[be]>R?1:0;return new a("bool",J,this.dims)}lt(R){const J=new Uint8Array(this.data.length),U=this.data;for(let be=0;be<U.length;++be)J[be]=U[be]<R?1:0;return new a("bool",J,this.dims)}clamp_(R,J){const U=this.data;for(let be=0;be<U.length;++be)U[be]=Math.min(Math.max(U[be],R),J);return this}clamp(R,J){return this.clone().clamp_(R,J)}round_(){const R=this.data;for(let J=0;J<R.length;++J)R[J]=Math.round(R[J]);return this}round(){return this.clone().round_()}mean(R=null,J=!1){return L(this,R,J)}min(R=null,J=!1){if(R===null){const de=(0,n.min)(this.data)[0];return new a(this.type,[de],[])}const[U,be,Le]=$((de,Te)=>Math.min(de,Te),this,R,J,1/0);return new a(U,be,Le)}max(R=null,J=!1){if(R===null){const de=(0,n.max)(this.data)[0];return new a(this.type,[de],[])}const[U,be,Le]=$((de,Te)=>Math.max(de,Te),this,R,J,-1/0);return new a(U,be,Le)}argmin(R=null,J=!1){if(R!==null)throw new Error("`dim !== null` not yet implemented.");const U=(0,n.min)(this.data)[1];return new a("int64",[BigInt(U)],[])}argmax(R=null,J=!1){if(R!==null)throw new Error("`dim !== null` not yet implemented.");const U=(0,n.max)(this.data)[1];return new a("int64",[BigInt(U)],[])}to(R){if(this.type===R)return this;if(!i.hasOwnProperty(R))throw new Error(`Unsupported type: ${R}`);let J;const U=["int64","uint64"].includes(this.type),be=["int64","uint64"].includes(R);return U&&!be?J=Number:!U&&be&&(J=BigInt),new a(R,i[R].from(this.data,J),this.dims)}}function l(W,R){const J=W.length,U=R.reduce((Le,de)=>Le*de);if(J!==U)throw Error(`cannot reshape array of size ${J} into shape (${R})`);let be=W;for(let Le=R.length-1;Le>=0;Le--)be=be.reduce((de,Te)=>{let Pe=de[de.length-1];return Pe.length<R[Le]?Pe.push(Te):de.push([Te]),de},[[]]);return be[0]}function c(W,R){const[J,U]=(0,n.permute_data)(W.data,W.dims,R);return new a(W.type,J,U)}function u(W,[R,J],U="bilinear",be=!1){const Le=W.dims.at(-3)??1,de=W.dims.at(-2),Te=W.dims.at(-1);let Pe=(0,n.interpolate_data)(W.data,[Le,de,Te],[R,J],U,be);return new a(W.type,Pe,[Le,R,J])}async function d(W,{size:R=null,mode:J="bilinear"}={}){if(W.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!R)throw new Error("`interpolate_4d` requires a `size` argument.");let U;if(R.length===2)U=[...W.dims.slice(0,2),...R];else if(R.length===3)U=[W.dims[0],...R];else if(R.length===4)U=R;else throw new Error("`size` must be of length 2, 3, or 4.");let be;if(J==="nearest")be=await s.TensorOpRegistry.nearest_interpolate_4d;else if(J==="bilinear")be=await s.TensorOpRegistry.bilinear_interpolate_4d;else if(J==="bicubic")be=await s.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${J}`);const Le=new a("int64",new BigInt64Array(U.map(BigInt)),[U.length]);return await be({x:W,s:Le})}async function f(W,R){return await(await s.TensorOpRegistry.matmul)({a:W,b:R})}async function p(W,R){return await(await s.TensorOpRegistry.rfft)({x:W,a:R})}async function m(W,R){const J=await s.TensorOpRegistry.top_k;return R==null?R=W.dims.at(-1):R=Math.min(R,W.dims.at(-1)),await J({x:W,k:new a("int64",[BigInt(R)],[1])})}const b=W=>new a("int64",W,[W.length]);async function E(W,R,J,U,be){return await(await s.TensorOpRegistry.slice)({x:W,s:b(R),e:b(J),a:b(U),t:b(be??new Array(U.length).fill(1))})}function h(W,R){const J=W.data,U=R.data,be=[W.dims[0],W.dims[2]],Le=new J.constructor(be[0]*be[1]),[de,Te,Pe]=W.dims;let xe=0;for(let Y=0;Y<de;++Y){const B=Y*Pe*Te;for(let I=0;I<Pe;++I){let q=0,pe=0;const ue=Y*Te,oe=B+I;for(let z=0;z<Te;++z){const ee=Number(U[ue+z]);pe+=ee,q+=J[oe+z*Pe]*ee}const N=q/pe;Le[xe++]=N}}return new a(W.type,Le,be)}function _(W,R,{eps:J=1e-5}={}){if(W.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[U,be]=W.dims;if(R.length!==1&&R[0]!==be)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[Le,de]=O(W,1,0,!0),Te=Le.data,Pe=de.data,xe=W.data,Y=new xe.constructor(xe.length);for(let B=0;B<U;++B){const I=B*be;for(let q=0;q<be;++q){const pe=I+q;Y[pe]=(xe[pe]-Pe[B])/(Te[B]+J)}}return new a(W.type,Y,W.dims)}function T(W,R){return W=W.slice(),R===null?W=W.filter(J=>J!==1):typeof R=="number"?W[R]===1&&W.splice(R,1):Array.isArray(R)&&(W=W.filter((J,U)=>J!==1||!R.includes(U))),W}function g(W,R){return R=M(R,W.length+1),W=W.slice(),W.splice(R,0,1),W}function M(W,R,J=null,U=!0){if(W<-R||W>=R){if(U)throw new Error(`IndexError: index ${W} is out of bounds for dimension${J===null?"":" "+J} with size ${R}`);return W<-R?0:R}return W<0&&(W=(W%R+R)%R),W}function x(W,R=0){R=M(R,W[0].dims.length);const J=W[0].dims.slice();J[R]=W.reduce((de,Te)=>de+Te.dims[R],0);const U=J.reduce((de,Te)=>de*Te,1),be=new W[0].data.constructor(U),Le=W[0].type;if(R===0){let de=0;for(const Te of W){const Pe=Te.data;be.set(Pe,de),de+=Pe.length}}else{let de=0;for(let Te=0;Te<W.length;++Te){const{data:Pe,dims:xe}=W[Te];for(let Y=0;Y<Pe.length;++Y){let B=0;for(let I=xe.length-1,q=Y,pe=1;I>=0;--I){const ue=xe[I];let oe=q%ue;I===R&&(oe+=de),B+=oe*pe,pe*=J[I],q=Math.floor(q/ue)}be[B]=Pe[Y]}de+=xe[R]}}return new a(Le,be,J)}function w(W,R=0){return x(W.map(J=>J.unsqueeze(R)),R)}function $(W,R,J=null,U=!1,be=null){const Le=R.data,de=R.dims;J=M(J,de.length);const Te=de.slice();Te[J]=1;const Pe=new Le.constructor(Le.length/de[J]);be!==null&&Pe.fill(be);for(let xe=0;xe<Le.length;++xe){let Y=0;for(let B=de.length-1,I=xe,q=1;B>=0;--B){const pe=de[B];if(B!==J){const ue=I%pe;Y+=ue*q,q*=Te[B]}I=Math.floor(I/pe)}Pe[Y]=W(Pe[Y],Le[xe],xe,Y)}return U||Te.splice(J,1),[R.type,Pe,Te]}function O(W,R=null,J=1,U=!1){const be=W.data,Le=W.dims;if(R===null){const q=be.reduce((N,z)=>N+z,0)/be.length,pe=Math.sqrt(be.reduce((N,z)=>N+(z-q)**2,0)/(be.length-J)),ue=new a(W.type,[q],[]);return[new a(W.type,[pe],[]),ue]}R=M(R,Le.length);const de=L(W,R,U),Te=de.data,[Pe,xe,Y]=$((I,q,pe,ue)=>I+(q-Te[ue])**2,W,R,U);for(let I=0;I<xe.length;++I)xe[I]=Math.sqrt(xe[I]/(Le[R]-J));return[new a(Pe,xe,Y),de]}function L(W,R=null,J=!1){const U=W.dims,be=W.data;if(R===null){const Pe=be.reduce((xe,Y)=>xe+Y,0);return new a(W.type,[Pe/be.length],[])}R=M(R,U.length);const[Le,de,Te]=$((Pe,xe)=>Pe+xe,W,R,J);if(U[R]!==1)for(let Pe=0;Pe<de.length;++Pe)de[Pe]/=U[R];return new a(Le,de,Te)}function G(W){const R=new Array(W.length);for(let J=W.length-1,U=1;J>=0;--J)R[J]=U,U*=W[J];return R}function j(W,R,J,U){const be=W.reduce((Le,de)=>Le*de,1);return new a(J,new U(be).fill(R),W)}function D(W,R){let J,U;if(typeof R=="number")J="float32",U=Float32Array;else if(typeof R=="bigint")J="int64",U=BigInt64Array;else if(typeof R=="boolean")J="bool",U=Uint8Array;else throw new Error(`Unsupported data type: ${typeof R}`);return j(W,R,J,U)}function re(W,R){return D(W.dims,R)}function Z(W){return j(W,1n,"int64",BigInt64Array)}function te(W){return Z(W.dims)}function ie(W){return j(W,0n,"int64",BigInt64Array)}function ne(W){return ie(W.dims)}function ve(W){const R=W.reduce((J,U)=>J*U,1);return new a("float32",Float32Array.from({length:R},()=>Math.random()),W)}function Me(W,R){if(W.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(W.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(R))throw new Error("The precision must be either 'binary' or 'ubinary'");const J=R==="binary",U=J?"int8":"uint8",be=J?Int8Array:Uint8Array,Le=W.data,de=new be(Le.length/8);for(let Te=0;Te<Le.length;++Te){const Pe=Le[Te]>0?1:0,xe=Math.floor(Te/8),Y=Te%8;de[xe]|=Pe<<7-Y,J&&Y===0&&(de[xe]-=128)}return new a(U,de,[W.dims[0],W.dims[1]/8])}}),"./src/utils/video.js":((e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>i,RawVideoFrame:()=>s,load_video:()=>a});var n=r("./src/utils/image.js"),o=r("./src/env.js");class s{constructor(c,u){this.image=c,this.timestamp=u}}class i{constructor(c,u){c.length>0&&c[0]instanceof n.RawImage&&(c=c.map((d,f)=>new s(d,(f+1)/(c.length+1)*u))),this.frames=c,this.duration=u}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function a(l,{num_frames:c=null,fps:u=null}={}){if(!o.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(c==null&&u==null)throw new Error("Either num_frames or fps must be provided.");const d=[],f=document.createElement("video");if(f.crossOrigin="anonymous",f.muted=!0,typeof l=="string")f.src=l;else if(l instanceof Blob)f.src=URL.createObjectURL(l);else if(l instanceof HTMLVideoElement)f.src=l.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(T=>f.onloadedmetadata=T),f.seekable.start(0)===f.seekable.end(0)){const g=await(await fetch(f.src)).blob();f.src=URL.createObjectURL(g),await new Promise(M=>f.onloadedmetadata=M)}const p=f.duration;let m,b;c!=null?(m=c,b=c===1?0:p/(c-1)):(b=1/u,m=Math.floor(p/b));let E=[];for(let T=0;T<m;++T)E.push(c===1?p/2:T*b);const h=document.createElement("canvas");h.width=f.videoWidth,h.height=f.videoHeight;const _=h.getContext("2d",{willReadFrequently:!0});for(const T of E){f.currentTime=T,await new Promise(w=>{f.onseeked=w}),_.drawImage(f,0,0,h.width,h.height);const g=_.getImageData(0,0,h.width,h.height),M=new n.RawImage(g.data,h.width,h.height,4),x=new s(M,T);d.push(x)}return f.remove(),new i(d,p)}})},Lk={};function Jt(e){var t=Lk[e];if(t!==void 0)return t.exports;var r=Lk[e]={exports:{}};return eX[e](r,r.exports,Jt),r.exports}(()=>{var e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__,t;Jt.t=function(r,n){if(n&1&&(r=this(r)),n&8||typeof r=="object"&&r&&(n&4&&r.__esModule||n&16&&typeof r.then=="function"))return r;var o=Object.create(null);Jt.r(o);var s={};t=t||[null,e({}),e([]),e(e)];for(var i=n&2&&r;typeof i=="object"&&!~t.indexOf(i);i=e(i))Object.getOwnPropertyNames(i).forEach(a=>s[a]=()=>r[a]);return s.default=()=>r,Jt.d(o,s),o}})();Jt.d=(e,t)=>{for(var r in t)Jt.o(t,r)&&!Jt.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};Jt.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Jt.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var y={};(()=>{/*!*****************************!*\
  !*** ./src/transformers.js ***!
  \*****************************/Jt.r(y),Jt.d(y,{ASTFeatureExtractor:()=>d.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>n.AlbertTokenizer,ArceeForCausalLM:()=>r.ArceeForCausalLM,ArceeModel:()=>r.ArceeModel,ArceePreTrainedModel:()=>r.ArceePreTrainedModel,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>o.AutoConfig,AutoFeatureExtractor:()=>f.AutoFeatureExtractor,AutoImageProcessor:()=>b.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>_.AutoProcessor,AutoTokenizer:()=>n.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>n.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>T.BaseStreamer,BeitFeatureExtractor:()=>m.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>n.BertTokenizer,BitImageProcessor:()=>m.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>n.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>n.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>n.BloomTokenizer,CLIPFeatureExtractor:()=>m.CLIPFeatureExtractor,CLIPImageProcessor:()=>m.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>n.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>n.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>m.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>d.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>M.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>n.CodeGenTokenizer,CodeLlamaTokenizer:()=>n.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>n.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>n.ConvBertTokenizer,ConvNextFeatureExtractor:()=>m.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>m.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DINOv3ConvNextModel:()=>r.DINOv3ConvNextModel,DINOv3ConvNextPreTrainedModel:()=>r.DINOv3ConvNextPreTrainedModel,DINOv3ViTImageProcessor:()=>m.DINOv3ViTImageProcessor,DINOv3ViTModel:()=>r.DINOv3ViTModel,DINOv3ViTPreTrainedModel:()=>r.DINOv3ViTPreTrainedModel,DPTFeatureExtractor:()=>m.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>m.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>d.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>n.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>n.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>m.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>m.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>m.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>m.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>n.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>m.DonutFeatureExtractor,DonutImageProcessor:()=>m.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>m.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>n.ElectraTokenizer,EncodecFeatureExtractor:()=>d.EncodecFeatureExtractor,EosTokenCriteria:()=>g.EosTokenCriteria,Ernie4_5_ForCausalLM:()=>r.Ernie4_5_ForCausalLM,Ernie4_5_Model:()=>r.Ernie4_5_Model,Ernie4_5_PretrainedModel:()=>r.Ernie4_5_PretrainedModel,Ernie4_5_Tokenizer:()=>n.Ernie4_5_Tokenizer,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>n.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>c.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>n.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>u.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>h.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>M.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>M.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>m.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>n.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>n.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>d.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>h.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>n.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>n.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>m.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>h.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>n.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>m.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>h.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>d.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>p.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>g.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>m.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>h.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>r.Lfm2ForCausalLM,Lfm2Model:()=>r.Lfm2Model,Lfm2PreTrainedModel:()=>r.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>n.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>m.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>h.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>M.LogitsProcessor,LogitsProcessorList:()=>M.LogitsProcessorList,LogitsWarper:()=>M.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>n.M2M100Tokenizer,MBart50Tokenizer:()=>n.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>n.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>n.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>n.MarianTokenizer,Mask2FormerImageProcessor:()=>m.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>m.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>m.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>g.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>h.MgpstrProcessor,MgpstrTokenizer:()=>n.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>M.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>M.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>n.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>m.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>m.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>m.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>m.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>m.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>m.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>m.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>m.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>m.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>m.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertDecoderForCausalLM:()=>r.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>r.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>r.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>d.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>h.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NeoBertForMaskedLM:()=>r.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>r.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>r.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>r.NeoBertForTokenClassification,NeoBertModel:()=>r.NeoBertModel,NeoBertPreTrainedModel:()=>r.NeoBertPreTrainedModel,NllbTokenizer:()=>n.NllbTokenizer,NoBadWordsLogitsProcessor:()=>M.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>M.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>m.NougatImageProcessor,NougatTokenizer:()=>n.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>m.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>m.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>h.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>m.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>h.PaliGemmaProcessor,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>m.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>h.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>n.PreTrainedTokenizer,PretrainedConfig:()=>o.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>E.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>m.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>d.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>h.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>n.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>m.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>h.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>m.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>s.RawAudio,RawImage:()=>i.RawImage,RawVideo:()=>a.RawVideo,RawVideoFrame:()=>a.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>M.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>n.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>n.RobertaTokenizer,SamImageProcessor:()=>m.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>h.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>d.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>m.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>m.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>m.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>n.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolLM3ForCausalLM:()=>r.SmolLM3ForCausalLM,SmolLM3Model:()=>r.SmolLM3Model,SmolLM3PreTrainedModel:()=>r.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>m.SmolVLMImageProcessor,SmolVLMProcessor:()=>h.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>d.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>d.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>h.SpeechT5Processor,SpeechT5Tokenizer:()=>n.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>n.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>g.StoppingCriteria,StoppingCriteriaList:()=>g.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SuppressTokensAtBeginLogitsProcessor:()=>M.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>m.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>n.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>M.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>T.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>n.TokenizerModel,TopKLogitsWarper:()=>M.TopKLogitsWarper,TopPLogitsWarper:()=>M.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>h.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>h.VLChatProcessor,VLMImageProcessor:()=>m.VLMImageProcessor,ViTFeatureExtractor:()=>m.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>m.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>m.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>m.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>n.VitsTokenizer,VoxtralForConditionalGeneration:()=>r.VoxtralForConditionalGeneration,VoxtralProcessor:()=>h.VoxtralProcessor,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>n.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>d.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>h.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>h.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>d.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>d.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>h.WhisperProcessor,WhisperTextStreamer:()=>T.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>M.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>n.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>n.XLMRobertaTokenizer,XLMTokenizer:()=>n.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>m.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>m.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>c.bankers_round,cat:()=>l.cat,cos_sim:()=>c.cos_sim,dot:()=>c.dot,dynamic_time_warping:()=>c.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getCacheShapes:()=>o.getCacheShapes,hamming:()=>s.hamming,hanning:()=>s.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>c.interpolate_data,is_chinese_char:()=>n.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>i.load_image,load_video:()=>a.load_video,log_softmax:()=>c.log_softmax,magnitude:()=>c.magnitude,matmul:()=>l.matmul,max:()=>c.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>c.medianFilter,mel_filter_bank:()=>s.mel_filter_bank,min:()=>c.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>c.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,read_audio:()=>s.read_audio,rfft:()=>l.rfft,round:()=>c.round,slice:()=>l.slice,softmax:()=>c.softmax,spectrogram:()=>s.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>s.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=Jt("./src/env.js"),t=Jt("./src/pipelines.js"),r=Jt("./src/models.js"),n=Jt("./src/tokenizers.js"),o=Jt("./src/configs.js"),s=Jt("./src/utils/audio.js"),i=Jt("./src/utils/image.js"),a=Jt("./src/utils/video.js"),l=Jt("./src/utils/tensor.js"),c=Jt("./src/utils/maths.js"),u=Jt("./src/base/feature_extraction_utils.js"),d=Jt("./src/models/feature_extractors.js"),f=Jt("./src/models/auto/feature_extraction_auto.js"),p=Jt("./src/base/image_processors_utils.js"),m=Jt("./src/models/image_processors.js"),b=Jt("./src/models/auto/image_processing_auto.js"),E=Jt("./src/base/processing_utils.js"),h=Jt("./src/models/processors.js"),_=Jt("./src/models/auto/processing_auto.js"),T=Jt("./src/generation/streamers.js"),g=Jt("./src/generation/stopping_criteria.js"),M=Jt("./src/generation/logits_process.js")})();y.ASTFeatureExtractor;y.ASTForAudioClassification;y.ASTModel;y.ASTPreTrainedModel;y.AlbertForMaskedLM;y.AlbertForQuestionAnswering;y.AlbertForSequenceClassification;y.AlbertModel;y.AlbertPreTrainedModel;y.AlbertTokenizer;y.ArceeForCausalLM;y.ArceeModel;y.ArceePreTrainedModel;y.AudioClassificationPipeline;y.AutoConfig;y.AutoFeatureExtractor;y.AutoImageProcessor;y.AutoModel;y.AutoModelForAudioClassification;y.AutoModelForAudioFrameClassification;y.AutoModelForAudioTextToText;y.AutoModelForCTC;y.AutoModelForCausalLM;y.AutoModelForDepthEstimation;y.AutoModelForDocumentQuestionAnswering;y.AutoModelForImageClassification;y.AutoModelForImageFeatureExtraction;y.AutoModelForImageMatting;y.AutoModelForImageSegmentation;y.AutoModelForImageTextToText;y.AutoModelForImageToImage;y.AutoModelForMaskGeneration;y.AutoModelForMaskedLM;y.AutoModelForNormalEstimation;y.AutoModelForObjectDetection;y.AutoModelForPoseEstimation;y.AutoModelForQuestionAnswering;y.AutoModelForSemanticSegmentation;y.AutoModelForSeq2SeqLM;y.AutoModelForSequenceClassification;y.AutoModelForSpeechSeq2Seq;y.AutoModelForTextToSpectrogram;y.AutoModelForTextToWaveform;y.AutoModelForTokenClassification;y.AutoModelForUniversalSegmentation;y.AutoModelForVision2Seq;y.AutoModelForXVector;y.AutoModelForZeroShotObjectDetection;y.AutoProcessor;y.AutoTokenizer;y.AutomaticSpeechRecognitionPipeline;y.BackgroundRemovalPipeline;y.BartForConditionalGeneration;y.BartForSequenceClassification;y.BartModel;y.BartPretrainedModel;y.BartTokenizer;y.BaseModelOutput;y.BaseStreamer;y.BeitFeatureExtractor;y.BeitForImageClassification;y.BeitModel;y.BeitPreTrainedModel;y.BertForMaskedLM;y.BertForQuestionAnswering;y.BertForSequenceClassification;y.BertForTokenClassification;y.BertModel;y.BertPreTrainedModel;y.BertTokenizer;y.BitImageProcessor;y.BlenderbotForConditionalGeneration;y.BlenderbotModel;y.BlenderbotPreTrainedModel;y.BlenderbotSmallForConditionalGeneration;y.BlenderbotSmallModel;y.BlenderbotSmallPreTrainedModel;y.BlenderbotSmallTokenizer;y.BlenderbotTokenizer;y.BloomForCausalLM;y.BloomModel;y.BloomPreTrainedModel;y.BloomTokenizer;y.CLIPFeatureExtractor;y.CLIPImageProcessor;y.CLIPModel;y.CLIPPreTrainedModel;y.CLIPSegForImageSegmentation;y.CLIPSegModel;y.CLIPSegPreTrainedModel;y.CLIPTextModel;y.CLIPTextModelWithProjection;y.CLIPTokenizer;y.CLIPVisionModel;y.CLIPVisionModelWithProjection;y.CamembertForMaskedLM;y.CamembertForQuestionAnswering;y.CamembertForSequenceClassification;y.CamembertForTokenClassification;y.CamembertModel;y.CamembertPreTrainedModel;y.CamembertTokenizer;y.CausalLMOutput;y.CausalLMOutputWithPast;y.ChineseCLIPFeatureExtractor;y.ChineseCLIPModel;y.ChineseCLIPPreTrainedModel;y.ClapAudioModelWithProjection;y.ClapFeatureExtractor;y.ClapModel;y.ClapPreTrainedModel;y.ClapTextModelWithProjection;y.ClassifierFreeGuidanceLogitsProcessor;y.CodeGenForCausalLM;y.CodeGenModel;y.CodeGenPreTrainedModel;y.CodeGenTokenizer;y.CodeLlamaTokenizer;y.CohereForCausalLM;y.CohereModel;y.CoherePreTrainedModel;y.CohereTokenizer;y.ConvBertForMaskedLM;y.ConvBertForQuestionAnswering;y.ConvBertForSequenceClassification;y.ConvBertForTokenClassification;y.ConvBertModel;y.ConvBertPreTrainedModel;y.ConvBertTokenizer;y.ConvNextFeatureExtractor;y.ConvNextForImageClassification;y.ConvNextImageProcessor;y.ConvNextModel;y.ConvNextPreTrainedModel;y.ConvNextV2ForImageClassification;y.ConvNextV2Model;y.ConvNextV2PreTrainedModel;y.DFineForObjectDetection;y.DFineModel;y.DFinePreTrainedModel;y.DINOv3ConvNextModel;y.DINOv3ConvNextPreTrainedModel;y.DINOv3ViTImageProcessor;y.DINOv3ViTModel;y.DINOv3ViTPreTrainedModel;y.DPTFeatureExtractor;y.DPTForDepthEstimation;y.DPTImageProcessor;y.DPTModel;y.DPTPreTrainedModel;y.DacDecoderModel;y.DacDecoderOutput;y.DacEncoderModel;y.DacEncoderOutput;y.DacFeatureExtractor;y.DacModel;y.DacPreTrainedModel;y.DataTypeMap;y.DebertaForMaskedLM;y.DebertaForQuestionAnswering;y.DebertaForSequenceClassification;y.DebertaForTokenClassification;y.DebertaModel;y.DebertaPreTrainedModel;y.DebertaTokenizer;y.DebertaV2ForMaskedLM;y.DebertaV2ForQuestionAnswering;y.DebertaV2ForSequenceClassification;y.DebertaV2ForTokenClassification;y.DebertaV2Model;y.DebertaV2PreTrainedModel;y.DebertaV2Tokenizer;y.DecisionTransformerModel;y.DecisionTransformerPreTrainedModel;y.DeiTFeatureExtractor;y.DeiTForImageClassification;y.DeiTImageProcessor;y.DeiTModel;y.DeiTPreTrainedModel;y.DepthAnythingForDepthEstimation;y.DepthAnythingPreTrainedModel;y.DepthEstimationPipeline;y.DepthProForDepthEstimation;y.DepthProPreTrainedModel;y.DetrFeatureExtractor;y.DetrForObjectDetection;y.DetrForSegmentation;y.DetrImageProcessor;y.DetrModel;y.DetrObjectDetectionOutput;y.DetrPreTrainedModel;y.DetrSegmentationOutput;y.Dinov2ForImageClassification;y.Dinov2Model;y.Dinov2PreTrainedModel;y.Dinov2WithRegistersForImageClassification;y.Dinov2WithRegistersModel;y.Dinov2WithRegistersPreTrainedModel;y.DistilBertForMaskedLM;y.DistilBertForQuestionAnswering;y.DistilBertForSequenceClassification;y.DistilBertForTokenClassification;y.DistilBertModel;y.DistilBertPreTrainedModel;y.DistilBertTokenizer;y.DocumentQuestionAnsweringPipeline;y.DonutFeatureExtractor;y.DonutImageProcessor;y.DonutSwinModel;y.DonutSwinPreTrainedModel;y.EfficientNetForImageClassification;y.EfficientNetImageProcessor;y.EfficientNetModel;y.EfficientNetPreTrainedModel;y.ElectraForMaskedLM;y.ElectraForQuestionAnswering;y.ElectraForSequenceClassification;y.ElectraForTokenClassification;y.ElectraModel;y.ElectraPreTrainedModel;y.ElectraTokenizer;y.EncodecFeatureExtractor;y.EosTokenCriteria;y.Ernie4_5_ForCausalLM;y.Ernie4_5_Model;y.Ernie4_5_PretrainedModel;y.Ernie4_5_Tokenizer;y.EsmForMaskedLM;y.EsmForSequenceClassification;y.EsmForTokenClassification;y.EsmModel;y.EsmPreTrainedModel;y.EsmTokenizer;y.ExaoneForCausalLM;y.ExaoneModel;y.ExaonePreTrainedModel;y.FFT;y.FalconForCausalLM;y.FalconModel;y.FalconPreTrainedModel;y.FalconTokenizer;y.FastViTForImageClassification;y.FastViTModel;y.FastViTPreTrainedModel;y.FeatureExtractionPipeline;y.FeatureExtractor;y.FillMaskPipeline;y.Florence2ForConditionalGeneration;y.Florence2PreTrainedModel;y.Florence2Processor;y.ForcedBOSTokenLogitsProcessor;y.ForcedEOSTokenLogitsProcessor;y.GLPNFeatureExtractor;y.GLPNForDepthEstimation;y.GLPNModel;y.GLPNPreTrainedModel;y.GPT2LMHeadModel;y.GPT2Model;y.GPT2PreTrainedModel;y.GPT2Tokenizer;y.GPTBigCodeForCausalLM;y.GPTBigCodeModel;y.GPTBigCodePreTrainedModel;y.GPTJForCausalLM;y.GPTJModel;y.GPTJPreTrainedModel;y.GPTNeoForCausalLM;y.GPTNeoModel;y.GPTNeoPreTrainedModel;y.GPTNeoXForCausalLM;y.GPTNeoXModel;y.GPTNeoXPreTrainedModel;y.GPTNeoXTokenizer;y.Gemma2ForCausalLM;y.Gemma2Model;y.Gemma2PreTrainedModel;y.Gemma3ForCausalLM;y.Gemma3Model;y.Gemma3PreTrainedModel;y.Gemma3nAudioFeatureExtractor;y.Gemma3nForConditionalGeneration;y.Gemma3nPreTrainedModel;y.Gemma3nProcessor;y.GemmaForCausalLM;y.GemmaModel;y.GemmaPreTrainedModel;y.GemmaTokenizer;y.GlmForCausalLM;y.GlmModel;y.GlmPreTrainedModel;y.GraniteForCausalLM;y.GraniteModel;y.GranitePreTrainedModel;y.Grok1Tokenizer;y.GroundingDinoForObjectDetection;y.GroundingDinoImageProcessor;y.GroundingDinoPreTrainedModel;y.GroundingDinoProcessor;y.GroupViTModel;y.GroupViTPreTrainedModel;y.HeliumForCausalLM;y.HeliumModel;y.HeliumPreTrainedModel;y.HerbertTokenizer;y.HieraForImageClassification;y.HieraModel;y.HieraPreTrainedModel;y.HubertForCTC;y.HubertForSequenceClassification;y.HubertModel;y.HubertPreTrainedModel;y.IJepaForImageClassification;y.IJepaModel;y.IJepaPreTrainedModel;y.Idefics3ForConditionalGeneration;y.Idefics3ImageProcessor;y.Idefics3PreTrainedModel;y.Idefics3Processor;y.ImageClassificationPipeline;y.ImageFeatureExtractionPipeline;y.ImageFeatureExtractor;y.ImageMattingOutput;y.ImageProcessor;y.ImageSegmentationPipeline;y.ImageToImagePipeline;y.ImageToTextPipeline;y.InterruptableStoppingCriteria;y.JAISLMHeadModel;y.JAISModel;y.JAISPreTrainedModel;y.JinaCLIPImageProcessor;y.JinaCLIPModel;y.JinaCLIPPreTrainedModel;y.JinaCLIPProcessor;y.JinaCLIPTextModel;y.JinaCLIPVisionModel;y.Lfm2ForCausalLM;y.Lfm2Model;y.Lfm2PreTrainedModel;y.LiteWhisperForConditionalGeneration;y.LlamaForCausalLM;y.LlamaModel;y.LlamaPreTrainedModel;y.LlamaTokenizer;y.LlavaForConditionalGeneration;y.LlavaOnevisionForConditionalGeneration;y.LlavaOnevisionImageProcessor;y.LlavaPreTrainedModel;y.LlavaProcessor;y.LlavaQwen2ForCausalLM;y.LogitsProcessor;y.LogitsProcessorList;y.LogitsWarper;y.LongT5ForConditionalGeneration;y.LongT5Model;y.LongT5PreTrainedModel;y.M2M100ForConditionalGeneration;y.M2M100Model;y.M2M100PreTrainedModel;y.M2M100Tokenizer;y.MBart50Tokenizer;y.MBartForCausalLM;y.MBartForConditionalGeneration;y.MBartForSequenceClassification;y.MBartModel;y.MBartPreTrainedModel;y.MBartTokenizer;y.MPNetForMaskedLM;y.MPNetForQuestionAnswering;y.MPNetForSequenceClassification;y.MPNetForTokenClassification;y.MPNetModel;y.MPNetPreTrainedModel;y.MPNetTokenizer;y.MT5ForConditionalGeneration;y.MT5Model;y.MT5PreTrainedModel;y.MarianMTModel;y.MarianModel;y.MarianPreTrainedModel;y.MarianTokenizer;y.Mask2FormerImageProcessor;y.MaskFormerFeatureExtractor;y.MaskFormerForInstanceSegmentation;y.MaskFormerImageProcessor;y.MaskFormerModel;y.MaskFormerPreTrainedModel;y.MaskedLMOutput;y.MaxLengthCriteria;y.Metric3DForDepthEstimation;y.Metric3DPreTrainedModel;y.Metric3Dv2ForDepthEstimation;y.Metric3Dv2PreTrainedModel;y.MgpstrForSceneTextRecognition;y.MgpstrModelOutput;y.MgpstrPreTrainedModel;y.MgpstrProcessor;y.MgpstrTokenizer;y.MimiDecoderModel;y.MimiDecoderOutput;y.MimiEncoderModel;y.MimiEncoderOutput;y.MimiModel;y.MimiPreTrainedModel;y.MinLengthLogitsProcessor;y.MinNewTokensLengthLogitsProcessor;y.MistralForCausalLM;y.MistralModel;y.MistralPreTrainedModel;y.MobileBertForMaskedLM;y.MobileBertForQuestionAnswering;y.MobileBertForSequenceClassification;y.MobileBertModel;y.MobileBertPreTrainedModel;y.MobileBertTokenizer;y.MobileLLMForCausalLM;y.MobileLLMModel;y.MobileLLMPreTrainedModel;y.MobileNetV1FeatureExtractor;y.MobileNetV1ForImageClassification;y.MobileNetV1ForSemanticSegmentation;y.MobileNetV1ImageProcessor;y.MobileNetV1Model;y.MobileNetV1PreTrainedModel;y.MobileNetV2FeatureExtractor;y.MobileNetV2ForImageClassification;y.MobileNetV2ForSemanticSegmentation;y.MobileNetV2ImageProcessor;y.MobileNetV2Model;y.MobileNetV2PreTrainedModel;y.MobileNetV3FeatureExtractor;y.MobileNetV3ForImageClassification;y.MobileNetV3ForSemanticSegmentation;y.MobileNetV3ImageProcessor;y.MobileNetV3Model;y.MobileNetV3PreTrainedModel;y.MobileNetV4FeatureExtractor;y.MobileNetV4ForImageClassification;y.MobileNetV4ForSemanticSegmentation;y.MobileNetV4ImageProcessor;y.MobileNetV4Model;y.MobileNetV4PreTrainedModel;y.MobileViTFeatureExtractor;y.MobileViTForImageClassification;y.MobileViTImageProcessor;y.MobileViTModel;y.MobileViTPreTrainedModel;y.MobileViTV2ForImageClassification;y.MobileViTV2Model;y.MobileViTV2PreTrainedModel;y.ModelOutput;y.ModernBertDecoderForCausalLM;y.ModernBertDecoderModel;y.ModernBertDecoderPreTrainedModel;y.ModernBertForMaskedLM;y.ModernBertForSequenceClassification;y.ModernBertForTokenClassification;y.ModernBertModel;y.ModernBertPreTrainedModel;y.Moondream1ForConditionalGeneration;y.MoonshineFeatureExtractor;y.MoonshineForConditionalGeneration;y.MoonshineModel;y.MoonshinePreTrainedModel;y.MoonshineProcessor;y.MptForCausalLM;y.MptModel;y.MptPreTrainedModel;y.MultiModalityCausalLM;y.MultiModalityPreTrainedModel;y.MusicgenForCausalLM;y.MusicgenForConditionalGeneration;y.MusicgenModel;y.MusicgenPreTrainedModel;y.NeoBertForMaskedLM;y.NeoBertForQuestionAnswering;y.NeoBertForSequenceClassification;y.NeoBertForTokenClassification;y.NeoBertModel;y.NeoBertPreTrainedModel;y.NllbTokenizer;y.NoBadWordsLogitsProcessor;y.NoRepeatNGramLogitsProcessor;y.NomicBertModel;y.NomicBertPreTrainedModel;y.NougatImageProcessor;y.NougatTokenizer;y.OPTForCausalLM;y.OPTModel;y.OPTPreTrainedModel;y.ObjectDetectionPipeline;y.Olmo2ForCausalLM;y.Olmo2Model;y.Olmo2PreTrainedModel;y.OlmoForCausalLM;y.OlmoModel;y.OlmoPreTrainedModel;y.OpenELMForCausalLM;y.OpenELMModel;y.OpenELMPreTrainedModel;y.OwlViTFeatureExtractor;y.OwlViTForObjectDetection;y.OwlViTImageProcessor;y.OwlViTModel;y.OwlViTPreTrainedModel;y.OwlViTProcessor;y.Owlv2ForObjectDetection;y.Owlv2ImageProcessor;y.Owlv2Model;y.Owlv2PreTrainedModel;y.PaliGemmaForConditionalGeneration;y.PaliGemmaPreTrainedModel;y.PaliGemmaProcessor;y.PatchTSMixerForPrediction;y.PatchTSMixerModel;y.PatchTSMixerPreTrainedModel;y.PatchTSTForPrediction;y.PatchTSTModel;y.PatchTSTPreTrainedModel;y.Phi3ForCausalLM;y.Phi3Model;y.Phi3PreTrainedModel;y.Phi3VForCausalLM;y.Phi3VImageProcessor;y.Phi3VPreTrainedModel;y.Phi3VProcessor;y.PhiForCausalLM;y.PhiModel;y.PhiPreTrainedModel;y.Pipeline;y.PreTrainedModel;y.PreTrainedTokenizer;y.PretrainedConfig;y.PretrainedMixin;y.Processor;y.PvtForImageClassification;y.PvtImageProcessor;y.PvtModel;y.PvtPreTrainedModel;y.PyAnnoteFeatureExtractor;y.PyAnnoteForAudioFrameClassification;y.PyAnnoteModel;y.PyAnnotePreTrainedModel;y.PyAnnoteProcessor;y.QuestionAnsweringModelOutput;y.QuestionAnsweringPipeline;y.Qwen2ForCausalLM;y.Qwen2Model;y.Qwen2PreTrainedModel;y.Qwen2Tokenizer;y.Qwen2VLForConditionalGeneration;y.Qwen2VLImageProcessor;y.Qwen2VLPreTrainedModel;y.Qwen2VLProcessor;y.Qwen3ForCausalLM;y.Qwen3Model;y.Qwen3PreTrainedModel;y.RFDetrForObjectDetection;y.RFDetrModel;y.RFDetrObjectDetectionOutput;y.RFDetrPreTrainedModel;y.RTDetrForObjectDetection;y.RTDetrImageProcessor;y.RTDetrModel;y.RTDetrObjectDetectionOutput;y.RTDetrPreTrainedModel;y.RTDetrV2ForObjectDetection;y.RTDetrV2Model;y.RTDetrV2ObjectDetectionOutput;y.RTDetrV2PreTrainedModel;y.RawAudio;y.RawImage;y.RawVideo;y.RawVideoFrame;y.RepetitionPenaltyLogitsProcessor;y.ResNetForImageClassification;y.ResNetModel;y.ResNetPreTrainedModel;y.RoFormerForMaskedLM;y.RoFormerForQuestionAnswering;y.RoFormerForSequenceClassification;y.RoFormerForTokenClassification;y.RoFormerModel;y.RoFormerPreTrainedModel;y.RoFormerTokenizer;y.RobertaForMaskedLM;y.RobertaForQuestionAnswering;y.RobertaForSequenceClassification;y.RobertaForTokenClassification;y.RobertaModel;y.RobertaPreTrainedModel;y.RobertaTokenizer;y.SamImageProcessor;y.SamImageSegmentationOutput;y.SamModel;y.SamPreTrainedModel;y.SamProcessor;y.SapiensForDepthEstimation;y.SapiensForNormalEstimation;y.SapiensForSemanticSegmentation;y.SapiensPreTrainedModel;y.SeamlessM4TFeatureExtractor;y.SegformerFeatureExtractor;y.SegformerForImageClassification;y.SegformerForSemanticSegmentation;y.SegformerImageProcessor;y.SegformerModel;y.SegformerPreTrainedModel;y.Seq2SeqLMOutput;y.SequenceClassifierOutput;y.SiglipImageProcessor;y.SiglipModel;y.SiglipPreTrainedModel;y.SiglipTextModel;y.SiglipTokenizer;y.SiglipVisionModel;y.SmolLM3ForCausalLM;y.SmolLM3Model;y.SmolLM3PreTrainedModel;y.SmolVLMForConditionalGeneration;y.SmolVLMImageProcessor;y.SmolVLMProcessor;y.SnacDecoderModel;y.SnacEncoderModel;y.SnacFeatureExtractor;y.SnacModel;y.SnacPreTrainedModel;y.SpeechT5FeatureExtractor;y.SpeechT5ForSpeechToText;y.SpeechT5ForTextToSpeech;y.SpeechT5HifiGan;y.SpeechT5Model;y.SpeechT5PreTrainedModel;y.SpeechT5Processor;y.SpeechT5Tokenizer;y.SqueezeBertForMaskedLM;y.SqueezeBertForQuestionAnswering;y.SqueezeBertForSequenceClassification;y.SqueezeBertModel;y.SqueezeBertPreTrainedModel;y.SqueezeBertTokenizer;y.StableLmForCausalLM;y.StableLmModel;y.StableLmPreTrainedModel;y.Starcoder2ForCausalLM;y.Starcoder2Model;y.Starcoder2PreTrainedModel;y.StoppingCriteria;y.StoppingCriteriaList;y.StyleTextToSpeech2Model;y.StyleTextToSpeech2PreTrainedModel;y.SummarizationPipeline;y.SuppressTokensAtBeginLogitsProcessor;y.Swin2SRForImageSuperResolution;y.Swin2SRImageProcessor;y.Swin2SRModel;y.Swin2SRPreTrainedModel;y.SwinForImageClassification;y.SwinForSemanticSegmentation;y.SwinModel;y.SwinPreTrainedModel;y.T5ForConditionalGeneration;y.T5Model;y.T5PreTrainedModel;y.T5Tokenizer;y.TableTransformerForObjectDetection;y.TableTransformerModel;y.TableTransformerObjectDetectionOutput;y.TableTransformerPreTrainedModel;y.TemperatureLogitsWarper;y.Tensor;y.Text2TextGenerationPipeline;y.TextClassificationPipeline;y.TextGenerationPipeline;y.TextStreamer;y.TextToAudioPipeline;y.TokenClassificationPipeline;y.TokenClassifierOutput;y.TokenizerModel;y.TopKLogitsWarper;y.TopPLogitsWarper;y.TrOCRForCausalLM;y.TrOCRPreTrainedModel;y.TranslationPipeline;y.UltravoxModel;y.UltravoxPreTrainedModel;y.UltravoxProcessor;y.UniSpeechForCTC;y.UniSpeechForSequenceClassification;y.UniSpeechModel;y.UniSpeechPreTrainedModel;y.UniSpeechSatForAudioFrameClassification;y.UniSpeechSatForCTC;y.UniSpeechSatForSequenceClassification;y.UniSpeechSatModel;y.UniSpeechSatPreTrainedModel;y.VLChatProcessor;y.VLMImageProcessor;y.ViTFeatureExtractor;y.ViTForImageClassification;y.ViTImageProcessor;y.ViTMAEModel;y.ViTMAEPreTrainedModel;y.ViTMSNForImageClassification;y.ViTMSNModel;y.ViTMSNPreTrainedModel;y.ViTModel;y.ViTPreTrainedModel;y.VisionEncoderDecoderModel;y.VitMatteForImageMatting;y.VitMatteImageProcessor;y.VitMattePreTrainedModel;y.VitPoseForPoseEstimation;y.VitPoseImageProcessor;y.VitPosePreTrainedModel;y.VitsModel;y.VitsModelOutput;y.VitsPreTrainedModel;y.VitsTokenizer;y.VoxtralForConditionalGeneration;y.VoxtralProcessor;y.Wav2Vec2BertForCTC;y.Wav2Vec2BertForSequenceClassification;y.Wav2Vec2BertModel;y.Wav2Vec2BertPreTrainedModel;y.Wav2Vec2CTCTokenizer;y.Wav2Vec2FeatureExtractor;y.Wav2Vec2ForAudioFrameClassification;y.Wav2Vec2ForCTC;y.Wav2Vec2ForSequenceClassification;y.Wav2Vec2Model;y.Wav2Vec2PreTrainedModel;y.Wav2Vec2Processor;y.Wav2Vec2ProcessorWithLM;y.WavLMForAudioFrameClassification;y.WavLMForCTC;y.WavLMForSequenceClassification;y.WavLMForXVector;y.WavLMModel;y.WavLMPreTrainedModel;y.WeSpeakerFeatureExtractor;y.WeSpeakerResNetModel;y.WeSpeakerResNetPreTrainedModel;y.WhisperFeatureExtractor;y.WhisperForConditionalGeneration;y.WhisperModel;y.WhisperPreTrainedModel;y.WhisperProcessor;y.WhisperTextStreamer;y.WhisperTimeStampLogitsProcessor;y.WhisperTokenizer;y.XLMForQuestionAnswering;y.XLMForSequenceClassification;y.XLMForTokenClassification;y.XLMModel;y.XLMPreTrainedModel;y.XLMRobertaForMaskedLM;y.XLMRobertaForQuestionAnswering;y.XLMRobertaForSequenceClassification;y.XLMRobertaForTokenClassification;y.XLMRobertaModel;y.XLMRobertaPreTrainedModel;y.XLMRobertaTokenizer;y.XLMTokenizer;y.XLMWithLMHeadModel;y.XVectorOutput;y.YolosFeatureExtractor;y.YolosForObjectDetection;y.YolosImageProcessor;y.YolosModel;y.YolosObjectDetectionOutput;y.YolosPreTrainedModel;y.ZeroShotAudioClassificationPipeline;y.ZeroShotClassificationPipeline;y.ZeroShotImageClassificationPipeline;y.ZeroShotObjectDetectionPipeline;y.bankers_round;y.cat;y.cos_sim;y.dot;y.dynamic_time_warping;y.env;y.full;y.full_like;y.getCacheShapes;y.hamming;y.hanning;y.interpolate;y.interpolate_4d;y.interpolate_data;y.is_chinese_char;var tX=y.layer_norm;y.load_image;y.load_video;y.log_softmax;y.magnitude;y.matmul;y.max;y.mean;y.mean_pooling;y.medianFilter;y.mel_filter_bank;y.min;y.ones;y.ones_like;y.permute;y.permute_data;var rX=y.pipeline;y.quantize_embeddings;y.rand;y.read_audio;y.rfft;y.round;y.slice;y.softmax;y.spectrogram;y.stack;y.std_mean;y.topk;y.window_function;y.zeros;y.zeros_like;const W_="nomic-ai/nomic-embed-text-v1.5",wt=tl({isReady:!1,isLoading:!1,isLoadingVisible:!1,error:null,loading:{embeddings:{percentage:0,speed:0,loaded:0,total:0},model:{percentage:0,speed:0,loaded:0,total:0}},searchEnabled:!1,searchVisible:!1,searchQuery:"",isSearching:!1,cacheAvailable:!1});let cf=null,df=null,Ds=null,ql=null,Xl=null;const vA=e=>{if(e===0)return"0 B";const t=1024,r=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+r[n]},nX=e=>`${vA(e)}/s`;function oX(){wt.isReady||(wt.loading.embeddings={percentage:0,speed:0,loaded:0,total:0},wt.loading.model={percentage:0,speed:0,loaded:0,total:0})}async function sX(e,t,r,n,o){const s=await caches.open(e),i=await s.match(t);if(i){console.log(`Loading ${n} from cache.`);const u=await r(i);return wt.loading[n]={percentage:100,speed:0,loaded:0,total:0},u}if(o)throw new Error(`${n} not found in cache.`);console.log(`Downloading ${n}.`);const a=await fetch(t);if(!a.ok)throw new Error(`Failed to download ${t}`);const l=new ReadableStream({async start(u){if(!a.body){u.close();return}const d=a.body.getReader(),f=parseInt(a.headers.get("content-length")||"0",10);let p=0,m=Date.now(),b=0;for(;;){const{done:E,value:h}=await d.read();if(E)break;p+=h.length;const _=Date.now(),T=_-m;if(T>=100||p===f){const g=T>0?(p-b)/T*1e3:0,M=f>0?Math.round(p/f*100):0;wt.loading[n]={percentage:M,speed:g,loaded:p,total:f},m=_,b=p}u.enqueue(h)}u.close()}}),c=new Response(l,{headers:a.headers});return await s.put(t,c.clone()),console.log(`${n} cached successfully.`),r(c)}async function yA(e){return sX("image-embeddings-cache-v1","/search_nomicai.json",t=>t.json(),"embeddings",e)}async function wA(e){console.log(`Loading model (cache only: ${e})...`),e||(wt.loading.model={percentage:0,speed:0,loaded:0,total:0});let t=Date.now(),r=0;const n=rX("feature-extraction",W_,{quantized:!0,device:"wasm",dtype:"q4f16",progress_callback:o=>{const{loaded:s=0,total:i=0}=o,a=Date.now(),l=a-t;let c=0;if(l>=200&&s>r?(c=(s-r)/l*1e3,t=a,r=s):c=wt.loading.model.speed||0,i>0&&s<=i){const u=Math.min(Math.round(s/i*100),100);wt.loading.model={percentage:u,speed:c,loaded:s,total:i}}else wt.loading.model={percentage:s>0?50:0,speed:c,loaded:s,total:0}}});try{let o;if(e){const s=new Promise((i,a)=>{setTimeout(()=>a(new Error("Cache load timeout")),5e3)});o=await Promise.race([n,s]),console.log("Model loaded from cache successfully")}else o=await n,console.log("Model loaded (with potential download) successfully");return wt.loading.model={...wt.loading.model,percentage:100,speed:0},o}catch(o){throw e?(console.log("Failed to load model from cache (timeout or not cached):",o),new Error("Model not found in cache.")):(console.error("Failed to load model:",o),o)}}async function iX(){try{console.log("Checking cache availability...");const e=await MA(),t=await xA(W_);return console.log(`Cache status - Embeddings: ${e}, Model: ${t}`),e&&t}catch(e){return console.warn("Could not check cache availability:",e),!1}}async function aX(){try{const e=await MA(),t=await xA(W_);return{embeddings:e,model:t}}catch(e){return console.warn("Could not check partial cache availability:",e),{embeddings:!1,model:!1}}}async function MA(){try{const r=!!await(await caches.open("image-embeddings-cache-v1")).match("/search_nomicai.json");return console.log(`Embeddings cache available: ${r}`),r}catch(e){return console.warn("Could not check embeddings cache:",e),!1}}async function xA(e){try{const r=await(await caches.open("transformers-cache")).keys();if(!r.length)return!1;const n=r.filter(l=>l.url.includes(`/${e}/`));if(!n.length)return!1;const o=["config.json","tokenizer.json","tokenizer_config.json"],s=new Set(n.map(l=>l.url.split("/").pop()||"")),i=o.every(l=>s.has(l)),a=n.some(l=>l.url.endsWith(".onnx"));return i&&a}catch(t){return console.warn("Could not check model cache:",t),!1}}async function TA(){return wt.isReady||Ds?Ds||Promise.resolve():(console.log("Attempting to initialize from cache..."),wt.isLoading=!0,wt.error=null,Ds=(async()=>{try{console.log("Starting cache-only loading...");const e=await yA(!0);console.log("Embeddings loaded from cache");const t=await wA(!0);console.log("Model loaded from cache"),cf=e,df=t,wt.isReady=!0,console.log("Image search initialized from cache successfully.")}catch(e){throw console.log("Cache initialization failed:",e),Ds=null,e}finally{wt.isLoading=!1}})(),Ds)}async function Fk(){return wt.isReady?Promise.resolve():(Ds=null,console.log("Initializing with download..."),wt.isLoading=!0,wt.isReady||oX(),await Promise.resolve(),await od(),wt.isLoadingVisible=!0,wt.error=null,Ds=(async()=>{try{const[e,t]=await Promise.all([yA(!1),wA(!1)]);cf=e,df=t,wt.isReady=!0,wt.searchEnabled=!0,console.log("Image search initialized with download successfully.")}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";throw wt.error=t,console.error("Failed to initialize image search:",e),Ds=null,e}finally{wt.isLoading=!1,wt.isReady&&(wt.loading.embeddings={percentage:100,speed:0,loaded:wt.loading.embeddings.loaded,total:wt.loading.embeddings.total},wt.loading.model={percentage:100,speed:0,loaded:wt.loading.model.loaded,total:wt.loading.model.total}),wt.isLoadingVisible=!1}})(),Ds)}const lX=(e,t)=>{const r=e.reduce((s,i,a)=>s+i*t[a],0),n=Math.sqrt(e.reduce((s,i)=>s+i*i,0)),o=Math.sqrt(t.reduce((s,i)=>s+i*i,0));return n&&o?r/(n*o):0};async function cX(e){if(!wt.isReady||!cf||!df)throw new Error("Image search not initialized");if(!e.trim())return[];wt.isSearching=!0;try{let t=await df(e,{pooling:"mean"});t=tX(t,[t.dims[1]]).normalize(2,-1);const r=t.tolist()[0];return Object.entries(cf).map(([o,s])=>({imageName:o,similarity:lX(r,s)})).sort((o,s)=>s.similarity-o.similarity)}catch(t){const r=t instanceof Error?t.message:"Search failed";throw console.error("Search error:",t),new Error(r)}finally{wt.isSearching=!1}}function CA(){const e=async()=>{if(wt.searchEnabled||(wt.searchEnabled=!0),wt.searchVisible=!0,wt.isReady)return;const n=await aX();try{n.embeddings&&n.model?await TA():await Fk()}catch{if(n.embeddings&&n.model)try{await Fk()}catch{}}},t=n=>{wt.searchQuery=n,Xl&&clearTimeout(Xl),Xl=setTimeout(async()=>{if(ql){const o=await cX(n);await ql(o)}},300)},r=()=>{wt.searchQuery="",Xl&&clearTimeout(Xl),ql&&ql([])};return{isLoading:ao(ei(wt,"isLoadingVisible")),isReady:ao(ei(wt,"isReady")),error:ao(ei(wt,"error")),loadingState:ao(ei(wt,"loading")),searchEnabled:ao(ei(wt,"searchEnabled")),searchVisible:ao(ei(wt,"searchVisible")),isSearching:ao(ei(wt,"isSearching")),searchQuery:ao(ei(wt,"searchQuery")),enableSearch:()=>{wt.searchEnabled=!0},disableSearch:()=>{wt.searchEnabled=!1,wt.searchVisible=!1,r()},setSearchVisible:n=>{wt.searchVisible=n,n||r()},handleSearchClick:e,setSearchQuery:t,setSearchResultsCallback:n=>{ql=n},resetSearch:r,formatBytes:vA,formatSpeed:nX}}(async()=>{try{const e=await iX();wt.cacheAvailable=e,e?(console.log("Cache detected, starting background initialization..."),await TA()):console.log("No cache detected, search will download resources on first use.")}catch(e){console.log("Background cache check failed:",e)}})();const dX={for:"search-input"},uX={class:"dialog-header"},fX={class:"header-text"},pX={class:"header-subtitle"},mX={class:"dialog-content"},hX={class:"progress-section"},gX={class:"progress-header"},_X={class:"progress-icon"},bX={key:0,class:"pi pi-database"},vX={key:1,class:"pi pi-check-circle text-green-500"},yX={class:"progress-info"},wX={class:"progress-name"},MX={class:"progress-stats"},xX={class:"progress-wrapper"},TX={class:"progress-header"},CX={class:"progress-icon"},kX={key:0,class:"pi pi-cog"},EX={key:1,class:"pi pi-check-circle text-green-500"},PX={class:"progress-info"},$X={class:"progress-name"},SX={class:"progress-stats"},IX={class:"progress-wrapper"},AX={class:"powered-by"},OX={class:"flex flex-column align-items-start"},LX={class:"font-medium mb-2"},FX={class:"text-sm"},DX=Vs({__name:"ImageSearch",setup(e){const{t}=vi(),{isLoading:r,isReady:n,error:o,loadingState:s,searchEnabled:i,searchVisible:a,isSearching:l,searchQuery:c,handleSearchClick:u,setSearchVisible:d,setSearchQuery:f,formatBytes:p,formatSpeed:m}=CA(),b=eo(c.value);Hn(c,$=>{b.value=$});const E=Lr(()=>a.value),h=Lr(()=>r.value),_=Lr(()=>!n.value&&r.value?t("gallery.search.loadingTitle"):l.value?t("gallery.search.searching"):t("gallery.search.placeholder")),T=Lr(()=>{const{percentage:$,speed:O,loaded:L,total:G}=s.value.embeddings;if($>=100)return t("gallery.search.loadingComplete");const j=O>0?m(O):"0 KB/s",D=G>0?`  ${p(L)}/${p(G)}`:"";return`${$}%${D}  ${j}`}),g=Lr(()=>{const{percentage:$,speed:O,loaded:L,total:G}=s.value.model;if($>=100)return t("gallery.search.loadingComplete");const j=O>0?m(O):"0 KB/s",D=G>0?`  ${p(L)}/${p(G)}`:"";return`${$}%${D}  ${j}`});function M(){E.value?w():x()}async function x(){await u(),await od();const $=document.getElementById("search-input");$&&$.focus()}function w(){d(!1)}return Hn(b,$=>{f($)}),($,O)=>{const L=fd,G=AP,j=IP,D=SP,re=$P,Z=u_;return yr(i)?(He(),at(pr,{key:0},[Vt(L,{icon:E.value?"pi pi-times":"pi pi-search",onClick:M,text:"",rounded:"","aria-label":E.value?"Close search":"Open search"},null,8,["icon","aria-label"]),E.value?(He(),Sr(wE,{key:0,to:"#search-bar"},[Vt(j,{variant:"on"},{default:zr(()=>[Vt(G,{id:"search-input",modelValue:b.value,"onUpdate:modelValue":O[0]||(O[0]=te=>b.value=te),class:"search-input",disabled:!yr(n)},null,8,["modelValue","disabled"]),Ze("label",dX,[O[1]||(O[1]=Ze("i",{class:"pi pi-search"},null,-1)),ra(" "+fr(_.value),1)])]),_:1})])):Wt("",!0),Vt(re,{visible:h.value,modal:"",closable:!1,style:{width:"90vw",maxWidth:"480px"},class:"search-loading-dialog"},{header:zr(()=>[Ze("div",uX,[Ze("div",fX,[Ze("h2",null,fr($.$t("gallery.search.loadingTitle")),1),Ze("p",pX,fr($.$t("gallery.search.loadingDescription")),1)])])]),default:zr(()=>[Ze("div",mX,[Ze("div",hX,[Ze("div",{class:kn(["progress-item",{active:yr(s).embeddings.percentage<100&&yr(s).embeddings.percentage>0}])},[Ze("div",gX,[Ze("div",_X,[yr(s).embeddings.percentage<100?(He(),at("i",bX)):(He(),at("i",vX))]),Ze("div",yX,[Ze("span",wX,fr($.$t("gallery.search.loadingEmbeddings")),1),Ze("span",MX,fr(T.value),1)])]),Ze("div",xX,[Vt(D,{value:yr(s).embeddings.percentage,class:kn(["progress-bar",{completed:yr(s).embeddings.percentage>=100}])},null,8,["value","class"])])],2),Ze("div",{class:kn(["progress-item",{active:yr(s).model.percentage<100&&yr(s).model.percentage>0}])},[Ze("div",TX,[Ze("div",CX,[yr(s).model.percentage<100?(He(),at("i",kX)):(He(),at("i",EX))]),Ze("div",PX,[Ze("span",$X,fr($.$t("gallery.search.loadingModel")),1),Ze("span",SX,fr(g.value),1)])]),Ze("div",IX,[Vt(D,{value:yr(s).model.percentage,class:kn(["progress-bar",{completed:yr(s).model.percentage>=100}])},null,8,["value","class"])])],2)]),Ze("div",AX,[O[2]||(O[2]=Ze("i",{class:"pi pi-heart-fill text-red-400"},null,-1)),ra(" "+fr($.$t("gallery.search.poweredBy"))+" ",1),O[3]||(O[3]=Ze("a",{href:"https://huggingface.co/nomic-ai/nomic-embed-text-v1.5",target:"_blank",rel:"noopener noreferrer"}," Nomic Embed Text v1.5 ",-1))])])]),_:1},8,["visible"]),yr(o)?(He(),Sr(Z,{key:1,position:"top-center"},{message:zr(()=>[Ze("div",OX,[Ze("span",LX,fr(yr(t)("gallery.search.error")),1),Ze("span",FX,fr(yr(o)),1)])]),_:1})):Wt("",!0)],64)):Wt("",!0)}}}),U_=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},BX=U_(DX,[["__scopeId","data-v-72306612"]]),RX={class:"toolbar-center"},zX={key:0,class:"app-title"},NX={key:1,src:G7,alt:"Logo"},jX={class:"title"},VX={class:"subtitle"},WX={class:"language-selector"},UX={class:"language-buttons"},GX={class:"toggle"},HX=Vs({__name:"AppToolbar",setup(e){const{searchVisible:t}=CA(),r=QG(),{t:n}=vi(),o=eo(!1),s=eo(!1),{appBarTitle:i,appBarIcon:a}=YG(),{availableLocales:l,setLocale:c,initLocale:u,getCurrentLocale:d}=vH();id(()=>{const b=localStorage.getItem("theme-preference");s.value=b?b==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches,document.documentElement.classList.toggle("dark",s.value),u()}),Hn(s,b=>{document.documentElement.classList.toggle("dark",b),localStorage.setItem("theme-preference",b?"dark":"light")});const f=b=>{r.push(b),o.value=!1},p=Lr(()=>[{label:n("navigation.gallery"),icon:"pi pi-images",command:()=>f("/gallery")},{label:n("navigation.gallery2d"),icon:"pi pi-hashtag",command:()=>f("/gallery-2d")},{label:n("navigation.reflectProsa"),icon:"pi pi-user-edit",command:()=>f("/reflect-prosa")},{label:n("navigation.reflectEmotions"),icon:"pi pi-compass",command:()=>f("/reflect-emotions")},{label:n("navigation.reflectAffects"),icon:"pi pi-bolt",command:()=>f("/reflect-affects")}]),m=b=>{c(b)};return(b,E)=>{const h=fd,_=pP,T=fP,g=uP,M=cP,x=aP;return He(),at(pr,null,[Vt(_,null,{start:zr(()=>[Vt(h,{icon:"pi pi-bars",onClick:E[0]||(E[0]=w=>o.value=!0),text:"",rounded:""})]),center:zr(()=>[Ze("div",RX,[yr(t)?Wt("",!0):(He(),at("div",zX,[yr(a)?(He(),at("i",{key:0,class:kn(yr(a))},null,2)):(He(),at("img",NX)),Ze("span",null,fr(yr(i)),1)])),E[4]||(E[4]=Ze("div",{id:"search-bar"},null,-1))])]),end:zr(()=>[Vt(BX)]),_:1}),Vt(x,{visible:o.value,"onUpdate:visible":E[3]||(E[3]=w=>o.value=w)},{header:zr(()=>[Ze("div",null,[Ze("img",{src:H7,alt:"Logo",onClick:E[1]||(E[1]=w=>f("/")),style:{cursor:"pointer"}}),Ze("div",null,[Ze("div",jX,fr(b.$t("app.title")),1),Ze("div",VX,fr(b.$t("app.subtitle")),1)])])]),default:zr(()=>[Vt(T),Vt(g,{model:p.value},null,8,["model"]),Vt(T),Ze("div",WX,[Ze("div",null,[E[5]||(E[5]=Ze("i",{class:"pi pi-globe"},null,-1)),Ze("span",null,fr(b.$t("app.language")),1)]),Ze("div",UX,[(He(!0),at(pr,null,wc(yr(l),w=>(He(),Sr(h,{key:w.code,variant:yr(d).code===w.code?void 0:"outlined",onClick:$=>m(w.code),size:"small"},{default:zr(()=>[Ze("span",{class:kn(`fi fi-${w.flag}`)},null,2)]),_:2},1032,["variant","onClick"]))),128))])]),Ze("div",GX,[Ze("div",null,[Ze("i",{class:kn(s.value?"pi pi-moon":"pi pi-sun")},null,2),Ze("span",null,fr(b.$t(`app.mode.${s.value?"dark":"light"}`)),1)]),Vt(M,{modelValue:s.value,"onUpdate:modelValue":E[2]||(E[2]=w=>s.value=w)},null,8,["modelValue"])])]),_:1},8,["visible"])],64)}}}),KX=U_(HX,[["__scopeId","data-v-8883c05d"]]),qX=Vs({__name:"App",setup(e){return(t,r)=>{const n=Po("RouterView");return He(),at(pr,null,[Vt(yr(u_)),Vt(KX),Ze("main",null,[Vt(n)])],64)}}}),XX="modulepreload",QX=function(e){return"/"+e},Dk={},Ql=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");o=l(r.map(c=>{if(c=QX(c),c in Dk)return;Dk[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":XX,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};var YX=`
    .p-card {
        background: dt('card.background');
        color: dt('card.color');
        box-shadow: dt('card.shadow');
        border-radius: dt('card.border.radius');
        display: flex;
        flex-direction: column;
    }

    .p-card-caption {
        display: flex;
        flex-direction: column;
        gap: dt('card.caption.gap');
    }

    .p-card-body {
        padding: dt('card.body.padding');
        display: flex;
        flex-direction: column;
        gap: dt('card.body.gap');
    }

    .p-card-title {
        font-size: dt('card.title.font.size');
        font-weight: dt('card.title.font.weight');
    }

    .p-card-subtitle {
        color: dt('card.subtitle.color');
    }
`,JX={root:"p-card p-component",header:"p-card-header",body:"p-card-body",caption:"p-card-caption",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},ZX=Xt.extend({name:"card",style:YX,classes:JX}),eQ={name:"BaseCard",extends:qn,style:ZX,provide:function(){return{$pcCard:this,$parentInstance:this}}},kA={name:"Card",extends:eQ,inheritAttrs:!1};function tQ(e,t,r,n,o,s){return He(),at("div",Qe({class:e.cx("root")},e.ptmi("root")),[e.$slots.header?(He(),at("div",Qe({key:0,class:e.cx("header")},e.ptm("header")),[qt(e.$slots,"header")],16)):Wt("",!0),Ze("div",Qe({class:e.cx("body")},e.ptm("body")),[e.$slots.title||e.$slots.subtitle?(He(),at("div",Qe({key:0,class:e.cx("caption")},e.ptm("caption")),[e.$slots.title?(He(),at("div",Qe({key:0,class:e.cx("title")},e.ptm("title")),[qt(e.$slots,"title")],16)):Wt("",!0),e.$slots.subtitle?(He(),at("div",Qe({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[qt(e.$slots,"subtitle")],16)):Wt("",!0)],16)):Wt("",!0),Ze("div",Qe({class:e.cx("content")},e.ptm("content")),[qt(e.$slots,"content")],16),e.$slots.footer?(He(),at("div",Qe({key:1,class:e.cx("footer")},e.ptm("footer")),[qt(e.$slots,"footer")],16)):Wt("",!0)],16)],16)}kA.render=tQ;const rQ={class:"index-container"},nQ={class:"welcome-header"},oQ={class:"welcome-title"},sQ={class:"description"},iQ={class:"navigation-list"},aQ={class:"nav-content"},lQ={class:"nav-text"},cQ={class:"nav-title"},dQ={class:"nav-description"},uQ=Vs({__name:"IndexView",setup(e){const{t}=vi(),r=Lr(()=>[{name:"gallery",title:t("navigation.gallery"),icon:"pi pi-images",description:t("home.features.gallery.description")},{name:"gallery-2d",title:t("navigation.gallery2d"),icon:"pi pi-hashtag",description:t("home.features.gallery2d.description")},{name:"reflect-prosa",title:t("navigation.reflectProsa"),icon:"pi pi-user-edit",description:t("home.features.reflectProsa.description")},{name:"reflect-emotions",title:t("navigation.reflectEmotions"),icon:"pi pi-compass",description:t("home.features.reflectEmotions.description")},{name:"reflect-affects",title:t("navigation.reflectAffects"),icon:"pi pi-bolt",description:t("home.features.reflectAffects.description")}]);return(n,o)=>{const s=kA,i=Po("router-link");return He(),at("div",rQ,[Ze("div",nQ,[Ze("h1",oQ,fr(n.$t("home.title")),1),Ze("p",sQ,fr(n.$t("home.description")),1)]),Ze("div",iQ,[(He(!0),at(pr,null,wc(r.value,a=>(He(),Sr(i,{key:a.name,to:{name:a.name},class:"nav-link"},{default:zr(()=>[Vt(s,{class:"nav-card"},{content:zr(()=>[Ze("div",aQ,[Ze("i",{class:kn([a.icon,"nav-icon"])},null,2),Ze("div",lQ,[Ze("h3",cQ,fr(a.title),1),Ze("p",dQ,fr(a.description),1)]),o[0]||(o[0]=Ze("i",{class:"pi pi-chevron-right nav-arrow"},null,-1))])]),_:2},1024)]),_:2},1032,["to"]))),128))])])}}}),fQ=U_(uQ,[["__scopeId","data-v-cef39ac5"]]),pQ=qG({history:xG("/"),routes:[{path:"/",name:"home",component:fQ},{path:"/gallery",name:"gallery",component:()=>Ql(()=>import("./GalleryView-Crj3Q6Aa.js"),__vite__mapDeps([0,1,2,3]))},{path:"/gallery-2d",name:"gallery-2d",component:()=>Ql(()=>import("./Gallery2DView-CeXut8gY.js"),__vite__mapDeps([4,1,5]))},{path:"/reflect-prosa",name:"reflect-prosa",component:()=>Ql(()=>import("./ReflectProsaView-tRRYcKX9.js"),__vite__mapDeps([6,7,8]))},{path:"/reflect-emotions",name:"reflect-emotions",component:()=>Ql(()=>import("./ReflectEmotionsView-COkkBLtE.js"),__vite__mapDeps([9,2,7,10]))},{path:"/reflect-affects",name:"reflect-affects",component:()=>Ql(()=>import("./ReflectAffectsView-lZcomUxE.js"),__vite__mapDeps([11,2,7,12]))}]}),nl=KL(qX),mQ=jD({legacy:!1,locale:ef,fallbackLocale:ef,messages:bH,globalInjection:!0});nl.use(mQ);nl.use(YL());nl.use(pQ);nl.use(nB,{theme:{preset:w9,options:{darkModeSelector:".dark"}}});nl.use(M9);nl.mount("#app");export{f4 as $,sd as A,Xt as B,Qe as C,qt as D,kn as E,gs as F,gQ as G,sK as H,Lr as I,pr as J,wc as K,hQ as L,IP as M,fd as N,lP as O,u4 as P,g4 as Q,Pf as R,_Q as S,Jg as T,p4 as V,U_ as _,vi as a,YG as b,Gg as c,Vs as d,at as e,He as f,Vt as g,Wt as h,Sr as i,Ze as j,zr as k,ra as l,dE as m,gf as n,id as o,yr as p,Ef as q,eo as r,kA as s,fr as t,CA as u,qn as v,Hn as w,Kn as x,Po as y,ad as z};
