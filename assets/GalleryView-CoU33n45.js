import{d as $,c as k,a as p,o as d,b as o,_ as S,r as g,u as B,e as M,f as V,g as j,h as A,i as f,w as G,s as W,F as D,j as L,n as P,t as v,k as T}from"./main-B7y-1w-0.js";import{s as q}from"./index-DEavHAU-.js";const E={class:"gallery-card"},F=["href"],H=["srcset","sizes"],O=["srcset","sizes"],U=["srcset","sizes","src","alt"],R=$({__name:"GalleryImage",props:{imageName:{},cols:{}},setup(_){const e=_;function i(r,m){return[128,256,512,1024,1536,2048].map(u=>`/gallery/${r}/${r}-${u}.${m} ${u}w`).join(", ")}const n=k(()=>`calc((100vw - (${e.cols-1} * 8px)) / ${e.cols})`);return(r,m)=>(d(),p("figure",E,[o("a",{href:`/gallery/${e.imageName}/${e.imageName}-2048.jpg`,target:"_blank",rel:"noopener"},[o("picture",null,[o("source",{type:"image/avif",srcset:i(e.imageName,"avif"),sizes:n.value},null,8,H),o("source",{type:"image/webp",srcset:i(e.imageName,"webp"),sizes:n.value},null,8,O),o("img",{type:"image/jpeg",srcset:i(e.imageName,"jpg"),sizes:n.value,src:`/gallery/${e.imageName}/${e.imageName}-lqip.jpg`,loading:"lazy",decoding:"async",alt:e.imageName,class:"gallery-image"},null,8,U)])],8,F)]))}}),Z=S(R,[["__scopeId","data-v-c5388106"]]),J={class:"gallery-container"},K={class:"columns-controls","aria-label":"Layout controls"},Q={for:"cols"},X={class:"column-display"},Y=$({__name:"GalleryView",setup(_){const e=g(4),i=g(10),n=g([]),r=g([]),{enableSearch:m,setSearchResultsCallback:y,disableSearch:u}=B(),{setTitle:w,setIcon:x,resetAppBar:C}=M(),{showLoading:I,closePopup:b}=V();j(()=>{w("gallery.title"),x("pi pi-images"),m(),y(async t=>{if(t.length===0){n.value=r.value;return}n.value=t.map(s=>s.imageName)}),z(),N()}),A(()=>{C(),u()});function h(t){const s=Array.isArray(t)?t[0]:t;document.querySelector("#grid").style.setProperty("--cols",s.toString()),localStorage.setItem("gridColumns",s.toString())}function N(){const s=Math.min(Math.max(document.documentElement.clientWidth,window.innerWidth),1800)/384,l=Math.max(Math.min(Math.floor(s*3),13),5);i.value=l;let a;const c=localStorage.getItem("gridColumns");c?(a=parseInt(c),a>l&&(a=l)):a=Math.floor(s),e.value=a,h(a)}async function z(){I("gallery.loading");const l=(await(await fetch("/gallery/images.txt",{cache:"no-store"})).text()).split(/\r?\n/).map(a=>a.trim()).filter(Boolean).filter(a=>/^[a-zA-Z0-9_-]+$/.test(a));r.value=[...l],n.value=[...l],b()}return(t,s)=>{const l=q,a=W;return d(),p("div",J,[f(a,{class:"gallery-controls"},{content:G(()=>[o("div",K,[o("label",Q,v(t.$t("gallery.columns")),1),f(l,{id:"cols",modelValue:e.value,"onUpdate:modelValue":[s[0]||(s[0]=c=>e.value=c),h],min:1,max:i.value,step:1,class:"column-slider"},null,8,["modelValue","max"]),o("span",X,v(e.value),1)])]),_:1}),o("div",{id:"grid",class:"gallery-grid",style:P({"--cols":e.value}),"aria-live":"polite"},[(d(!0),p(D,null,L(n.value,c=>(d(),T(Z,{key:c,"image-name":c,cols:e.value},null,8,["image-name","cols"]))),128))],4)])}}}),se=S(Y,[["__scopeId","data-v-bb48fedc"]]);export{se as default};
