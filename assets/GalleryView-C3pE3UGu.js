import{d as $,c as k,a as p,o as d,b as o,_ as S,r as g,u as M,e as V,f as j,g as B,h as G,i as v,w as A,s as W,F as D,j as L,n as P,t as f,k as T}from"./main-D5P8LRkC.js";import{s as q}from"./index-xjS1HP5S.js";const E={class:"gallery-card"},F=["href"],H=["srcset","sizes"],O=["srcset","sizes"],U=["srcset","sizes","src","alt"],R=$({__name:"GalleryImage",props:{imageName:{},cols:{}},setup(_){const e=_;function i(c,m){return[128,256,512,1024,1536,2048].map(u=>`/gallery/${c}/${c}-${u}.${m} ${u}w`).join(", ")}const l=k(()=>`calc((100vw - (${e.cols-1} * 8px)) / ${e.cols})`);return(c,m)=>(d(),p("figure",E,[o("a",{href:`/gallery/${e.imageName}/${e.imageName}-2048.jpg`,target:"_blank",rel:"noopener"},[o("picture",null,[o("source",{type:"image/avif",srcset:i(e.imageName,"avif"),sizes:l.value},null,8,H),o("source",{type:"image/webp",srcset:i(e.imageName,"webp"),sizes:l.value},null,8,O),o("img",{type:"image/jpeg",srcset:i(e.imageName,"jpg"),sizes:l.value,src:`/gallery/${e.imageName}/${e.imageName}-lqip.jpg`,loading:"lazy",decoding:"async",alt:e.imageName,class:"gallery-image"},null,8,U)])],8,F)]))}}),J=S(R,[["__scopeId","data-v-c5388106"]]),K={class:"gallery-container"},Q={class:"columns-controls","aria-label":"Layout controls"},X={for:"cols"},Y={class:"column-display"},Z=$({__name:"GalleryView",setup(_){const e=g(4),i=g(10),l=g([]),c=g([]),{enableSearch:m,setSearchResultsCallback:y,disableSearch:u}=M(),{setTitle:w,setIcon:x,resetAppBar:C}=V(),{showLoading:I,closePopup:N}=j();B(()=>{w("gallery.title"),x("pi pi-images"),m(),y(async s=>{if(s.length===0){l.value=c.value;return}l.value=s.map(a=>a.imageName)}),z(),b()}),G(()=>{C(),u()});function h(s){const a=Array.isArray(s)?s[0]:s;document.querySelector("#grid").style.setProperty("--cols",a.toString()),localStorage.setItem("gridColumns",a.toString())}function b(){const a=Math.min(Math.max(document.documentElement.clientWidth,window.innerWidth),1800)/384,t=Math.max(Math.min(Math.floor(a*3),13),5);i.value=t;let n;const r=localStorage.getItem("gridColumns");r?(n=parseInt(r),n>t&&(n=t)):n=Math.floor(a),e.value=n,h(n)}async function z(){I("gallery.loading");const t=(await(await fetch("/gallery/images.txt",{cache:"no-store"})).text()).split(`\r
`);c.value=[...t],l.value=[...t],N()}return(s,a)=>{const t=q,n=W;return d(),p("div",K,[v(n,{class:"gallery-controls"},{content:A(()=>[o("div",Q,[o("label",X,f(s.$t("gallery.columns")),1),v(t,{id:"cols",modelValue:e.value,"onUpdate:modelValue":[a[0]||(a[0]=r=>e.value=r),h],min:1,max:i.value,step:1,class:"column-slider"},null,8,["modelValue","max"]),o("span",Y,f(e.value),1)])]),_:1}),o("div",{id:"grid",class:"gallery-grid",style:P({"--cols":e.value}),"aria-live":"polite"},[(d(!0),p(D,null,L(l.value,r=>(d(),T(J,{key:r,"image-name":r,cols:e.value},null,8,["image-name","cols"]))),128))],4)])}}}),se=S(Z,[["__scopeId","data-v-a5ca0ae7"]]);export{se as default};
